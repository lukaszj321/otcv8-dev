site_name: "OTCv8 Dev — Modules only"
site_url: "https://lukaszj321.github.io/otcv8-dev/"
use_directory_urls: true
strict: false

theme:
  name: material
  language: pl
  features:
    - navigation.tabs
    - navigation.top
    - navigation.sections
  # minimalnie, bez logo/favicon (nie szukamy assetów spoza modules)

plugins:
  - search:
      lang: en  # en = na pewno wspierane i lekkie
  - glightbox
  - macros
  - git-revision-date-localized:
      enable_creation_date: true
      type: timeago
      fallback_to_build_date: true

markdown_extensions:
  - toc:
      permalink: true
      separator: "-"
  - tables
  - fenced_code
  - admonition
  - attr_list
  - md_in_html
  - pymdownx.details
  - pymdownx.superfences
  - pymdownx.highlight
  - pymdownx.inlinehilite
  - pymdownx.keys
  - pymdownx.critic
  - pymdownx.tilde
  # emoji działające z MkDocs 1.6 + pymdown-extensions 10.x
  - pymdownx.emoji:
      emoji_index: !!python/name:pymdownx.emoji.twemoji
      emoji_generator: !!python/name:pymdownx.emoji.to_svg

# NAV tylko po modules/** — minimum, by było szybkie.
# Dodaj/usuń linie w zależności od tego, które pliki rzeczywiście masz.
nav:
  - "Start (Modules)": "modules/structured/INDEX.md"
  - "Core":
      - "INDEX": "modules/structured/core/INDEX.md"
  - "Gameplay":
      - "INDEX": "modules/structured/gameplay/INDEX.md"
  - "Dev tools":
      - "INDEX": "modules/structured/dev_tools/INDEX.md"

# MkDocs i tak przeczyta wszystkie pliki w docs/, więc dodatkowo
# obetniemy wejścia builda do samego modules/**, przenosząc docs_dir.
# Dzięki temu NIE skanuje api/, knowledge/, itd.
docs_dir: docs

# Twardo odfiltrujemy wszystko poza modules/**:
hooks:
  # Lekki hook – ustawia dynamiczną listę plików wyłącznie z modules/**
  - |
    def on_files(files, config):
        keep = []
        for f in files:
            if f.src_uri.startswith("modules/"):
                keep.append(f)
        files._files = keep
        return files
