
<!DOCTYPE html>


<html lang="pl" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>OTClient v8 — Specyfikacja UI &#8212; OTClientV8 Dev Docs 0.1.0 - dokumentacja</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=8aaba760" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=8aaba760" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=c0495948"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/translations.js?v=da4973ce"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/engine/otclient_v_8_specyfikacja_ui';</script>
    <link rel="icon" href="../../_static/logo-light.svg"/>
    <link rel="index" title="Indeks" href="../../genindex.html" />
    <link rel="search" title="Szukaj" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="pl"/>
  <meta name="docsearch:version" content="0.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo-light.svg" class="logo__image only-light" alt="OTClientV8 Dev Docs 0.1.0 - dokumentacja - Home"/>
    <img src="../../_static/logo-light.svg" class="logo__image only-dark pst-js-only" alt="OTClientV8 Dev Docs 0.1.0 - dokumentacja - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Szukaj" aria-label="Szukaj" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Szukaj</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/lukaszj321/otcv8-dev" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Szukaj" aria-label="Szukaj" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Szukaj</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/lukaszj321/otcv8-dev" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">OTClient v8 — Specyfikacja UI</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="otclient-v8-specyfikacja-ui">
<h1>OTClient v8 — Specyfikacja UI<a class="headerlink" href="#otclient-v8-specyfikacja-ui" title="Link to this heading">#</a></h1>
</section>
<hr class="docutils" />
<section id="wprowadzenie-i-zasady">
<h1>0. Wprowadzenie i zasady<a class="headerlink" href="#wprowadzenie-i-zasady" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-0-1"><span class="xref myst">0.1 Cel i zakres „1:1”</span></a></p></li>
<li><p><a class="reference internal" href="#ch-0-2"><span class="xref myst">0.2 Terminologia (widget, layout‑owner, area/slot, preset, blueprint, AST)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-0-3"><span class="xref myst">0.3 Kryteria jakości (deterministyczny round‑trip, zgodność 1:1)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-0-4"><span class="xref myst">0.4 Workflow: projekt → walidacja → serializacja → eksport → import</span></a></p></li>
</ul>
</section>
<section id="konwencje-formatowania-i-strict-otui">
<h1>1. Konwencje formatowania i STRICT OTUI<a class="headerlink" href="#konwencje-formatowania-i-strict-otui" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-1-1"><span class="xref myst">1.1 Indent 2 sp., LF, bez BOM, bez tabów/komentarzy</span></a></p></li>
<li><p><a class="reference internal" href="#ch-1-2"><span class="xref myst">1.2 Kolejność atrybutów: GEOMETRIA → STYL → ZACHOWANIE</span></a></p></li>
<li><p><a class="reference internal" href="#ch-1-3"><span class="xref myst">1.3 Teksty i i18n: <code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code>, wrap/auto‑resize/align/offset</span></a></p></li>
<li><p><a class="reference internal" href="#ch-1-4"><span class="xref myst">1.4 Stany: <code class="docutils literal notranslate"><span class="pre">$on</span></code>, <code class="docutils literal notranslate"><span class="pre">$!on</span></code>, <code class="docutils literal notranslate"><span class="pre">$focus</span></code> (kompletność bloków)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-1-5"><span class="xref myst">1.5 Zasoby <code class="docutils literal notranslate"><span class="pre">data/</span></code>: fonty, obrazy, kolory (#AARRGGBB/alpha)</span></a></p></li>
</ul>
</section>
<section id="architektura-ui">
<h1>2. Architektura UI<a class="headerlink" href="#architektura-ui" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-2-1"><span class="xref myst">2.1 Pliki <code class="docutils literal notranslate"><span class="pre">.otui</span></code> i ładowanie <code class="docutils literal notranslate"><span class="pre">g_ui.displayUI('...')</span></code></span></a></p></li>
<li><p><a class="reference internal" href="#ch-2-2"><span class="xref myst">2.2 Tworzenie dynamiczne <code class="docutils literal notranslate"><span class="pre">g_ui.createWidget('&lt;Typ&gt;',</span> <span class="pre">parent)</span></code></span></a></p></li>
<li><p><a class="reference internal" href="#ch-2-3"><span class="xref myst">2.3 Hierarchia i identyfikacja (<code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">getChildById</span></code>) </span></a></p></li>
<li><p><a class="reference internal" href="#ch-2-4"><span class="xref myst">2.4 Fokus i nawigacja (bindy, <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code>, FocusReason)</span></a></p></li>
</ul>
</section>
<section id="layout-i-wlasnosc-ukladu">
<h1>3. Layout i własność układu<a class="headerlink" href="#layout-i-wlasnosc-ukladu" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-3-1"><span class="xref myst">3.1 Zasada „layout‑owner” (parent vs child)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-3-2"><span class="xref myst">3.2 Anchors, size, margins, padding — reguły i kolizje</span></a></p></li>
<li><p><a class="reference internal" href="#ch-3-3"><span class="xref myst">3.3 Scroll pairing (TextList/Multiline ↔ ScrollBar)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-3-4"><span class="xref myst">3.4 Auto‑fit width (okna w panelach/kontenerach)</span></a></p></li>
</ul>
</section>
<section id="taksonomia-komponentow-przeglad">
<h1>4. Taksonomia komponentów (przegląd)<a class="headerlink" href="#taksonomia-komponentow-przeglad" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-4-1"><span class="xref myst">4.1 Okna: MainWindow, StaticMainWindow, MiniWindow, ContainerWindow, DialogWindow</span></a></p></li>
<li><p><a class="reference internal" href="#ch-4-2"><span class="xref myst">4.2 Kontenery: Panel, GroupBox, UIWidget, Grid, StatusOverlay</span></a></p></li>
<li><p><a class="reference internal" href="#ch-4-3"><span class="xref myst">4.3 Organizacja: Titlebar, Toolbar, TabBar/TabWidget, Splitter, HorizontalSeparator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-4-4"><span class="xref myst">4.4 Dane/edycja: Label, Button, CheckBox, TextEdit, PasswordTextEdit, MultilineTextEdit, ComboBox, TextList/ListRow</span></a></p></li>
<li><p><a class="reference internal" href="#ch-4-5"><span class="xref myst">4.5 Wskaźniki: ProgressBar, ScrollBar (Vertical/Horizontal)</span></a></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="mainwindow">
<h1>5. MainWindow<a class="headerlink" href="#mainwindow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-5-1"><span class="xref myst">5.1 Struktura i sloty</span></a></p></li>
<li><p><a class="reference internal" href="#ch-5-2"><span class="xref myst">5.2 Dozwolone dzieci (macierz)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-5-3"><span class="xref myst">5.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-5-4"><span class="xref myst">5.4 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-5-5"><span class="xref myst">5.5 Blueprint OTUI (kanoniczny)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-5-6"><span class="xref myst">5.6 Mapowanie TS ↔ OTUI (serializer)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-5-7"><span class="xref myst">5.7 Walidator (błędy/ostrzeżenia)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-5-8"><span class="xref myst">5.8 Przykłady i edge‑cases</span></a></p></li>
</ul>
</section>
<section id="staticmainwindow">
<h1>6. StaticMainWindow<a class="headerlink" href="#staticmainwindow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-6-1"><span class="xref myst">6.1 Struktura i sloty</span></a></p></li>
<li><p><a class="reference internal" href="#ch-6-2"><span class="xref myst">6.2 Dozwolone dzieci (macierz)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-6-3"><span class="xref myst">6.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-6-4"><span class="xref myst">6.4 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-6-5"><span class="xref myst">6.5 Blueprint OTUI</span></a></p></li>
<li><p><a class="reference internal" href="#ch-6-6"><span class="xref myst">6.6 TS↔OTUI</span></a></p></li>
<li><p><a class="reference internal" href="#ch-6-7"><span class="xref myst">6.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-6-8"><span class="xref myst">6.8 Przykłady</span></a></p></li>
</ul>
</section>
<section id="miniwindow">
<h1>7. MiniWindow<a class="headerlink" href="#miniwindow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-7-1"><span class="xref myst">7.1 Struktura (titlebar/content/footer)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-7-2"><span class="xref myst">7.2 Titlebar: minimize/close, drag‑area</span></a></p></li>
<li><p><a class="reference internal" href="#ch-7-3"><span class="xref myst">7.3 Auto‑fit width i docking</span></a></p></li>
<li><p><a class="reference internal" href="#ch-7-4"><span class="xref myst">7.4 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-7-5"><span class="xref myst">7.5 Blueprint OTUI</span></a></p></li>
<li><p><a class="reference internal" href="#ch-7-6"><span class="xref myst">7.6 TS↔OTUI</span></a></p></li>
<li><p><a class="reference internal" href="#ch-7-7"><span class="xref myst">7.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-7-8"><span class="xref myst">7.8 Przykłady</span></a></p></li>
</ul>
</section>
<section id="containerwindow">
<h1>8. ContainerWindow<a class="headerlink" href="#containerwindow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-8-1"><span class="xref myst">8.1 Struktura (titlebar/content)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-8-2"><span class="xref myst">8.2 Titlebar: back/pin/min/close</span></a></p></li>
<li><p><a class="reference internal" href="#ch-8-3"><span class="xref myst">8.3 Content: ItemSlotGrid/slots, DnD</span></a></p></li>
<li><p><a class="reference internal" href="#ch-8-4"><span class="xref myst">8.4 Scroll i overflow</span></a></p></li>
<li><p><a class="reference internal" href="#ch-8-5"><span class="xref myst">8.5 Blueprint OTUI</span></a></p></li>
<li><p><a class="reference internal" href="#ch-8-6"><span class="xref myst">8.6 TS↔OTUI</span></a></p></li>
<li><p><a class="reference internal" href="#ch-8-7"><span class="xref myst">8.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-8-8"><span class="xref myst">8.8 Przykłady</span></a></p></li>
</ul>
</section>
<section id="dialogwindow">
<h1>9. DialogWindow<a class="headerlink" href="#dialogwindow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-9-1"><span class="xref myst">9.1 Struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-9-2"><span class="xref myst">9.2 Enter/Escape (OK/Cancel)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-9-3"><span class="xref myst">9.3 Modalność i fokus</span></a></p></li>
<li><p><a class="reference internal" href="#ch-9-4"><span class="xref myst">9.4 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="titlebar">
<h1>10. Titlebar<a class="headerlink" href="#titlebar" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-10-1"><span class="xref myst">10.1 Ikona, tytuł, przyciski</span></a></p></li>
<li><p><a class="reference internal" href="#ch-10-2"><span class="xref myst">10.2 Slot i dozwolone dzieci</span></a></p></li>
<li><p><a class="reference internal" href="#ch-10-3"><span class="xref myst">10.3 Drag‑move, fokus</span></a></p></li>
<li><p><a class="reference internal" href="#ch-10-4"><span class="xref myst">10.4 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="toolbar">
<h1>11. Toolbar<a class="headerlink" href="#toolbar" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-11-1"><span class="xref myst">11.1 Grupy akcji i separatory</span></a></p></li>
<li><p><a class="reference internal" href="#ch-11-2"><span class="xref myst">11.2 Toggle/active state</span></a></p></li>
<li><p><a class="reference internal" href="#ch-11-3"><span class="xref myst">11.3 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="panel-groupbox">
<h1>12. Panel / GroupBox<a class="headerlink" href="#panel-groupbox" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-12-1"><span class="xref myst">12.1 Sloty treści, nagłówki, separatory</span></a></p></li>
<li><p><a class="reference internal" href="#ch-12-2"><span class="xref myst">12.2 Dozwolone dzieci i auto‑fit</span></a></p></li>
<li><p><a class="reference internal" href="#ch-12-3"><span class="xref myst">12.3 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="tabbar-tabwidget">
<h1>13. TabBar / TabWidget<a class="headerlink" href="#tabbar-tabwidget" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-13-1"><span class="xref myst">13.1 Zakładki i kontener treści</span></a></p></li>
<li><p><a class="reference internal" href="#ch-13-2"><span class="xref myst">13.2 Zdarzenia i aktywacja</span></a></p></li>
<li><p><a class="reference internal" href="#ch-13-3"><span class="xref myst">13.3 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="splitter">
<h1>14. Splitter<a class="headerlink" href="#splitter" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-14-1"><span class="xref myst">14.1 Dwoje dzieci, min‑size, pamięć podziału</span></a></p></li>
<li><p><a class="reference internal" href="#ch-14-2"><span class="xref myst">14.2 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="textlist-listrow">
<h1>15. TextList / ListRow<a class="headerlink" href="#textlist-listrow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-15-1"><span class="xref myst">15.1 Struktura wiersza (focus/select)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-2"><span class="xref myst">15.2 Scroll pairing i kotwice</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-3"><span class="xref myst">15.3 Blueprinty row + walidator</span></a></p></li>
</ul>
</section>
<section id="label-uilabel">
<h1>16. Label / UILabel<a class="headerlink" href="#label-uilabel" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-16-1"><span class="xref myst">16.1 Wrap/auto‑resize/font/kolor/offset</span></a></p></li>
<li><p><a class="reference internal" href="#ch-16-2"><span class="xref myst">16.2 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="button">
<h1>17. Button<a class="headerlink" href="#button" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-17-1"><span class="xref myst">17.1 Stany <code class="docutils literal notranslate"><span class="pre">$on/$!on</span></code>, ikonografia, min‑size</span></a></p></li>
<li><p><a class="reference internal" href="#ch-17-2"><span class="xref myst">17.2 Shortcuts i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-17-3"><span class="xref myst">17.3 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="checkbox">
<h1>18. CheckBox<a class="headerlink" href="#checkbox" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-18-1"><span class="xref myst">18.1 Zachowania i focus</span></a></p></li>
<li><p><a class="reference internal" href="#ch-18-2"><span class="xref myst">18.2 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="textedit-passwordtextedit-multilinetextedit">
<h1>19. TextEdit / PasswordTextEdit / MultilineTextEdit<a class="headerlink" href="#textedit-passwordtextedit-multilinetextedit" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-19-1"><span class="xref myst">19.1 Placeholder, caret, multiline</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-2"><span class="xref myst">19.2 Scroll pairing</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-3"><span class="xref myst">19.3 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="combobox">
<h1>20. ComboBox<a class="headerlink" href="#combobox" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-20-1"><span class="xref myst">20.1 Menu height/scroll step</span></a></p></li>
<li><p><a class="reference internal" href="#ch-20-2"><span class="xref myst">20.2 OptionChange i integracja</span></a></p></li>
<li><p><a class="reference internal" href="#ch-20-3"><span class="xref myst">20.3 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="progressbar">
<h1>21. ProgressBar<a class="headerlink" href="#progressbar" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-21-1"><span class="xref myst">21.1 Zakres, style, opis stanu</span></a></p></li>
<li><p><a class="reference internal" href="#ch-21-2"><span class="xref myst">21.2 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<section id="scrollbar-vertical-horizontal">
<h1>22. ScrollBar (Vertical/Horizontal)<a class="headerlink" href="#scrollbar-vertical-horizontal" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-22-1"><span class="xref myst">22.1 Docking (right/bottom), step, pixels‑scroll</span></a></p></li>
<li><p><a class="reference internal" href="#ch-22-2"><span class="xref myst">22.2 Pairing rules + walidator</span></a></p></li>
</ul>
</section>
<section id="horizontalseparator">
<h1>23. HorizontalSeparator<a class="headerlink" href="#horizontalseparator" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-23-1"><span class="xref myst">23.1 Użycie i ograniczenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-23-2"><span class="xref myst">23.2 Blueprint</span></a></p></li>
</ul>
</section>
<section id="statusoverlay">
<h1>24. StatusOverlay<a class="headerlink" href="#statusoverlay" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-24-1"><span class="xref myst">24.1 Label + Progress + Cancel</span></a></p></li>
<li><p><a class="reference internal" href="#ch-24-2"><span class="xref myst">24.2 Blueprint/TS/Walidator</span></a></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="macierze-dozwolonych-dzieci-global">
<h1>25. Macierze dozwolonych dzieci (global)<a class="headerlink" href="#macierze-dozwolonych-dzieci-global" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-25-1"><span class="xref myst">25.1 Tabele macierzowe per komponent i slot</span></a></p></li>
<li><p><a class="reference internal" href="#ch-25-2"><span class="xref myst">25.2 Reguły globalne, zakazy, auto‑naprawy</span></a></p></li>
</ul>
</section>
<section id="walidacja-i-autonaprawy-global">
<h1>26. Walidacja i auto‑naprawy (global)<a class="headerlink" href="#walidacja-i-autonaprawy-global" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-26-1"><span class="xref myst">26.1 Błędy blokujące (STRICT, anchors, wymagane elementy)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-26-2"><span class="xref myst">26.2 Ostrzeżenia (scroll pairing, Enter/Escape, Min/Close)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-26-3"><span class="xref myst">26.3 Auto‑naprawy deterministyczne (kolejność, sloty, scroll, snapping 2px)</span></a></p></li>
</ul>
</section>
<section id="parser-serializer-otui-ast-typescript">
<h1>27. Parser/Serializer OTUI → AST (TypeScript)<a class="headerlink" href="#parser-serializer-otui-ast-typescript" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-27-1"><span class="xref myst">27.1 Specyfikacja tokenów i INDENT/DEDENT</span></a></p></li>
<li><p><a class="reference internal" href="#ch-27-2"><span class="xref myst">27.2 Kształt AST; API <code class="docutils literal notranslate"><span class="pre">parseOtui()</span></code> i <code class="docutils literal notranslate"><span class="pre">serializeAst()</span></code></span></a></p></li>
<li><p><a class="reference internal" href="#ch-27-3"><span class="xref myst">27.3 Normalizacja do STRICT (<code class="docutils literal notranslate"><span class="pre">ensureStrictOtui()</span></code>)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-27-4"><span class="xref myst">27.4 Testy „round‑trip” (goldeny)</span></a></p></li>
</ul>
</section>
<section id="import-export-i-roundtrip-edytor-plik-lua">
<h1>28. Import/Export i round‑trip (edytor ↔ plik ↔ Lua)<a class="headerlink" href="#import-export-i-roundtrip-edytor-plik-lua" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-28-1"><span class="xref myst">28.1 Import z <code class="docutils literal notranslate"><span class="pre">.otui</span></code> i z bloków <code class="docutils literal notranslate"><span class="pre">&#64;OTUI_BEGIN/END</span></code></span></a></p></li>
<li><p><a class="reference internal" href="#ch-28-2"><span class="xref myst">28.2 Eksport do <code class="docutils literal notranslate"><span class="pre">.otui</span></code> + odświeżenie bloku w Lua</span></a></p></li>
<li><p><a class="reference internal" href="#ch-28-3"><span class="xref myst">28.3 Generatory stubów Lua (<code class="docutils literal notranslate"><span class="pre">g_ui.displayUI('...')</span></code> + kontrolery)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-28-4"><span class="xref myst">28.4 Runtime: brak publicznego <code class="docutils literal notranslate"><span class="pre">load</span> <span class="pre">UI</span> <span class="pre">from</span> <span class="pre">string</span></code> (tylko pliki)</span></a></p></li>
</ul>
</section>
<section id="biblioteka-presetow-gotowe-szablony">
<h1>29. Biblioteka presetów (gotowe szablony)<a class="headerlink" href="#biblioteka-presetow-gotowe-szablony" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-29-1"><span class="xref myst">29.1 Okna (MiniWindow, ContainerWindow, Dialog)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-29-2"><span class="xref myst">29.2 Komponenty (Titlebar, Toolbar, Panel, …)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-29-3"><span class="xref myst">29.3 Warianty tematyczne (narzędzie, kontener, dialog)</span></a></p></li>
</ul>
</section>
<section id="testy-wizualne-i-regresja">
<h1>30. Testy wizualne i regresja<a class="headerlink" href="#testy-wizualne-i-regresja" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-30-1"><span class="xref myst">30.1 Snapshoty i porównania 1:1</span></a></p></li>
<li><p><a class="reference internal" href="#ch-30-2"><span class="xref myst">30.2 DPI / font metrics / skalowanie</span></a></p></li>
<li><p><a class="reference internal" href="#ch-30-3"><span class="xref myst">30.3 Dostępność (kontrasty, czytelność)</span></a></p></li>
</ul>
</section>
<section id="slownik-i-indeks">
<h1>31. Słownik i indeks<a class="headerlink" href="#slownik-i-indeks" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-31-1"><span class="xref myst">31.1 Słownik atrybutów OTUI (A–Z)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-31-2"><span class="xref myst">31.2 Indeks komponentów i właściwości</span></a></p></li>
</ul>
<hr class="docutils" />
<!-- Puste kotwice (placeholdery), aby linki działały od razu -->
<div id="ch-0-1"></div>
</section>
<section id="cel-i-zakres-1-1">
<h1>0.1 Cel i zakres „1:1”<a class="headerlink" href="#cel-i-zakres-1-1" title="Link to this heading">#</a></h1>
<p>Ten dokument definiuje <strong>kanoniczne zasady projektowania UI OTClient v8</strong> (OTUI/OTML + Lua) oraz wymagania dla Twojego <strong>edytora TypeScript</strong>: jak składać okna i komponenty, aby eksport/import był <strong>deterministyczny i w 100% zgodny</strong> z klientem. Zawiera: reguły formatowania (STRICT OTUI), taksonomię komponentów, macierze dozwolonych dzieci, blueprinty OTUI, glue Lua, walidację, parser/serializer OTUI→AST i round‑trip (edytor ↔ plik <code class="docutils literal notranslate"><span class="pre">.otui</span></code> ↔ Lua).</p>
<div id="ch-0-2"></div>
</section>
<section id="terminologia">
<h1>0.2 Terminologia<a class="headerlink" href="#terminologia" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Widget</strong> — jednostka UI (np. Label, Button, TextList).</p></li>
<li><p><strong>Layout‑owner</strong> — rodzic odpowiadający za obszary/sloty i dokowanie dzieci.</p></li>
<li><p><strong>Area/slot</strong> — semantyczna przestrzeń dla dzieci (np. <code class="docutils literal notranslate"><span class="pre">titlebar</span></code>, <code class="docutils literal notranslate"><span class="pre">content</span></code>, <code class="docutils literal notranslate"><span class="pre">footer</span></code>).</p></li>
<li><p><strong>Preset/Blueprint</strong> — gotowy wzorzec OTUI danego komponentu/okna.</p></li>
<li><p><strong>AST</strong> — abstrakcyjne drzewo składniowe w edytorze (model OTUI w TS).</p></li>
<li><p><strong>STRICT OTUI</strong> — ścisły format tekstu <code class="docutils literal notranslate"><span class="pre">.otui</span></code>: LF, 2 spacje, brak tabów/komentarzy, stała kolejność atrybutów.</p></li>
<li><p><strong>Round‑trip</strong> — pewny obieg: import → edycja → eksport bez utraty semantyki ani formatowania regułowego.<div id="ch-0-3"></div></p></li>
</ul>
</section>
<section id="kryteria-jakosci">
<h1>0.3 Kryteria jakości<a class="headerlink" href="#kryteria-jakosci" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Zgodność 1:1</strong> z OTClientem (układ, stany, eventy, zasoby).</p></li>
<li><p><strong>Deterministyczny eksport</strong> (ta sama treść wej./wyj. po serializacji, przy zachowaniu STRICT).</p></li>
<li><p><strong>Stabilne identyfikatory <code class="docutils literal notranslate"><span class="pre">id</span></code></strong> i spójne nazewnictwo kontrolerów Lua.</p></li>
<li><p><strong>Lokalizacja</strong>: wszystkie stałe teksty przechodzą przez <code class="docutils literal notranslate"><span class="pre">tr()</span></code>.</p></li>
<li><p><strong>Zasoby</strong>: tylko z <code class="docutils literal notranslate"><span class="pre">data/</span></code> (fonty/obrazy), kolory #AARRGGBB/<code class="docutils literal notranslate"><span class="pre">alpha</span></code>.</p></li>
<li><p><strong>Brak „magii”</strong> w stanach: stany nadpisują styl, nie geometrię.<div id="ch-0-4"></div></p></li>
</ul>
</section>
<section id="workflow">
<h1>0.4 Workflow<a class="headerlink" href="#workflow" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p><strong>Projekt</strong> w edytorze (drag&amp;drop presetów; macierze pilnują dozwolonych dzieci).</p></li>
<li><p><strong>Walidacja</strong> (STRICT, anchors, wymagane elementy).</p></li>
<li><p><strong>Serializacja</strong> do <code class="docutils literal notranslate"><span class="pre">.otui</span></code> (kolejność GEOMETRIA→STYL→ZACHOWANIE).</p></li>
<li><p><strong>Eksport</strong>: zapis <code class="docutils literal notranslate"><span class="pre">.otui</span></code> + generator stubów Lua (<code class="docutils literal notranslate"><span class="pre">g_ui.displayUI('...')</span></code>).</p></li>
<li><p><strong>Import</strong>: z plików <code class="docutils literal notranslate"><span class="pre">.otui</span></code> lub bloków Lua oznaczonych <code class="docutils literal notranslate"><span class="pre">&#64;OTUI_BEGIN/END</span></code>.</p></li>
<li><p><strong>Round‑trip</strong>: zmiany w edytorze odzwierciedlone w pliku i opcjonalnym bloku Lua.</p></li>
</ol>
<div id="ch-1-1"></div>
</section>
<section id="indent-i-strict">
<h1>1.1 Indent i STRICT<a class="headerlink" href="#indent-i-strict" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>LF</strong>, bez BOM; <strong>spacje</strong> (bez tabów); <strong>brak trailing spaces</strong>.</p></li>
<li><p><strong>Wcięcia = 2 spacje</strong> (mnożniki).</p></li>
<li><p><strong>Zero komentarzy</strong> w treści OTUI.</p></li>
<li><p>Dozwolone znaki: łagodne ASCII + <code class="docutils literal notranslate"><span class="pre">#</span></code> (wyłącznie w kolorach), <code class="docutils literal notranslate"><span class="pre">-_:./&lt;&gt;()</span></code> itp. Wartości tekstowe w <code class="docutils literal notranslate"><span class="pre">!text</span></code> w pojedynczych cudzysłowach.</p></li>
</ul>
<p>Przykład minimalnego bloku zgodnego ze STRICT:</p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Label
  id: info
  anchors.left: parent.left
  anchors.right: parent.right
  text-wrap: true
  !text: tr(&#39;Information&#39;)
  font: verdana-11px-monochrome
</pre></div>
</div>
<div id="ch-1-2"></div>
# 1.2 Kolejność atrybutów
**GEOMETRIA** (najpierw): `id`, `size`/`width`/`height`, `anchors.*` (najpierw `fill`, potem krawędzie), `margin-*`, `padding`.
**STYL**: `background-color`, `font`, `color`, `image-*`, `text-*` (`align`, `wrap`, `auto-resize`, `offset`), `!text: tr('...')`.
**ZACHOWANIE**: `&metaFn`, `@on...` (Enter/Escape/Click/Setup/...), stany `$on/$!on/$focus`.
<blockquote>
<div><p>Serializator <strong>musi</strong> zawsze emitować w tej kolejności.</p>
</div></blockquote>
<div id="ch-1-3"></div>
# 1.3 Teksty i i18n
- Każdy stały tekst: `!text: tr('...')`.
- Escaping `'` → `\'` wewnątrz `tr('...')`.
- `text-wrap`/`text-auto-resize`/`text-align`/`text-offset` sterują renderem.
- Nie umieszczaj surowych napisów poza `!text` (również w stanach).
<div id="ch-1-4"></div>
</section>
<section id="stany">
<h1>1.4 Stany<a class="headerlink" href="#stany" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$on</span></code> / <code class="docutils literal notranslate"><span class="pre">$!on</span></code> — przełączane <code class="docutils literal notranslate"><span class="pre">widget:setOn(true/false)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$focus</span></code> — aktywne przy fokusie klawiatury.</p></li>
<li><p><strong>Zalecenie</strong>: stany modyfikują <strong>styl</strong> (kolory, <code class="docutils literal notranslate"><span class="pre">!text</span></code>, obraz), <strong>nie</strong> geometrię (anchors/size).</p></li>
</ul>
<p>Przykład:</p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Button
  id: toggle
  width: 96
  !text: tr(&#39;Off&#39;)

  $on:
    !text: tr(&#39;On&#39;)
    color: #ffffff

  $!on:
    !text: tr(&#39;Off&#39;)
    color: #bbbbbb
</pre></div>
</div>
<div id="ch-1-5"></div>
</section>
<section id="zasoby-data">
<h1>1.5 Zasoby <code class="docutils literal notranslate"><span class="pre">data/</span></code><a class="headerlink" href="#zasoby-data" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Fonty</strong>: używaj nazw z <code class="docutils literal notranslate"><span class="pre">data/fonts/</span></code> (np. <code class="docutils literal notranslate"><span class="pre">verdana-11px-monochrome</span></code>, <code class="docutils literal notranslate"><span class="pre">verdana-11px-rounded</span></code>, <code class="docutils literal notranslate"><span class="pre">terminus-14px-bold</span></code>).</p></li>
<li><p><strong>Obrazy</strong>: ścieżki <code class="docutils literal notranslate"><span class="pre">/images/...</span></code>, opcje <code class="docutils literal notranslate"><span class="pre">image-smooth</span></code>, <code class="docutils literal notranslate"><span class="pre">image-fixed-ratio</span></code>.</p></li>
<li><p><strong>Kolory</strong>: <code class="docutils literal notranslate"><span class="pre">#AARRGGBB</span></code> lub <code class="docutils literal notranslate"><span class="pre">alpha</span></code>.</p></li>
<li><p>Walidator blokuje ścieżki spoza <code class="docutils literal notranslate"><span class="pre">data/</span></code>.</p></li>
</ul>
<div id="ch-2-1"></div>
</section>
<section id="pliki-otui-i-ladowanie">
<h1>2.1 Pliki <code class="docutils literal notranslate"><span class="pre">.otui</span></code> i ładowanie<a class="headerlink" href="#pliki-otui-i-ladowanie" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Kanonicznie</strong> UI ładuje się z pliku: <code class="docutils literal notranslate"><span class="pre">local</span> <span class="pre">win</span> <span class="pre">=</span> <span class="pre">g_ui.displayUI('nazwa_pliku')</span></code>.</p></li>
<li><p>Nazwa w <code class="docutils literal notranslate"><span class="pre">displayUI</span></code> odpowiada plikowi <code class="docutils literal notranslate"><span class="pre">.otui</span></code> w module.</p></li>
<li><p>Brak publicznego API „load UI from string” — w runtime używaj plików.<div id="ch-2-2"></div></p></li>
</ul>
</section>
<section id="tworzenie-dynamiczne">
<h1>2.2 Tworzenie dynamiczne<a class="headerlink" href="#tworzenie-dynamiczne" title="Link to this heading">#</a></h1>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">parent</span> <span class="o">=</span> <span class="n">rootWidget</span>
<span class="kd">local</span> <span class="n">row</span> <span class="o">=</span> <span class="n">g_ui</span><span class="p">.</span><span class="n">createWidget</span><span class="p">(</span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
<span class="n">row</span><span class="p">:</span><span class="n">setId</span><span class="p">(</span><span class="s1">&#39;row1&#39;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">name</span> <span class="o">=</span> <span class="n">g_ui</span><span class="p">.</span><span class="n">createWidget</span><span class="p">(</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
<span class="n">name</span><span class="p">:</span><span class="n">setText</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">))</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Tworzenie dzieci w Lua jest dozwolone, ale <strong>eksport</strong> z edytora powinien odtwarzać układ w <code class="docutils literal notranslate"><span class="pre">.otui</span></code> (statyczny szkielet), a dynamikę zostawić skryptom.</p></li>
</ul>
<div id="ch-2-3"></div>
</section>
<section id="hierarchia-i-identyfikacja">
<h1>2.3 Hierarchia i identyfikacja<a class="headerlink" href="#hierarchia-i-identyfikacja" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> unikalne w ramach rodzica.</p></li>
<li><p>Dostęp w Lua: <code class="docutils literal notranslate"><span class="pre">parent:getChildById('...')</span></code>, wyszukiwanie głębokie: <code class="docutils literal notranslate"><span class="pre">rootWidget:recursiveGetChildById('...')</span></code>.</p></li>
<li><p>Widoczność: <code class="docutils literal notranslate"><span class="pre">widget:isVisible()</span></code>, <code class="docutils literal notranslate"><span class="pre">widget:setVisible(true/false)</span></code>; <code class="docutils literal notranslate"><span class="pre">:show()/:hide()</span></code>.<div id="ch-2-4"></div></p></li>
</ul>
</section>
<section id="fokus-i-nawigacja">
<h1>2.4 Fokus i nawigacja<a class="headerlink" href="#fokus-i-nawigacja" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Bindy w <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code> lub Lua: <code class="docutils literal notranslate"><span class="pre">g_keyboard.bindKeyPress('Up',</span> <span class="pre">fn,</span> <span class="pre">scope)</span></code>.</p></li>
<li><p>Fokus: <code class="docutils literal notranslate"><span class="pre">widget:focus()</span></code>, powody fokusowania (FocusReason) wpływają na zachowanie.</p></li>
<li><p>Listy: <code class="docutils literal notranslate"><span class="pre">focusNextChild/PreviousChild</span></code>, zapewnij <code class="docutils literal notranslate"><span class="pre">ensureChildVisible</span></code> przy przewijaniu.</p></li>
</ul>
<div id="ch-3-1"></div>
</section>
<section id="zasada-layoutowner">
<h1>3.1 Zasada „layout‑owner”<a class="headerlink" href="#zasada-layoutowner" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Parent</strong> definiuje sloty i reguły dokowania (anchors, padding, marginesy).</p></li>
<li><p><strong>Child</strong> ustawia swoje <code class="docutils literal notranslate"><span class="pre">anchors.*</span></code> względem parenta/sąsiadów.</p></li>
<li><p>ScrollBar należy do parenta (kontenera), ale jest <strong>sparowany</strong> z przewijanym dzieckiem.</p></li>
</ul>
<div id="ch-3-2"></div>
</section>
<section id="anchors-size-margins-kolizje">
<h1>3.2 Anchors, size, margins, kolizje<a class="headerlink" href="#anchors-size-margins-kolizje" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">anchors.fill:</span> <span class="pre">parent</span></code> <strong>nie</strong> łącz z jednoczesnym <code class="docutils literal notranslate"><span class="pre">top/bottom/left/right</span></code>.</p></li>
<li><p>Jeśli okno jest dokowane w panelu: ustaw <code class="docutils literal notranslate"><span class="pre">anchors.left/right:</span> <span class="pre">parent</span></code> i usuń <code class="docutils literal notranslate"><span class="pre">width</span></code> (auto‑fit).</p></li>
<li><p>Marginesy <code class="docutils literal notranslate"><span class="pre">margin-*</span></code> i <code class="docutils literal notranslate"><span class="pre">padding</span></code> determinują odstępy — trzymaj parzyste wartości (snapping 2 px).</p></li>
</ul>
<div id="ch-3-3"></div>
</section>
<section id="scroll-pairing">
<h1>3.3 Scroll pairing<a class="headerlink" href="#scroll-pairing" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TextList</span></code>/<code class="docutils literal notranslate"><span class="pre">MultilineTextEdit</span></code> ⇄ <strong><code class="docutils literal notranslate"><span class="pre">VerticalScrollBar</span></code></strong> jako <strong>sibling</strong>:</p>
<ul>
<li><p>ScrollBar: <code class="docutils literal notranslate"><span class="pre">anchors.right/top/bottom:</span> <span class="pre">parent</span></code>.</p></li>
<li><p>Lista/tekst: <code class="docutils literal notranslate"><span class="pre">anchors.right:</span> <span class="pre">scroll.left</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">HorizontalScrollBar</span></code> dokowany na dole; treść: <code class="docutils literal notranslate"><span class="pre">anchors.bottom:</span> <span class="pre">hscroll.top</span></code>.</p></li>
<li><p>Samotny ScrollBar → błąd walidacji.</p></li>
</ul>
<div id="ch-3-4"></div>
</section>
<section id="autofit-width-dokowane-okna">
<h1>3.4 Auto‑fit width (dokowane okna)<a class="headerlink" href="#autofit-width-dokowane-okna" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Dla <code class="docutils literal notranslate"><span class="pre">MiniWindow</span></code>/<code class="docutils literal notranslate"><span class="pre">DialogWindow</span></code> w panelach: domyślnie <strong>rozciągaj w poziomie</strong> (<code class="docutils literal notranslate"><span class="pre">anchors.left/right:</span> <span class="pre">parent</span></code>) i zarządzaj odstępami przez <code class="docutils literal notranslate"><span class="pre">margin-*</span></code>.</p></li>
<li><p>Edytor przy eksporcie <strong>auto‑naprawia</strong>: usuwa <code class="docutils literal notranslate"><span class="pre">width</span></code>, gdy ustawiono <code class="docutils literal notranslate"><span class="pre">left/right</span></code>.</p></li>
</ul>
<div id="ch-4-1"></div>
</section>
<section id="okna-windowclass">
<h1>4.1 Okna (Window‑class)<a class="headerlink" href="#okna-windowclass" title="Link to this heading">#</a></h1>
<p><strong>Cel</strong>: najwyższe elementy kompozycji; zapewniają ramę, titlebar, focus i skróty.</p>
<ul class="simple">
<li><p><strong>MainWindow</strong>
<em>Rola</em>: główne okno modułu/sceny.
<em>Sloty</em>: brak nazwanych slotów — treść bezpośrednio w root.
<em>Typowe</em>: pełnoekran/duże panele, dopuszcza wszystkie „panelowe” dzieci.
<em>Zakazy</em>: okna‑dzieci (inne Main/StaticMain) jako potomkowie.</p></li>
<li><p><strong>StaticMainWindow</strong>
<em>Rola</em>: jak MainWindow, ale <strong>bez drag‑move</strong> (statyczne tło/ekrany).
<em>Użycie</em>: ekrany logowania, waiting list.</p></li>
<li><p><strong>MiniWindow</strong>
<em>Rola</em>: modułowe okno narzędziowe.
<em>Sloty</em>: <code class="docutils literal notranslate"><span class="pre">titlebar</span></code>, <code class="docutils literal notranslate"><span class="pre">content</span></code>, <code class="docutils literal notranslate"><span class="pre">footer</span></code>.
<em>Przyciski</em>: <strong>minimize</strong>, <strong>close</strong> (opcjonalnie <strong>back/pin</strong>).
<em>Auto‑fit</em>: domyślnie rozciąga się na szerokość rodzica w panelu.</p></li>
<li><p><strong>ContainerWindow</strong>
<em>Rola</em>: przeglądanie zawartości (sloty/items).
<em>Sloty</em>: <code class="docutils literal notranslate"><span class="pre">titlebar</span></code>, <code class="docutils literal notranslate"><span class="pre">content</span></code>.
<em>Przyciski</em>: <strong>back</strong>, <strong>pin/lock</strong>, <strong>minimize</strong>, <strong>close</strong>.
<em>Treść</em>: <code class="docutils literal notranslate"><span class="pre">ItemSlotGrid</span></code>/sloty; DnD; scroll przy overflow.</p></li>
<li><p><strong>DialogWindow</strong>
<em>Rola</em>: potwierdzenia/prompt.
<em>Skróty</em>: <code class="docutils literal notranslate"><span class="pre">&#64;onEnter</span></code> (OK), <code class="docutils literal notranslate"><span class="pre">&#64;onEscape</span></code> (Cancel).
<em>Sloty</em>: typowo tytuł + treść + przyciski OK/Cancel.</p></li>
</ul>
<div id="ch-4-2"></div>
</section>
<section id="kontenery-contentclass">
<h1>4.2 Kontenery (Content‑class)<a class="headerlink" href="#kontenery-contentclass" title="Link to this heading">#</a></h1>
<p><strong>Cel</strong>: organizacja i grupowanie treści.</p>
<ul class="simple">
<li><p><strong>Panel</strong>
Lekki kontener na treść. Dopuszcza większość elementów panelowych; używany jako sekcja lub obszar roboczy.</p></li>
<li><p><strong>GroupBox</strong>
Panel z nagłówkiem (etykietą) i ramką/separatorem. Dla formularzy/pogrupowanych opcji.</p></li>
<li><p><strong>UIWidget</strong>
Bazowy kontener/„kafelek”. Może mieć tło (<code class="docutils literal notranslate"><span class="pre">image-*</span></code>, <code class="docutils literal notranslate"><span class="pre">background-color</span></code>), służy też jako wiersze list.</p></li>
<li><p><strong>Grid (edytorowy)</strong>
Artefakt <strong>tylko w edytorze</strong> do układania na siatce (snapping, gapy). <strong>Nie</strong> jest typem OTUI — przy eksporcie mapuje się na anchors/marginesy prawdziwych widgetów.</p></li>
<li><p><strong>StatusOverlay</strong>
Lekka warstwa informacyjna (Label/Progress/Cancel) dokowana nad treścią. Bez złożonych dzieci.</p></li>
</ul>
<div id="ch-4-3"></div>
</section>
<section id="organizacja-i-nawigacja">
<h1>4.3 Organizacja i nawigacja<a class="headerlink" href="#organizacja-i-nawigacja" title="Link to this heading">#</a></h1>
<p><strong>Cel</strong>: nawigowanie, przełączanie kontekstu, dzielenie przestrzeni.</p>
<ul class="simple">
<li><p><strong>Titlebar</strong>
Slot nagłówka okna: <code class="docutils literal notranslate"><span class="pre">Label</span></code> (tytuł), przyciski (<strong>min/close/back/pin</strong>), ewentualna ikona. Może stanowić <strong>drag‑area</strong>. Zakaz list, edytorów, scrollbarów.</p></li>
<li><p><strong>Toolbar</strong>
Pasek akcji (grupy <code class="docutils literal notranslate"><span class="pre">Button</span></code>, separatory). Stany toggle, skróty klawiszowe.</p></li>
<li><p><strong>TabBar / TabWidget</strong>
TabBar zawiera <strong>zakładki</strong> (przyciski), a <strong>kontent zakładki</strong> znajduje się w osobnym kontenerze obok/poniżej. Nie wkładamy treści do TabBar.</p></li>
<li><p><strong>Splitter</strong>
Dzieli przestrzeń na <strong>dwa</strong> panele; wymagane <code class="docutils literal notranslate"><span class="pre">min-size</span></code> dzieci; pamiętanie podziału mile widziane.</p></li>
<li><p><strong>HorizontalSeparator</strong>
Linie/separatory sekcji. Element wizualny — <strong>bez dzieci</strong>.</p></li>
</ul>
<div id="ch-4-4"></div>
</section>
<section id="dane-i-edycja-inputs-lists">
<h1>4.4 Dane i edycja (Inputs/Lists)<a class="headerlink" href="#dane-i-edycja-inputs-lists" title="Link to this heading">#</a></h1>
<p><strong>Cel</strong>: prezentacja i wprowadzanie danych.</p>
<ul>
<li><p><strong>Label / UILabel</strong>
Tekst z <code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code>, <code class="docutils literal notranslate"><span class="pre">font</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span></code>, <code class="docutils literal notranslate"><span class="pre">text-wrap</span></code>, <code class="docutils literal notranslate"><span class="pre">text-auto-resize</span></code>, <code class="docutils literal notranslate"><span class="pre">text-align</span></code>, <code class="docutils literal notranslate"><span class="pre">text-offset</span></code>.</p></li>
<li><p><strong>Button</strong>
Akcje; <code class="docutils literal notranslate"><span class="pre">&#64;onClick</span></code>; stany <code class="docutils literal notranslate"><span class="pre">$on/$!on</span></code> (np. toggle). Minimalne wymiary zalecane ≥16×16.</p></li>
<li><p><strong>CheckBox</strong>
Przełącznik bool; fokus i interakcja klawiaturą. Często obok napisu (Label) w tym samym kontenerze.</p></li>
<li><p><strong>TextEdit / PasswordTextEdit / MultilineTextEdit</strong>
Pola tekstowe; <code class="docutils literal notranslate"><span class="pre">Multiline</span></code> wymaga pary ze <strong>ScrollBar</strong> (sibling, dock right/bottom).</p></li>
<li><p><strong>ComboBox</strong>
Selektor opcji; <code class="docutils literal notranslate"><span class="pre">menu-height</span></code>, <code class="docutils literal notranslate"><span class="pre">menu-scroll-step</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;onOptionChange</span></code>. Pozycje menu wewnętrzne (bez manualnych dzieci).</p></li>
<li><p><strong>TextList / ListRow</strong>
Lista przewijana; wiersze jako <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>/custom row; fokus/zaznaczenie; para z <strong>VerticalScrollBar</strong> (sibling).</p>
<div id="ch-4-5"></div>
</li>
</ul>
</section>
<section id="wskazniki-i-przewijanie">
<h1>4.5 Wskaźniki i przewijanie<a class="headerlink" href="#wskazniki-i-przewijanie" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>ProgressBar</strong>
Pasek postępu; zakres i styl; <strong>bez dzieci</strong>. Opisy stanu (Label) obok.</p></li>
<li><p><strong>ScrollBar (Vertical/Horizontal)</strong>
<code class="docutils literal notranslate"><span class="pre">step</span></code>, <code class="docutils literal notranslate"><span class="pre">pixels-scroll</span></code>; <strong>sibling</strong> przewijanej treści. Dock: Vertical → <strong>right</strong>, Horizontal → <strong>bottom</strong>.
<strong>Pairing rules</strong>: lista/tekst kotwiczy <code class="docutils literal notranslate"><span class="pre">right:</span> <span class="pre">scroll.left</span></code> (dla V) lub <code class="docutils literal notranslate"><span class="pre">bottom:</span> <span class="pre">hscroll.top</span></code> (dla H). Samotny ScrollBar → błąd.</p></li>
</ul>
<hr class="docutils" />
<blockquote>
<div><p><strong>Uwaga</strong>: Szczegółowe macierze dozwolonych dzieci na poziomie każdego komponentu znajdują się w rozdziale <strong>25</strong> i są egzekwowane przez walidator podczas eksportu.</p>
</div></blockquote>
<div id="ch-5-1"></div>
</section>
<section id="struktura-i-sloty">
<h1>5.1 Struktura i sloty<a class="headerlink" href="#struktura-i-sloty" title="Link to this heading">#</a></h1>
<p><strong>MainWindow</strong> jest najwyższym kontenerem okna roboczego modułu/sceny. Nie definiuje nazwanych slotów (jak <code class="docutils literal notranslate"><span class="pre">titlebar/content/footer</span></code>) — treść umieszczasz bezpośrednio w root lub w wydzielonych <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>/<code class="docutils literal notranslate"><span class="pre">Panel</span></code>.</p>
<p><strong>Zalecany podział logiczny (nieobowiązkowy):</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">header</span></code> (opcjonalny pasek tytułu/toolbar jako <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">content</span></code> (główna przestrzeń pracy),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">footer</span></code> (status/akcje).
To <strong>nazwa własna</strong> dzieci, nie formalny „slot” klasy — pomaga w edytorze, w walidacji i przy presetach.</p></li>
</ul>
<div id="ch-5-2"></div>
</section>
<section id="dozwolone-dzieci-macierz">
<h1>5.2 Dozwolone dzieci (macierz)<a class="headerlink" href="#dozwolone-dzieci-macierz" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Parent: <code class="docutils literal notranslate"><span class="pre">MainWindow</span></code></p></th>
<th class="head"><p>Dopuszczone dzieci</p></th>
<th class="head"><p>Niedozwolone / uwagi</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>root</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>, <code class="docutils literal notranslate"><span class="pre">Panel</span></code>, <code class="docutils literal notranslate"><span class="pre">Label</span></code>, <code class="docutils literal notranslate"><span class="pre">Button</span></code>, <code class="docutils literal notranslate"><span class="pre">TextEdit</span></code>, <code class="docutils literal notranslate"><span class="pre">PasswordTextEdit</span></code>, <code class="docutils literal notranslate"><span class="pre">MultilineTextEdit</span></code>, <code class="docutils literal notranslate"><span class="pre">TextList</span></code>, <code class="docutils literal notranslate"><span class="pre">ComboBox</span></code>, <code class="docutils literal notranslate"><span class="pre">CheckBox</span></code>, <code class="docutils literal notranslate"><span class="pre">ProgressBar</span></code>, <code class="docutils literal notranslate"><span class="pre">VerticalScrollBar</span></code>, <code class="docutils literal notranslate"><span class="pre">HorizontalSeparator</span></code>, <code class="docutils literal notranslate"><span class="pre">TabBar</span></code>, <code class="docutils literal notranslate"><span class="pre">Splitter</span></code></p></td>
<td><p>Inne okna (<code class="docutils literal notranslate"><span class="pre">MainWindow/StaticMainWindow/MiniWindow/ContainerWindow/DialogWindow</span></code>) — ✖</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">header</span></code> (jeśli wydzielisz)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Label</span></code>, <code class="docutils literal notranslate"><span class="pre">Button</span></code>, <code class="docutils literal notranslate"><span class="pre">Toolbar</span></code>, <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (ikona)</p></td>
<td><p>Scroll/edytory/listy — ✖</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">content</span></code></p></td>
<td><p>wszystkie elementy „panelowe” (lista powyżej)</p></td>
<td><p>okna‑dzieci — ✖</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">footer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Button</span></code>, <code class="docutils literal notranslate"><span class="pre">Label</span></code>, <code class="docutils literal notranslate"><span class="pre">ProgressBar</span></code></p></td>
<td><p>listy/edytory — ✖</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Scroll pairing:</strong> jeśli w <code class="docutils literal notranslate"><span class="pre">content</span></code> dodasz <code class="docutils literal notranslate"><span class="pre">TextList</span></code>/<code class="docutils literal notranslate"><span class="pre">MultilineTextEdit</span></code>, dockuj <strong>VerticalScrollBar</strong> po prawej i kotwicz treść do <code class="docutils literal notranslate"><span class="pre">scroll.left</span></code>.</p>
<div id="ch-5-3"></div>
</section>
<section id="geometria-i-styl-geometria-styl-zachowanie">
<h1>5.3 Geometria i styl (GEOMETRIA → STYL → ZACHOWANIE)<a class="headerlink" href="#geometria-i-styl-geometria-styl-zachowanie" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Rozmiar</strong>: <code class="docutils literal notranslate"><span class="pre">size:</span> <span class="pre">W</span> <span class="pre">H</span></code> lub kotwice względem rodzica (zalecane w narzędziach: <code class="docutils literal notranslate"><span class="pre">anchors.left/right:</span> <span class="pre">parent</span></code> + wysokość/marginesy).</p></li>
<li><p><strong>Kotwice</strong>: unikaj łączenia <code class="docutils literal notranslate"><span class="pre">anchors.fill:</span> <span class="pre">parent</span></code> z ręcznymi <code class="docutils literal notranslate"><span class="pre">top/bottom/left/right</span></code>.</p></li>
<li><p><strong>Marginesy/padding</strong>: parzyste wartości (snapping 2 px) dla spójności.</p></li>
<li><p><strong>Tło</strong>: <code class="docutils literal notranslate"><span class="pre">background-color</span></code> lub <code class="docutils literal notranslate"><span class="pre">image-source</span></code> (np. tło ekranu); <code class="docutils literal notranslate"><span class="pre">image-smooth</span></code>, <code class="docutils literal notranslate"><span class="pre">image-fixed-ratio</span></code> w razie potrzeby.</p></li>
<li><p><strong>Teksty</strong>: wyłącznie <code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code> (STRICT).</p></li>
<li><p><strong>Fonty/obrazy</strong>: tylko z <code class="docutils literal notranslate"><span class="pre">data/</span></code>.</p></li>
</ul>
<blockquote>
<div><p><strong>Auto‑fit width</strong>: osadzone w panelu <code class="docutils literal notranslate"><span class="pre">MainWindow</span></code> powinno domyślnie rozciągać się na szerokość rodzica (edytor może automatycznie usuwać <code class="docutils literal notranslate"><span class="pre">width</span></code>).</p>
</div></blockquote>
<div id="ch-5-4"></div>
</section>
<section id="stany-i-zdarzenia">
<h1>5.4 Stany i zdarzenia<a class="headerlink" href="#stany-i-zdarzenia" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Zdarzenia okienne</strong>: <code class="docutils literal notranslate"><span class="pre">&#64;onEnter</span></code> (OK/Apply), <code class="docutils literal notranslate"><span class="pre">&#64;onEscape</span></code> (Cancel/Close), <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code> (bindy klawiszy).</p></li>
<li><p><strong>Stany</strong>: <code class="docutils literal notranslate"><span class="pre">MainWindow</span></code> z reguły nie używa <code class="docutils literal notranslate"><span class="pre">$on/$!on</span></code> na sobie; stosuj na przyciskach/wierszach listy.</p></li>
<li><p><strong>Fokus i nawigacja</strong>: w <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code> zbinduj strzałki/PageUp/PageDown dla list, Enter/Escape dla akcji.</p></li>
<li><p><strong>Zamykanie</strong>: implementuj w controllerze (Lua), a w <code class="docutils literal notranslate"><span class="pre">.otui</span></code> tylko wiąż <code class="docutils literal notranslate"><span class="pre">&#64;onEscape</span></code>/przyciski.</p></li>
</ul>
<div id="ch-5-5"></div>
</section>
<section id="blueprint-otui-kanoniczny">
<h1>5.5 Blueprint OTUI (kanoniczny)<a class="headerlink" href="#blueprint-otui-kanoniczny" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>MainWindow
  id: main
  size: 420 320
  anchors.left: parent.left
  anchors.top: parent.top
  margin-top: 6
  margin-left: 6

  background-color: alpha

  @onEnter: MainController.onConfirm()
  @onEscape: MainController.onCancel()
  @onSetup: MainController.onSetup()
# HEADER (opcjonalny pasek tytułu/toolbar)
  UIWidget
    id: header
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    height: 20

    background-color: #00000066

    Label
      id: title
      anchors.left: parent.left
      anchors.verticalCenter: parent.verticalCenter
      margin-left: 6
      text-auto-resize: true
      !text: tr(&#39;Main Window&#39;)
      font: verdana-11px-rounded
# CONTENT (lista + scroll jako sibling)
  UIWidget
    id: content
    anchors.left: parent.left
    anchors.right: scroll.left
    anchors.top: header.bottom
    anchors.bottom: footer.top
    padding: 6

    background-color: alpha

    TextList
      id: items
      anchors.fill: parent

  VerticalScrollBar
    id: scroll
    anchors.right: parent.right
    anchors.top: header.bottom
    anchors.bottom: footer.top
    step: 16
# FOOTER (akcje)
  UIWidget
    id: footer
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    height: 28

    background-color: #00000033

    Button
      id: okButton
      anchors.right: cancelButton.left
      anchors.bottom: parent.bottom
      width: 64
      margin-right: 8
      !text: tr(&#39;Ok&#39;)
      @onClick: MainController.onConfirm()

    Button
      id: cancelButton
      anchors.right: parent.right
      anchors.bottom: parent.bottom
      width: 64
      margin-right: 8
      !text: tr(&#39;Cancel&#39;)
      @onClick: MainController.onCancel()
</pre></div>
</div>
<p><strong>Uwagi do blueprintu:</strong></p>
<ul class="simple">
<li><p>ScrollBar to <strong>sibling</strong> <code class="docutils literal notranslate"><span class="pre">content</span></code>; lista kotwiczona do <code class="docutils literal notranslate"><span class="pre">scroll.left</span></code>.</p></li>
<li><p>Wcięcia <strong>2 spacje</strong>, kolejność sekcji zachowana (STRICT).</p></li>
<li><p>Teksty przez <code class="docutils literal notranslate"><span class="pre">tr()</span></code>; zasoby wyłącznie z <code class="docutils literal notranslate"><span class="pre">data/</span></code>.</p></li>
</ul>
<div id="ch-5-6"></div>
</section>
<section id="mapowanie-ts-otui-serializer">
<h1>5.6 Mapowanie TS ↔ OTUI (serializer)<a class="headerlink" href="#mapowanie-ts-otui-serializer" title="Link to this heading">#</a></h1>
<p><strong>Minimalny preset w edytorze (TS):</strong></p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetMainWindow</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MainWindow&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;main&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">420</span><span class="p">,</span><span class="w"> </span><span class="mf">320</span><span class="p">],</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onEnter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MainController.onConfirm()&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onEscape</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MainController.onCancel()&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onSetup</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MainController.onSetup()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;header&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000066&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textAutoResize</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Main Window&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-rounded&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;content&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;scroll.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;header.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;footer.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;TextList&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;items&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fill</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;VerticalScrollBar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;header.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;footer.top&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="cm">/* style */</span><span class="w"> </span><span class="kc">undefined</span><span class="p">,</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="kt">undefined</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;footer&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">28</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000033&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;okButton&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cancelButton.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">64</span><span class="p">,</span><span class="w"> </span><span class="nx">marginRight</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Ok&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MainController.onConfirm()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cancelButton&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">64</span><span class="p">,</span><span class="w"> </span><span class="nx">marginRight</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Cancel&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MainController.onCancel()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Serializer</strong> musi emitować: GEOMETRIA → STYL → ZACHOWANIE, <code class="docutils literal notranslate"><span class="pre">style.text</span></code> → <code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code>, <code class="docutils literal notranslate"><span class="pre">events</span></code> → <code class="docutils literal notranslate"><span class="pre">&#64;on...</span></code>, stany → <code class="docutils literal notranslate"><span class="pre">$...</span></code>.</p>
<p><strong>Sanityzacja</strong> przed zapisem: <code class="docutils literal notranslate"><span class="pre">ensureStrictOtui()</span></code> (LF, 2 sp., brak komentarzy/tabów/trailing spaces).</p>
<div id="ch-5-7"></div>
</section>
<section id="walidator-bledy-ostrzezenia">
<h1>5.7 Walidator (błędy/ostrzeżenia)<a class="headerlink" href="#walidator-bledy-ostrzezenia" title="Link to this heading">#</a></h1>
<p><strong>Blokujące (❌):</strong></p>
<ul class="simple">
<li><p>Dziecko typu okno (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>) wewnątrz <code class="docutils literal notranslate"><span class="pre">MainWindow</span></code>.</p></li>
<li><p>Sprzeczne kotwice (<code class="docutils literal notranslate"><span class="pre">fill</span></code> + <code class="docutils literal notranslate"><span class="pre">top/bottom/left/right</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TextList</span></code>/<code class="docutils literal notranslate"><span class="pre">MultilineTextEdit</span></code> bez pary <strong>VerticalScrollBar</strong> (gdy overflow) lub błędne kotwice pary.</p></li>
<li><p>Teksty bez <code class="docutils literal notranslate"><span class="pre">tr()</span></code>; zasoby spoza <code class="docutils literal notranslate"><span class="pre">data/</span></code>.</p></li>
</ul>
<p><strong>Ostrzeżenia (⚠️):</strong></p>
<ul class="simple">
<li><p>Brak <code class="docutils literal notranslate"><span class="pre">&#64;onEnter/&#64;onEscape</span></code> przy oknie z przyciskami OK/Cancel.</p></li>
<li><p>Brak <code class="docutils literal notranslate"><span class="pre">header</span></code>/<code class="docutils literal notranslate"><span class="pre">footer</span></code> przy złożonych układach (zalecenie porządkowe).</p></li>
<li><p>Nieparzyste marginesy (odstęp od siatki 2 px).<div id="ch-5-8"></div></p></li>
</ul>
</section>
<section id="przyklady-i-edgecases">
<h1>5.8 Przykłady i edge‑cases<a class="headerlink" href="#przyklady-i-edgecases" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Fullscreen tło</strong>: zamiast narzucać <code class="docutils literal notranslate"><span class="pre">size</span></code>, użyj <code class="docutils literal notranslate"><span class="pre">anchors.fill:</span> <span class="pre">parent</span></code> i obraz tła z <code class="docutils literal notranslate"><span class="pre">image-fixed-ratio:</span> <span class="pre">true</span></code> (bez łączenia z ręcznymi kotwicami).</p></li>
<li><p><strong>Lista bez scrolla</strong>: jeśli wiesz, że elementów jest mało — dopuszczalne, ale walidator zasugeruje dodanie scrolla przy overflow.</p></li>
<li><p><strong>Shortcuty</strong>: w <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code> zbinduj strzałki, PageUp/Down do nawigacji po liście; Enter/Escape do akcji.</p></li>
<li><p><strong>Zamykanie okna</strong>: mapuj <code class="docutils literal notranslate"><span class="pre">&#64;onEscape</span></code> na <code class="docutils literal notranslate"><span class="pre">MainController.onCancel()</span></code> — sam kontroler decyduje o <code class="docutils literal notranslate"><span class="pre">:hide()</span></code>/sprzątaniu.</p></li>
<li><p><strong>Nadpisywanie geometrii w stanach</strong>: unikaj modyfikowania <code class="docutils literal notranslate"><span class="pre">anchors/size</span></code> wewnątrz <code class="docutils literal notranslate"><span class="pre">$on/$!on/$focus</span></code> — trzymaj stany stylistyczne (kolor/tekst).</p></li>
</ul>
<div id="ch-6-1"></div>
# 6.1 Struktura i sloty
**StaticMainWindow** to główne okno **statyczne** (bez drag‑move), stosowane m.in. dla ekranów logowania, komunikatów, list oczekiwania. Nie posiada formalnych slotów jak `titlebar/content/footer`, ale zalecamy logiczny podział na: `header`, `content`, `footer` (jako `UIWidget`).
<ul class="simple">
<li><p><strong>header</strong> (opcjonalny): pasek tytułu/toolbar (Label/Buttons).</p></li>
<li><p><strong>content</strong>: główna przestrzeń treści (teksty, listy, formularze, progress).</p></li>
<li><p><strong>footer</strong>: akcje (OK/Cancel) lub status.</p></li>
</ul>
<p>StaticMainWindow nie powinno mieć <strong>innych okien</strong> jako dzieci.<div id="ch-6-2"></div></p>
</section>
<section id="id1">
<h1>6.2 Dozwolone dzieci (macierz)<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Parent: <code class="docutils literal notranslate"><span class="pre">StaticMainWindow</span></code></p></th>
<th class="head"><p>Dopuszczone dzieci</p></th>
<th class="head"><p>Niedozwolone / uwagi</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>root</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>, <code class="docutils literal notranslate"><span class="pre">Panel</span></code>, <code class="docutils literal notranslate"><span class="pre">Label</span></code>, <code class="docutils literal notranslate"><span class="pre">Button</span></code>, <code class="docutils literal notranslate"><span class="pre">TextEdit</span></code>, <code class="docutils literal notranslate"><span class="pre">PasswordTextEdit</span></code>, <code class="docutils literal notranslate"><span class="pre">MultilineTextEdit</span></code>, <code class="docutils literal notranslate"><span class="pre">TextList</span></code>, <code class="docutils literal notranslate"><span class="pre">ComboBox</span></code>, <code class="docutils literal notranslate"><span class="pre">CheckBox</span></code>, <code class="docutils literal notranslate"><span class="pre">ProgressBar</span></code>, <code class="docutils literal notranslate"><span class="pre">VerticalScrollBar</span></code>, <code class="docutils literal notranslate"><span class="pre">HorizontalSeparator</span></code>, <code class="docutils literal notranslate"><span class="pre">TabBar</span></code>, <code class="docutils literal notranslate"><span class="pre">Splitter</span></code></p></td>
<td><p>Inne okna (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>) — ✖</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">header</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Label</span></code>, <code class="docutils literal notranslate"><span class="pre">Button</span></code>, <code class="docutils literal notranslate"><span class="pre">Toolbar</span></code>, <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (ikona)</p></td>
<td><p>Scroll/edytory/listy — ✖</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">content</span></code></p></td>
<td><p>wszystkie elementy panelowe z wiersza root</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*Window</span></code> — ✖; <code class="docutils literal notranslate"><span class="pre">ScrollBar</span></code> tylko jako para do list/tekstów</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">footer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Button</span></code>, <code class="docutils literal notranslate"><span class="pre">Label</span></code>, <code class="docutils literal notranslate"><span class="pre">ProgressBar</span></code></p></td>
<td><p>listy/edytory — ✖</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Scroll pairing</strong>: przy <code class="docutils literal notranslate"><span class="pre">TextList</span></code>/<code class="docutils literal notranslate"><span class="pre">MultilineTextEdit</span></code> dodaj <strong>VerticalScrollBar</strong> (dok po prawej), a treść kotwicz do <code class="docutils literal notranslate"><span class="pre">scroll.left</span></code>.<div id="ch-6-3"></div></p>
</section>
<section id="geometria-i-styl">
<h1>6.3 Geometria i styl<a class="headerlink" href="#geometria-i-styl" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Rozmiar/pozycja</strong>: <code class="docutils literal notranslate"><span class="pre">size:</span> <span class="pre">W</span> <span class="pre">H</span></code> lub anchors; w panelach → auto‑fit szerokości (<code class="docutils literal notranslate"><span class="pre">anchors.left/right:</span> <span class="pre">parent</span></code>, bez <code class="docutils literal notranslate"><span class="pre">width</span></code>).</p></li>
<li><p><strong>Kotwice</strong>: nie łącz <code class="docutils literal notranslate"><span class="pre">anchors.fill:</span> <span class="pre">parent</span></code> z ręcznymi <code class="docutils literal notranslate"><span class="pre">top/bottom/left/right</span></code>.</p></li>
<li><p><strong>Marginesy/padding</strong>: parzyste wartości (snapping 2 px).</p></li>
<li><p><strong>Tło</strong>: <code class="docutils literal notranslate"><span class="pre">background-color</span></code> albo <code class="docutils literal notranslate"><span class="pre">image-source</span></code> (np. ekran powitalny) + <code class="docutils literal notranslate"><span class="pre">image-smooth/fixed-ratio</span></code> w razie potrzeby.</p></li>
<li><p><strong>Teksty</strong>: zawsze <code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code> (STRICT). Zasoby tylko z <code class="docutils literal notranslate"><span class="pre">data/</span></code>.<div id="ch-6-4"></div></p></li>
</ul>
</section>
<section id="id2">
<h1>6.4 Stany i zdarzenia<a class="headerlink" href="#id2" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Zdarzenia</strong>: <code class="docutils literal notranslate"><span class="pre">&#64;onEnter</span></code> (OK/Continue), <code class="docutils literal notranslate"><span class="pre">&#64;onEscape</span></code> (Cancel/Back), <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code> (bindy, np. Enter/Escape/strzałki).</p></li>
<li><p><strong>Stany</strong>: zwykle na <strong>dzieciach</strong> (Button/ListRow), nie na samym <code class="docutils literal notranslate"><span class="pre">StaticMainWindow</span></code>.</p></li>
<li><p><strong>Fokus</strong>: zapewnij fokus pierwszego sensownego dziecka; nawigacja klawiaturą w <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code>.<div id="ch-6-5"></div></p></li>
</ul>
</section>
<section id="id3">
<h1>6.5 Blueprint OTUI (kanoniczny)<a class="headerlink" href="#id3" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>StaticMainWindow
  id: staticMain
  size: 420 320
  anchors.left: parent.left
  anchors.top: parent.top
  margin-top: 6
  margin-left: 6

  background-color: alpha

  @onEnter: StaticController.onConfirm()
  @onEscape: StaticController.onCancel()
  @onSetup: StaticController.onSetup()

  UIWidget
    id: header
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    height: 20

    background-color: #00000066

    Label
      id: title
      anchors.left: parent.left
      anchors.verticalCenter: parent.verticalCenter
      margin-left: 6
      text-auto-resize: true
      !text: tr(&#39;Static Window&#39;)
      font: verdana-11px-rounded

  UIWidget
    id: content
    anchors.left: parent.left
    anchors.right: scroll.left
    anchors.top: header.bottom
    anchors.bottom: footer.top
    padding: 6

    background-color: alpha

    Label
      id: info
      anchors.left: parent.left
      anchors.right: parent.right
      text-wrap: true
      !text: tr(&#39;Please wait...&#39;)
      font: verdana-11px-monochrome

    ProgressBar
      id: progress
      anchors.left: parent.left
      anchors.right: parent.right
      anchors.top: info.bottom
      margin-top: 6

  VerticalScrollBar
    id: scroll
    anchors.right: parent.right
    anchors.top: header.bottom
    anchors.bottom: footer.top
    step: 16

  UIWidget
    id: footer
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    height: 28

    background-color: #00000033

    Button
      id: cancelButton
      anchors.right: parent.right
      anchors.bottom: parent.bottom
      width: 64
      margin-right: 8
      !text: tr(&#39;Cancel&#39;)
      @onClick: StaticController.onCancel()
</pre></div>
</div>
<p><strong>Uwaga</strong>: blueprint jest <strong>STRICT</strong> (brak komentarzy), wcięcia = 2 sp., kolejność sekcji zachowana.<div id="ch-6-6"></div></p>
</section>
<section id="id4">
<h1>6.6 Mapowanie TS ↔ OTUI (serializer)<a class="headerlink" href="#id4" title="Link to this heading">#</a></h1>
<p><strong>Preset (TS)</strong></p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetStaticMainWindow</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;StaticMainWindow&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;staticMain&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">420</span><span class="p">,</span><span class="w"> </span><span class="mf">320</span><span class="p">],</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onEnter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;StaticController.onConfirm()&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onEscape</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;StaticController.onCancel()&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onSetup</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;StaticController.onSetup()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;header&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000066&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textAutoResize</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Static Window&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-rounded&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;content&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;scroll.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;header.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;footer.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textWrap</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Please wait...&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-monochrome&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ProgressBar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;progress&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;info.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;VerticalScrollBar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;header.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;footer.top&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;footer&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">28</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000033&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cancelButton&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">64</span><span class="p">,</span><span class="w"> </span><span class="nx">marginRight</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Cancel&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;StaticController.onCancel()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Serializer</strong>: identyczne reguły jak dla MainWindow — GEOMETRIA→STYL→ZACHOWANIE, <code class="docutils literal notranslate"><span class="pre">text</span></code>→<code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">events</span></code>→<code class="docutils literal notranslate"><span class="pre">&#64;on...</span></code>, stany→<code class="docutils literal notranslate"><span class="pre">$...</span></code>. <strong>Sanityzacja</strong>: <code class="docutils literal notranslate"><span class="pre">ensureStrictOtui()</span></code> przed zapisem.<div id="ch-6-7"></div></p>
</section>
<section id="id5">
<h1>6.7 Walidator (błędy/ostrzeżenia)<a class="headerlink" href="#id5" title="Link to this heading">#</a></h1>
<p><strong>Blokujące (❌):</strong></p>
<ul class="simple">
<li><p>Dziecko typu okno (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>) wewnątrz <code class="docutils literal notranslate"><span class="pre">StaticMainWindow</span></code>.</p></li>
<li><p>ScrollBar w <code class="docutils literal notranslate"><span class="pre">header</span></code>/<code class="docutils literal notranslate"><span class="pre">footer</span></code>.</p></li>
<li><p>Sprzeczne kotwice (<code class="docutils literal notranslate"><span class="pre">fill</span></code> + <code class="docutils literal notranslate"><span class="pre">top/bottom/left/right</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TextList</span></code>/<code class="docutils literal notranslate"><span class="pre">MultilineTextEdit</span></code> bez pary ScrollBar (przy overflow) lub błędne kotwice pary.</p></li>
<li><p>Teksty bez <code class="docutils literal notranslate"><span class="pre">tr()</span></code>; zasoby spoza <code class="docutils literal notranslate"><span class="pre">data/</span></code>.</p></li>
</ul>
<p><strong>Ostrzeżenia (⚠️):</strong></p>
<ul class="simple">
<li><p>Brak <code class="docutils literal notranslate"><span class="pre">&#64;onEnter/&#64;onEscape</span></code> w ekranie wymagającym akcji (OK/Cancel).</p></li>
<li><p>Brak <code class="docutils literal notranslate"><span class="pre">header</span></code>/<code class="docutils literal notranslate"><span class="pre">footer</span></code> przy złożonych układach.</p></li>
<li><p>Nieparzyste marginesy (snapping 2 px).<div id="ch-6-8"></div></p></li>
</ul>
</section>
<section id="id6">
<h1>6.8 Przykłady i edge‑cases<a class="headerlink" href="#id6" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Ekran oczekiwania</strong>: <code class="docutils literal notranslate"><span class="pre">Label</span></code> (wrap) + <code class="docutils literal notranslate"><span class="pre">ProgressBar</span></code>; <code class="docutils literal notranslate"><span class="pre">Cancel</span></code> w <code class="docutils literal notranslate"><span class="pre">footer</span></code>; brak list — ScrollBar opcjonalny.</p></li>
<li><p><strong>MOTD / długi komunikat</strong>: <code class="docutils literal notranslate"><span class="pre">MultilineTextEdit</span></code> + <strong>VerticalScrollBar</strong>; <code class="docutils literal notranslate"><span class="pre">&#64;onEnter</span></code> = Continue, <code class="docutils literal notranslate"><span class="pre">&#64;onEscape</span></code> = Back.</p></li>
<li><p><strong>Tło pełnoekranowe</strong>: <code class="docutils literal notranslate"><span class="pre">image-source</span></code> + <code class="docutils literal notranslate"><span class="pre">image-fixed-ratio</span></code>; zakotwicz <code class="docutils literal notranslate"><span class="pre">anchors.fill:</span> <span class="pre">parent</span></code> (bez mieszania z krawędziami).</p></li>
<li><p><strong>Fokus</strong>: ustaw na pierwszy przycisk/edytor; zapewnij strzałki/Enter/Escape w <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code>.</p></li>
</ul>
<div id="ch-7-1"></div>
# 7.1 Struktura (titlebar/content/footer)
**MiniWindow** to lekkie, modułowe okno narzędziowe. Składa się z trzech logicznych obszarów:
- **`titlebar`** — nagłówek z tytułem i przyciskami (wymagane: **minimize** i **close**; opcjonalne: **back**, **pin**).
- **`content`** — główna przestrzeń robocza (formulare, listy, panele).
- **`footer`** — przyciski akcji (OK/Cancel/Apply) lub status.
<p><strong>Zakazy</strong>: w <code class="docutils literal notranslate"><span class="pre">titlebar/footer</span></code> nie umieszczaj <code class="docutils literal notranslate"><span class="pre">ScrollBar</span></code>, list ani edytorów; w <code class="docutils literal notranslate"><span class="pre">content</span></code> nie osadzaj innych okien (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>).<div id="ch-7-2"></div></p>
</section>
<section id="titlebar-minimize-close-dragarea">
<h1>7.2 Titlebar: minimize/close, drag‑area<a class="headerlink" href="#titlebar-minimize-close-dragarea" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Minimize</strong> zwija/rozwija <code class="docutils literal notranslate"><span class="pre">content</span></code> i <code class="docutils literal notranslate"><span class="pre">footer</span></code> (zmiana widoczności/wysokości); stan może być odzwierciedlany na przycisku (np. <code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('-')</span></code>/<code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('+')</span></code>).</p></li>
<li><p><strong>Close</strong> wywołuje akcję zamknięcia (ukrycie/usunięcie okna przez kontroler Lua).</p></li>
<li><p><strong>Back/Pin</strong> (opcjonalnie) — stosowane w wariantach kontenerowych/narzędziowych.</p></li>
<li><p><strong>Drag‑area</strong>: <code class="docutils literal notranslate"><span class="pre">titlebar</span></code> może pełnić obszar przeciągania (obsługa po stronie klienta/kontrolera).</p></li>
</ul>
<p><strong>Dozwolone dzieci <code class="docutils literal notranslate"><span class="pre">titlebar</span></code></strong>: <code class="docutils literal notranslate"><span class="pre">Label</span></code> (tytuł), <code class="docutils literal notranslate"><span class="pre">Button</span></code> (min/close/back/pin), <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (ikona).<div id="ch-7-3"></div></p>
</section>
<section id="autofit-width-i-docking">
<h1>7.3 Auto‑fit width i docking<a class="headerlink" href="#autofit-width-i-docking" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Gdy <code class="docutils literal notranslate"><span class="pre">MiniWindow</span></code> jest osadzony w panelu/kontenerze, <strong>domyślnie</strong> rozciąga się na szerokość rodzica: ustaw <code class="docutils literal notranslate"><span class="pre">anchors.left/right:</span> <span class="pre">parent</span></code> i usuń <code class="docutils literal notranslate"><span class="pre">width</span></code>.</p></li>
<li><p>Odstępy od krawędzi zapewnij przez <code class="docutils literal notranslate"><span class="pre">margin-*</span></code> (parzyste wartości — snapping 2 px).</p></li>
<li><p>Unikaj łączenia <code class="docutils literal notranslate"><span class="pre">anchors.fill:</span> <span class="pre">parent</span></code> z ręcznymi kotwicami (<code class="docutils literal notranslate"><span class="pre">top/bottom/left/right</span></code>).<div id="ch-7-4"></div></p></li>
</ul>
</section>
<section id="id7">
<h1>7.4 Stany i zdarzenia<a class="headerlink" href="#id7" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Zdarzenia</strong>: <code class="docutils literal notranslate"><span class="pre">&#64;onEnter</span></code> (OK/Apply), <code class="docutils literal notranslate"><span class="pre">&#64;onEscape</span></code> (Cancel/Close), <code class="docutils literal notranslate"><span class="pre">&#64;onClick</span></code> (przyciski titlebara), <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code> (bindy klawiatury).</p></li>
<li><p><strong>Minimize toggle</strong>: kontroler Lua przełącza widoczność <code class="docutils literal notranslate"><span class="pre">content</span></code> i <code class="docutils literal notranslate"><span class="pre">footer</span></code>.</p></li>
<li><p><strong>Stany <code class="docutils literal notranslate"><span class="pre">$on/$!on</span></code></strong>: stosuj głównie do przycisków (np. podświetlenie aktywności), nie do geometrii okna.</p></li>
<li><p><strong>Fokus</strong>: po otwarciu ustaw fokus na pierwszym sensownym dziecku (<code class="docutils literal notranslate"><span class="pre">content</span></code>).<div id="ch-7-5"></div></p></li>
</ul>
</section>
<section id="blueprint-otui-kanoniczny-strict">
<h1>7.5 Blueprint OTUI (kanoniczny, STRICT)<a class="headerlink" href="#blueprint-otui-kanoniczny-strict" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>MiniWindow &lt; MainWindow
  id: miniWindow
  size: 260 180
  anchors.left: parent.left
  anchors.top: parent.top
  margin-top: 6
  margin-left: 6

  background-color: alpha

  @onEnter: MiniWindowController.onConfirm()
  @onEscape: MiniWindowController.onCancel()

  UIWidget
    id: titlebar
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    height: 20

    background-color: #00000066

    Label
      id: title
      anchors.left: parent.left
      anchors.verticalCenter: parent.verticalCenter
      margin-left: 6
      text-auto-resize: true
      !text: tr(&#39;Mini Window&#39;)
      font: verdana-11px-rounded

    Button
      id: minimizeBtn
      anchors.right: closeBtn.left
      anchors.verticalCenter: parent.verticalCenter
      width: 16
      !text: tr(&#39;-&#39;)
      @onClick: MiniWindowController.onToggleMinimize()

    Button
      id: closeBtn
      anchors.right: parent.right
      anchors.verticalCenter: parent.verticalCenter
      width: 16
      !text: tr(&#39;x&#39;)
      @onClick: MiniWindowController.onClose()

  UIWidget
    id: content
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: titlebar.bottom
    anchors.bottom: footer.top
    padding: 6

    background-color: alpha

  UIWidget
    id: footer
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    height: 28

    background-color: #00000033

    Button
      id: okButton
      anchors.right: cancelButton.left
      anchors.bottom: parent.bottom
      width: 64
      margin-right: 8
      !text: tr(&#39;Ok&#39;)
      @onClick: MiniWindowController.onConfirm()

    Button
      id: cancelButton
      anchors.right: parent.right
      anchors.bottom: parent.bottom
      width: 64
      margin-right: 8
      !text: tr(&#39;Cancel&#39;)
      @onClick: MiniWindowController.onCancel()
</pre></div>
</div>
<div id="ch-7-6"></div>
</section>
<section id="id8">
<h1>7.6 Mapowanie TS ↔ OTUI (serializer)<a class="headerlink" href="#id8" title="Link to this heading">#</a></h1>
<p><strong>Preset (TS)</strong></p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetMiniWindow</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MiniWindow&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MainWindow&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;miniWindow&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">260</span><span class="p">,</span><span class="w"> </span><span class="mf">180</span><span class="p">],</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onEnter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MiniWindowController.onConfirm()&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onEscape</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MiniWindowController.onCancel()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;titlebar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000066&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textAutoResize</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Mini Window&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-rounded&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;minimizeBtn&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;closeBtn.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;-&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MiniWindowController.onToggleMinimize()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;closeBtn&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;x&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MiniWindowController.onClose()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;content&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;titlebar.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;footer.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;footer&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">28</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000033&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;okButton&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cancelButton.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">64</span><span class="p">,</span><span class="w"> </span><span class="nx">marginRight</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Ok&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MiniWindowController.onConfirm()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cancelButton&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">64</span><span class="p">,</span><span class="w"> </span><span class="nx">marginRight</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Cancel&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MiniWindowController.onCancel()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Serializer</strong>: emituj GEOMETRIA→STYL→ZACHOWANIE; <code class="docutils literal notranslate"><span class="pre">style.text</span></code>→<code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code>; <code class="docutils literal notranslate"><span class="pre">events</span></code>→<code class="docutils literal notranslate"><span class="pre">&#64;on...</span></code>; stany→<code class="docutils literal notranslate"><span class="pre">$...</span></code>. <strong>Sanityzacja</strong>: <code class="docutils literal notranslate"><span class="pre">ensureStrictOtui()</span></code> przed zapisem.<div id="ch-7-7"></div></p>
</section>
<section id="id9">
<h1>7.7 Walidator (błędy/ostrzeżenia)<a class="headerlink" href="#id9" title="Link to this heading">#</a></h1>
<p><strong>Blokujące (❌):</strong></p>
<ul class="simple">
<li><p>Brak przycisków <strong>minimize</strong> i <strong>close</strong> w <code class="docutils literal notranslate"><span class="pre">titlebar</span></code>.</p></li>
<li><p>Niedozwolone dzieci w <code class="docutils literal notranslate"><span class="pre">titlebar/footer</span></code> (scroll, listy, edytory).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">content</span></code> zawiera inne okno (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>).</p></li>
<li><p>Sprzeczne kotwice (<code class="docutils literal notranslate"><span class="pre">fill</span></code> + krawędzie).</p></li>
<li><p>Teksty bez <code class="docutils literal notranslate"><span class="pre">tr()</span></code>; zasoby spoza <code class="docutils literal notranslate"><span class="pre">data/</span></code>.</p></li>
</ul>
<p><strong>Ostrzeżenia (⚠️):</strong></p>
<ul class="simple">
<li><p>Brak <code class="docutils literal notranslate"><span class="pre">&#64;onEnter/&#64;onEscape</span></code> dla okna z przyciskami akcji.</p></li>
<li><p>Brak auto‑fit width (okno dokowane ma <code class="docutils literal notranslate"><span class="pre">width</span></code>).</p></li>
<li><p>Nieparzyste marginesy (snapping 2 px).<div id="ch-7-8"></div></p></li>
</ul>
</section>
<section id="id10">
<h1>7.8 Przykłady i edge‑cases<a class="headerlink" href="#id10" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Lista w content</strong>: wstaw <code class="docutils literal notranslate"><span class="pre">TextList</span></code> i dokołkuj <code class="docutils literal notranslate"><span class="pre">VerticalScrollBar</span></code> jako <strong>sibling</strong> po prawej; ustaw <code class="docutils literal notranslate"><span class="pre">content.anchors.right:</span> <span class="pre">scroll.left</span></code>.</p></li>
<li><p><strong>Kolaps/rozwin</strong>: <code class="docutils literal notranslate"><span class="pre">onToggleMinimize()</span></code> ukrywa/pokazuje <code class="docutils literal notranslate"><span class="pre">content</span></code> i <code class="docutils literal notranslate"><span class="pre">footer</span></code>; przycisk zmienia label <code class="docutils literal notranslate"><span class="pre">'-'</span></code>/<code class="docutils literal notranslate"><span class="pre">'+'</span></code>.</p></li>
<li><p><strong>Dialog‑like</strong>: <code class="docutils literal notranslate"><span class="pre">MiniWindow</span></code> może pełnić rolę prostego dialogu — dodaj <code class="docutils literal notranslate"><span class="pre">&#64;onEnter/&#64;onEscape</span></code> i układ przycisków w <code class="docutils literal notranslate"><span class="pre">footer</span></code>.</p></li>
<li><p><strong>Wiele MiniWindow</strong>: każde musi mieć unikalne <code class="docutils literal notranslate"><span class="pre">id</span></code>; edytor powinien zapobiegać kolizjom przy imporcie.</p></li>
</ul>
<div id="ch-8-1"></div>
# 8.1 Struktura (titlebar/content)
**ContainerWindow** służy do prezentacji i operacji na zawartości (sloty/elementy). Składa się z:
- **`titlebar`** — nagłówek z przyciskami **back/pin/minimize/close** i tytułem,
- **`content`** — obszar siatki slotów (przewijalny przy overflow).
<p><strong>Zakazy</strong>: w <code class="docutils literal notranslate"><span class="pre">titlebar</span></code> brak list/edytorów/scrollbarów; w <code class="docutils literal notranslate"><span class="pre">content</span></code> brak okien‑dzieci (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>).</p>
<p><strong>Auto‑fit width</strong>: po osadzeniu w panelu okno powinno rozciągać się poziomo (<code class="docutils literal notranslate"><span class="pre">anchors.left/right:</span> <span class="pre">parent</span></code>), odstępy przez <code class="docutils literal notranslate"><span class="pre">margin-*</span></code>.<div id="ch-8-2"></div></p>
</section>
<section id="titlebar-back-pin-min-close">
<h1>8.2 Titlebar: back/pin/min/close<a class="headerlink" href="#titlebar-back-pin-min-close" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Back</strong> — powrót do poprzedniego kontenera (kontroler Lua zarządza stosem/nawigacją).</p></li>
<li><p><strong>Pin/Lock</strong> — przypina okno (zachowanie w kontrolerze; może wpływać na z‑order/dokowanie).</p></li>
<li><p><strong>Minimize</strong> — zwija <code class="docutils literal notranslate"><span class="pre">content</span></code> (i ukrywa ewentualny <code class="docutils literal notranslate"><span class="pre">footer</span></code> jeśli występuje), stan sygnalizowany na przycisku.</p></li>
<li><p><strong>Close</strong> — ukrywa/zamyka okno przez kontroler.</p></li>
</ul>
<p><strong>Dozwolone dzieci <code class="docutils literal notranslate"><span class="pre">titlebar</span></code></strong>: <code class="docutils literal notranslate"><span class="pre">Label</span></code> (tytuł), <code class="docutils literal notranslate"><span class="pre">Button</span></code> (back/pin/min/close), <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (ikona).</p>
<div id="ch-8-3"></div>
</section>
<section id="content-siatka-slotow-i-dnd">
<h1>8.3 Content: siatka slotów i DnD<a class="headerlink" href="#content-siatka-slotow-i-dnd" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Siatka</strong>: projektowana jako <code class="docutils literal notranslate"><span class="pre">UIWidget</span> <span class="pre">id:</span> <span class="pre">grid</span></code>, z <strong>powtarzanymi</strong> dziećmi <code class="docutils literal notranslate"><span class="pre">SlotWidget</span> <span class="pre">&lt;</span> <span class="pre">UIWidget</span></code> (stały rozmiar i odstępy).</p></li>
<li><p><strong>Rozmieszczenie</strong>: edytor dba o snapping (2 px) i kolumny/wiersze; runtime może dynamicznie przepinać sloty, ale eksport zachowuje deterministyczny układ.</p></li>
<li><p><strong>DnD</strong>: źródło/cel tylko w <code class="docutils literal notranslate"><span class="pre">content</span></code> (sloty). Podświetlenie slotu podczas hover/mocy przeniesienia realizowane stanami na <code class="docutils literal notranslate"><span class="pre">SlotWidget</span></code> lub przez kontroler Lua.</p></li>
<li><p><strong>Scroll</strong>: przy overflow dodaj <strong>VerticalScrollBar</strong> jako sibling po prawej; <code class="docutils literal notranslate"><span class="pre">grid.anchors.right:</span> <span class="pre">scroll.left</span></code>.</p></li>
</ul>
<div id="ch-8-4"></div>
</section>
<section id="scroll-i-overflow">
<h1>8.4 Scroll i overflow<a class="headerlink" href="#scroll-i-overflow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>VerticalScrollBar</strong> dokowany do prawej krawędzi <code class="docutils literal notranslate"><span class="pre">ContainerWindow</span></code>; <code class="docutils literal notranslate"><span class="pre">grid</span></code> kotwiczy <code class="docutils literal notranslate"><span class="pre">right:</span> <span class="pre">scroll.left</span></code>.</p></li>
<li><p><strong>Step/pixels</strong>: ustaw <code class="docutils literal notranslate"><span class="pre">step</span></code> zgodnie z wysokością slotu (np. 32/36), aby skok przewijania pokrywał rząd.</p></li>
<li><p><strong>Samotny ScrollBar</strong> lub listy/edytory w <code class="docutils literal notranslate"><span class="pre">titlebar</span></code> — błąd walidacji.</p></li>
</ul>
<div id="ch-8-5"></div>
</section>
<section id="id11">
<h1>8.5 Blueprint OTUI (kanoniczny, STRICT)<a class="headerlink" href="#id11" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>ContainerWindow &lt; MainWindow
  id: containerWindow
  size: 300 220
  anchors.left: parent.left
  anchors.top: parent.top
  margin-top: 6
  margin-left: 6

  background-color: alpha

  @onEnter: ContainerController.onConfirm()
  @onEscape: ContainerController.onBack()

  UIWidget
    id: titlebar
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    height: 20

    background-color: #00000066

    Label
      id: title
      anchors.left: parent.left
      anchors.verticalCenter: parent.verticalCenter
      margin-left: 6
      text-auto-resize: true
      !text: tr(&#39;Container&#39;)
      font: verdana-11px-rounded

    Button
      id: backBtn
      anchors.right: pinBtn.left
      anchors.verticalCenter: parent.verticalCenter
      width: 20
      !text: tr(&#39;&lt;&#39;)
      @onClick: ContainerController.onBack()

    Button
      id: pinBtn
      anchors.right: minimizeBtn.left
      anchors.verticalCenter: parent.verticalCenter
      width: 20
      !text: tr(&#39;*&#39;)
      @onClick: ContainerController.onTogglePin()

    Button
      id: minimizeBtn
      anchors.right: closeBtn.left
      anchors.verticalCenter: parent.verticalCenter
      width: 16
      !text: tr(&#39;-&#39;)
      @onClick: ContainerController.onToggleMinimize()

    Button
      id: closeBtn
      anchors.right: parent.right
      anchors.verticalCenter: parent.verticalCenter
      width: 16
      !text: tr(&#39;x&#39;)
      @onClick: ContainerController.onClose()

  UIWidget
    id: content
    anchors.left: parent.left
    anchors.right: scroll.left
    anchors.top: titlebar.bottom
    anchors.bottom: parent.bottom
    padding: 6

    background-color: alpha

    UIWidget
      id: grid
      anchors.left: parent.left
      anchors.top: parent.top
      width: 1
      height: 1

      SlotWidget &lt; UIWidget
        id: slot1
        size: 36 36
        background-color: #00000033

      SlotWidget &lt; UIWidget
        id: slot2
        anchors.left: slot1.right
        anchors.top: slot1.top
        margin-left: 4
        size: 36 36
        background-color: #00000033

  VerticalScrollBar
    id: scroll
    anchors.right: parent.right
    anchors.top: titlebar.bottom
    anchors.bottom: parent.bottom
    step: 36
</pre></div>
</div>
<div id="ch-8-6"></div>
</section>
<section id="id12">
<h1>8.6 Mapowanie TS ↔ OTUI (serializer)<a class="headerlink" href="#id12" title="Link to this heading">#</a></h1>
<p><strong>Preset (TS)</strong></p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetContainerWindow</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ContainerWindow&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MainWindow&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;containerWindow&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">300</span><span class="p">,</span><span class="w"> </span><span class="mf">220</span><span class="p">],</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onEnter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ContainerController.onConfirm()&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onEscape</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ContainerController.onBack()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;titlebar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000066&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textAutoResize</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Container&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-rounded&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;backBtn&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;pinBtn.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ContainerController.onBack()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;pinBtn&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;minimizeBtn.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;*&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ContainerController.onTogglePin()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;minimizeBtn&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;closeBtn.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;-&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ContainerController.onToggleMinimize()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;closeBtn&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;x&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ContainerController.onClose()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;content&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;scroll.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;titlebar.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;grid&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;SlotWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;slot1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">36</span><span class="p">,</span><span class="mf">36</span><span class="p">]</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000033&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;SlotWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;slot2&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;slot1.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;slot1.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">36</span><span class="p">,</span><span class="mf">36</span><span class="p">]</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000033&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]}</span>
<span class="w">      </span><span class="p">]},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;VerticalScrollBar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;titlebar.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Serializer</strong>: GEOMETRIA→STYL→ZACHOWANIE; <code class="docutils literal notranslate"><span class="pre">style.text</span></code>→<code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code>; <code class="docutils literal notranslate"><span class="pre">events</span></code>→<code class="docutils literal notranslate"><span class="pre">&#64;on...</span></code>. <strong>Sanityzacja</strong>: <code class="docutils literal notranslate"><span class="pre">ensureStrictOtui()</span></code>.</p>
<p><strong>Uwaga</strong>: <code class="docutils literal notranslate"><span class="pre">SlotWidget</span> <span class="pre">&lt;</span> <span class="pre">UIWidget</span></code> to <strong>lokalna klasa stylu</strong> w pliku; w realnym projekcie możesz podmienić na własny typ slotu.<div id="ch-8-7"></div></p>
</section>
<section id="id13">
<h1>8.7 Walidator (błędy/ostrzeżenia)<a class="headerlink" href="#id13" title="Link to this heading">#</a></h1>
<p><strong>Blokujące (❌):</strong></p>
<ul class="simple">
<li><p>Brak przycisku <strong>back</strong> w <code class="docutils literal notranslate"><span class="pre">titlebar</span></code> (nawigacja kontenera).</p></li>
<li><p>Niedozwolone dzieci w <code class="docutils literal notranslate"><span class="pre">titlebar</span></code> (scroll/listy/edytory).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">content</span></code> zawiera inne okno (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VerticalScrollBar</span></code> bez sparowanej treści (<code class="docutils literal notranslate"><span class="pre">grid</span></code>) lub odwrotnie (overflow bez scrolla).</p></li>
<li><p>Sprzeczne kotwice (<code class="docutils literal notranslate"><span class="pre">fill</span></code> + krawędzie). Teksty bez <code class="docutils literal notranslate"><span class="pre">tr()</span></code>; zasoby spoza <code class="docutils literal notranslate"><span class="pre">data/</span></code>.</p></li>
</ul>
<p><strong>Ostrzeżenia (⚠️):</strong></p>
<ul class="simple">
<li><p>Brak <code class="docutils literal notranslate"><span class="pre">pin</span></code>/<code class="docutils literal notranslate"><span class="pre">minimize</span></code>/<code class="docutils literal notranslate"><span class="pre">close</span></code> w <code class="docutils literal notranslate"><span class="pre">titlebar</span></code> (wymagane zależnie od projektu).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">step</span></code> scrolla nie odpowiada wysokości wiersza slotów (nieprzyjemne przewijanie).</p></li>
<li><p>Nieparzyste marginesy/spacing (snapping 2 px).<div id="ch-8-8"></div></p></li>
</ul>
</section>
<section id="id14">
<h1>8.8 Przykłady i edge‑cases<a class="headerlink" href="#id14" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Powrót (back)</strong>: <code class="docutils literal notranslate"><span class="pre">ContainerController.onBack()</span></code> przywraca poprzedni kontener (stack), a <code class="docutils literal notranslate"><span class="pre">&#64;onEscape</span></code> mapuje się na tę samą akcję.</p></li>
<li><p><strong>Pin/Lock</strong>: przełącza stan „przypięty” okna; w <code class="docutils literal notranslate"><span class="pre">$on</span></code> przycisku możesz zmienić kolor/ikonę.</p></li>
<li><p><strong>Overflow</strong>: przy dodaniu N+1 rzędu slotów → edytor proponuje VerticalScrollBar i kotwice <code class="docutils literal notranslate"><span class="pre">grid.right:</span> <span class="pre">scroll.left</span></code>.</p></li>
<li><p><strong>DnD</strong>: slot w stanie „hover” (<code class="docutils literal notranslate"><span class="pre">$focus</span></code> lub własny stan logiczny) zmienia tło; kontroler waliduje dozwolone dropy.</p></li>
<li><p><strong>Minimalne rozmiary slotu</strong>: ≥32×32 (lub projektowe), spacing ≥4 px — zapewnij spójność siatki.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id15">
<h1>9. DialogWindow<a class="headerlink" href="#id15" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-9-1"><span class="xref myst">9.1 Struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-9-2"><span class="xref myst">9.2 Enter/Escape (OK/Cancel)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-9-3"><span class="xref myst">9.3 Modalność i fokus</span></a></p></li>
<li><p><a class="reference internal" href="#ch-9-4"><span class="xref myst">9.4 Blueprint OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-9-5"><span class="xref myst">9.5 Preset TS (serializer‑ready)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-9-6"><span class="xref myst">9.6 Walidator (błędy/ostrzeżenia)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-9-7"><span class="xref myst">9.7 Przykłady i edge‑cases</span></a></p></li>
</ul>
<div id="ch-9-1"></div>
</section>
<section id="struktura">
<h1>9.1 Struktura<a class="headerlink" href="#struktura" title="Link to this heading">#</a></h1>
<p><strong>DialogWindow</strong> to lekkie okno dialogowe do potwierdzeń, komunikatów i prostych promptów.</p>
<ul class="simple">
<li><p>Obszary: <code class="docutils literal notranslate"><span class="pre">titlebar</span></code>, <code class="docutils literal notranslate"><span class="pre">content</span></code>, <code class="docutils literal notranslate"><span class="pre">footer</span></code> (analogicznie do MiniWindow).</p></li>
<li><p>Wymagane skróty: <strong>Enter = OK</strong>, <strong>Escape = Cancel</strong>.</p></li>
<li><p>Zakazy: brak okien‑dzieci (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>) w <code class="docutils literal notranslate"><span class="pre">content</span></code>; brak list/edytorów/scrolla w <code class="docutils literal notranslate"><span class="pre">titlebar</span></code>/<code class="docutils literal notranslate"><span class="pre">footer</span></code>.</p></li>
</ul>
<div id="ch-9-2"></div>
</section>
<section id="enter-escape-ok-cancel">
<h1>9.2 Enter/Escape (OK/Cancel)<a class="headerlink" href="#enter-escape-ok-cancel" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;onEnter</span></code> → akcja domyślna (OK/Apply).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;onEscape</span></code> → anulowanie/zamknięcie.</p></li>
<li><p>Edytor wymusza obecność <strong>co najmniej jednego</strong> przycisku w <code class="docutils literal notranslate"><span class="pre">footer</span></code> i mapuje go na Enter/Escape zgodnie z rolą.</p></li>
</ul>
<div id="ch-9-3"></div>
</section>
<section id="modalnosc-i-fokus">
<h1>9.3 Modalność i fokus<a class="headerlink" href="#modalnosc-i-fokus" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Modalność: opcjonalna (np. przez overlay modułu).</p></li>
<li><p>Po otwarciu ustaw fokus na domyślny przycisk OK lub pierwsze pole edycji.</p></li>
<li><p>Zamknięcie: kontroler Lua decyduje o <code class="docutils literal notranslate"><span class="pre">:hide()</span></code> i sprzątaniu zasobów.</p></li>
</ul>
<div id="ch-9-4"></div>
</section>
<section id="blueprint-otui-strict">
<h1>9.4 Blueprint OTUI (STRICT)<a class="headerlink" href="#blueprint-otui-strict" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>DialogWindow &lt; MainWindow
  id: dialog
  size: 300 140
  anchors.left: parent.left
  anchors.top: parent.top
  margin-top: 8
  margin-left: 8

  background-color: alpha

  @onEnter: DialogController.onOk()
  @onEscape: DialogController.onCancel()

  UIWidget
    id: titlebar
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    height: 20

    background-color: #00000066

    Label
      id: title
      anchors.left: parent.left
      anchors.verticalCenter: parent.verticalCenter
      margin-left: 6
      text-auto-resize: true
      !text: tr(&#39;Dialog&#39;)
      font: verdana-11px-rounded

  UIWidget
    id: content
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: titlebar.bottom
    anchors.bottom: footer.top
    padding: 8

    background-color: alpha

    Label
      id: message
      anchors.left: parent.left
      anchors.right: parent.right
      text-wrap: true
      !text: tr(&#39;Are you sure?&#39;)
      font: verdana-11px-monochrome

  UIWidget
    id: footer
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    height: 32

    background-color: #00000033

    Button
      id: okButton
      anchors.right: cancelButton.left
      anchors.bottom: parent.bottom
      width: 72
      margin-right: 8
      !text: tr(&#39;Ok&#39;)
      @onClick: DialogController.onOk()

    Button
      id: cancelButton
      anchors.right: parent.right
      anchors.bottom: parent.bottom
      width: 72
      margin-right: 8
      !text: tr(&#39;Cancel&#39;)
      @onClick: DialogController.onCancel()
</pre></div>
</div>
<div id="ch-9-5"></div>
</section>
<section id="preset-ts-serializerready">
<h1>9.5 Preset TS (serializer‑ready)<a class="headerlink" href="#preset-ts-serializerready" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetDialogWindow</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;DialogWindow&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MainWindow&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;dialog&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">300</span><span class="p">,</span><span class="mf">140</span><span class="p">],</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="p">,</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onEnter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;DialogController.onOk()&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onEscape</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;DialogController.onCancel()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;titlebar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000066&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textAutoResize</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Dialog&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-rounded&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;content&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;titlebar.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;footer.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textWrap</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Are you sure?&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-monochrome&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;footer&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">32</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000033&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;okButton&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cancelButton.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">72</span><span class="p">,</span><span class="w"> </span><span class="nx">marginRight</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Ok&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;DialogController.onOk()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cancelButton&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">72</span><span class="p">,</span><span class="w"> </span><span class="nx">marginRight</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Cancel&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;DialogController.onCancel()&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-9-6"></div>
</section>
<section id="id16">
<h1>9.6 Walidator (błędy/ostrzeżenia)<a class="headerlink" href="#id16" title="Link to this heading">#</a></h1>
<p><strong>Blokujące (❌):</strong> brak <code class="docutils literal notranslate"><span class="pre">&#64;onEnter/&#64;onEscape</span></code>; brak przycisków w <code class="docutils literal notranslate"><span class="pre">footer</span></code> lub brak mapowania OK/Escape; dzieci niedozwolone w <code class="docutils literal notranslate"><span class="pre">titlebar/footer</span></code> (listy/edytory/scroll); <code class="docutils literal notranslate"><span class="pre">*Window</span></code> w <code class="docutils literal notranslate"><span class="pre">content</span></code>; sprzeczne kotwice; brak <code class="docutils literal notranslate"><span class="pre">tr()</span></code>; zasoby spoza <code class="docutils literal notranslate"><span class="pre">data/</span></code>.</p>
<p><strong>Ostrzeżenia (⚠️):</strong> brak auto‑fit w poziomie po dokowaniu; nieparzyste marginesy/spacing.</p>
<div id="ch-9-7"></div>
</section>
<section id="id17">
<h1>9.7 Przykłady i edge‑cases<a class="headerlink" href="#id17" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Prompt z <code class="docutils literal notranslate"><span class="pre">TextEdit</span></code>: pole w <code class="docutils literal notranslate"><span class="pre">content</span></code> + mapowanie Enter/Escape na OK/Cancel.</p></li>
<li><p>Długi tekst: <code class="docutils literal notranslate"><span class="pre">MultilineTextEdit</span></code> + <strong>VerticalScrollBar</strong> (sibling) i wrapping label z leadem.</p></li>
<li><p>Dialog‑potwierdzenie otwierany z MiniWindow: fokus od razu na OK; Escape zamyka bez skutków ubocznych.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id18">
<h1>10. Titlebar<a class="headerlink" href="#id18" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-10-1"><span class="xref myst">10.1 Ikona, tytuł, przyciski</span></a></p></li>
<li><p><a class="reference internal" href="#ch-10-2"><span class="xref myst">10.2 Slot i dozwolone dzieci</span></a></p></li>
<li><p><a class="reference internal" href="#ch-10-3"><span class="xref myst">10.3 Drag‑move i fokus</span></a></p></li>
<li><p><a class="reference internal" href="#ch-10-4"><span class="xref myst">10.4 Blueprint OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-10-5"><span class="xref myst">10.5 Preset TS (warianty back/pin)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-10-6"><span class="xref myst">10.6 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-10-7"><span class="xref myst">10.7 Integracja (Lua glue)</span></a></p></li>
</ul>
<div id="ch-10-1"></div>
</section>
<section id="ikona-tytul-przyciski">
<h1>10.1 Ikona, tytuł, przyciski<a class="headerlink" href="#ikona-tytul-przyciski" title="Link to this heading">#</a></h1>
<p><strong>Titlebar</strong> to pasek nagłówka okna. Typowe elementy:</p>
<ul class="simple">
<li><p><strong>Ikona</strong> (<code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> z obrazem) — opcjonalna z lewej.</p></li>
<li><p><strong>Tytuł</strong> (<code class="docutils literal notranslate"><span class="pre">Label</span></code>) — <code class="docutils literal notranslate"><span class="pre">text-auto-resize:</span> <span class="pre">true</span></code>, wyrównanie do lewej.</p></li>
<li><p><strong>Przyciski</strong> (<code class="docutils literal notranslate"><span class="pre">Button</span></code>) — po prawej: <strong>minimize</strong>, <strong>close</strong>, opcjonalnie <strong>back</strong>, <strong>pin</strong>.</p></li>
<li><p>Wysokość stała (np. 20 px); tło/kolor zgodne z motywem.</p></li>
</ul>
<div id="ch-10-2"></div>
</section>
<section id="slot-i-dozwolone-dzieci">
<h1>10.2 Slot i dozwolone dzieci<a class="headerlink" href="#slot-i-dozwolone-dzieci" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Titlebar jest <strong>wydzielonym <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code></strong> (slot) wewnątrz okna (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>).</p></li>
<li><p>Dozwolone dzieci: <code class="docutils literal notranslate"><span class="pre">Label</span></code>, <code class="docutils literal notranslate"><span class="pre">Button</span></code>, <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (ikona).</p></li>
<li><p>Zakazane: listy, edytory, ScrollBary i inne okna.</p></li>
<li><p>Przyciski powinny mieć jednolite szerokości (16–20 px) i kotwice do prawej krawędzi.</p></li>
</ul>
<div id="ch-10-3"></div>
</section>
<section id="dragmove-i-fokus">
<h1>10.3 Drag‑move i fokus<a class="headerlink" href="#dragmove-i-fokus" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Obszar przeciągania może obejmować cały <code class="docutils literal notranslate"><span class="pre">titlebar</span></code> (obsługa po stronie klienta/kontrolera).</p></li>
<li><p>Klik w tytuł/puste pole nie powinien zabierać fokusu kluczowym elementom w <code class="docutils literal notranslate"><span class="pre">content</span></code>.</p></li>
<li><p>Skróty dla przycisków można zmapować w <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code>/Lua.</p></li>
</ul>
<div id="ch-10-4"></div>
</section>
<section id="id19">
<h1>10.4 Blueprint OTUI (STRICT)<a class="headerlink" href="#id19" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>TitlebarWidget &lt; UIWidget
  id: titlebar
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: parent.top
  height: 20

  background-color: #00000066

  Label
    id: title
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 6
    text-auto-resize: true
    !text: tr(&#39;Title&#39;)
    font: verdana-11px-rounded

  Button
    id: minimizeBtn
    anchors.right: closeBtn.left
    anchors.verticalCenter: parent.verticalCenter
    width: 16
    !text: tr(&#39;-&#39;)

  Button
    id: closeBtn
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    width: 16
    !text: tr(&#39;x&#39;)
</pre></div>
</div>
<div id="ch-10-5"></div>
</section>
<section id="preset-ts-warianty-back-pin">
<h1>10.5 Preset TS (warianty back/pin)<a class="headerlink" href="#preset-ts-warianty-back-pin" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetTitlebar</span><span class="p">(</span><span class="nx">opts</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">withBack?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"> </span><span class="nx">withPin?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"> </span><span class="p">})</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="kt">WidgetNode</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textAutoResize</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-rounded&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;minimizeBtn&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;closeBtn.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;-&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;closeBtn&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;x&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">];</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">opts</span><span class="o">?</span><span class="p">.</span><span class="nx">withPin</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">children</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="mf">0</span><span class="p">,{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;pinBtn&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;minimizeBtn.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;*&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">});</span>
<span class="p">}</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">opts</span><span class="o">?</span><span class="p">.</span><span class="nx">withBack</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">children</span><span class="p">.</span><span class="nx">unshift</span><span class="p">({</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;backBtn&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="kt">children</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">?</span><span class="p">.</span><span class="nx">geometry</span><span class="o">?</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">children</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">geometry</span><span class="o">!</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">.left`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;minimizeBtn.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">});</span>
<span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;TitlebarWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;titlebar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000066&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-10-6"></div>
</section>
<section id="walidator">
<h1>10.6 Walidator<a class="headerlink" href="#walidator" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>❌ Dzieci spoza dozwolonego zestawu (lista/edytory/scroll).</p></li>
<li><p>❌ Brak <code class="docutils literal notranslate"><span class="pre">minimize</span></code>/<code class="docutils literal notranslate"><span class="pre">close</span></code> tam, gdzie wymagane (MiniWindow/Container/Dialog).</p></li>
<li><p>❌ Niepoprawne kotwice (przyciski bez powiązań do prawej krawędzi).</p></li>
<li><p>⚠️ Brak <code class="docutils literal notranslate"><span class="pre">back</span></code>/<code class="docutils literal notranslate"><span class="pre">pin</span></code> w wariantach wymaganych projektowo.</p></li>
<li><p>⚠️ Nieparzyste marginesy i niespójne szerokości przycisków.</p></li>
</ul>
<div id="ch-10-7"></div>
</section>
<section id="integracja-lua-glue">
<h1>10.7 Integracja (Lua glue)<a class="headerlink" href="#integracja-lua-glue" title="Link to this heading">#</a></h1>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="n">TitlebarController</span> <span class="o">=</span> <span class="p">{}</span>

<span class="kr">function</span> <span class="nc">TitlebarController</span><span class="p">.</span><span class="nf">onMinimize</span><span class="p">()</span>
  <span class="kd">local</span> <span class="n">content</span> <span class="o">=</span> <span class="n">rootWidget</span><span class="p">:</span><span class="n">recursiveGetChildById</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">footer</span>  <span class="o">=</span> <span class="n">rootWidget</span><span class="p">:</span><span class="n">recursiveGetChildById</span><span class="p">(</span><span class="s1">&#39;footer&#39;</span><span class="p">)</span>
  <span class="kr">if</span> <span class="ow">not</span> <span class="n">content</span> <span class="kr">then</span> <span class="kr">return</span> <span class="kr">end</span>
  <span class="kd">local</span> <span class="n">show</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">content</span><span class="p">:</span><span class="n">isVisible</span><span class="p">()</span>
  <span class="n">content</span><span class="p">:</span><span class="n">setVisible</span><span class="p">(</span><span class="n">show</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">footer</span> <span class="kr">then</span> <span class="n">footer</span><span class="p">:</span><span class="n">setVisible</span><span class="p">(</span><span class="n">show</span><span class="p">)</span> <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">TitlebarController</span><span class="p">.</span><span class="nf">onClose</span><span class="p">()</span>
  <span class="kd">local</span> <span class="n">owner</span> <span class="o">=</span> <span class="n">rootWidget</span><span class="p">:</span><span class="n">recursiveGetChildById</span><span class="p">(</span><span class="s1">&#39;miniWindow&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">rootWidget</span><span class="p">:</span><span class="n">recursiveGetChildById</span><span class="p">(</span><span class="s1">&#39;containerWindow&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">rootWidget</span><span class="p">:</span><span class="n">recursiveGetChildById</span><span class="p">(</span><span class="s1">&#39;dialog&#39;</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">owner</span> <span class="kr">then</span> <span class="n">owner</span><span class="p">:</span><span class="n">hide</span><span class="p">()</span> <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">TitlebarController</span><span class="p">.</span><span class="nf">onBack</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">ContainerController</span> <span class="ow">and</span> <span class="n">ContainerController</span><span class="p">.</span><span class="n">onBack</span> <span class="kr">then</span>
    <span class="n">ContainerController</span><span class="p">.</span><span class="n">onBack</span><span class="p">()</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">TitlebarController</span><span class="p">.</span><span class="nf">onTogglePin</span><span class="p">()</span>
  <span class="c1">-- przełącz stan przypięcia; szczegóły zależne od projektu</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="id20">
<h1>11. Toolbar<a class="headerlink" href="#id20" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-11-1"><span class="xref myst">11.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-11-2"><span class="xref myst">11.2 Dozwolone dzieci</span></a></p></li>
<li><p><a class="reference internal" href="#ch-11-3"><span class="xref myst">11.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-11-4"><span class="xref myst">11.4 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-11-5"><span class="xref myst">11.5 Blueprint OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-11-6"><span class="xref myst">11.6 Preset TS (serializer‑ready)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-11-7"><span class="xref myst">11.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-11-8"><span class="xref myst">11.8 Przykłady i edge‑cases</span></a></p></li>
</ul>
<div id="ch-11-1"></div>
# 11.1 Rola i struktura
**Toolbar** to pasek akcji, zwykle pod `titlebar` lub w `header`. Zawiera grupy przycisków i separatory.
<div id="ch-11-2"></div>
# 11.2 Dozwolone dzieci
Dozwolone: `Button` (akcje/toggle), `UIWidget` jako separator lub ikona. Niedozwolone: listy, edytory, ScrollBary i okna.
<div id="ch-11-3"></div>
# 11.3 Geometria i styl
Wysokość stała (np. 20–24). Anchors lewo‑prawo do rodzica. Tło półprzezroczyste lub obraz motywu. Jednolite odstępy między grupami.
<div id="ch-11-4"></div>
# 11.4 Stany i zdarzenia
Przyciski mogą mieć stany `$on/$!on` (toggle). Zdarzenia `@onClick`. Klawiszowe skróty wiąż w `@onSetup` okna.
<div id="ch-11-5"></div>
</section>
<section id="id21">
<h1>11.5 Blueprint OTUI (STRICT)<a class="headerlink" href="#id21" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>ToolbarWidget &lt; UIWidget
  id: toolbar
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: parent.top
  height: 20

  background-color: #00000044

  Button
    id: action1
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 60
    !text: tr(&#39;Action&#39;)

  UIWidget
    id: sep1
    anchors.left: action1.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 6
    width: 1
    height: 12
    background-color: #ffffff33

  Button
    id: toggle1
    anchors.left: sep1.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 6
    width: 60
    !text: tr(&#39;Toggle&#39;)

    $on:
      background-color: #ffffff22

    $!on:
      background-color: alpha
</pre></div>
</div>
<div id="ch-11-6"></div>
</section>
<section id="id22">
<h1>11.6 Preset TS (serializer‑ready)<a class="headerlink" href="#id22" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetToolbar</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ToolbarWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;toolbar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000044&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;action1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">60</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Action&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sep1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;action1.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">12</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#ffffff33&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;toggle1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sep1.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">60</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Toggle&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">states</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">on</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#ffffff22&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">off</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-11-7"></div>
</section>
<section id="id23">
<h1>11.7 Walidator<a class="headerlink" href="#id23" title="Link to this heading">#</a></h1>
<p>❌ Listy/edytory/scroll w Toolbar. ❌ Brak wysokości. ❌ Nieparzyste marginesy lub nierówne szerokości w grupie. ⚠️ Brak skrótów dla akcji o wysokiej częstotliwości.</p>
<div id="ch-11-8"></div>
</section>
<section id="id24">
<h1>11.8 Przykłady i edge‑cases<a class="headerlink" href="#id24" title="Link to this heading">#</a></h1>
<p>Lewa grupa akcji + prawa grupa statusów; wariant kompaktowy 16 px wysokości; tryb toggle dla filtrów danych.</p>
</section>
<hr class="docutils" />
<section id="id25">
<h1>12. Panel / GroupBox<a class="headerlink" href="#id25" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-12-1"><span class="xref myst">12.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-12-2"><span class="xref myst">12.2 Dozwolone dzieci</span></a></p></li>
<li><p><a class="reference internal" href="#ch-12-3"><span class="xref myst">12.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-12-4"><span class="xref myst">12.4 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-12-5"><span class="xref myst">12.5 Blueprinty OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-12-6"><span class="xref myst">12.6 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-12-7"><span class="xref myst">12.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-12-8"><span class="xref myst">12.8 Przykłady i edge‑cases</span></a></p></li>
</ul>
<div id="ch-12-1"></div>
</section>
<section id="rola-i-struktura">
<h1>12.1 Rola i struktura<a class="headerlink" href="#rola-i-struktura" title="Link to this heading">#</a></h1>
<p><strong>Panel</strong> to podstawowy kontener sekcji. <strong>GroupBox</strong> to panel z nagłówkiem i ramką/separatorem.</p>
<div id="ch-12-2"></div>
</section>
<section id="dozwolone-dzieci">
<h1>12.2 Dozwolone dzieci<a class="headerlink" href="#dozwolone-dzieci" title="Link to this heading">#</a></h1>
<p>Dozwolone: wszystkie elementy „panelowe” (Label, Button, TextEdit, MultilineTextEdit, TextList, ComboBox, CheckBox, ProgressBar, TabBar, Splitter, VerticalScrollBar, HorizontalSeparator, UIWidget). Niedozwolone: okna (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>).</p>
<div id="ch-12-3"></div>
# 12.3 Geometria i styl
Anchors zgodne z układem rodzica. Marginesy i padding parzyste. Tło transparentne lub obraz/kolor sekcji. GroupBox ma label nagłówka oraz obramowanie lub separator pod tytułem.
<div id="ch-12-4"></div>
# 12.4 Stany i zdarzenia
Zwykle brak stanów na samym Panelu; stany stosuj na dzieciach. Zdarzenia klikalne tylko, jeśli Panel pełni rolę przyciskopodobną.
<div id="ch-12-5"></div>
</section>
<section id="blueprinty-otui-strict">
<h1>12.5 Blueprinty OTUI (STRICT)<a class="headerlink" href="#blueprinty-otui-strict" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Panel
  id: panel
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: parent.top
  height: 100

  background-color: alpha

  Label
    id: caption
    anchors.left: parent.left
    anchors.top: parent.top
    margin-left: 6
    margin-top: 6
    !text: tr(&#39;Panel&#39;)
    font: verdana-11px-rounded

  UIWidget
    id: body
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: caption.bottom
    anchors.bottom: parent.bottom
    padding: 6

    background-color: alpha
</pre></div>
</div>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>GroupBox &lt; UIWidget
  id: group
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: parent.top
  height: 120

  background-color: alpha

  Label
    id: header
    anchors.left: parent.left
    anchors.top: parent.top
    margin-left: 6
    margin-top: 4
    !text: tr(&#39;Group&#39;)
    font: verdana-11px-rounded

  UIWidget
    id: separator
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: header.bottom
    margin-top: 4
    height: 1
    background-color: #ffffff33

  UIWidget
    id: content
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: separator.bottom
    anchors.bottom: parent.bottom
    padding: 6

    background-color: alpha
</pre></div>
</div>
<div id="ch-12-6"></div>
</section>
<section id="presety-ts">
<h1>12.6 Presety TS<a class="headerlink" href="#presety-ts" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetPanel</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Panel&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;panel&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">100</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;caption&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Panel&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-rounded&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;body&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;caption.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetGroupBox</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;GroupBox&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;group&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">120</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;header&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Group&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-rounded&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;separator&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;header.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#ffffff33&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;content&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;separator.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-12-7"></div>
</section>
<section id="id26">
<h1>12.7 Walidator<a class="headerlink" href="#id26" title="Link to this heading">#</a></h1>
<p>❌ Okna (<code class="docutils literal notranslate"><span class="pre">*Window</span></code>) jako dzieci. ❌ Brak obszaru treści w GroupBox. ❌ Sprzeczne kotwice. ❌ Brak <code class="docutils literal notranslate"><span class="pre">tr()</span></code> w nagłówkach. ⚠️ Nieparzyste marginesy/padding. ⚠️ Brak auto‑fit przy dokowaniu.</p>
<div id="ch-12-8"></div>
</section>
<section id="id27">
<h1>12.8 Przykłady i edge‑cases<a class="headerlink" href="#id27" title="Link to this heading">#</a></h1>
<p>Panel z formularzem i przyciskami akcji w dolnym rogu; GroupBox z wieloma polami i czytelnym separatorem; warianty z tłem obrazkowym.</p>
</section>
<hr class="docutils" />
<section id="id28">
<h1>13. TabBar / TabWidget<a class="headerlink" href="#id28" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-13-1"><span class="xref myst">13.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-13-2"><span class="xref myst">13.2 Dozwolone dzieci</span></a></p></li>
<li><p><a class="reference internal" href="#ch-13-3"><span class="xref myst">13.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-13-4"><span class="xref myst">13.4 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-13-5"><span class="xref myst">13.5 Blueprinty OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-13-6"><span class="xref myst">13.6 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-13-7"><span class="xref myst">13.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-13-8"><span class="xref myst">13.8 Przykłady i edge‑cases</span></a></p></li>
</ul>
<div id="ch-13-1"></div>
# 13.1 Rola i struktura
**TabBar** zawiera przyciski zakładek. **TabWidget** lub dedykowany `UIWidget` jest kontenerem treści zakładki. TabBar i treść są rodzeństwem w drzewie.
<div id="ch-13-2"></div>
# 13.2 Dozwolone dzieci
TabBar: `Button` dla każdej zakładki, ewentualne separatory. Treść zakładki: dowolne elementy panelowe. Niedozwolone: okna w treści, ScrollBar w TabBarze.
<div id="ch-13-3"></div>
# 13.3 Geometria i styl
TabBar u góry, rozciągnięty poziomo. Content poniżej, zakotwiczony do TabBar `top: tabBar.bottom`. Stałe wysokości przycisków.
<div id="ch-13-4"></div>
# 13.4 Stany i zdarzenia
Aktywna zakładka może mieć `$on`. Zdarzenie zmiany zakładki mapowane do kontrolera (np. `TabsController.onTabChange(index)`), ewentualnie `@onClick` na przycisku zakładki.
<div id="ch-13-5"></div>
# 13.5 Blueprinty OTUI (STRICT)
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>TabBarWidget &lt; UIWidget
  id: tabBar
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: parent.top
  height: 20

  background-color: #00000044

  Button
    id: tab1
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 60
    !text: tr(&#39;Tab 1&#39;)

    $on:
      background-color: #ffffff22

    $!on:
      background-color: alpha

  Button
    id: tab2
    anchors.left: tab1.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 4
    width: 60
    !text: tr(&#39;Tab 2&#39;)
</pre></div>
</div>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>TabContent &lt; UIWidget
  id: tabContent
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: tabBar.bottom
  anchors.bottom: parent.bottom

  background-color: alpha
</pre></div>
</div>
<div id="ch-13-6"></div>
</section>
<section id="id29">
<h1>13.6 Presety TS<a class="headerlink" href="#id29" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetTabs</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tabBar</span><span class="o">:</span><span class="w"> </span><span class="kt">WidgetNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;TabBarWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tabBar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000044&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tab1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">60</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Tab 1&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">states</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">on</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#ffffff22&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">off</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tab2&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tab1.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">60</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Tab 2&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="kt">WidgetNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;TabContent&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tabContent&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tabBar.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nx">tabBar</span><span class="p">,</span><span class="w"> </span><span class="nx">content</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-13-7"></div>
</section>
<section id="id30">
<h1>13.7 Walidator<a class="headerlink" href="#id30" title="Link to this heading">#</a></h1>
<p>❌ Treść upakowana do TabBar zamiast do dedykowanego kontenera. ❌ Brak aktywnej zakładki. ❌ Sprzeczne kotwice. ❌ Brak <code class="docutils literal notranslate"><span class="pre">tr()</span></code> w etykietach. ⚠️ Brak mechanizmu zmiany zakładki w kontrolerze.</p>
<div id="ch-13-8"></div>
</section>
<section id="id31">
<h1>13.8 Przykłady i edge‑cases<a class="headerlink" href="#id31" title="Link to this heading">#</a></h1>
<p>Dwie zakładki z różnymi panelami treści; adaptacja do małej szerokości przez skrótowe etykiety; synchronizacja aktywności z kontrolerem i stanem <code class="docutils literal notranslate"><span class="pre">$on</span></code> na przycisku.</p>
</section>
<hr class="docutils" />
<section id="id32">
<h1>14. Splitter<a class="headerlink" href="#id32" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-14-1"><span class="xref myst">14.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-14-2"><span class="xref myst">14.2 Dozwolone dzieci</span></a></p></li>
<li><p><a class="reference internal" href="#ch-14-3"><span class="xref myst">14.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-14-4"><span class="xref myst">14.4 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-14-5"><span class="xref myst">14.5 Blueprinty OTUI (STRICT) – poziomy/pionowy</span></a></p></li>
<li><p><a class="reference internal" href="#ch-14-6"><span class="xref myst">14.6 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-14-7"><span class="xref myst">14.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-14-8"><span class="xref myst">14.8 Przykłady i edge‑cases</span></a></p></li>
<li><p><a class="reference internal" href="#ch-14-9"><span class="xref myst">14.9 Splitter — grip i persystencja</span></a></p></li>
</ul>
<div id="ch-14-1"></div>
# 14.1 Rola i struktura
**Splitter** dzieli obszar na dwie części (panele) z regulowanym podziałem. Stosowany do układów „lista ↔ szczegóły”, „nawigacja ↔ treść”.
<div id="ch-14-2"></div>
# 14.2 Dozwolone dzieci
Dopuszczalne są **dokładnie dwa panele** (np. `UIWidget`/`Panel`). Dodatkowe elementy (np. overlay „grip”) mogą być zastosowane tylko jako **lekki overlay** niebędący panelem (walidator traktuje je osobno).
<div id="ch-14-3"></div>
# 14.3 Geometria i styl
- Wariant **poziomy**: lewy panel kotwiczony do lewej, prawy do prawej; granica pomiędzy panelami.
- Wariant **pionowy**: górny panel do góry, dolny do dołu.
- **Min‑size** paneli: wymagana; zapewnij, by podział nie „zgniatał” dzieci poniżej minimalnych rozmiarów.
- Tło zwykle transparentne; granicę można sygnalizować wąskim paskiem.
<div id="ch-14-4"></div>
# 14.4 Stany i zdarzenia
- Zdarzenia resize i drag „gripa” implementuje kontroler (Lua) lub logika klienta.
- Stany wizualne (hover/drag) można realizować `$focus`/`$on` na panelu/gripie.
<div id="ch-14-5"></div>
</section>
<section id="blueprinty-otui-strict-poziomy-pionowy">
<h1>14.5 Blueprinty OTUI (STRICT) – poziomy/pionowy<a class="headerlink" href="#blueprinty-otui-strict-poziomy-pionowy" title="Link to this heading">#</a></h1>
<p><strong>Poziomy (Left/Right)</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Splitter &lt; UIWidget
  id: split
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: parent.top
  anchors.bottom: parent.bottom

  UIWidget
    id: leftPane
    anchors.left: parent.left
    anchors.top: parent.top
    anchors.bottom: parent.bottom
    width: 160

  UIWidget
    id: rightPane
    anchors.left: leftPane.right
    anchors.right: parent.right
    anchors.top: parent.top
    anchors.bottom: parent.bottom
</pre></div>
</div>
<p><strong>Pionowy (Top/Bottom)</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Splitter &lt; UIWidget
  id: splitV
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: parent.top
  anchors.bottom: parent.bottom

  UIWidget
    id: topPane
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    height: 140

  UIWidget
    id: bottomPane
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: topPane.bottom
    anchors.bottom: parent.bottom
</pre></div>
</div>
<div id="ch-14-6"></div>
</section>
<section id="id33">
<h1>14.6 Presety TS<a class="headerlink" href="#id33" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetSplitterHorizontal</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Splitter&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;split&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;leftPane&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">160</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;rightPane&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;leftPane.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetSplitterVertical</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Splitter&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;splitV&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;topPane&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">140</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bottomPane&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;topPane.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-14-7"></div>
</section>
<section id="id34">
<h1>14.7 Walidator<a class="headerlink" href="#id34" title="Link to this heading">#</a></h1>
<p>❌ ≠2 paneli. ❌ Sprzeczne kotwice (np. oba panele mają sztywne szerokości i jednocześnie rozciągnięcie). ❌ Brak min‑size przy wymaganym „grip” zachowaniu. ⚠️ Brak parzystych marginesów. ⚠️ Brak auto‑fit do rodzica.</p>
<div id="ch-14-8"></div>
</section>
<section id="id35">
<h1>14.8 Przykłady i edge‑cases<a class="headerlink" href="#id35" title="Link to this heading">#</a></h1>
<p>Lewy panel: lista; prawy: szczegóły. Górny: log, dolny: konsola. Zapamiętywanie podziału w ustawieniach modułu (kontroler Lua).</p>
<div id="ch-14-9"></div>
</section>
<section id="splitter-grip-i-persystencja">
<h1>14.9 Splitter — grip i persystencja<a class="headerlink" href="#splitter-grip-i-persystencja" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Grip (hitbox)</strong>: zapewnij obszar chwytu o grubości <strong>6–8 px</strong> na granicy paneli (wizualnie 1–2 px linia, reszta transparentny hitbox).</p></li>
<li><p><strong>Min‑size paneli</strong>: egzekwuj <code class="docutils literal notranslate"><span class="pre">min-width/min-height</span></code> paneli (np. 120 px) — podział nie może ich naruszyć.</p></li>
<li><p><strong>Tryb klawiatury</strong>: <code class="docutils literal notranslate"><span class="pre">Ctrl+←/→</span></code> (poziomy) lub <code class="docutils literal notranslate"><span class="pre">Ctrl+↑/↓</span></code> (pionowy) do krokowej zmiany podziału (np. 16 px).</p></li>
<li><p><strong>Persystencja</strong>: zapisuj <strong>ratio</strong> (0..1) lub <strong>px</strong> w ustawieniach modułu i odtwarzaj przy inicjalizacji.</p></li>
<li><p><strong>Blueprint grip (overlay, STRICT)</strong>:</p></li>
</ul>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>UIWidget
  id: grip
  anchors.left: leftPane.right
  anchors.top: parent.top
  anchors.bottom: parent.bottom
  width: 8
  background-color: alpha
</pre></div>
</div>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">grip</span></code> jest <strong>overlayem</strong>, nie trzecim panelem (walidator nie liczy go jako dziecka Splittera).</p>
</div></blockquote>
</section>
<hr class="docutils" />
<section id="id36">
<h1>15. TextList / ListRow<a class="headerlink" href="#id36" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-15-1"><span class="xref myst">15.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-2"><span class="xref myst">15.2 Dozwolone dzieci</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-3"><span class="xref myst">15.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-4"><span class="xref myst">15.4 Scroll pairing</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-5"><span class="xref myst">15.5 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-6"><span class="xref myst">15.6 Blueprinty OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-7"><span class="xref myst">15.7 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-8"><span class="xref myst">15.8 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-9"><span class="xref myst">15.9 Przykłady i edge‑cases</span></a></p></li>
<li><p><a class="reference internal" href="#ch-15-10"><span class="xref myst">15.10 TextList — nawigacja klawiaturą i ensureVisible</span></a></p></li>
</ul>
<div id="ch-15-1"></div>
# 15.1 Rola i struktura
**TextList** prezentuje listę pozycji przewijalną w pionie. Wiersze są reprezentowane jako lekkie `UIWidget` (np. `ListRow`) osadzane w kontenerze listy.
<div id="ch-15-2"></div>
# 15.2 Dozwolone dzieci
Wewnątrz listy: tylko wiersze (`UIWidget`/custom row). Zakazane: okna, ScrollBar jako dziecko (ScrollBar jest **siblingiem** listy).
<div id="ch-15-3"></div>
</section>
<section id="id37">
<h1>15.3 Geometria i styl<a class="headerlink" href="#id37" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Listę kotwicz do dostępnego obszaru (<code class="docutils literal notranslate"><span class="pre">anchors.fill:</span> <span class="pre">parent</span></code> lub do <code class="docutils literal notranslate"><span class="pre">scroll.left</span></code>).</p></li>
<li><p>Wysokość wiersza min. ~14 px (zalecenie) dla czytelności.</p></li>
<li><p>Podświetlenie wiersza przez stany (<code class="docutils literal notranslate"><span class="pre">$focus</span></code>/<code class="docutils literal notranslate"><span class="pre">$on</span></code>) lub kolory tła.</p></li>
</ul>
<div id="ch-15-4"></div>
</section>
<section id="id38">
<h1>15.4 Scroll pairing<a class="headerlink" href="#id38" title="Link to this heading">#</a></h1>
<p><strong>VerticalScrollBar</strong> jest <strong>siblingiem</strong>: dokowany po prawej; lista kotwiczy <code class="docutils literal notranslate"><span class="pre">right:</span> <span class="pre">scroll.left</span></code>. <code class="docutils literal notranslate"><span class="pre">step</span></code> powinien odpowiadać wysokości wiersza.</p>
<div id="ch-15-5"></div>
</section>
<section id="id39">
<h1>15.5 Stany i zdarzenia<a class="headerlink" href="#id39" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Zdarzenia: <code class="docutils literal notranslate"><span class="pre">&#64;onClick</span></code> na wiersz (zaznaczenie), opcjonalny <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code> do bindów strzałek/PageUp/Down.</p></li>
<li><p>Fokus: po otwarciu ustaw na listę lub pierwszy wiersz; upewnij się, że wybrany wiersz jest widoczny (logika kontrolera).</p></li>
</ul>
<div id="ch-15-6"></div>
</section>
<section id="id40">
<h1>15.6 Blueprinty OTUI (STRICT)<a class="headerlink" href="#id40" title="Link to this heading">#</a></h1>
<p><strong>Lista ze scrollem</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>UIWidget
  id: listContainer
  anchors.left: parent.left
  anchors.right: scroll.left
  anchors.top: parent.top
  anchors.bottom: parent.bottom

  TextList
    id: items
    anchors.fill: parent
</pre></div>
</div>
<p><strong>Scroll</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>VerticalScrollBar
  id: scroll
  anchors.right: parent.right
  anchors.top: parent.top
  anchors.bottom: parent.bottom
  step: 16
</pre></div>
</div>
<p><strong>Wiersz listy (uniwersalny)</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>ListRow &lt; UIWidget
  id: row
  height: 16

  Label
    id: caption
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 4
    text-auto-resize: true
    !text: tr(&#39;Item&#39;)
    font: verdana-11px-monochrome

  $focus:
    background-color: #ffffff11

  $on:
    background-color: #ffffff22
</pre></div>
</div>
<div id="ch-15-7"></div>
</section>
<section id="id41">
<h1>15.7 Presety TS<a class="headerlink" href="#id41" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetTextListWithScroll</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">listContainer</span><span class="o">:</span><span class="w"> </span><span class="kt">WidgetNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;listContainer&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;scroll.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;TextList&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;items&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fill</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">scroll</span><span class="o">:</span><span class="w"> </span><span class="kt">WidgetNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;VerticalScrollBar&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">step</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nx">listContainer</span><span class="p">,</span><span class="w"> </span><span class="nx">scroll</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetListRow</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ListRow&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;row&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;caption&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textAutoResize</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Item&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-monochrome&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">],</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">states</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">focus</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#ffffff11&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">on</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#ffffff22&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-15-8"></div>
</section>
<section id="id42">
<h1>15.8 Walidator<a class="headerlink" href="#id42" title="Link to this heading">#</a></h1>
<p>❌ ScrollBar jako dziecko listy. ❌ Lista bez pary scrolla przy overflow lub błędne kotwice pary. ❌ <code class="docutils literal notranslate"><span class="pre">tr()</span></code> pominięte w etykietach. ⚠️ Zbyt mała wysokość wiersza (nieczytelność). ⚠️ Brak bindów klawiatury.</p>
<div id="ch-15-9"></div>
</section>
<section id="id43">
<h1>15.9 Przykłady i edge‑cases<a class="headerlink" href="#id43" title="Link to this heading">#</a></h1>
<p>Lista postaci (row = imię + poziom), lista logów (row z ikoną i timestampem). „Ensure visible” przy zmianie wyboru. Paging klawiaturą (PageUp/Down).</p>
<div id="ch-15-10"></div>
</section>
<section id="textlist-nawigacja-klawiatura-i-ensurevisible">
<h1>15.10 TextList — nawigacja klawiaturą i ensureVisible<a class="headerlink" href="#textlist-nawigacja-klawiatura-i-ensurevisible" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Strzałki</strong>: ↑/↓ wybór sąsiedniego wiersza.</p></li>
<li><p><strong>PageUp/Down</strong>: skok o <code class="docutils literal notranslate"><span class="pre">pageSize</span></code> (wysokość kontenera / wysokość wiersza).</p></li>
<li><p><strong>Home/End</strong>: pierwszy/ostatni wiersz.</p></li>
<li><p><strong>Enter/Escape</strong>: potwierdzenie/anulowanie zgodnie z logiką okna.</p></li>
<li><p><strong>ensureVisible</strong>: po zmianie wyboru kontroler przewija listę tak, by wybrany wiersz był w pełni widoczny.</p></li>
<li><p><strong>Multi‑select (opcjonalnie)</strong>: <code class="docutils literal notranslate"><span class="pre">Shift</span></code> = zakres, <code class="docutils literal notranslate"><span class="pre">Ctrl</span></code> = pojedyncze przełączanie — tylko jeśli projekt to wymaga; w <code class="docutils literal notranslate"><span class="pre">.otui</span></code> bez zmian, logika w kontrolerze.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id44">
<h1>16. Label / UILabel<a class="headerlink" href="#id44" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-16-1"><span class="xref myst">16.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-16-2"><span class="xref myst">16.2 Właściwości tekstu</span></a></p></li>
<li><p><a class="reference internal" href="#ch-16-3"><span class="xref myst">16.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-16-4"><span class="xref myst">16.4 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-16-5"><span class="xref myst">16.5 Blueprinty OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-16-6"><span class="xref myst">16.6 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-16-7"><span class="xref myst">16.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-16-8"><span class="xref myst">16.8 Przykłady i edge‑cases</span></a></p></li>
<li><p><a class="reference internal" href="#ch-16-9"><span class="xref myst">16.9 Label — pomiar tekstu, elipsyzacja, DPI/scale</span></a></p></li>
</ul>
<div id="ch-16-1"></div>
</section>
<section id="id45">
<h1>16.1 Rola i struktura<a class="headerlink" href="#id45" title="Link to this heading">#</a></h1>
<p><strong>Label/UILabel</strong> to nieinteraktywny element tekstowy do podpisów, tytułów i statusów. <code class="docutils literal notranslate"><span class="pre">UILabel</span></code> może służyć jako wariant nazwowy z gotowym stylem; oba mają te same podstawowe właściwości tekstowe.</p>
<div id="ch-16-2"></div>
</section>
<section id="wlasciwosci-tekstu">
<h1>16.2 Właściwości tekstu<a class="headerlink" href="#wlasciwosci-tekstu" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code> — jedyne dozwolone źródło stałych napisów (STRICT).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text-wrap:</span> <span class="pre">true|false</span></code> — zawijanie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text-auto-resize:</span> <span class="pre">true|false</span></code> — dopasowanie do treści.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text-align:</span> <span class="pre">left|center|right</span></code> — wyrównanie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text-offset:</span> <span class="pre">X</span> <span class="pre">Y</span></code> — przesunięcie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font:</span> <span class="pre">&lt;nazwa&gt;</span></code> — z <code class="docutils literal notranslate"><span class="pre">data/fonts/</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">color:</span> <span class="pre">#AARRGGBB</span></code>.</p></li>
</ul>
<div id="ch-16-3"></div>
</section>
<section id="id46">
<h1>16.3 Geometria i styl<a class="headerlink" href="#id46" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Anchors do rodzica lub sąsiadów; często <code class="docutils literal notranslate"><span class="pre">anchors.left/right:</span> <span class="pre">parent</span></code> przy statusach.</p></li>
<li><p>Używaj parzystych marginesów (snapping 2 px).</p></li>
<li><p>Tło zwykle <code class="docutils literal notranslate"><span class="pre">alpha</span></code>.</p></li>
</ul>
<div id="ch-16-4"></div>
</section>
<section id="id47">
<h1>16.4 Stany i zdarzenia<a class="headerlink" href="#id47" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Label nie jest klikany; zdarzenia zwykle pomijamy.</p></li>
<li><p>Stany <code class="docutils literal notranslate"><span class="pre">$on/$!on/$focus</span></code> możesz wykorzystać do zmiany koloru lub wyeksponowania (np. błędy/ostrzeżenia), nie geometrii.</p></li>
</ul>
<div id="ch-16-5"></div>
</section>
<section id="id48">
<h1>16.5 Blueprinty OTUI (STRICT)<a class="headerlink" href="#id48" title="Link to this heading">#</a></h1>
<p><strong>Nagłówek sekcji</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Label
  id: header
  anchors.left: parent.left
  anchors.right: parent.right
  text-auto-resize: true
  !text: tr(&#39;Section&#39;)
  font: verdana-11px-rounded
</pre></div>
</div>
<p><strong>Status wielowierszowy</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Label
  id: status
  anchors.left: parent.left
  anchors.right: parent.right
  text-wrap: true
  !text: tr(&#39;This is a long message that can wrap.&#39;)
  font: verdana-11px-monochrome
</pre></div>
</div>
<div id="ch-16-6"></div>
</section>
<section id="id49">
<h1>16.6 Presety TS<a class="headerlink" href="#id49" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetLabelHeader</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;header&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textAutoResize</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Section&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-rounded&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetLabelStatus</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;status&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textWrap</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;This is a long message that can wrap.&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-monochrome&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-16-7"></div>
</section>
<section id="id50">
<h1>16.7 Walidator<a class="headerlink" href="#id50" title="Link to this heading">#</a></h1>
<p>❌ Brak <code class="docutils literal notranslate"><span class="pre">tr()</span></code> w <code class="docutils literal notranslate"><span class="pre">!text</span></code>. ❌ Zasoby fontu spoza <code class="docutils literal notranslate"><span class="pre">data/</span></code>. ⚠️ Nieparzyste marginesy. ⚠️ Nadużywanie <code class="docutils literal notranslate"><span class="pre">text-auto-resize</span></code> przy wąskich układach (ryzyko overflow).</p>
<div id="ch-16-8"></div>
</section>
<section id="id51">
<h1>16.8 Przykłady i edge‑cases<a class="headerlink" href="#id51" title="Link to this heading">#</a></h1>
<p>Nagłówki w <code class="docutils literal notranslate"><span class="pre">titlebar</span></code> i w treści; statusy z <code class="docutils literal notranslate"><span class="pre">text-wrap:</span> <span class="pre">true</span></code>; komunikaty ostrzegawcze kolorem w <code class="docutils literal notranslate"><span class="pre">$on</span></code>.</p>
<div id="ch-16-9"></div>
</section>
<section id="label-pomiar-tekstu-elipsyzacja-dpi-scale">
<h1>16.9 Label — pomiar tekstu, elipsyzacja, DPI/scale<a class="headerlink" href="#label-pomiar-tekstu-elipsyzacja-dpi-scale" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Pomiar</strong>: unikaj twardych szerokości dla długich etykiet; preferuj <code class="docutils literal notranslate"><span class="pre">text-wrap:</span> <span class="pre">true</span></code> lub <code class="docutils literal notranslate"><span class="pre">text-auto-resize:</span> <span class="pre">true</span></code> (gdy bezpieczne).</p></li>
<li><p><strong>Elipsyzacja</strong>: stosuj tylko przy stałych szerokościach; zapewnij tooltip z pełnym tekstem (kontroler).</p></li>
<li><p><strong>DPI/Scale</strong>: testuj metryki fontu (line-height, kerning) w skalach 1.0/1.25/1.5; utrzymuj snapping 2 px.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id52">
<h1>17. Button<a class="headerlink" href="#id52" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-17-1"><span class="xref myst">17.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-17-2"><span class="xref myst">17.2 Właściwości i minimalne rozmiary</span></a></p></li>
<li><p><a class="reference internal" href="#ch-17-3"><span class="xref myst">17.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-17-4"><span class="xref myst">17.4 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-17-5"><span class="xref myst">17.5 Blueprinty OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-17-6"><span class="xref myst">17.6 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-17-7"><span class="xref myst">17.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-17-8"><span class="xref myst">17.8 Przykłady i edge‑cases</span></a></p></li>
<li><p><a class="reference internal" href="#ch-17-9"><span class="xref myst">17.9 Button — hover/disabled i dostępność</span></a></p></li>
</ul>
<div id="ch-17-1"></div>
</section>
<section id="id53">
<h1>17.1 Rola i struktura<a class="headerlink" href="#id53" title="Link to this heading">#</a></h1>
<p><strong>Button</strong> wyzwala akcje (<code class="docutils literal notranslate"><span class="pre">&#64;onClick</span></code>). Może działać jako chwilowy przycisk, przełącznik (toggle) lub przycisk paskowy (tytuł/toolbar). Zwykle bez dzieci — tekst ustawiany bezpośrednio przez <code class="docutils literal notranslate"><span class="pre">!text</span></code>.</p>
<div id="ch-17-2"></div>
</section>
<section id="wlasciwosci-i-minimalne-rozmiary">
<h1>17.2 Właściwości i minimalne rozmiary<a class="headerlink" href="#wlasciwosci-i-minimalne-rozmiary" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code> — etykieta.</p></li>
<li><p>Zalecane minimum rozmiaru: <strong>≥16×16</strong> (kompakt) lub szersze dla etykiet tekstowych (np. 60–72 px).</p></li>
<li><p>Opcjonalnie <code class="docutils literal notranslate"><span class="pre">font</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span></code>, <code class="docutils literal notranslate"><span class="pre">background-color</span></code>.</p></li>
</ul>
<div id="ch-17-3"></div>
</section>
<section id="id54">
<h1>17.3 Geometria i styl<a class="headerlink" href="#id54" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Kotwice do krawędzi rodzica lub sąsiadów (często do prawej w <code class="docutils literal notranslate"><span class="pre">footer</span></code>/<code class="docutils literal notranslate"><span class="pre">titlebar</span></code>).</p></li>
<li><p>Parzyste marginesy; wysokości zgodne ze stylem paska (np. 20 px w titlebar/toolbar).</p></li>
<li><p>Tekst przez <code class="docutils literal notranslate"><span class="pre">!text</span></code> (STRICT), bez wewnętrznego <code class="docutils literal notranslate"><span class="pre">Label</span></code>.</p></li>
</ul>
<div id="ch-17-4"></div>
</section>
<section id="id55">
<h1>17.4 Stany i zdarzenia<a class="headerlink" href="#id55" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;onClick:</span> <span class="pre">Controller.fn()</span></code> — podstawowe zdarzenie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$on/$!on</span></code> — dla trybu <strong>toggle</strong> (zmiana tła/koloru/napisu).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$focus</span></code> — podświetlenie przy fokusie klawiatury.</p></li>
<li><p>Skróty klawiszowe mapuj w <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code> okna lub w Lua.</p></li>
</ul>
<div id="ch-17-5"></div>
</section>
<section id="id56">
<h1>17.5 Blueprinty OTUI (STRICT)<a class="headerlink" href="#id56" title="Link to this heading">#</a></h1>
<p><strong>Standardowy przycisk</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Button
  id: ok
  width: 64
  !text: tr(&#39;Ok&#39;)
</pre></div>
</div>
<p><strong>Toggle (On/Off)</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Button
  id: toggle
  width: 72
  !text: tr(&#39;Off&#39;)

  $on:
    !text: tr(&#39;On&#39;)
    background-color: #ffffff22

  $!on:
    !text: tr(&#39;Off&#39;)
    background-color: alpha
</pre></div>
</div>
<p><strong>Ikonowy (tytuł/toolbar)</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Button
  id: closeBtn
  width: 16
  !text: tr(&#39;x&#39;)
</pre></div>
</div>
<div id="ch-17-6"></div>
</section>
<section id="id57">
<h1>17.6 Presety TS<a class="headerlink" href="#id57" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetButton</span><span class="p">(</span><span class="nx">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Ok&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ok&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">64</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">label</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetToggle</span><span class="p">(</span><span class="nx">labelOff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Off&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">labelOn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;On&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;toggle&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">72</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">labelOff</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">states</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">on</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">labelOn</span><span class="p">,</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#ffffff22&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">off</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">labelOff</span><span class="p">,</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-17-7"></div>
</section>
<section id="id58">
<h1>17.7 Walidator<a class="headerlink" href="#id58" title="Link to this heading">#</a></h1>
<p>❌ Brak <code class="docutils literal notranslate"><span class="pre">tr()</span></code> w etykiecie. ❌ Zbyt mały rozmiar (mniej niż 16×16). ❌ Wewnętrzne dzieci (Label) zamiast <code class="docutils literal notranslate"><span class="pre">!text</span></code>. ⚠️ Niespójne szerokości w grupie. ⚠️ Brak skrótów dla akcji często używanych.</p>
<div id="ch-17-8"></div>
</section>
<section id="id59">
<h1>17.8 Przykłady i edge‑cases<a class="headerlink" href="#id59" title="Link to this heading">#</a></h1>
<p>Przyciski OK/Cancel w <code class="docutils literal notranslate"><span class="pre">footer</span></code>; ikonowe 16 px w <code class="docutils literal notranslate"><span class="pre">titlebar</span></code>; toggle dla filtrów narzędzi. Zmiana etykiety w <code class="docutils literal notranslate"><span class="pre">$on/$!on</span></code> bez modyfikacji geometrii.</p>
<div id="ch-17-9"></div>
</section>
<section id="button-hover-disabled-i-dostepnosc">
<h1>17.9 Button — hover/disabled i dostępność<a class="headerlink" href="#button-hover-disabled-i-dostepnosc" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>$hover</strong>: feedback najechania (kolor/tło), bez zmiany geometrii.</p></li>
<li><p><strong>$disabled</strong>: pełna nieinteraktywność; zachowaj kontrast etykiety ≥ WCAG AA.</p></li>
<li><p><strong>Hitbox</strong>: min. <strong>16×16</strong>; dla tekstowych szerokość wg etykiety (≥60 px).</p></li>
<li><p><strong>Skróty</strong>: najczęstsze akcje zbinduj w <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code>.</p></li>
</ul>
<p><strong>Przykład (STRICT)</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Button
  id: action
  width: 64
  !text: tr(&#39;Run&#39;)

  $hover:
    background-color: #ffffff11

  $disabled:
    color: #ffffff66
    background-color: alpha
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="id60">
<h1>18. CheckBox<a class="headerlink" href="#id60" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-18-1"><span class="xref myst">18.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-18-2"><span class="xref myst">18.2 Właściwości</span></a></p></li>
<li><p><a class="reference internal" href="#ch-18-3"><span class="xref myst">18.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-18-4"><span class="xref myst">18.4 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-18-5"><span class="xref myst">18.5 Blueprinty OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-18-6"><span class="xref myst">18.6 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-18-7"><span class="xref myst">18.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-18-8"><span class="xref myst">18.8 Przykłady i edge‑cases</span></a></p></li>
<li><p><a class="reference internal" href="#ch-18-9"><span class="xref myst">18.9 CheckBox — tri‑state i offset etykiety</span></a></p></li>
</ul>
<div id="ch-18-1"></div>
</section>
<section id="id61">
<h1>18.1 Rola i struktura<a class="headerlink" href="#id61" title="Link to this heading">#</a></h1>
<p><strong>CheckBox</strong> to przełącznik boolean z wbudowaną etykietą tekstową po prawej. Nie posiada dzieci. Wariant <strong>RoundCheckBox</strong> to styl okrągły.</p>
<div id="ch-18-2"></div>
</section>
<section id="wlasciwosci">
<h1>18.2 Właściwości<a class="headerlink" href="#wlasciwosci" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code> — etykieta.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text-align</span></code>, <code class="docutils literal notranslate"><span class="pre">text-offset</span></code> — pozycjonowanie tekstu względem pola.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">image-source</span></code>, <code class="docutils literal notranslate"><span class="pre">image-rect</span></code>/<code class="docutils literal notranslate"><span class="pre">image-clip</span></code>, <code class="docutils literal notranslate"><span class="pre">image-color</span></code> — grafika stanu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cursor</span></code>, <code class="docutils literal notranslate"><span class="pre">change-cursor-image</span></code> — zachowanie kursora.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enabled:</span> <span class="pre">true|false</span></code> — stan dostępności.</p></li>
</ul>
<div id="ch-18-3"></div>
</section>
<section id="id62">
<h1>18.3 Geometria i styl<a class="headerlink" href="#id62" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Typowy rozmiar pola: <strong>16×16</strong>; etykieta po prawej poprzez <code class="docutils literal notranslate"><span class="pre">text-offset</span></code> (np. <code class="docutils literal notranslate"><span class="pre">18</span> <span class="pre">1</span></code>).</p></li>
<li><p>Kotwice do układu rodzica; parzyste marginesy.</p></li>
<li><p>Kolory/obrazy zgodnie z motywem.</p></li>
</ul>
<div id="ch-18-4"></div>
</section>
<section id="id63">
<h1>18.4 Stany i zdarzenia<a class="headerlink" href="#id63" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Stany: <code class="docutils literal notranslate"><span class="pre">$checked</span></code>, <code class="docutils literal notranslate"><span class="pre">$!checked</span></code>, <code class="docutils literal notranslate"><span class="pre">$hover</span></code>, <code class="docutils literal notranslate"><span class="pre">$disabled</span></code> (możliwe kombinacje, np. <code class="docutils literal notranslate"><span class="pre">$hover</span> <span class="pre">!disabled</span></code>).</p></li>
<li><p>Zdarzenia: <code class="docutils literal notranslate"><span class="pre">&#64;onClick</span></code> → przełączanie stanu; skrót klawiszowy mapuj w <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code> lub Lua.</p></li>
</ul>
<div id="ch-18-5"></div>
</section>
<section id="id64">
<h1>18.5 Blueprinty OTUI (STRICT)<a class="headerlink" href="#id64" title="Link to this heading">#</a></h1>
<p><strong>Kwadratowy CheckBox</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>CheckBox &lt; UICheckBox
  id: accept
  size: 16 16
  text-align: left
  text-offset: 18 1
  !text: tr(&#39;Accept&#39;)
  color: #dfdfdf
  image-color: #dfdfdfff
  image-rect: 0 0 15 15
  image-source: /images/ui/checkbox
  change-cursor-image: true
  cursor: pointer

  $hover !disabled:
    color: #ffffff

  $checked:
    color: #ffffff

  $disabled:
    color: #dfdfdf88
    image-color: #dfdfdf88
</pre></div>
</div>
<p><strong>RoundCheckBox (okrągły)</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>RoundCheckBox &lt; CheckBox
  id: rcheck
  image-source: /images/ui/checkbox_round

  $first:
    margin-top: 2

  $!first:
    margin-top: 5
</pre></div>
</div>
<div id="ch-18-6"></div>
</section>
<section id="id65">
<h1>18.6 Presety TS<a class="headerlink" href="#id65" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetCheckBox</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;accept&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Accept&#39;</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;CheckBox&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UICheckBox&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">16</span><span class="p">,</span><span class="mf">16</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textAlign</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">textOffset</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">18</span><span class="p">,</span><span class="mf">1</span><span class="p">],</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">label</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#dfdfdf&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">imageColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#dfdfdfff&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">imageRect</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">0</span><span class="p">,</span><span class="mf">15</span><span class="p">,</span><span class="mf">15</span><span class="p">],</span><span class="w"> </span><span class="nx">imageSource</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/images/ui/checkbox&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">cursor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;pointer&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">changeCursorImage</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetRoundCheckBox</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;rcheck&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Option&#39;</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;RoundCheckBox&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;CheckBox&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">16</span><span class="p">,</span><span class="mf">16</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textAlign</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">textOffset</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">18</span><span class="p">,</span><span class="mf">1</span><span class="p">],</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">label</span><span class="p">,</span><span class="w"> </span><span class="nx">imageSource</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/images/ui/checkbox_round&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-18-7"></div>
</section>
<section id="id66">
<h1>18.7 Walidator<a class="headerlink" href="#id66" title="Link to this heading">#</a></h1>
<p>❌ Dzieci wewnątrz CheckBox. ❌ Brak <code class="docutils literal notranslate"><span class="pre">tr()</span></code> w etykiecie. ❌ Zbyt mały rozmiar pola (&lt;16×16). ❌ Niespójne kotwice. ⚠️ Brak kursora „pointer”. ⚠️ Nieparzyste marginesy/offset.</p>
<div id="ch-18-8"></div>
</section>
<section id="id67">
<h1>18.8 Przykłady i edge‑cases<a class="headerlink" href="#id67" title="Link to this heading">#</a></h1>
<p>Listy opcji w Panel/GroupBox; pierwszy element z mniejszym marginesem górnym (<code class="docutils literal notranslate"><span class="pre">$first</span></code>). Tryb globalnego włączania/wyłączania grupy kontrolek.</p>
<div id="ch-18-9"></div>
</section>
<section id="checkbox-tristate-i-offset-etykiety">
<h1>18.9 CheckBox — tri‑state i offset etykiety<a class="headerlink" href="#checkbox-tristate-i-offset-etykiety" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Tri‑state (opcjonalnie)</strong>: jeżeli projekt wymaga stanu „nieokreślony”, zdefiniuj stan logiczny (np. <code class="docutils literal notranslate"><span class="pre">$indeterminate</span></code>) i nadaj mu własną ikonę/tło; przełączanie cykliczne: <code class="docutils literal notranslate"><span class="pre">unchecked</span> <span class="pre">→</span> <span class="pre">checked</span> <span class="pre">→</span> <span class="pre">indeterminate</span></code>.</p></li>
<li><p><strong>Offset etykiety</strong>: utrzymuj <code class="docutils literal notranslate"><span class="pre">text-offset</span></code> tak, by tekst nie nachodził na pole (np. ≥18 px przy polu 16×16).</p></li>
</ul>
<p><strong>Przykład (STRICT)</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>CheckBox
  id: opt
  size: 16 16
  text-offset: 18 1
  !text: tr(&#39;Option&#39;)

  $indeterminate:
    image-source: /images/ui/checkbox_indet
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="id68">
<h1>19. TextEdit / PasswordTextEdit / MultilineTextEdit<a class="headerlink" href="#id68" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-19-1"><span class="xref myst">19.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-2"><span class="xref myst">19.2 Właściwości tekstowe</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-3"><span class="xref myst">19.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-4"><span class="xref myst">19.4 Scroll pairing (Multiline)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-5"><span class="xref myst">19.5 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-6"><span class="xref myst">19.6 Blueprinty OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-7"><span class="xref myst">19.7 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-8"><span class="xref myst">19.8 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-9"><span class="xref myst">19.9 Przykłady i edge‑cases</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-10"><span class="xref myst">19.10 TextEdit/Multiline — IME, paste i filtry wejścia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-19-11"><span class="xref myst">19.11 Multiline — zaznaczenie, line‑height i pixels‑scroll</span></a></p></li>
</ul>
<div id="ch-19-1"></div>
</section>
<section id="id69">
<h1>19.1 Rola i struktura<a class="headerlink" href="#id69" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>TextEdit</strong> — jedno‑wierszowe pole tekstowe.</p></li>
<li><p><strong>PasswordTextEdit</strong> — jak TextEdit, ale treść maskowana.</p></li>
<li><p><strong>MultilineTextEdit</strong> — wielowierszowe z obsługą zawijania i przewijania.</p></li>
</ul>
<div id="ch-19-2"></div>
</section>
<section id="wlasciwosci-tekstowe">
<h1>19.2 Właściwości tekstowe<a class="headerlink" href="#wlasciwosci-tekstowe" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">placeholder:</span> <span class="pre">'...'</span></code> oraz <code class="docutils literal notranslate"><span class="pre">placeholder-color:</span> <span class="pre">#AARRGGBB</span></code> — tekst i kolor placeholdera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text-wrap:</span> <span class="pre">true|false</span></code> — zawijanie (dot. Multiline).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span></code> — styl tekstu.</p></li>
</ul>
<div id="ch-19-3"></div>
</section>
<section id="id70">
<h1>19.3 Geometria i styl<a class="headerlink" href="#id70" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Kotwicz do dostępnego obszaru; przy Multiline: zapewnij wysokość i padding.</p></li>
<li><p>Parzyste marginesy; tło transparentne lub panelowe.</p></li>
</ul>
<div id="ch-19-4"></div>
</section>
<section id="scroll-pairing-multiline">
<h1>19.4 Scroll pairing (Multiline)<a class="headerlink" href="#scroll-pairing-multiline" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>VerticalScrollBar</strong> jako <strong>sibling</strong>.</p></li>
<li><p>W Multiline ustaw: <code class="docutils literal notranslate"><span class="pre">vertical-scrollbar:</span> <span class="pre">&lt;idScrolla&gt;</span></code>.</p></li>
<li><p>Kotwice: Multiline <code class="docutils literal notranslate"><span class="pre">left/top/bottom</span></code> do parenta, <code class="docutils literal notranslate"><span class="pre">right</span></code> do <code class="docutils literal notranslate"><span class="pre">scroll.left</span></code>; Scroll <code class="docutils literal notranslate"><span class="pre">right/top/bottom</span></code> do parenta.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">step</span></code> scrolla dopasuj do wysokości wiersza (np. 16) i użyj <code class="docutils literal notranslate"><span class="pre">pixels-scroll:</span> <span class="pre">true</span></code> gdy wymagane.</p></li>
</ul>
<div id="ch-19-5"></div>
</section>
<section id="id71">
<h1>19.5 Stany i zdarzenia<a class="headerlink" href="#id71" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;onEnter</span></code> (zatwierdzenie w TextEdit), <code class="docutils literal notranslate"><span class="pre">&#64;onEscape</span></code> (anulowanie), <code class="docutils literal notranslate"><span class="pre">&#64;onSetup</span></code> (bindy).</p></li>
<li><p>Fokus klawiatury na wejściu; kontroler może zarządzać przełączaniem fokusu.</p></li>
</ul>
<div id="ch-19-6"></div>
</section>
<section id="id72">
<h1>19.6 Blueprinty OTUI (STRICT)<a class="headerlink" href="#id72" title="Link to this heading">#</a></h1>
<p><strong>TextEdit (placeholder)</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>TextEdit
  id: name
  anchors.left: parent.left
  anchors.right: parent.right
  height: 20
  placeholder: Name
  placeholder-color: #00000077
  font: verdana-11px-monochrome
</pre></div>
</div>
<p><strong>PasswordTextEdit</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>PasswordTextEdit
  id: password
  anchors.left: parent.left
  anchors.right: parent.right
  height: 20
  placeholder: Password
  placeholder-color: #00000077
  font: verdana-11px-monochrome
</pre></div>
</div>
<p><strong>MultilineTextEdit + VerticalScrollBar</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>MultilineTextEdit
  id: text
  anchors.top: scroll.top
  anchors.left: parent.left
  anchors.right: scroll.left
  anchors.bottom: scroll.bottom
  vertical-scrollbar: scroll
  text-wrap: true

VerticalScrollBar
  id: scroll
  anchors.top: parent.top
  anchors.bottom: parent.bottom
  anchors.right: parent.right
  step: 16
  pixels-scroll: true
</pre></div>
</div>
<div id="ch-19-7"></div>
</section>
<section id="id73">
<h1>19.7 Presety TS<a class="headerlink" href="#id73" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetTextEdit</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">placeholder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Name&#39;</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;TextEdit&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">placeholder</span><span class="p">,</span><span class="w"> </span><span class="nx">placeholderColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000077&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-monochrome&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetPasswordEdit</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;password&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">placeholder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Password&#39;</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;PasswordTextEdit&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">placeholder</span><span class="p">,</span><span class="w"> </span><span class="nx">placeholderColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000077&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-monochrome&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetMultilineWithScroll</span><span class="p">(</span><span class="nx">idText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">idScroll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;scroll&#39;</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">WidgetNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MultilineTextEdit&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">idText</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">idScroll</span><span class="si">}</span><span class="sb">.top`</span><span class="p">,</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">idScroll</span><span class="si">}</span><span class="sb">.left`</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">idScroll</span><span class="si">}</span><span class="sb">.bottom`</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textWrap</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">verticalScrollbar</span><span class="o">:</span><span class="w"> </span><span class="kt">idScroll</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">scroll</span><span class="o">:</span><span class="w"> </span><span class="kt">WidgetNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;VerticalScrollBar&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">idScroll</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">step</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="p">,</span><span class="w"> </span><span class="nx">pixelsScroll</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nx">text</span><span class="p">,</span><span class="w"> </span><span class="nx">scroll</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-19-8"></div>
</section>
<section id="id74">
<h1>19.8 Walidator<a class="headerlink" href="#id74" title="Link to this heading">#</a></h1>
<p>❌ <code class="docutils literal notranslate"><span class="pre">vertical-scrollbar</span></code> wskazuje nieistniejący <code class="docutils literal notranslate"><span class="pre">id</span></code>. ❌ ScrollBar jako dziecko MultilineTextEdit. ❌ Sprzeczne kotwice (fill + krawędzie). ❌ Brak placeholdera tam, gdzie wymagany UX‑owo. ⚠️ Zbyt mała wysokość w Multiline. ⚠️ Brak <code class="docutils literal notranslate"><span class="pre">pixels-scroll</span></code> dla precyzyjnego przewijania.</p>
<div id="ch-19-9"></div>
</section>
<section id="id75">
<h1>19.9 Przykłady i edge‑cases<a class="headerlink" href="#id75" title="Link to this heading">#</a></h1>
<p>Pole loginu z placeholderem i Password z maskowaniem; edytor logów z Multiline + scroll i <code class="docutils literal notranslate"><span class="pre">text-wrap:</span> <span class="pre">true</span></code>; walidacja Enter/Escape w kontrolerze.</p>
<div id="ch-19-10"></div>
</section>
<section id="textedit-multiline-ime-paste-i-filtry-wejscia">
<h1>19.10 TextEdit/Multiline — IME, paste i filtry wejścia<a class="headerlink" href="#textedit-multiline-ime-paste-i-filtry-wejscia" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>IME</strong>: pola powinny poprawnie akceptować kompozycję IME; nie nadpisuj w kontrolerze zdarzeń, które przerywają kompozycję.</p></li>
<li><p><strong>Paste</strong>: obsłuż <code class="docutils literal notranslate"><span class="pre">Ctrl+V</span></code>/<code class="docutils literal notranslate"><span class="pre">Shift+Insert</span></code>; opcjonalne czyszczenie wklejanego tekstu (np. biała lista znaków).</p></li>
<li><p><strong>Filtry</strong>: waliduj w kontrolerze (regex, max długość) — bez modyfikowania <code class="docutils literal notranslate"><span class="pre">.otui</span></code>.</p></li>
</ul>
<div id="ch-19-11"></div>
</section>
<section id="multiline-zaznaczenie-lineheight-i-pixelsscroll">
<h1>19.11 Multiline — zaznaczenie, line‑height i pixels‑scroll<a class="headerlink" href="#multiline-zaznaczenie-lineheight-i-pixelsscroll" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Selection</strong>: zapewnij widoczny kolor zaznaczenia zgodny z motywem.</p></li>
<li><p><strong>Line‑height</strong>: dopasuj przewijanie do metryk fontu; <code class="docutils literal notranslate"><span class="pre">step</span></code> scrollbar’a ≈ wysokość linii (np. 16).</p></li>
<li><p><strong>pixels‑scroll</strong>: włącz dla precyzyjnych edytorów (logi/kod) — płynne przewijanie bez „skoków”.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id76">
<h1>20. ComboBox<a class="headerlink" href="#id76" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-20-1"><span class="xref myst">20.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-20-2"><span class="xref myst">20.2 Właściwości i menu</span></a></p></li>
<li><p><a class="reference internal" href="#ch-20-3"><span class="xref myst">20.3 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-20-4"><span class="xref myst">20.4 Zdarzenia i stany</span></a></p></li>
<li><p><a class="reference internal" href="#ch-20-5"><span class="xref myst">20.5 Blueprint OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-20-6"><span class="xref myst">20.6 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-20-7"><span class="xref myst">20.7 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-20-8"><span class="xref myst">20.8 Przykłady i edge‑cases</span></a></p></li>
</ul>
<div id="ch-20-1"></div>
</section>
<section id="id77">
<h1>20.1 Rola i struktura<a class="headerlink" href="#id77" title="Link to this heading">#</a></h1>
<p><strong>ComboBox</strong> to selektor pojedynczej opcji. Posiada <strong>wewnętrzne menu</strong> (lista opcji) zarządzane przez klienta — <strong>nie dodawaj</strong> ręcznie dzieci w <code class="docutils literal notranslate"><span class="pre">.otui</span></code>.</p>
<div id="ch-20-2"></div>
</section>
<section id="wlasciwosci-i-menu">
<h1>20.2 Właściwości i menu<a class="headerlink" href="#wlasciwosci-i-menu" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">current-index:</span> <span class="pre">N</span></code> lub <code class="docutils literal notranslate"><span class="pre">current-text:</span> <span class="pre">'...'</span></code> — wybrana pozycja (jedno źródło prawdy w czasie eksportu).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">menu-height:</span> <span class="pre">H</span></code> — maksymalna wysokość rozwiniętego menu (px).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">menu-scroll-step:</span> <span class="pre">S</span></code> — krok przewijania menu (px).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">placeholder:</span> <span class="pre">'...'</span></code> — tekst gdy nic nie wybrano.</p></li>
<li><p>Teksty opcji przechodzą przez mechanizm tłumaczeń na poziomie logiki (nie dodawaj jako dzieci w OTUI).</p></li>
</ul>
<div id="ch-20-3"></div>
</section>
<section id="id78">
<h1>20.3 Geometria i styl<a class="headerlink" href="#id78" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Szerokość stała lub <code class="docutils literal notranslate"><span class="pre">anchors.left/right:</span> <span class="pre">parent</span></code>.</p></li>
<li><p>Minimalna wysokość ~20 px.</p></li>
<li><p>Tło zgodne z motywem; strzałka rozwijania po prawej (render klienta/skinu).</p></li>
</ul>
<div id="ch-20-4"></div>
</section>
<section id="zdarzenia-i-stany">
<h1>20.4 Zdarzenia i stany<a class="headerlink" href="#zdarzenia-i-stany" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;onOptionChange:</span> <span class="pre">Controller.fn(index,</span> <span class="pre">text)</span></code> — zmiana wyboru.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$focus</span></code> — podświetlenie fokusowanej kontrolki.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$disabled</span></code> — wygląd nieaktywny.</p></li>
</ul>
<div id="ch-20-5"></div>
</section>
<section id="id79">
<h1>20.5 Blueprint OTUI (STRICT)<a class="headerlink" href="#id79" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>ComboBox
  id: combo
  anchors.left: parent.left
  anchors.right: parent.right
  height: 20
  placeholder: Select
  menu-height: 120
  menu-scroll-step: 16

  @onOptionChange: ComboController.onChange(index, text)
</pre></div>
</div>
<div id="ch-20-6"></div>
</section>
<section id="id80">
<h1>20.6 Presety TS<a class="headerlink" href="#id80" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetComboBox</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;combo&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">placeholder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Select&#39;</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ComboBox&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">placeholder</span><span class="p">,</span><span class="w"> </span><span class="nx">menuHeight</span><span class="o">:</span><span class="w"> </span><span class="kt">120</span><span class="p">,</span><span class="w"> </span><span class="nx">menuScrollStep</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">events</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onOptionChange</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ComboController.onChange(index, text)&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-20-7"></div>
</section>
<section id="id81">
<h1>20.7 Walidator<a class="headerlink" href="#id81" title="Link to this heading">#</a></h1>
<p>❌ Dzieci „opcji” dodane ręcznie do ComboBox w <code class="docutils literal notranslate"><span class="pre">.otui</span></code>. ❌ Sprzeczne kotwice (<code class="docutils literal notranslate"><span class="pre">fill</span></code> + krawędzie). ❌ Brak wysokości. ⚠️ <code class="docutils literal notranslate"><span class="pre">menu-height</span></code> zbyt małe dla przewijania. ⚠️ Brak mapowania <code class="docutils literal notranslate"><span class="pre">onOptionChange</span></code> w projekcie.</p>
<div id="ch-20-8"></div>
</section>
<section id="id82">
<h1>20.8 Przykłady i edge‑cases<a class="headerlink" href="#id82" title="Link to this heading">#</a></h1>
<p>Selektor postaci; filtr w narzędziowym MiniWindow; zmiana dostępności (<code class="docutils literal notranslate"><span class="pre">$disabled</span></code>) przy braku danych; placeholder gdy brak wyboru.</p>
</section>
<hr class="docutils" />
<section id="id83">
<h1>21. ProgressBar<a class="headerlink" href="#id83" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-21-1"><span class="xref myst">21.1 Rola i zakres</span></a></p></li>
<li><p><a class="reference internal" href="#ch-21-2"><span class="xref myst">21.2 Właściwości i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-21-3"><span class="xref myst">21.3 Geometria</span></a></p></li>
<li><p><a class="reference internal" href="#ch-21-4"><span class="xref myst">21.4 Blueprint OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-21-5"><span class="xref myst">21.5 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-21-6"><span class="xref myst">21.6 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-21-7"><span class="xref myst">21.7 Przykłady i edge‑cases</span></a></p></li>
</ul>
<div id="ch-21-1"></div>
</section>
<section id="rola-i-zakres">
<h1>21.1 Rola i zakres<a class="headerlink" href="#rola-i-zakres" title="Link to this heading">#</a></h1>
<p><strong>ProgressBar</strong> prezentuje postęp w zakresie. <strong>Nie</strong> posiada dzieci — jeśli potrzebujesz opisu, użyj zewnętrznego <code class="docutils literal notranslate"><span class="pre">Label</span></code>.</p>
<div id="ch-21-2"></div>
</section>
<section id="wlasciwosci-i-styl">
<h1>21.2 Właściwości i styl<a class="headerlink" href="#wlasciwosci-i-styl" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minimum:</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">maximum:</span> <span class="pre">100</span></code>, <code class="docutils literal notranslate"><span class="pre">value:</span> <span class="pre">0..100</span></code>.</p></li>
<li><p>Warianty skórek: kolor tła i wypełnienia; opcjonalne „gradienty” (jeśli motyw wspiera).</p></li>
<li><p>Możliwy tryb indeterminate (projektowy) — sygnalizowany animacją po stronie klienta.</p></li>
</ul>
<div id="ch-21-3"></div>
</section>
<section id="geometria">
<h1>21.3 Geometria<a class="headerlink" href="#geometria" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Kotwicz w poziomie do rodzica; wysokość ~14–18 px.</p></li>
<li><p>Parzyste marginesy; zachowaj min‑width dla czytelności.</p></li>
</ul>
<div id="ch-21-4"></div>
</section>
<section id="id84">
<h1>21.4 Blueprint OTUI (STRICT)<a class="headerlink" href="#id84" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>ProgressBar
  id: progress
  anchors.left: parent.left
  anchors.right: parent.right
  height: 16
  minimum: 0
  maximum: 100
  value: 0
</pre></div>
</div>
<div id="ch-21-5"></div>
</section>
<section id="id85">
<h1>21.5 Presety TS<a class="headerlink" href="#id85" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetProgressBar</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;progress&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ProgressBar&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">minimum</span><span class="o">:</span><span class="w"> </span><span class="kt">min</span><span class="p">,</span><span class="w"> </span><span class="nx">maximum</span><span class="o">:</span><span class="w"> </span><span class="kt">max</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-21-6"></div>
</section>
<section id="id86">
<h1>21.6 Walidator<a class="headerlink" href="#id86" title="Link to this heading">#</a></h1>
<p>❌ Dzieci wewnątrz ProgressBar. ❌ <code class="docutils literal notranslate"><span class="pre">value</span></code> poza zakresem <code class="docutils literal notranslate"><span class="pre">minimum..maximum</span></code>. ⚠️ Zbyt mała wysokość. ⚠️ Brak kotwic w poziomie (słaba czytelność).</p>
<div id="ch-21-7"></div>
</section>
<section id="id87">
<h1>21.7 Przykłady i edge‑cases<a class="headerlink" href="#id87" title="Link to this heading">#</a></h1>
<p>Status w <code class="docutils literal notranslate"><span class="pre">StaticMainWindow</span></code>; pasek ładowania w panelu z etykietą obok (<code class="docutils literal notranslate"><span class="pre">Label</span></code>). Tryb „nieokreślony” w overlay statusu.</p>
</section>
<hr class="docutils" />
<section id="id88">
<h1>22. ScrollBar (Vertical/Horizontal)<a class="headerlink" href="#id88" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-22-1"><span class="xref myst">22.1 Rola i parowanie</span></a></p></li>
<li><p><a class="reference internal" href="#ch-22-2"><span class="xref myst">22.2 Właściwości</span></a></p></li>
<li><p><a class="reference internal" href="#ch-22-3"><span class="xref myst">22.3 Geometria i dokowanie</span></a></p></li>
<li><p><a class="reference internal" href="#ch-22-4"><span class="xref myst">22.4 Blueprinty OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-22-5"><span class="xref myst">22.5 Presety TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-22-6"><span class="xref myst">22.6 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-22-7"><span class="xref myst">22.7 Przykłady i edge‑cases</span></a></p></li>
</ul>
<div id="ch-22-1"></div>
</section>
<section id="rola-i-parowanie">
<h1>22.1 Rola i parowanie<a class="headerlink" href="#rola-i-parowanie" title="Link to this heading">#</a></h1>
<p><strong>ScrollBar</strong> jest <strong>rodzeństwem</strong> przewijanej treści (lista/Multiline). Parowany poprzez dokowanie i kotwice treści do krawędzi scrolla.</p>
<div id="ch-22-2"></div>
</section>
<section id="id89">
<h1>22.2 Właściwości<a class="headerlink" href="#id89" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">step:</span> <span class="pre">N</span></code> — skok przewijania (px, dostosuj do wysokości wiersza/slotu).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixels-scroll:</span> <span class="pre">true|false</span></code> — tryb przewijania pikselowego.</p></li>
<li><p>(Opcj.) <code class="docutils literal notranslate"><span class="pre">minimum/maximum/value</span></code> — gdy scroll sterowany programowo (projektowo).</p></li>
</ul>
<div id="ch-22-3"></div>
</section>
<section id="geometria-i-dokowanie">
<h1>22.3 Geometria i dokowanie<a class="headerlink" href="#geometria-i-dokowanie" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Vertical</strong>: <code class="docutils literal notranslate"><span class="pre">anchors.right/top/bottom:</span> <span class="pre">parent</span></code>; przewijana treść: <code class="docutils literal notranslate"><span class="pre">right:</span> <span class="pre">scroll.left</span></code>.</p></li>
<li><p><strong>Horizontal</strong>: <code class="docutils literal notranslate"><span class="pre">anchors.left/right/bottom:</span> <span class="pre">parent</span></code>; przewijana treść: <code class="docutils literal notranslate"><span class="pre">bottom:</span> <span class="pre">hscroll.top</span></code>.</p></li>
<li><p>Szerokość (V) ~12–16 px; wysokość (H) ~12–16 px. Parzyste marginesy.</p></li>
</ul>
<div id="ch-22-4"></div>
</section>
<section id="id90">
<h1>22.4 Blueprinty OTUI (STRICT)<a class="headerlink" href="#id90" title="Link to this heading">#</a></h1>
<p><strong>VerticalScrollBar</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>VerticalScrollBar
  id: scroll
  anchors.right: parent.right
  anchors.top: parent.top
  anchors.bottom: parent.bottom
  step: 16
  pixels-scroll: true
</pre></div>
</div>
<p><strong>HorizontalScrollBar</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>HorizontalScrollBar
  id: hscroll
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.bottom: parent.bottom
  step: 16
  pixels-scroll: true
</pre></div>
</div>
<div id="ch-22-5"></div>
</section>
<section id="id91">
<h1>22.5 Presety TS<a class="headerlink" href="#id91" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetVScroll</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">16</span><span class="p">,</span><span class="w"> </span><span class="nx">pixels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;VerticalScrollBar&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.top&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">step</span><span class="p">,</span><span class="w"> </span><span class="nx">pixelsScroll</span><span class="o">:</span><span class="w"> </span><span class="kt">pixels</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetHScroll</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;hscroll&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">16</span><span class="p">,</span><span class="w"> </span><span class="nx">pixels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;HorizontalScrollBar&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.bottom&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">behavior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">step</span><span class="p">,</span><span class="w"> </span><span class="nx">pixelsScroll</span><span class="o">:</span><span class="w"> </span><span class="kt">pixels</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-22-6"></div>
</section>
<section id="id92">
<h1>22.6 Walidator<a class="headerlink" href="#id92" title="Link to this heading">#</a></h1>
<p>❌ ScrollBar jako dziecko listy/Multiline. ❌ Brak parowania (treść nie kotwiczy się do scrolla). ❌ <code class="docutils literal notranslate"><span class="pre">step</span></code> niedopasowany do rozmiaru wiersza (szarpane przewijanie). ⚠️ Brak <code class="docutils literal notranslate"><span class="pre">pixels-scroll</span></code> przy drobnym tekście.</p>
<div id="ch-22-7"></div>
</section>
<section id="id93">
<h1>22.7 Przykłady i edge‑cases<a class="headerlink" href="#id93" title="Link to this heading">#</a></h1>
<p>Lista z wierszem 18 px → <code class="docutils literal notranslate"><span class="pre">step:</span> <span class="pre">18</span></code>; edytor tekstu z delikatnym przewijaniem (<code class="docutils literal notranslate"><span class="pre">pixels-scroll:</span> <span class="pre">true</span></code>); układ podwójny (V+H) w panelu z danymi tabelarycznymi.</p>
</section>
<hr class="docutils" />
<section id="id94">
<h1>23. HorizontalSeparator<a class="headerlink" href="#id94" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-23-1"><span class="xref myst">23.1 Rola i ograniczenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-23-2"><span class="xref myst">23.2 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-23-3"><span class="xref myst">23.3 Blueprint OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-23-4"><span class="xref myst">23.4 Preset TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-23-5"><span class="xref myst">23.5 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-23-6"><span class="xref myst">23.6 Przykłady i edge‑cases</span></a></p></li>
</ul>
<div id="ch-23-1"></div>
</section>
<section id="rola-i-ograniczenia">
<h1>23.1 Rola i ograniczenia<a class="headerlink" href="#rola-i-ograniczenia" title="Link to this heading">#</a></h1>
<p><strong>HorizontalSeparator</strong> to cienka linia dzieląca sekcje. <strong>Nie posiada dzieci</strong> i nie jest interaktywny.</p>
<div id="ch-23-2"></div>
</section>
<section id="id95">
<h1>23.2 Geometria i styl<a class="headerlink" href="#id95" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Kotwice: najczęściej <code class="docutils literal notranslate"><span class="pre">left/right:</span> <span class="pre">parent</span></code>, wysokość <code class="docutils literal notranslate"><span class="pre">1</span></code> lub <code class="docutils literal notranslate"><span class="pre">2</span></code> px.</p></li>
<li><p>Marginesy: parzyste <code class="docutils literal notranslate"><span class="pre">margin-top/bottom</span></code> dla rytmu layoutu.</p></li>
<li><p>Styl: <code class="docutils literal notranslate"><span class="pre">background-color</span></code> (przezroczystość mile widziana).</p></li>
</ul>
<div id="ch-23-3"></div>
</section>
<section id="id96">
<h1>23.3 Blueprint OTUI (STRICT)<a class="headerlink" href="#id96" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>HorizontalSeparator
  id: sep
  anchors.left: parent.left
  anchors.right: parent.right
  height: 1
  background-color: #ffffff33
</pre></div>
</div>
<div id="ch-23-4"></div>
</section>
<section id="preset-ts">
<h1>23.4 Preset TS<a class="headerlink" href="#preset-ts" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetHorizontalSeparator</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;sep&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;HorizontalSeparator&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">height</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#ffffff33&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-23-5"></div>
</section>
<section id="id97">
<h1>23.5 Walidator<a class="headerlink" href="#id97" title="Link to this heading">#</a></h1>
<p>❌ Dzieci w separatorze. ⚠️ Wysokość &gt; 2 px bez uzasadnienia stylistycznego. ⚠️ Nieparzyste marginesy.</p>
<div id="ch-23-6"></div>
</section>
<section id="id98">
<h1>23.6 Przykłady i edge‑cases<a class="headerlink" href="#id98" title="Link to this heading">#</a></h1>
<p>Separator pod nagłówkiem GroupBox; cienka linia w Toolbarze między grupami akcji.</p>
</section>
<hr class="docutils" />
<section id="id99">
<h1>24. StatusOverlay<a class="headerlink" href="#id99" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-24-1"><span class="xref myst">24.1 Rola i struktura</span></a></p></li>
<li><p><a class="reference internal" href="#ch-24-2"><span class="xref myst">24.2 Geometria i styl</span></a></p></li>
<li><p><a class="reference internal" href="#ch-24-3"><span class="xref myst">24.3 Stany i zdarzenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-24-4"><span class="xref myst">24.4 Blueprint OTUI (STRICT)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-24-5"><span class="xref myst">24.5 Preset TS</span></a></p></li>
<li><p><a class="reference internal" href="#ch-24-6"><span class="xref myst">24.6 Walidator</span></a></p></li>
<li><p><a class="reference internal" href="#ch-24-7"><span class="xref myst">24.7 Przykłady i edge‑cases</span></a></p></li>
</ul>
<div id="ch-24-1"></div>
</section>
<section id="id100">
<h1>24.1 Rola i struktura<a class="headerlink" href="#id100" title="Link to this heading">#</a></h1>
<p><strong>StatusOverlay</strong> to lekka warstwa informacyjna nad treścią. Typowo: <code class="docutils literal notranslate"><span class="pre">Label</span></code> (komunikat), opcj. <code class="docutils literal notranslate"><span class="pre">ProgressBar</span></code>, opcj. <code class="docutils literal notranslate"><span class="pre">Button</span></code> Cancel.</p>
<div id="ch-24-2"></div>
</section>
<section id="id101">
<h1>24.2 Geometria i styl<a class="headerlink" href="#id101" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Overlay kotwiczy się do całego rodzica: <code class="docutils literal notranslate"><span class="pre">anchors.fill:</span> <span class="pre">parent</span></code>.</p></li>
<li><p>Tło półprzezroczyste (np. <code class="docutils literal notranslate"><span class="pre">#00000055</span></code>) lub <code class="docutils literal notranslate"><span class="pre">alpha</span></code>.</p></li>
<li><p>Kafelek środka (panel) wycentrowany pion/poziom przez <code class="docutils literal notranslate"><span class="pre">anchors.centerIn:</span> <span class="pre">parent</span></code> lub równoważne kotwice.</p></li>
</ul>
<div id="ch-24-3"></div>
</section>
<section id="id102">
<h1>24.3 Stany i zdarzenia<a class="headerlink" href="#id102" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;onClick</span></code> przy Cancel.</p></li>
<li><p>Widoczność sterowana przez kontroler (show/hide).</p></li>
<li><p>Brak złożonych dzieci — overlay jest lekki.</p></li>
</ul>
<div id="ch-24-4"></div>
</section>
<section id="id103">
<h1>24.4 Blueprint OTUI (STRICT)<a class="headerlink" href="#id103" title="Link to this heading">#</a></h1>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>StatusOverlay &lt; UIWidget
  id: overlay
  anchors.fill: parent
  background-color: #00000055

  UIWidget
    id: panel
    anchors.horizontalCenter: parent.horizontalCenter
    anchors.verticalCenter: parent.verticalCenter
    width: 220
    padding: 8
    background-color: #00000099

    Label
      id: msg
      anchors.left: parent.left
      anchors.right: parent.right
      text-wrap: true
      !text: tr(&#39;Working...&#39;)
      font: verdana-11px-monochrome

    ProgressBar
      id: progress
      anchors.left: parent.left
      anchors.right: parent.right
      anchors.top: msg.bottom
      margin-top: 6
      height: 16

    Button
      id: cancel
      anchors.top: progress.bottom
      anchors.right: parent.right
      margin-top: 6
      width: 64
      !text: tr(&#39;Cancel&#39;)
</pre></div>
</div>
<div id="ch-24-5"></div>
</section>
<section id="id104">
<h1>24.5 Preset TS<a class="headerlink" href="#id104" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">presetStatusOverlay</span><span class="p">(</span><span class="nx">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Working...&#39;</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;StatusOverlay&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;overlay&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fill</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000055&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;UIWidget&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;panel&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">horizontalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.horizontalCenter&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">verticalCenter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.verticalCenter&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">220</span><span class="p">,</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#00000099&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Label&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;msg&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">textWrap</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">label</span><span class="p">,</span><span class="w"> </span><span class="nx">font</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;verdana-11px-monochrome&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ProgressBar&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;progress&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.left&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;msg.bottom&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Button&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cancel&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">anchors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">top</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;progress.bottom&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parent.right&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="kt">6</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">64</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Cancel&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">]}</span>
<span class="p">]</span>
<span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<div id="ch-24-6"></div>
</section>
<section id="id105">
<h1>24.6 Walidator<a class="headerlink" href="#id105" title="Link to this heading">#</a></h1>
<p>❌ Overlay z nadmiarem dzieci (złożone układy). ❌ Brak <code class="docutils literal notranslate"><span class="pre">tr()</span></code> w komunikacie. ⚠️ Brak kontrastu (czytelność). ⚠️ Panel bez wyśrodkowania.</p>
<div id="ch-24-7"></div>
</section>
<section id="id106">
<h1>24.7 Przykłady i edge‑cases<a class="headerlink" href="#id106" title="Link to this heading">#</a></h1>
<p>Overlay ładowania zasobów; tryb indeterminate ProgressBar; anulowanie długiej operacji.</p>
</section>
<hr class="docutils" />
<section id="id107">
<h1>25. Macierze dozwolonych dzieci (global)<a class="headerlink" href="#id107" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-25-1"><span class="xref myst">25.1 Tabele macierzowe per komponent i slot</span></a></p></li>
<li><p><a class="reference internal" href="#ch-25-2"><span class="xref myst">25.2 Reguły globalne</span></a></p></li>
</ul>
<div id="ch-25-1"></div>
</section>
<section id="tabele-macierzowe-per-komponent-i-slot">
<h1>25.1 Tabele macierzowe per komponent i slot<a class="headerlink" href="#tabele-macierzowe-per-komponent-i-slot" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Parent/Slot</p></th>
<th class="head"><p>Dopuszczone dzieci</p></th>
<th class="head"><p>Niedozwolone / Uwagi</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>MainWindow/StaticMainWindow</strong></p></td>
<td><p>elementy panelowe (Label, Button, TextEdit, Multiline, TextList, ComboBox, CheckBox, ProgressBar, VerticalScrollBar, HorizontalSeparator, TabBar, Splitter, UIWidget, Panel)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*Window</span></code> jako dzieci — ✖</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MiniWindow.titlebar</strong></p></td>
<td><p>Label, Button, UIWidget (ikona)</p></td>
<td><p>Scroll, listy, edytory — ✖</p></td>
</tr>
<tr class="row-even"><td><p><strong>MiniWindow.content</strong></p></td>
<td><p>elementy panelowe (w tym TextList/Multiline, Panel, Grid, ProgressBar)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*Window</span></code> — ✖; Scroll tylko w parze</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MiniWindow.footer</strong></p></td>
<td><p>Button, Label</p></td>
<td><p>Listy/edytory — ✖</p></td>
</tr>
<tr class="row-even"><td><p><strong>ContainerWindow.titlebar</strong></p></td>
<td><p>Button (back/pin/min/close), Label, UIWidget (ikona)</p></td>
<td><p>Scroll/listy/edytory — ✖</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ContainerWindow.content</strong></p></td>
<td><p>SlotWidget/UIWidget, Label, Button, VerticalScrollBar (dock right)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*Window</span></code> — ✖</p></td>
</tr>
<tr class="row-even"><td><p><strong>DialogWindow.titlebar</strong></p></td>
<td><p>Label</p></td>
<td><p>Scroll/listy/edytory — ✖</p></td>
</tr>
<tr class="row-odd"><td><p><strong>DialogWindow.content</strong></p></td>
<td><p>Label, TextEdit, Multiline, ComboBox, CheckBox, ProgressBar</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*Window</span></code> — ✖</p></td>
</tr>
<tr class="row-even"><td><p><strong>DialogWindow.footer</strong></p></td>
<td><p>Button</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Panel/GroupBox/UIWidget</strong></p></td>
<td><p>elementy panelowe</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*Window</span></code> — ✖</p></td>
</tr>
<tr class="row-even"><td><p><strong>TabBar</strong></p></td>
<td><p>Button (zakładki)</p></td>
<td><p>Treści panelowe w TabBar — ✖</p></td>
</tr>
<tr class="row-odd"><td><p><strong>TabContent</strong></p></td>
<td><p>elementy panelowe</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p><strong>Splitter</strong></p></td>
<td><p>dokładnie 2 panele (UIWidget/Panel)</p></td>
<td><p>≠2 dzieci — ✖</p></td>
</tr>
<tr class="row-odd"><td><p><strong>TextList</strong></p></td>
<td><p>wiersze (UIWidget/ListRow)</p></td>
<td><p>Scroll jako <strong>sibling</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>MultilineTextEdit</strong></p></td>
<td><p>—</p></td>
<td><p>Scroll jako <strong>sibling</strong></p></td>
</tr>
<tr class="row-odd"><td><p><strong>ComboBox</strong></p></td>
<td><p>— (menu wewnętrzne)</p></td>
<td><p>Ręczne „opcje” — ✖</p></td>
</tr>
<tr class="row-even"><td><p><strong>ProgressBar</strong></p></td>
<td><p>—</p></td>
<td><p>Brak dzieci</p></td>
</tr>
<tr class="row-odd"><td><p><strong>HorizontalSeparator</strong></p></td>
<td><p>—</p></td>
<td><p>Brak dzieci</p></td>
</tr>
<tr class="row-even"><td><p><strong>StatusOverlay</strong></p></td>
<td><p>Label, ProgressBar, Button (Cancel)</p></td>
<td><p>Złożone układy — ✖</p></td>
</tr>
</tbody>
</table>
</div>
<div id="ch-25-2"></div>
</section>
<section id="reguly-globalne">
<h1>25.2 Reguły globalne<a class="headerlink" href="#reguly-globalne" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>ScrollBar zawsze <strong>sibling</strong> przewijanej treści.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*Window</span></code> nigdy <strong>nie</strong> jest dzieckiem innego okna w slotach treści.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">titlebar/footer</span></code> to obszary <strong>bez</strong> list/edytorów/scrolla.</p></li>
<li><p>Parzyste marginesy i spacing; snapping 2 px.</p></li>
<li><p>Wymuszone przyciski w oknach: MiniWindow (min/close), Container (back + min/close), Dialog (OK/Cancel w footerze).</p></li>
<li><p>Wszystkie napisy przez <code class="docutils literal notranslate"><span class="pre">tr()</span></code>; zasoby tylko z <code class="docutils literal notranslate"><span class="pre">data/</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id108">
<h1>26. Walidacja i auto‑naprawy (global)<a class="headerlink" href="#id108" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-26-1"><span class="xref myst">26.1 Błędy blokujące</span></a></p></li>
<li><p><a class="reference internal" href="#ch-26-2"><span class="xref myst">26.2 Ostrzeżenia</span></a></p></li>
<li><p><a class="reference internal" href="#ch-26-3"><span class="xref myst">26.3 Auto‑naprawy deterministyczne</span></a></p></li>
<li><p><a class="reference internal" href="#ch-26-4"><span class="xref myst">26.4 Pipeline walidatora</span></a></p></li>
</ul>
<div id="ch-26-1"></div>
</section>
<section id="bledy-blokujace">
<h1>26.1 Błędy blokujące (❌)<a class="headerlink" href="#bledy-blokujace" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>STRICT: komentarze, taby, CRLF/BOM, złe wcięcia (≠2 sp.), kolejność atrybutów niekanoniczna.</p></li>
<li><p>Sprzeczne kotwice (<code class="docutils literal notranslate"><span class="pre">fill</span></code> + krawędzie).</p></li>
<li><p>Niedozwolone dzieci w slotach/parentach.</p></li>
<li><p>Samotny ScrollBar lub przewijana treść bez pary i dokowania.</p></li>
<li><p>Brak wymaganych przycisków okna (Mini/Container/Dialog).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tr()</span></code> pominięte dla stałych napisów; zasoby spoza <code class="docutils literal notranslate"><span class="pre">data/</span></code>.</p></li>
</ul>
<div id="ch-26-2"></div>
</section>
<section id="ostrzezenia">
<h1>26.2 Ostrzeżenia (⚠️)<a class="headerlink" href="#ostrzezenia" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Nieparzyste marginesy/spacing.</p></li>
<li><p>Brak auto‑fit width przy dokowaniu okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">step</span></code> scrolla niepasujący do wysokości wiersza/slotu.</p></li>
<li><p>Brak skrótów Enter/Escape/strzałek tam, gdzie UX tego wymaga.</p></li>
</ul>
<div id="ch-26-3"></div>
</section>
<section id="autonaprawy-deterministyczne">
<h1>26.3 Auto‑naprawy deterministyczne<a class="headerlink" href="#autonaprawy-deterministyczne" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Normalizacja końców linii na LF, usunięcie BOM/tabów/trailing spaces.</p></li>
<li><p>Wcięcia → 2 sp.</p></li>
<li><p>Porządkowanie atrybutów: <strong>GEOMETRIA → STYL → ZACHOWANIE</strong>.</p></li>
<li><p>Wstawienie brakujących slotów (np. <code class="docutils literal notranslate"><span class="pre">content/footer</span></code> w MiniWindow).</p></li>
<li><p>Parowanie ScrollBar z listą/Multiline (dokowanie + kotwice).</p></li>
<li><p>Usunięcie <code class="docutils literal notranslate"><span class="pre">width</span></code> gdy istnieje <code class="docutils literal notranslate"><span class="pre">anchors.left/right:</span> <span class="pre">parent</span></code> (auto‑fit).</p></li>
<li><p>Snapping marginesów/spacing do wartości parzystych.</p></li>
</ol>
<div id="ch-26-4"></div>
</section>
<section id="pipeline-walidatora">
<h1>26.4 Pipeline walidatora<a class="headerlink" href="#pipeline-walidatora" title="Link to this heading">#</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>parse → normalize(STRICT) → validateStructure(macierze) → validateAnchors → validateI18n → validateResources → validatePairs(scroll) → autofix → re‑serialize → diff
</pre></div>
</div>
<p>Wynik: <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">errors:</span> <span class="pre">[...],</span> <span class="pre">warnings:</span> <span class="pre">[...],</span> <span class="pre">fixes:</span> <span class="pre">[...]</span> <span class="pre">}</span></code> + zaktualizowany dokument.</p>
</section>
<hr class="docutils" />
<section id="id109">
<h1>27. Parser/Serializer OTUI → AST (TypeScript)<a class="headerlink" href="#id109" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-27-1"><span class="xref myst">27.1 Tokenizacja i INDENT/DEDENT</span></a></p></li>
<li><p><a class="reference internal" href="#ch-27-2"><span class="xref myst">27.2 Kształt AST</span></a></p></li>
<li><p><a class="reference internal" href="#ch-27-3"><span class="xref myst">27.3 Algorytm parsowania</span></a></p></li>
<li><p><a class="reference internal" href="#ch-27-4"><span class="xref myst">27.4 Serializacja i <code class="docutils literal notranslate"><span class="pre">ensureStrictOtui()</span></code></span></a></p></li>
<li><p><a class="reference internal" href="#ch-27-5"><span class="xref myst">27.5 Błędy/ostrzeżenia/pozycje</span></a></p></li>
<li><p><a class="reference internal" href="#ch-27-6"><span class="xref myst">27.6 Testy round‑trip (goldeny)</span></a></p></li>
</ul>
<div id="ch-27-1"></div>
</section>
<section id="tokenizacja-i-indent-dedent">
<h1>27.1 Tokenizacja i INDENT/DEDENT<a class="headerlink" href="#tokenizacja-i-indent-dedent" title="Link to this heading">#</a></h1>
<p>Tokeny: <code class="docutils literal notranslate"><span class="pre">IDENT</span></code>, <code class="docutils literal notranslate"><span class="pre">NUMBER</span></code>, <code class="docutils literal notranslate"><span class="pre">STRING</span></code> (pojedyncze <code class="docutils literal notranslate"><span class="pre">'...'</span></code> dla <code class="docutils literal notranslate"><span class="pre">!text</span></code>), <code class="docutils literal notranslate"><span class="pre">SYMBOL</span></code> (<code class="docutils literal notranslate"><span class="pre">:</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">$</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>), <code class="docutils literal notranslate"><span class="pre">NEWLINE</span></code>, <code class="docutils literal notranslate"><span class="pre">INDENT</span></code>, <code class="docutils literal notranslate"><span class="pre">DEDENT</span></code>. Wcięcie = <strong>2 spacje</strong>.</p>
<div id="ch-27-2"></div>
</section>
<section id="ksztalt-ast">
<h1>27.2 Kształt AST<a class="headerlink" href="#ksztalt-ast" title="Link to this heading">#</a></h1>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">AstNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">kind</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Widget&#39;</span><span class="o">|</span><span class="s1">&#39;Prop&#39;</span><span class="o">|</span><span class="s1">&#39;Event&#39;</span><span class="o">|</span><span class="s1">&#39;State&#39;</span><span class="o">|</span><span class="s1">&#39;MetaFn&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">name?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">extends?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">props?</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">event?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">state</span><span class="o">?:</span><span class="w"> </span><span class="s1">&#39;$on&#39;</span><span class="o">|</span><span class="s1">&#39;$!on&#39;</span><span class="o">|</span><span class="s1">&#39;$focus&#39;</span><span class="o">|</span><span class="s1">&#39;$checked&#39;</span><span class="o">|</span><span class="s1">&#39;$disabled&#39;</span><span class="o">|</span><span class="s1">&#39;$hover&#39;</span><span class="o">|</span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">metaName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">metaBody?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">children?</span><span class="o">:</span><span class="w"> </span><span class="kt">AstNode</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">loc</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">line</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span><span class="w"> </span><span class="nx">col</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<div id="ch-27-3"></div>
</section>
<section id="algorytm-parsowania">
<h1>27.3 Algorytm parsowania<a class="headerlink" href="#algorytm-parsowania" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Liniowo skanuj, budując stos INDENT/DEDENT.</p></li>
<li><p>Linia <code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">&lt;</span> <span class="pre">Y</span></code> → węzeł <code class="docutils literal notranslate"><span class="pre">Widget</span></code> z dziedziczeniem.</p></li>
<li><p>Linia <code class="docutils literal notranslate"><span class="pre">key:</span> <span class="pre">value</span></code> → <code class="docutils literal notranslate"><span class="pre">Prop</span></code> (właściwości GEOMETRIA/STYL/ZACHOWANIE).</p></li>
<li><p>Blok <code class="docutils literal notranslate"><span class="pre">&#64;on...:</span></code> → <code class="docutils literal notranslate"><span class="pre">Event</span></code>; blok <code class="docutils literal notranslate"><span class="pre">$...:</span></code> → <code class="docutils literal notranslate"><span class="pre">State</span></code>; blok <code class="docutils literal notranslate"><span class="pre">&amp;name:</span></code> → <code class="docutils literal notranslate"><span class="pre">MetaFn</span></code>.</p></li>
<li><p>Dołączaj dzieci wg wcięć; zachowuj <code class="docutils literal notranslate"><span class="pre">loc</span></code> do raportów.</p></li>
</ol>
<div id="ch-27-4"></div>
</section>
<section id="serializacja-i-ensurestrictotui">
<h1>27.4 Serializacja i <code class="docutils literal notranslate"><span class="pre">ensureStrictOtui()</span></code><a class="headerlink" href="#serializacja-i-ensurestrictotui" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Emisja w kolejności <strong>GEOMETRIA → STYL → ZACHOWANIE</strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">style.text</span></code> → <code class="docutils literal notranslate"><span class="pre">!text:</span> <span class="pre">tr('...')</span></code>; zdarzenia → <code class="docutils literal notranslate"><span class="pre">&#64;on...</span></code>; stany → <code class="docutils literal notranslate"><span class="pre">$...</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ensureStrictOtui(text)</span></code> usuwa BOM/taby, normalizuje LF, wcięcia (2 sp.), atrybuty i kolejność bloków.</p></li>
</ul>
<div id="ch-27-5"></div>
</section>
<section id="bledy-ostrzezenia-pozycje">
<h1>27.5 Błędy/ostrzeżenia/pozycje<a class="headerlink" href="#bledy-ostrzezenia-pozycje" title="Link to this heading">#</a></h1>
<p>Struktura raportu:</p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">LintIssue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">kind</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="o">|</span><span class="s1">&#39;warning&#39;</span><span class="p">;</span><span class="w"> </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">loc</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">line</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span><span class="w"> </span><span class="nx">col</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
<p>Przykłady: <code class="docutils literal notranslate"><span class="pre">E_STRICT_TABS</span></code>, <code class="docutils literal notranslate"><span class="pre">E_SLOT_CHILD_FORBIDDEN</span></code>, <code class="docutils literal notranslate"><span class="pre">E_ANCHORS_CONFLICT</span></code>, <code class="docutils literal notranslate"><span class="pre">E_SCROLL_PAIR_MISSING</span></code>, <code class="docutils literal notranslate"><span class="pre">W_MARGIN_ODD</span></code>.</p>
<div id="ch-27-6"></div>
</section>
<section id="testy-roundtrip-goldeny">
<h1>27.6 Testy round‑trip (goldeny)<a class="headerlink" href="#testy-roundtrip-goldeny" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Dla <strong>MiniWindow</strong>, <strong>ContainerWindow</strong>, <strong>Dialog</strong>: <code class="docutils literal notranslate"><span class="pre">parse</span> <span class="pre">→</span> <span class="pre">serialize</span> <span class="pre">→</span> <span class="pre">parse</span></code> i porównanie AST (bez strat).</p></li>
<li><p>Testy porządkowania atrybutów, stanów i zdarzeń; testy auto‑napraw (deterministyczny diff).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id110">
<h1>28. Import/Export i round‑trip (edytor ↔ plik ↔ Lua)<a class="headerlink" href="#id110" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-28-1"><span class="xref myst">28.1 Import z <code class="docutils literal notranslate"><span class="pre">.otui</span></code></span></a></p></li>
<li><p><a class="reference internal" href="#ch-28-2"><span class="xref myst">28.2 Import z bloków w Lua (<code class="docutils literal notranslate"><span class="pre">&#64;OTUI_BEGIN/END</span></code>)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-28-3"><span class="xref myst">28.3 Eksport do <code class="docutils literal notranslate"><span class="pre">.otui</span></code> + aktualizacja bloku w Lua</span></a></p></li>
<li><p><a class="reference internal" href="#ch-28-4"><span class="xref myst">28.4 Runtime: tylko pliki</span></a></p></li>
</ul>
<div id="ch-28-1"></div>
</section>
<section id="import-z-otui">
<h1>28.1 Import z <code class="docutils literal notranslate"><span class="pre">.otui</span></code><a class="headerlink" href="#import-z-otui" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Wczytaj plik, <code class="docutils literal notranslate"><span class="pre">ensureStrictOtui()</span></code>, <code class="docutils literal notranslate"><span class="pre">parseOtui()</span></code> → AST.</p></li>
<li><p>Walidacja + auto‑naprawy; prezentacja ostrzeżeń przed edycją.</p></li>
</ul>
<div id="ch-28-2"></div>
</section>
<section id="import-z-blokow-w-lua-otui-begin-end">
<h1>28.2 Import z bloków w Lua (<code class="docutils literal notranslate"><span class="pre">&#64;OTUI_BEGIN/END</span></code>)<a class="headerlink" href="#import-z-blokow-w-lua-otui-begin-end" title="Link to this heading">#</a></h1>
<p>W kodzie Lua przechowuj <strong>czysty STRICT OTUI</strong> w stringu wielowierszowym, a <strong>markery</strong> trzymaj poza stringiem:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- @OTUI_BEGIN miniwindow</span>
<span class="kd">local</span> <span class="n">UI</span> <span class="o">=</span> <span class="s">[[</span>
<span class="s">MiniWindow</span>
<span class="s">  id: miniWindow</span>
<span class="s">  width: 200</span>
<span class="s">]]</span>
<span class="c1">-- @OTUI_END miniwindow</span>
</pre></div>
</div>
<p>Edytor odnajduje sekcję po nazwie, wycina <strong>dokładnie</strong> zawartość stringa i traktuje ją jak <code class="docutils literal notranslate"><span class="pre">.otui</span></code>.</p>
<div id="ch-28-3"></div>
</section>
<section id="eksport-do-otui-aktualizacja-bloku-w-lua">
<h1>28.3 Eksport do <code class="docutils literal notranslate"><span class="pre">.otui</span></code> + aktualizacja bloku w Lua<a class="headerlink" href="#eksport-do-otui-aktualizacja-bloku-w-lua" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Serializuj do pliku <code class="docutils literal notranslate"><span class="pre">.otui</span></code> (kanoniczny zapis).</p></li>
<li><p>Jeśli w Lua istnieje sekcja <code class="docutils literal notranslate"><span class="pre">&#64;OTUI_BEGIN/END</span></code>, <strong>zastąp</strong> wyłącznie środek stringa nowym STRICT OTUI (bez zmiany markerów i otaczającego kodu).</p></li>
<li><p>Generuj stub <code class="docutils literal notranslate"><span class="pre">local</span> <span class="pre">win</span> <span class="pre">=</span> <span class="pre">g_ui.displayUI('file')</span></code> do użycia w runtime.</p></li>
</ul>
<div id="ch-28-4"></div>
</section>
<section id="runtime-tylko-pliki">
<h1>28.4 Runtime: tylko pliki<a class="headerlink" href="#runtime-tylko-pliki" title="Link to this heading">#</a></h1>
<p>W OTClient v8 UI jest ładowane kanonicznie z plików: <code class="docutils literal notranslate"><span class="pre">g_ui.displayUI('...')</span></code>. Import/edycja „from string” służy <strong>wyłącznie</strong> edytorowi i utrzymaniu kodu — nie do produkcyjnego ładowania w kliencie.</p>
</section>
<hr class="docutils" />
<section id="id111">
<h1>29. Biblioteka presetów (gotowe szablony)<a class="headerlink" href="#id111" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-29-1"><span class="xref myst">29.1 Presety okien</span></a></p></li>
<li><p><a class="reference internal" href="#ch-29-2"><span class="xref myst">29.2 Presety komponentów</span></a></p></li>
<li><p><a class="reference internal" href="#ch-29-3"><span class="xref myst">29.3 Warianty tematyczne</span></a></p></li>
<li><p><a class="reference internal" href="#ch-29-4"><span class="xref myst">29.4 Rejestr presetów i wersjonowanie</span></a></p></li>
<li><p><a class="reference internal" href="#ch-29-5"><span class="xref myst">29.5 Zasady rozszerzania</span></a></p></li>
</ul>
<div id="ch-29-1"></div>
</section>
<section id="presety-okien">
<h1>29.1 Presety okien<a class="headerlink" href="#presety-okien" title="Link to this heading">#</a></h1>
<p><strong>Preset: MinimalMiniWindow</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>MiniWindow &lt; MainWindow
  id: mini
  anchors.left: parent.left
  anchors.right: parent.right
  height: 160

  background-color: alpha

  UIWidget
    id: titlebar
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    height: 20

    background-color: #00000066

    Label
      id: title
      anchors.left: parent.left
      anchors.verticalCenter: parent.verticalCenter
      margin-left: 6
      text-auto-resize: true
      !text: tr(&#39;Tool&#39;)
      font: verdana-11px-rounded

    Button
      id: minimizeBtn
      anchors.right: closeBtn.left
      anchors.verticalCenter: parent.verticalCenter
      width: 16
      !text: tr(&#39;-&#39;)

    Button
      id: closeBtn
      anchors.right: parent.right
      anchors.verticalCenter: parent.verticalCenter
      width: 16
      !text: tr(&#39;x&#39;)

  UIWidget
    id: content
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: titlebar.bottom
    anchors.bottom: footer.top
    padding: 6

    background-color: alpha

  UIWidget
    id: footer
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    height: 28

    background-color: #00000033
</pre></div>
</div>
<p><strong>Preset: ContainerLootWindow</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>ContainerWindow &lt; MainWindow
  id: loot
  anchors.left: parent.left
  anchors.right: parent.right
  height: 220

  background-color: alpha

  UIWidget
    id: titlebar
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    height: 20

    background-color: #00000066

    Label
      id: title
      anchors.left: parent.left
      anchors.verticalCenter: parent.verticalCenter
      margin-left: 6
      text-auto-resize: true
      !text: tr(&#39;Loot&#39;)
      font: verdana-11px-rounded

    Button
      id: backBtn
      anchors.right: pinBtn.left
      anchors.verticalCenter: parent.verticalCenter
      width: 20
      !text: tr(&#39;&lt;&#39;)

    Button
      id: pinBtn
      anchors.right: minimizeBtn.left
      anchors.verticalCenter: parent.verticalCenter
      width: 20
      !text: tr(&#39;*&#39;)

    Button
      id: minimizeBtn
      anchors.right: closeBtn.left
      anchors.verticalCenter: parent.verticalCenter
      width: 16
      !text: tr(&#39;-&#39;)

    Button
      id: closeBtn
      anchors.right: parent.right
      anchors.verticalCenter: parent.verticalCenter
      width: 16
      !text: tr(&#39;x&#39;)

  UIWidget
    id: content
    anchors.left: parent.left
    anchors.right: scroll.left
    anchors.top: titlebar.bottom
    anchors.bottom: parent.bottom
    padding: 6

    background-color: alpha

    UIWidget
      id: grid
      anchors.left: parent.left
      anchors.top: parent.top
      width: 1
      height: 1

  VerticalScrollBar
    id: scroll
    anchors.right: parent.right
    anchors.top: titlebar.bottom
    anchors.bottom: parent.bottom
    step: 36
</pre></div>
</div>
<p><strong>Preset: ConfirmDialog</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>DialogWindow &lt; MainWindow
  id: confirm
  width: 300
  height: 140

  background-color: alpha

  UIWidget
    id: titlebar
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    height: 20

    background-color: #00000066

    Label
      id: title
      anchors.left: parent.left
      anchors.verticalCenter: parent.verticalCenter
      margin-left: 6
      text-auto-resize: true
      !text: tr(&#39;Confirm&#39;)
      font: verdana-11px-rounded

  UIWidget
    id: content
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: titlebar.bottom
    anchors.bottom: footer.top
    padding: 8

    background-color: alpha

    Label
      id: message
      anchors.left: parent.left
      anchors.right: parent.right
      text-wrap: true
      !text: tr(&#39;Are you sure?&#39;)
      font: verdana-11px-monochrome

  UIWidget
    id: footer
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    height: 32

    background-color: #00000033

    Button
      id: okButton
      anchors.right: cancelButton.left
      anchors.bottom: parent.bottom
      width: 72
      margin-right: 8
      !text: tr(&#39;Ok&#39;)

    Button
      id: cancelButton
      anchors.right: parent.right
      anchors.bottom: parent.bottom
      width: 72
      margin-right: 8
      !text: tr(&#39;Cancel&#39;)
</pre></div>
</div>
<div id="ch-29-2"></div>
</section>
<section id="presety-komponentow">
<h1>29.2 Presety komponentów<a class="headerlink" href="#presety-komponentow" title="Link to this heading">#</a></h1>
<p><strong>TitlebarTool</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>TitlebarWidget &lt; UIWidget
  id: titlebar
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: parent.top
  height: 20

  background-color: #00000066

  Label
    id: title
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 6
    text-auto-resize: true
    !text: tr(&#39;Title&#39;)
    font: verdana-11px-rounded

  Button
    id: minimizeBtn
    anchors.right: closeBtn.left
    anchors.verticalCenter: parent.verticalCenter
    width: 16
    !text: tr(&#39;-&#39;)

  Button
    id: closeBtn
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    width: 16
    !text: tr(&#39;x&#39;)
</pre></div>
</div>
<p><strong>ToolbarBasic</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>ToolbarWidget &lt; UIWidget
  id: toolbar
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: parent.top
  height: 20

  background-color: #00000044

  Button
    id: action1
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 60
    !text: tr(&#39;Action&#39;)
</pre></div>
</div>
<p><strong>PanelForm</strong></p>
<div class="highlight-otui notranslate"><div class="highlight"><pre><span></span>Panel
  id: form
  anchors.left: parent.left
  anchors.right: parent.right
  anchors.top: parent.top
  height: 120

  background-color: alpha

  UIWidget
    id: body
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    anchors.bottom: parent.bottom
    padding: 6

    background-color: alpha
</pre></div>
</div>
<div id="ch-29-3"></div>
</section>
<section id="warianty-tematyczne">
<h1>29.3 Warianty tematyczne<a class="headerlink" href="#warianty-tematyczne" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Narzędzie</strong>: tła półprzezroczyste, kompaktowe wysokości (20 px titlebar/toolbar), marginesy 6 px.</p></li>
<li><p><strong>Kontener</strong>: widoczne przyciski <code class="docutils literal notranslate"><span class="pre">back/pin</span></code>, spacing slotów 4 px, slot 36×36.</p></li>
<li><p><strong>Dialog</strong>: padding 8 px, przyciski 72 px, wysokość 32 px w footer.</p></li>
</ul>
<div id="ch-29-4"></div>
</section>
<section id="rejestr-presetow-i-wersjonowanie">
<h1>29.4 Rejestr presetów i wersjonowanie<a class="headerlink" href="#rejestr-presetow-i-wersjonowanie" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Registry (TS)</strong> trzyma wpisy: <code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">title</span></code>, <code class="docutils literal notranslate"><span class="pre">base</span></code>, <code class="docutils literal notranslate"><span class="pre">version</span></code>, <code class="docutils literal notranslate"><span class="pre">factory()</span></code>.</p></li>
<li><p>Stabilne <strong>slug‑i</strong> presetów (np. <code class="docutils literal notranslate"><span class="pre">mini/minimal</span></code>, <code class="docutils literal notranslate"><span class="pre">container/loot</span></code>, <code class="docutils literal notranslate"><span class="pre">dialog/confirm</span></code>).</p></li>
<li><p>Zmiany łamiące → nowy <code class="docutils literal notranslate"><span class="pre">version</span></code>, poprzedni nadal dostępny.</p></li>
</ul>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">PresetEntry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">factory</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">WidgetNode</span><span class="o">|</span><span class="nx">WidgetNode</span><span class="p">[]</span><span class="w"> </span><span class="p">};</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">PRESETS</span><span class="o">:</span><span class="w"> </span><span class="kt">PresetEntry</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;mini/minimal&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1.0.0&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Minimal MiniWindow&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">factory</span><span class="o">:</span><span class="w"> </span><span class="kt">presetMiniMinimal</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;container/loot&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1.0.0&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Container Loot&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">factory</span><span class="o">:</span><span class="w"> </span><span class="kt">presetContainerLoot</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;dialog/confirm&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1.0.0&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Confirm Dialog&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">factory</span><span class="o">:</span><span class="w"> </span><span class="kt">presetDialogConfirm</span><span class="w"> </span><span class="p">}</span>
<span class="p">];</span>
</pre></div>
</div>
<div id="ch-29-5"></div>
</section>
<section id="zasady-rozszerzania">
<h1>29.5 Zasady rozszerzania<a class="headerlink" href="#zasady-rozszerzania" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Rozszerzaj przez <strong>dziedziczenie</strong> (<code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">&lt;</span> <span class="pre">Y</span></code>) lub przez preset TS, nigdy przez ad‑hoc dzieci naruszające macierze.</p></li>
<li><p>Zachowuj STRICT OTUI przy eksporcie; nie duplikuj semantyki okna w stanach.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id112">
<h1>30. Testy wizualne i regresja<a class="headerlink" href="#id112" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-30-1"><span class="xref myst">30.1 Snapshoty 1:1</span></a></p></li>
<li><p><a class="reference internal" href="#ch-30-2"><span class="xref myst">30.2 DPI / font metrics / skalowanie</span></a></p></li>
<li><p><a class="reference internal" href="#ch-30-3"><span class="xref myst">30.3 Dostępność (kontrast, czytelność)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-30-4"><span class="xref myst">30.4 Golden diff i tolerancje</span></a></p></li>
<li><p><a class="reference internal" href="#ch-30-5"><span class="xref myst">30.5 Pipeline testów</span></a></p></li>
</ul>
<div id="ch-30-1"></div>
</section>
<section id="snapshoty-1-1">
<h1>30.1 Snapshoty 1:1<a class="headerlink" href="#snapshoty-1-1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Generuj obraz referencyjny dla każdego preset/blueprintu po eksporcie <code class="docutils literal notranslate"><span class="pre">.otui</span></code>.</p></li>
<li><p>Porównuj piksel‑po‑pikselu z goldenem; rozbijaj różnice na heatmapę.</p></li>
</ul>
<div id="ch-30-2"></div>
</section>
<section id="dpi-font-metrics-skalowanie">
<h1>30.2 DPI / font metrics / skalowanie<a class="headerlink" href="#dpi-font-metrics-skalowanie" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Testuj na stałych DPI (np. 96) oraz wariantach skali (1.0, 1.25, 1.5).</p></li>
<li><p>Weryfikuj metryki fontu: wysokość linii, kerning; nie dopuszczaj driftu między wersjami.</p></li>
</ul>
<div id="ch-30-3"></div>
</section>
<section id="dostepnosc-kontrast-czytelnosc">
<h1>30.3 Dostępność (kontrast, czytelność)<a class="headerlink" href="#dostepnosc-kontrast-czytelnosc" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Sprawdzaj minimalne kontrasty tekst/tło.</p></li>
<li><p>Minimalne rozmiary hitboxów (≥16×16).</p></li>
<li><p>Zawijanie i elipsyzacja długich tekstów.</p></li>
</ul>
<div id="ch-30-4"></div>
</section>
<section id="golden-diff-i-tolerancje">
<h1>30.4 Golden diff i tolerancje<a class="headerlink" href="#golden-diff-i-tolerancje" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Tolerancja szumu renderera ≤0.5% pikseli.</p></li>
<li><p>Każda różnica &gt; tolerancji wymaga akceptacji lub rollbacku presetów/stylów.</p></li>
</ul>
<div id="ch-30-5"></div>
</section>
<section id="pipeline-testow">
<h1>30.5 Pipeline testów<a class="headerlink" href="#pipeline-testow" title="Link to this heading">#</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>for each preset → serialize(STRICT) → export .otui → render snapshot → compare with golden → report
</pre></div>
</div>
<p>Raport: lista różnic, heatmapy, log walidatora (STRUCT/anchors/macierze).</p>
</section>
<hr class="docutils" />
<section id="id113">
<h1>31. Słownik i indeks<a class="headerlink" href="#id113" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#ch-31-1"><span class="xref myst">31.1 Słownik (A–Z)</span></a></p></li>
<li><p><a class="reference internal" href="#ch-31-2"><span class="xref myst">31.2 Indeks rozdziałów</span></a></p></li>
</ul>
<div id="ch-31-1"></div>
</section>
<section id="slownik-az">
<h1>31.1 Słownik (A–Z)<a class="headerlink" href="#slownik-az" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Anchors</strong> — kotwice położenia i rozmiaru względem krawędzi/obiektów.</p></li>
<li><p><strong>AST</strong> — abstrakcyjne drzewo składniowe reprezentujące OTUI w edytorze.</p></li>
<li><p><strong>Blueprint</strong> — kanoniczny szablon OTUI komponentu/okna.</p></li>
<li><p><strong>Grid (edytorowy)</strong> — siatka pomocnicza w edytorze, nie istnieje w OTUI.</p></li>
<li><p><strong>Layout‑owner</strong> — rodzic definiujący sloty/obszary i reguły dokowania.</p></li>
<li><p><strong>Macierz dzieci</strong> — tabela dozwolonych dzieci per parent/slot.</p></li>
<li><p><strong>Preset</strong> — gotowy zestaw węzłów przygotowanych do użycia jako wzorzec.</p></li>
<li><p><strong>Round‑trip</strong> — import → edycja → eksport bez utraty semantyki.</p></li>
<li><p><strong>Scroll pairing</strong> — reguły łączenia treści przewijanej ze ScrollBarem jako rodzeństwem.</p></li>
<li><p><strong>STRICT OTUI</strong> — format: LF, 2 spacje, brak komentarzy/tabów, kolejność atrybutów.</p></li>
</ul>
<div id="ch-31-2"></div>
</section>
<section id="indeks-rozdzialow">
<h1>31.2 Indeks rozdziałów<a class="headerlink" href="#indeks-rozdzialow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Okna</strong>: 5–9</p></li>
<li><p><strong>Organizacja</strong>: 10–14</p></li>
<li><p><strong>Dane/edycja</strong>: 15–20</p></li>
<li><p><strong>Wskaźniki/scroll</strong>: 21–22</p></li>
<li><p><strong>Warstwy i separatory</strong>: 23–24</p></li>
<li><p><strong>Reguły i walidacja</strong>: 25–26</p></li>
<li><p><strong>AST/IO</strong>: 27–28</p></li>
<li><p><strong>Presety</strong>: 29</p></li>
<li><p><strong>Testy</strong>: 30</p></li>
<li><p><strong>Słownik</strong>: 31</p></li>
</ul>
<hr class="docutils" />
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">OTClient v8 — Specyfikacja UI</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wprowadzenie-i-zasady">0. Wprowadzenie i zasady</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#konwencje-formatowania-i-strict-otui">1. Konwencje formatowania i STRICT OTUI</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#architektura-ui">2. Architektura UI</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#layout-i-wlasnosc-ukladu">3. Layout i własność układu</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#taksonomia-komponentow-przeglad">4. Taksonomia komponentów (przegląd)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#mainwindow">5. MainWindow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#staticmainwindow">6. StaticMainWindow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#miniwindow">7. MiniWindow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#containerwindow">8. ContainerWindow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dialogwindow">9. DialogWindow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#titlebar">10. Titlebar</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#toolbar">11. Toolbar</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#panel-groupbox">12. Panel / GroupBox</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tabbar-tabwidget">13. TabBar / TabWidget</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#splitter">14. Splitter</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#textlist-listrow">15. TextList / ListRow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#label-uilabel">16. Label / UILabel</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#button">17. Button</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#checkbox">18. CheckBox</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#textedit-passwordtextedit-multilinetextedit">19. TextEdit / PasswordTextEdit / MultilineTextEdit</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#combobox">20. ComboBox</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#progressbar">21. ProgressBar</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#scrollbar-vertical-horizontal">22. ScrollBar (Vertical/Horizontal)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#horizontalseparator">23. HorizontalSeparator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#statusoverlay">24. StatusOverlay</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#macierze-dozwolonych-dzieci-global">25. Macierze dozwolonych dzieci (global)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#walidacja-i-autonaprawy-global">26. Walidacja i auto‑naprawy (global)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#parser-serializer-otui-ast-typescript">27. Parser/Serializer OTUI → AST (TypeScript)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#import-export-i-roundtrip-edytor-plik-lua">28. Import/Export i round‑trip (edytor ↔ plik ↔ Lua)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#biblioteka-presetow-gotowe-szablony">29. Biblioteka presetów (gotowe szablony)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#testy-wizualne-i-regresja">30. Testy wizualne i regresja</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#slownik-i-indeks">31. Słownik i indeks</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#cel-i-zakres-1-1">0.1 Cel i zakres „1:1”</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#terminologia">0.2 Terminologia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#kryteria-jakosci">0.3 Kryteria jakości</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow">0.4 Workflow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#indent-i-strict">1.1 Indent i STRICT</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#stany">1.4 Stany</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zasoby-data">1.5 Zasoby <code class="docutils literal notranslate"><span class="pre">data/</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pliki-otui-i-ladowanie">2.1 Pliki <code class="docutils literal notranslate"><span class="pre">.otui</span></code> i ładowanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tworzenie-dynamiczne">2.2 Tworzenie dynamiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hierarchia-i-identyfikacja">2.3 Hierarchia i identyfikacja</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fokus-i-nawigacja">2.4 Fokus i nawigacja</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zasada-layoutowner">3.1 Zasada „layout‑owner”</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#anchors-size-margins-kolizje">3.2 Anchors, size, margins, kolizje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#scroll-pairing">3.3 Scroll pairing</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#autofit-width-dokowane-okna">3.4 Auto‑fit width (dokowane okna)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#okna-windowclass">4.1 Okna (Window‑class)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#kontenery-contentclass">4.2 Kontenery (Content‑class)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#organizacja-i-nawigacja">4.3 Organizacja i nawigacja</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dane-i-edycja-inputs-lists">4.4 Dane i edycja (Inputs/Lists)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wskazniki-i-przewijanie">4.5 Wskaźniki i przewijanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-i-sloty">5.1 Struktura i sloty</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dozwolone-dzieci-macierz">5.2 Dozwolone dzieci (macierz)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#geometria-i-styl-geometria-styl-zachowanie">5.3 Geometria i styl (GEOMETRIA → STYL → ZACHOWANIE)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#stany-i-zdarzenia">5.4 Stany i zdarzenia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#blueprint-otui-kanoniczny">5.5 Blueprint OTUI (kanoniczny)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#mapowanie-ts-otui-serializer">5.6 Mapowanie TS ↔ OTUI (serializer)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#walidator-bledy-ostrzezenia">5.7 Walidator (błędy/ostrzeżenia)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#przyklady-i-edgecases">5.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">6.2 Dozwolone dzieci (macierz)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#geometria-i-styl">6.3 Geometria i styl</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">6.4 Stany i zdarzenia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">6.5 Blueprint OTUI (kanoniczny)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">6.6 Mapowanie TS ↔ OTUI (serializer)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">6.7 Walidator (błędy/ostrzeżenia)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">6.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#titlebar-minimize-close-dragarea">7.2 Titlebar: minimize/close, drag‑area</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#autofit-width-i-docking">7.3 Auto‑fit width i docking</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">7.4 Stany i zdarzenia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#blueprint-otui-kanoniczny-strict">7.5 Blueprint OTUI (kanoniczny, STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">7.6 Mapowanie TS ↔ OTUI (serializer)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">7.7 Walidator (błędy/ostrzeżenia)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">7.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#titlebar-back-pin-min-close">8.2 Titlebar: back/pin/min/close</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#content-siatka-slotow-i-dnd">8.3 Content: siatka slotów i DnD</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#scroll-i-overflow">8.4 Scroll i overflow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">8.5 Blueprint OTUI (kanoniczny, STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">8.6 Mapowanie TS ↔ OTUI (serializer)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">8.7 Walidator (błędy/ostrzeżenia)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">8.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">9. DialogWindow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura">9.1 Struktura</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enter-escape-ok-cancel">9.2 Enter/Escape (OK/Cancel)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#modalnosc-i-fokus">9.3 Modalność i fokus</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#blueprint-otui-strict">9.4 Blueprint OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#preset-ts-serializerready">9.5 Preset TS (serializer‑ready)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">9.6 Walidator (błędy/ostrzeżenia)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">9.7 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">10. Titlebar</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ikona-tytul-przyciski">10.1 Ikona, tytuł, przyciski</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#slot-i-dozwolone-dzieci">10.2 Slot i dozwolone dzieci</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dragmove-i-fokus">10.3 Drag‑move i fokus</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">10.4 Blueprint OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#preset-ts-warianty-back-pin">10.5 Preset TS (warianty back/pin)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#walidator">10.6 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#integracja-lua-glue">10.7 Integracja (Lua glue)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">11. Toolbar</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">11.5 Blueprint OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">11.6 Preset TS (serializer‑ready)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">11.7 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">11.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">12. Panel / GroupBox</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#rola-i-struktura">12.1 Rola i struktura</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dozwolone-dzieci">12.2 Dozwolone dzieci</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#blueprinty-otui-strict">12.5 Blueprinty OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#presety-ts">12.6 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">12.7 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">12.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">13. TabBar / TabWidget</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">13.6 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id30">13.7 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id31">13.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id32">14. Splitter</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#blueprinty-otui-strict-poziomy-pionowy">14.5 Blueprinty OTUI (STRICT) – poziomy/pionowy</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id33">14.6 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id34">14.7 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id35">14.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#splitter-grip-i-persystencja">14.9 Splitter — grip i persystencja</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id36">15. TextList / ListRow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id37">15.3 Geometria i styl</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id38">15.4 Scroll pairing</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id39">15.5 Stany i zdarzenia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id40">15.6 Blueprinty OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id41">15.7 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id42">15.8 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id43">15.9 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#textlist-nawigacja-klawiatura-i-ensurevisible">15.10 TextList — nawigacja klawiaturą i ensureVisible</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id44">16. Label / UILabel</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id45">16.1 Rola i struktura</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wlasciwosci-tekstu">16.2 Właściwości tekstu</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id46">16.3 Geometria i styl</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id47">16.4 Stany i zdarzenia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id48">16.5 Blueprinty OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id49">16.6 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id50">16.7 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id51">16.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#label-pomiar-tekstu-elipsyzacja-dpi-scale">16.9 Label — pomiar tekstu, elipsyzacja, DPI/scale</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id52">17. Button</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id53">17.1 Rola i struktura</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wlasciwosci-i-minimalne-rozmiary">17.2 Właściwości i minimalne rozmiary</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id54">17.3 Geometria i styl</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id55">17.4 Stany i zdarzenia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id56">17.5 Blueprinty OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id57">17.6 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id58">17.7 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id59">17.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#button-hover-disabled-i-dostepnosc">17.9 Button — hover/disabled i dostępność</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id60">18. CheckBox</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id61">18.1 Rola i struktura</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wlasciwosci">18.2 Właściwości</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id62">18.3 Geometria i styl</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id63">18.4 Stany i zdarzenia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id64">18.5 Blueprinty OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id65">18.6 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id66">18.7 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id67">18.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#checkbox-tristate-i-offset-etykiety">18.9 CheckBox — tri‑state i offset etykiety</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id68">19. TextEdit / PasswordTextEdit / MultilineTextEdit</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id69">19.1 Rola i struktura</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wlasciwosci-tekstowe">19.2 Właściwości tekstowe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id70">19.3 Geometria i styl</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#scroll-pairing-multiline">19.4 Scroll pairing (Multiline)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id71">19.5 Stany i zdarzenia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id72">19.6 Blueprinty OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id73">19.7 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id74">19.8 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id75">19.9 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#textedit-multiline-ime-paste-i-filtry-wejscia">19.10 TextEdit/Multiline — IME, paste i filtry wejścia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#multiline-zaznaczenie-lineheight-i-pixelsscroll">19.11 Multiline — zaznaczenie, line‑height i pixels‑scroll</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id76">20. ComboBox</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id77">20.1 Rola i struktura</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wlasciwosci-i-menu">20.2 Właściwości i menu</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id78">20.3 Geometria i styl</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zdarzenia-i-stany">20.4 Zdarzenia i stany</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id79">20.5 Blueprint OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id80">20.6 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id81">20.7 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id82">20.8 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id83">21. ProgressBar</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#rola-i-zakres">21.1 Rola i zakres</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wlasciwosci-i-styl">21.2 Właściwości i styl</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#geometria">21.3 Geometria</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id84">21.4 Blueprint OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id85">21.5 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id86">21.6 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id87">21.7 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id88">22. ScrollBar (Vertical/Horizontal)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#rola-i-parowanie">22.1 Rola i parowanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id89">22.2 Właściwości</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#geometria-i-dokowanie">22.3 Geometria i dokowanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id90">22.4 Blueprinty OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id91">22.5 Presety TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id92">22.6 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id93">22.7 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id94">23. HorizontalSeparator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#rola-i-ograniczenia">23.1 Rola i ograniczenia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id95">23.2 Geometria i styl</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id96">23.3 Blueprint OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#preset-ts">23.4 Preset TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id97">23.5 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id98">23.6 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id99">24. StatusOverlay</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id100">24.1 Rola i struktura</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id101">24.2 Geometria i styl</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id102">24.3 Stany i zdarzenia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id103">24.4 Blueprint OTUI (STRICT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id104">24.5 Preset TS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id105">24.6 Walidator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id106">24.7 Przykłady i edge‑cases</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id107">25. Macierze dozwolonych dzieci (global)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tabele-macierzowe-per-komponent-i-slot">25.1 Tabele macierzowe per komponent i slot</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reguly-globalne">25.2 Reguły globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id108">26. Walidacja i auto‑naprawy (global)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bledy-blokujace">26.1 Błędy blokujące (❌)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ostrzezenia">26.2 Ostrzeżenia (⚠️)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#autonaprawy-deterministyczne">26.3 Auto‑naprawy deterministyczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pipeline-walidatora">26.4 Pipeline walidatora</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id109">27. Parser/Serializer OTUI → AST (TypeScript)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tokenizacja-i-indent-dedent">27.1 Tokenizacja i INDENT/DEDENT</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ksztalt-ast">27.2 Kształt AST</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#algorytm-parsowania">27.3 Algorytm parsowania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#serializacja-i-ensurestrictotui">27.4 Serializacja i <code class="docutils literal notranslate"><span class="pre">ensureStrictOtui()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bledy-ostrzezenia-pozycje">27.5 Błędy/ostrzeżenia/pozycje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#testy-roundtrip-goldeny">27.6 Testy round‑trip (goldeny)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id110">28. Import/Export i round‑trip (edytor ↔ plik ↔ Lua)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#import-z-otui">28.1 Import z <code class="docutils literal notranslate"><span class="pre">.otui</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#import-z-blokow-w-lua-otui-begin-end">28.2 Import z bloków w Lua (<code class="docutils literal notranslate"><span class="pre">@OTUI_BEGIN/END</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#eksport-do-otui-aktualizacja-bloku-w-lua">28.3 Eksport do <code class="docutils literal notranslate"><span class="pre">.otui</span></code> + aktualizacja bloku w Lua</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#runtime-tylko-pliki">28.4 Runtime: tylko pliki</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id111">29. Biblioteka presetów (gotowe szablony)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#presety-okien">29.1 Presety okien</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#presety-komponentow">29.2 Presety komponentów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#warianty-tematyczne">29.3 Warianty tematyczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#rejestr-presetow-i-wersjonowanie">29.4 Rejestr presetów i wersjonowanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zasady-rozszerzania">29.5 Zasady rozszerzania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id112">30. Testy wizualne i regresja</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#snapshoty-1-1">30.1 Snapshoty 1:1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dpi-font-metrics-skalowanie">30.2 DPI / font metrics / skalowanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dostepnosc-kontrast-czytelnosc">30.3 Dostępność (kontrast, czytelność)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#golden-diff-i-tolerancje">30.4 Golden diff i tolerancje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pipeline-testow">30.5 Pipeline testów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id113">31. Słownik i indeks</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#slownik-az">31.1 Słownik (A–Z)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#indeks-rozdzialow">31.2 Indeks rozdziałów</a></li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>Ta strona</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/api/engine/otclient_v_8_specyfikacja_ui.md.txt"
            rel="nofollow">Pokaż źródło</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>