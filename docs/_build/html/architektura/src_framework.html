
<!DOCTYPE html>


<html lang="pl" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>src framework &#8212; OTClientV8 Dev Docs 0.1.0 - dokumentacja</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=8aaba760" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=8aaba760" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=c0495948"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/translations.js?v=da4973ce"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'architektura/src_framework';</script>
    <link rel="icon" href="../_static/logo-light.svg"/>
    <link rel="index" title="Indeks" href="../genindex.html" />
    <link rel="search" title="Szukaj" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="pl"/>
  <meta name="docsearch:version" content="0.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-light.svg" class="logo__image only-light" alt="OTClientV8 Dev Docs 0.1.0 - dokumentacja - Home"/>
    <img src="../_static/logo-light.svg" class="logo__image only-dark pst-js-only" alt="OTClientV8 Dev Docs 0.1.0 - dokumentacja - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Szukaj" aria-label="Szukaj" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Szukaj</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/lukaszj321/otcv8-dev" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Szukaj" aria-label="Szukaj" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Szukaj</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/lukaszj321/otcv8-dev" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">src framework</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="src-framework">
<h1>src framework<a class="headerlink" href="#src-framework" title="Link to this heading">#</a></h1>
</section>
<section id="ponizej-znajduje-sie-kompletna-dokumentacja-techniczna-dla-repozytorium-src-framework">
<h1>Poniżej znajduje się kompletna dokumentacja techniczna dla repozytorium, src/framework<a class="headerlink" href="#ponizej-znajduje-sie-kompletna-dokumentacja-techniczna-dla-repozytorium-src-framework" title="Link to this heading">#</a></h1>
</section>
<section id="opis-ogolny">
<h1>Opis ogólny<a class="headerlink" href="#opis-ogolny" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">const.h</span></code> pełni rolę centralnego repozytorium dla stałych, makr i typów wyliczeniowych (enum) używanych w całym frameworku. Definiuje on kluczowe wartości, takie jak kody klawiszy, poziomy logowania, flagi wyrównania, przyciski myszy, a także stałe matematyczne i makra kompilacji. Jest to fundamentalny plik nagłówkowy, który zapewnia spójność i czytelność kodu poprzez zdefiniowanie nazwanych stałych zamiast „magicznych liczb”.</p>
</section>
<section id="definicje-i-makra">
<h1>Definicje i Makra<a class="headerlink" href="#definicje-i-makra" title="Link to this heading">#</a></h1>
</section>
<section id="makra-matematyczne">
<h1>Makra matematyczne<a class="headerlink" href="#makra-matematyczne" title="Link to this heading">#</a></h1>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">DEG_TO_RAD</span></code>: Służy do konwersji stopni na radiany.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="define-deg-to-rad-acos-1-180-0">
<h1>define DEG_TO_RAD (acos(-1)/180.0)<a class="headerlink" href="#define-deg-to-rad-acos-1-180-0" title="Link to this heading">#</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">RAD_TO_DEC</span></code>: Służy do konwersji radianów na stopnie.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="define-rad-to-dec-180-0-acos-1">
<h1>define RAD_TO_DEC (180.0/acos(-1))<a class="headerlink" href="#define-rad-to-dec-180-0-acos-1" title="Link to this heading">#</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```
</pre></div>
</div>
</section>
<section id="makra-budowania-build-macros">
<h1>Makra budowania (Build Macros)<a class="headerlink" href="#makra-budowania-build-macros" title="Link to this heading">#</a></h1>
<p>Makra te są definiowane podczas kompilacji i dostarczają informacji o wersji i środowisku budowania.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">BUILD_COMMIT</span></code>: Przechowuje hash commita Git. Domyślnie „dev”.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="ifndef-build-commit">
<h1>ifndef BUILD_COMMIT<a class="headerlink" href="#ifndef-build-commit" title="Link to this heading">#</a></h1>
</section>
<section id="define-build-commit-dev">
<h1>define BUILD_COMMIT „dev”<a class="headerlink" href="#define-build-commit-dev" title="Link to this heading">#</a></h1>
</section>
<section id="endif">
<h1>endif<a class="headerlink" href="#endif" title="Link to this heading">#</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">BUILD_REVISION</span></code>: Przechowuje numer rewizji. Domyślnie 0.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="ifndef-build-revision">
<h1>ifndef BUILD_REVISION<a class="headerlink" href="#ifndef-build-revision" title="Link to this heading">#</a></h1>
</section>
<section id="define-build-revision-0">
<h1>define BUILD_REVISION 0<a class="headerlink" href="#define-build-revision-0" title="Link to this heading">#</a></h1>
</section>
<section id="id1">
<h1>endif<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">BUILD_TYPE</span></code>: Określa typ budowania (np. „release”, „debug”). Domyślnie „unknown”.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="ifndef-build-type">
<h1>ifndef BUILD_TYPE<a class="headerlink" href="#ifndef-build-type" title="Link to this heading">#</a></h1>
</section>
<section id="define-build-type-unknown">
<h1>define BUILD_TYPE „unknown”<a class="headerlink" href="#define-build-type-unknown" title="Link to this heading">#</a></h1>
</section>
<section id="id2">
<h1>endif<a class="headerlink" href="#id2" title="Link to this heading">#</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">BUILD_ARCH</span></code>: Określa architekturę procesora (x64, x86). Wykrywane automatycznie, jeśli nie jest zdefiniowane.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="ifndef-build-arch">
<h1>ifndef BUILD_ARCH<a class="headerlink" href="#ifndef-build-arch" title="Link to this heading">#</a></h1>
</section>
<section id="if-defined-amd64-defined-m-x64">
<h1>if defined(__amd64) || defined(_M_X64)<a class="headerlink" href="#if-defined-amd64-defined-m-x64" title="Link to this heading">#</a></h1>
</section>
<section id="define-build-arch-x64">
<h1>define BUILD_ARCH „x64”<a class="headerlink" href="#define-build-arch-x64" title="Link to this heading">#</a></h1>
</section>
<section id="elif-defined-i386-defined-m-ix86-defined-x86">
<h1>elif defined(__i386) || defined(_M_IX86) || defined(<em>X86</em>)<a class="headerlink" href="#elif-defined-i386-defined-m-ix86-defined-x86" title="Link to this heading">#</a></h1>
</section>
<section id="define-build-arch-x86">
<h1>define BUILD_ARCH „x86”<a class="headerlink" href="#define-build-arch-x86" title="Link to this heading">#</a></h1>
</section>
<section id="else">
<h1>else<a class="headerlink" href="#else" title="Link to this heading">#</a></h1>
</section>
<section id="define-build-arch-unknown">
<h1>define BUILD_ARCH „unknown”<a class="headerlink" href="#define-build-arch-unknown" title="Link to this heading">#</a></h1>
</section>
<section id="id3">
<h1>endif<a class="headerlink" href="#id3" title="Link to this heading">#</a></h1>
</section>
<section id="id4">
<h1>endif<a class="headerlink" href="#id4" title="Link to this heading">#</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```
</pre></div>
</div>
</section>
<section id="namespace-fw">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">Fw</span></code><a class="headerlink" href="#namespace-fw" title="Link to this heading">#</a></h1>
<p>Przestrzeń nazw <code class="docutils literal notranslate"><span class="pre">Fw</span></code> (skrót od Framework) grupuje wszystkie stałe i typy wyliczeniowe, aby uniknąć konfliktów nazw w globalnej przestrzeni nazw.</p>
</section>
<section id="zmienne-globalne">
<h1>Zmienne globalne<a class="headerlink" href="#zmienne-globalne" title="Link to this heading">#</a></h1>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pi</span></code>: Stała matematyczna przechowująca przybliżoną wartość liczby Pi.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14159265</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MIN_ALPHA</span></code>: Minimalna wartość alfa (przezroczystości), poniżej której obiekty mogą być uznawane za w pełni przezroczyste.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">MIN_ALPHA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.003f</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="typy-wyliczeniowe-enums">
<h1>Typy wyliczeniowe (Enums)<a class="headerlink" href="#typy-wyliczeniowe-enums" title="Link to this heading">#</a></h1>
</section>
<section id="enum-key">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">Key</span></code><a class="headerlink" href="#enum-key" title="Link to this heading">#</a></h1>
<p>Definiuje kody klawiszy klawiatury. Wartości liczbowe dla klawiszy drukowalnych odpowiadają ich kodom ASCII.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Wartość</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyUnknown</span></code></p></td>
<td class="text-left"><p>0</p></td>
<td class="text-left"><p>Nieznany klawisz</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyEscape</span></code></p></td>
<td class="text-left"><p>1</p></td>
<td class="text-left"><p>Klawisz Escape</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyTab</span></code></p></td>
<td class="text-left"><p>2</p></td>
<td class="text-left"><p>Klawisz Tab</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyBackspace</span></code></p></td>
<td class="text-left"><p>3</p></td>
<td class="text-left"><p>Klawisz Backspace</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyEnter</span></code></p></td>
<td class="text-left"><p>5</p></td>
<td class="text-left"><p>Klawisz Enter/Return</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyNumpad9</span></code></p></td>
<td class="text-left"><p>150</p></td>
<td class="text-left"><p>Klawisz 9 na klawiaturze numerycznej</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-loglevel">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">LogLevel</span></code><a class="headerlink" href="#enum-loglevel" title="Link to this heading">#</a></h1>
<p>Definiuje poziomy ważności dla komunikatów w systemie logowania.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Wartość</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">LogDebug</span></code></p></td>
<td class="text-left"><p>0</p></td>
<td class="text-left"><p>Wiadomości debugowania</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">LogInfo</span></code></p></td>
<td class="text-left"><p>1</p></td>
<td class="text-left"><p>Informacje ogólne</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">LogWarning</span></code></p></td>
<td class="text-left"><p>2</p></td>
<td class="text-left"><p>Ostrzeżenia</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">LogError</span></code></p></td>
<td class="text-left"><p>3</p></td>
<td class="text-left"><p>Błędy</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">LogFatal</span></code></p></td>
<td class="text-left"><p>4</p></td>
<td class="text-left"><p>Błędy krytyczne, powodujące zamknięcie aplikacji</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-aspectratiomode">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">AspectRatioMode</span></code><a class="headerlink" href="#enum-aspectratiomode" title="Link to this heading">#</a></h1>
<p>Określa, w jaki sposób zachować proporcje obrazu podczas skalowania.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">IgnoreAspectRatio</span></code></p></td>
<td class="text-left"><p>Ignoruje proporcje, rozciągając obraz do pełnego rozmiaru.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeepAspectRatio</span></code></p></td>
<td class="text-left"><p>Zachowuje proporcje, dopasowując obraz do mniejszego wymiaru.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeepAspectRatioByExpanding</span></code></p></td>
<td class="text-left"><p>Zachowuje proporcje, wypełniając cały obszar (może przyciąć obraz).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-alignmentflag">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">AlignmentFlag</span></code><a class="headerlink" href="#enum-alignmentflag" title="Link to this heading">#</a></h1>
<p>Flagi bitowe używane do określania wyrównania tekstu lub widgetów w kontenerze. Można je łączyć za pomocą operatora <code class="docutils literal notranslate"><span class="pre">|</span></code>.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Wartość</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AlignNone</span></code></p></td>
<td class="text-left"><p>0</p></td>
<td class="text-left"><p>Brak wyrównania</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AlignLeft</span></code></p></td>
<td class="text-left"><p>1</p></td>
<td class="text-left"><p>Wyrównanie do lewej</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AlignRight</span></code></p></td>
<td class="text-left"><p>2</p></td>
<td class="text-left"><p>Wyrównanie do prawej</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AlignTop</span></code></p></td>
<td class="text-left"><p>4</p></td>
<td class="text-left"><p>Wyrównanie do góry</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AlignBottom</span></code></p></td>
<td class="text-left"><p>8</p></td>
<td class="text-left"><p>Wyrównanie do dołu</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AlignHorizontalCenter</span></code></p></td>
<td class="text-left"><p>16</p></td>
<td class="text-left"><p>Wyśrodkowanie w poziomie</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AlignVerticalCenter</span></code></p></td>
<td class="text-left"><p>32</p></td>
<td class="text-left"><p>Wyśrodkowanie w pionie</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AlignCenter</span></code></p></td>
<td class="text-left"><p>48</p></td>
<td class="text-left"><p>Pełne wyśrodkowanie (kombinacja <code class="docutils literal notranslate"><span class="pre">HorizontalCenter</span></code> i <code class="docutils literal notranslate"><span class="pre">VerticalCenter</span></code>)</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>Inne kombinacje</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-anchoredge">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">AnchorEdge</span></code><a class="headerlink" href="#enum-anchoredge" title="Link to this heading">#</a></h1>
<p>Definiuje krawędzie, do których można „zakotwiczyć” widget w layoucie typu <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code>.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AnchorNone</span></code></p></td>
<td class="text-left"><p>Brak zakotwiczenia</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AnchorTop</span></code></p></td>
<td class="text-left"><p>Górna krawędź</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AnchorBottom</span></code></p></td>
<td class="text-left"><p>Dolna krawędź</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-focusreason">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">FocusReason</span></code><a class="headerlink" href="#enum-focusreason" title="Link to this heading">#</a></h1>
<p>Określa przyczynę, dla której widget otrzymał fokus.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">MouseFocusReason</span></code></p></td>
<td class="text-left"><p>Fokus uzyskany przez kliknięcie myszą.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyboardFocusReason</span></code></p></td>
<td class="text-left"><p>Fokus uzyskany przez nawigację klawiaturą (np. Tab).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ActiveFocusReason</span></code></p></td>
<td class="text-left"><p>Fokus ustawiony programowo.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OtherFocusReason</span></code></p></td>
<td class="text-left"><p>Inna przyczyna.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-autofocuspolicy">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">AutoFocusPolicy</span></code><a class="headerlink" href="#enum-autofocuspolicy" title="Link to this heading">#</a></h1>
<p>Definiuje, jak widget-rodzic powinien automatycznie ustawiać fokus na swoich dzieciach.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AutoFocusNone</span></code></p></td>
<td class="text-left"><p>Brak automatycznego fokusa.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AutoFocusFirst</span></code></p></td>
<td class="text-left"><p>Ustawia fokus na pierwszym dziecku, które może go otrzymać.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AutoFocusLast</span></code></p></td>
<td class="text-left"><p>Ustawia fokus na ostatnim dziecku, które może go otrzymać.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-inputeventtype">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">InputEventType</span></code><a class="headerlink" href="#enum-inputeventtype" title="Link to this heading">#</a></h1>
<p>Definiuje typy zdarzeń wejściowych (klawiatura, mysz).</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">NoInputEvent</span></code></p></td>
<td class="text-left"><p>Brak zdarzenia.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyTextInputEvent</span></code></p></td>
<td class="text-left"><p>Zdarzenie wprowadzenia tekstu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyDownInputEvent</span></code></p></td>
<td class="text-left"><p>Zdarzenie wciśnięcia klawisza.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyPressInputEvent</span></code></p></td>
<td class="text-left"><p>Zdarzenie przytrzymania klawisza (auto-powtarzanie).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-mousebutton">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">MouseButton</span></code><a class="headerlink" href="#enum-mousebutton" title="Link to this heading">#</a></h1>
<p>Definiuje przyciski myszy oraz dotyk.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">MouseNoButton</span></code></p></td>
<td class="text-left"><p>Brak przycisku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">MouseLeftButton</span></code></p></td>
<td class="text-left"><p>Lewy przycisk myszy.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-mousewheeldirection">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">MouseWheelDirection</span></code><a class="headerlink" href="#enum-mousewheeldirection" title="Link to this heading">#</a></h1>
<p>Definiuje kierunek przewijania kółkiem myszy.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">MouseNoWheel</span></code></p></td>
<td class="text-left"><p>Brak przewijania.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">MouseWheelUp</span></code></p></td>
<td class="text-left"><p>Przewijanie w górę.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">MouseWheelDown</span></code></p></td>
<td class="text-left"><p>Przewijanie w dół.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-keyboardmodifier">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">KeyboardModifier</span></code><a class="headerlink" href="#enum-keyboardmodifier" title="Link to this heading">#</a></h1>
<p>Flagi bitowe dla klawiszy modyfikujących (Ctrl, Alt, Shift).</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Wartość</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyboardNoModifier</span></code></p></td>
<td class="text-left"><p>0</p></td>
<td class="text-left"><p>Brak modyfikatora.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyboardCtrlModifier</span></code></p></td>
<td class="text-left"><p>1</p></td>
<td class="text-left"><p>Wciśnięty Ctrl.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyboardAltModifier</span></code></p></td>
<td class="text-left"><p>2</p></td>
<td class="text-left"><p>Wciśnięty Alt.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KeyboardShiftModifier</span></code></p></td>
<td class="text-left"><p>4</p></td>
<td class="text-left"><p>Wciśnięty Shift.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-widgetstate">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">WidgetState</span></code><a class="headerlink" href="#enum-widgetstate" title="Link to this heading">#</a></h1>
<p>Flagi bitowe definiujące stan widgetu (np. aktywny, najechany, wciśnięty). Używane do dynamicznego stylowania widgetów.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Wartość</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">InvalidState</span></code></p></td>
<td class="text-left"><p>-1</p></td>
<td class="text-left"><p>Nieprawidłowy stan.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">DefaultState</span></code></p></td>
<td class="text-left"><p>0</p></td>
<td class="text-left"><p>Stan domyślny.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ActiveState</span></code></p></td>
<td class="text-left"><p>1</p></td>
<td class="text-left"><p>Widget jest aktywny.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">FocusState</span></code></p></td>
<td class="text-left"><p>2</p></td>
<td class="text-left"><p>Widget ma fokus.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">HoverState</span></code></p></td>
<td class="text-left"><p>4</p></td>
<td class="text-left"><p>Kursor myszy jest nad widgetem.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enum-drawpane">
<h1><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">DrawPane</span></code><a class="headerlink" href="#enum-drawpane" title="Link to this heading">#</a></h1>
<p>Określa warstwę rysowania dla widgetów, co pozwala na kontrolowanie kolejności renderowania.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Wartość</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ForegroundPane</span></code></p></td>
<td class="text-left"><p>1</p></td>
<td class="text-left"><p>Warstwa pierwszoplanowa (interfejs użytkownika).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">MapBackgroundPane</span></code></p></td>
<td class="text-left"><p>2</p></td>
<td class="text-left"><p>Tło mapy gry.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">MapForegroundPane</span></code></p></td>
<td class="text-left"><p>3</p></td>
<td class="text-left"><p>Pierwszy plan mapy gry (np. efekty nad postaciami).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="zaleznosci-i-powiazania">
<h1>Zależności i powiązania<a class="headerlink" href="#zaleznosci-i-powiazania" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/compiler.h</span></code>: Plik ten dostarcza makr i definicji specyficznych dla kompilatora (np. <code class="docutils literal notranslate"><span class="pre">BUILD_COMPILER</span></code>).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="cmakelists-txt">
<h1>📄 CMakeLists.txt<a class="headerlink" href="#cmakelists-txt" title="Link to this heading">#</a></h1>
</section>
<section id="id5">
<h1>Opis ogólny<a class="headerlink" href="#id5" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> jest głównym skryptem konfiguracyjnym dla systemu budowania CMake. Jego rolą jest zdefiniowanie, jak projekt <code class="docutils literal notranslate"><span class="pre">otclient</span></code> ma być kompilowany. Określa on flagi kompilatora, zależności od bibliotek zewnętrznych, listę plików źródłowych oraz opcje konfiguracyjne, które pozwalają dostosować proces budowania do różnych platform (Windows, Linux, Apple, WebAssembly) i potrzeb (np. włączenie/wyłączenie obsługi dźwięku, grafiki, sieci).</p>
</section>
<section id="opcje-budowania">
<h1>Opcje budowania<a class="headerlink" href="#opcje-budowania" title="Link to this heading">#</a></h1>
<p>Skrypt definiuje kilka opcji, które można kontrolować podczas generowania projektu.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Opcja</p></th>
<th class="head text-left"><p>Domyślnie</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">LUAJIT</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ON</span></code></p></td>
<td class="text-left"><p>Używa LuaJIT zamiast standardowej biblioteki Lua.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">CRASH_HANDLER</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ON</span></code> (poza Apple)</p></td>
<td class="text-left"><p>Włącza generowanie raportów po awarii aplikacji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">USE_STATIC_LIBS</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ON</span></code> (poza Apple)</p></td>
<td class="text-left"><p>Linkuje biblioteki statycznie zamiast dynamicznie (DLL).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">USE_LIBCPP</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OFF</span></code> (dla Apple <code class="docutils literal notranslate"><span class="pre">ON</span></code>)</p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">libc++</span></code> zamiast <code class="docutils literal notranslate"><span class="pre">stdc++</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">USE_LTO</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OFF</span></code></p></td>
<td class="text-left"><p>Włącza optymalizacje w czasie linkowania (Link Time Optimizations).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OPENGLES</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OFF</span></code></p></td>
<td class="text-left"><p>Używa OpenGL ES zamiast standardowego OpenGL. Dostępne wersje „1.0”, „2.0”.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">WINDOWS_CONSOLE</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OFF</span></code></p></td>
<td class="text-left"><p>Włącza okno konsoli w systemie Windows.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="flagi-frameworka">
<h1>Flagi frameworka<a class="headerlink" href="#flagi-frameworka" title="Link to this heading">#</a></h1>
<p>Skrypt używa flag preprocesora do warunkowej kompilacji modułów:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FRAMEWORK_SOUND</span></code>: Włącza kompilację modułu dźwięku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FRAMEWORK_GRAPHICS</span></code>: Włącza kompilację modułu grafiki.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FRAMEWORK_NET</span></code>: Włącza kompilację modułu sieciowego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FRAMEWORK_XML</span></code>: Włącza kompilację modułu do parsowania XML (TinyXML).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FRAMEWORK_THREAD_SAFE</span></code>: Dodaje definicję <code class="docutils literal notranslate"><span class="pre">THREAD_SAFE</span></code>, prawdopodobnie dla kodu wielowątkowego.</p></li>
</ul>
</section>
<section id="struktura-projektu-pliki-zrodlowe">
<h1>Struktura projektu (pliki źródłowe)<a class="headerlink" href="#struktura-projektu-pliki-zrodlowe" title="Link to this heading">#</a></h1>
<p>Plik definiuje listę wszystkich plików źródłowych (<code class="docutils literal notranslate"><span class="pre">.h</span></code>, <code class="docutils literal notranslate"><span class="pre">.cpp</span></code>, <code class="docutils literal notranslate"><span class="pre">.c</span></code>) składających się na framework. Są one pogrupowane w logiczne moduły:</p>
<ul class="simple">
<li><p><strong>Główne pliki</strong>: <code class="docutils literal notranslate"><span class="pre">const.h</span></code>, <code class="docutils literal notranslate"><span class="pre">global.h</span></code>, <code class="docutils literal notranslate"><span class="pre">pch.h</span></code>, <code class="docutils literal notranslate"><span class="pre">luafunctions.cpp</span></code></p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">util</span></code></strong>: Narzędzia pomocnicze (kolory, kryptografia, obsługa PNG, struktury danych jak <code class="docutils literal notranslate"><span class="pre">Rect</span></code>, <code class="docutils literal notranslate"><span class="pre">Point</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">stdext</span></code></strong>: Rozszerzenia standardowej biblioteki C++ (obsługa stringów, czasu, rzutowania typów, wątków).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">core</span></code></strong>: Rdzeń aplikacji (pętla główna, obsługa zdarzeń, logowanie, zarządzanie modułami i zasobami).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luaengine</span></code></strong>: Silnik Lua i mechanizmy bindowania C++ do Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otml</span></code></strong>: Parser i emiter dla języka OTML (OTClient Markup Language).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">platform</span></code></strong>: Kod specyficzny dla platformy (obsługa okien, obsługa awarii).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">graphics</span></code> (warunkowo)</strong>: Silnik graficzny (OpenGL, shadery, tekstury, fonty, UI).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">sound</span></code> (warunkowo)</strong>: Silnik dźwięku (OpenAL, obsługa OGG Vorbis).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">net</span></code> (warunkowo)</strong>: Obsługa sieci (połączenia, protokoły, serwer, proxy).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">xml</span></code> (warunkowo)</strong>: Parser TinyXML.</p></li>
</ul>
</section>
<section id="id6">
<h1>Zależności i powiązania<a class="headerlink" href="#id6" title="Link to this heading">#</a></h1>
<p>Skrypt wyszukuje i linkuje następujące biblioteki zewnętrzne:</p>
<ul class="simple">
<li><p><strong>Boost</strong> (<code class="docutils literal notranslate"><span class="pre">system</span></code>, <code class="docutils literal notranslate"><span class="pre">filesystem</span></code>): Używane do operacji na systemie plików i innych podstawowych funkcjonalności.</p></li>
<li><p><strong>ZLIB, BZip2, LibZip</strong>: Do kompresji i dekompresji danych.</p></li>
<li><p><strong>LuaJIT</strong> lub <strong>Lua</strong>: Silnik skryptowy.</p></li>
<li><p><strong>PhysFS</strong>: Wirtualny system plików, do obsługi zasobów w archiwach.</p></li>
<li><p><strong>OpenSSL</strong>: Do funkcji kryptograficznych (RSA, SHA, MD5).</p></li>
<li><p><strong>OpenGL/OpenGLES, EGL</strong>: Do renderowania grafiki.</p></li>
<li><p><strong>GLEW</strong>: Do zarządzania rozszerzeniami OpenGL.</p></li>
<li><p><strong>OpenAL, Vorbis, Ogg</strong>: Do obsługi dźwięku.</p></li>
</ul>
</section>
<section id="konfiguracja-dla-webassembly-wasm">
<h1>Konfiguracja dla WebAssembly (WASM)<a class="headerlink" href="#konfiguracja-dla-webassembly-wasm" title="Link to this heading">#</a></h1>
<p>Specjalny blok <code class="docutils literal notranslate"><span class="pre">if(WASM)</span></code> dostosowuje kompilację dla platformy WebAssembly przy użyciu Emscripten. Ustawia specyficzne flagi (<code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">USE_ZLIB=1</span></code>, etc.), linkuje prekompilowane biblioteki (<code class="docutils literal notranslate"><span class="pre">.a</span></code>) i dołącza źródła Lua bezpośrednio do projektu, zamiast linkować je jako zewnętrzną bibliotekę.</p>
</section>
<section id="flagi-kompilatora">
<h1>Flagi kompilatora<a class="headerlink" href="#flagi-kompilatora" title="Link to this heading">#</a></h1>
<p>Skrypt ustawia różne flagi kompilatora w zależności od typu budowania (<code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code>):</p>
<ul class="simple">
<li><p><strong>Debug</strong>: <code class="docutils literal notranslate"><span class="pre">-O0</span> <span class="pre">-g</span></code> (niska optymalizacja, pełne informacje debugowania).</p></li>
<li><p><strong>Release</strong>: <code class="docutils literal notranslate"><span class="pre">-O2</span></code> (wysoka optymalizacja, brak informacji debugowania).</p></li>
<li><p><strong>RelWithDebInfo</strong>: <code class="docutils literal notranslate"><span class="pre">-O1</span> <span class="pre">-g</span></code> (średnia optymalizacja z informacjami debugowania).</p></li>
<li><p><strong>Performance</strong>: <code class="docutils literal notranslate"><span class="pre">-Ofast</span> <span class="pre">-march=native</span></code> (najwyższe optymalizacje, specyficzne dla architektury).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="global-h">
<h1>📄 global.h<a class="headerlink" href="#global-h" title="Link to this heading">#</a></h1>
</section>
<section id="id7">
<h1>Opis ogólny<a class="headerlink" href="#id7" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">global.h</span></code> jest jednym z kluczowych plików nagłówkowych w frameworku. Jego głównym zadaniem jest włączenie najważniejszych, globalnie używanych definicji i nagłówków w jednym miejscu. Dzięki temu inne pliki mogą dołączyć tylko ten jeden plik, aby uzyskać dostęp do podstawowych typów danych, stałych, makr i narzędzi.</p>
</section>
<section id="id8">
<h1>Definicje i Makra<a class="headerlink" href="#id8" title="Link to this heading">#</a></h1>
</section>
<section id="validate-expression">
<h1><code class="docutils literal notranslate"><span class="pre">VALIDATE(expression)</span></code><a class="headerlink" href="#validate-expression" title="Link to this heading">#</a></h1>
<p>Jest to makro asercji, które jest aktywne tylko w trybie debugowania (gdy <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> nie jest zdefiniowane). Jeśli wyrażenie (expression) jest fałszywe, makro wywołuje funkcję <code class="docutils literal notranslate"><span class="pre">fatalError</span></code>, która przerywa działanie programu i wyświetla komunikat o błędzie zawierający nazwę pliku i numer linii. W trybie wydajnościowym (<code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> zdefiniowane) makro jest puste i nie generuje żadnego kodu.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># if defined(NDEBUG)</span>
<span class="cp"># define VALIDATE(expression) ((void)0)</span>
<span class="cp"># else</span>
<span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">fatalError</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">line</span><span class="p">);</span>
<span class="cp"># define VALIDATE(expression) { if(!(expression)) fatalError(#expression, __FILE__, __LINE__); };</span>
<span class="cp"># endif</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Użycie</strong>: Służy do sprawdzania warunków, które muszą być zawsze prawdziwe w trakcie działania programu, np. sprawdzania, czy wskaźnik nie jest <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>.</p></li>
</ul>
</section>
<section id="id9">
<h1>Zależności i powiązania<a class="headerlink" href="#id9" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">global.h</span></code> włącza następujące nagłówki, udostępniając ich zawartość wszystkim plikom, które go dołączają:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/compiler.h</span></code>: Zawiera definicje specyficzne dla kompilatora.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/pch.h</span></code>: Prekompilowany nagłówek, który zawiera standardowe biblioteki C/C++ oraz biblioteki firm trzecich, takie jak Boost.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/const.h</span></code>: Definiuje globalne stałe, makra i typy wyliczeniowe (enumy).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/stdext.h</span></code>: Zawiera rozszerzenia standardowej biblioteki C++, takie jak dodatkowe algorytmy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/point.h</span></code>, <code class="docutils literal notranslate"><span class="pre">color.h</span></code>, <code class="docutils literal notranslate"><span class="pre">rect.h</span></code>, <code class="docutils literal notranslate"><span class="pre">size.h</span></code>, <code class="docutils literal notranslate"><span class="pre">matrix.h</span></code>: Definiują podstawowe struktury danych używane w grafice i logice.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/logger.h</span></code>: Udostępnia globalny obiekt <code class="docutils literal notranslate"><span class="pre">g_logger</span></code> do logowania komunikatów.</p></li>
</ul>
<p>Dzięki temu <code class="docutils literal notranslate"><span class="pre">global.h</span></code> działa jako centralny punkt dostępu do najczęściej używanych elementów frameworka.</p>
</section>
<hr class="docutils" />
<section id="pch-h">
<h1>📄 pch.h<a class="headerlink" href="#pch-h" title="Link to this heading">#</a></h1>
</section>
<section id="id10">
<h1>Opis ogólny<a class="headerlink" href="#id10" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">pch.h</span></code> (Precompiled Header) to plik nagłówkowy, którego celem jest przyspieszenie procesu kompilacji. Zawiera on dyrektywy <code class="docutils literal notranslate"><span class="pre">#include</span></code> dla nagłówków, które są często używane w całym projekcie, ale rzadko się zmieniają. Kompilator może wstępnie przetworzyć ten plik i zapisać jego stan, co pozwala na ponowne wykorzystanie go podczas kompilacji innych plików źródłowych, zamiast parsować te same nagłówki wielokrotnie.</p>
</section>
<section id="zawartosc-pliku">
<h1>Zawartość pliku<a class="headerlink" href="#zawartosc-pliku" title="Link to this heading">#</a></h1>
<p>Plik ten jest podzielony na kilka sekcji, grupujących nagłówki według ich pochodzenia i przeznaczenia.</p>
</section>
<section id="standardowe-naglowki-c">
<h1>Standardowe nagłówki C<a class="headerlink" href="#standardowe-naglowki-c" title="Link to this heading">#</a></h1>
<p>Zawiera podstawowe nagłówki z biblioteki standardowej C, takie jak <code class="docutils literal notranslate"><span class="pre">cstdio</span></code>, <code class="docutils literal notranslate"><span class="pre">cstdlib</span></code>, <code class="docutils literal notranslate"><span class="pre">cstring</span></code>, <code class="docutils literal notranslate"><span class="pre">cmath</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;cstdio&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;cstdlib&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;cstddef&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;cstring&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;cmath&gt;</span>
</pre></div>
</div>
</section>
<section id="standardowe-naglowki-stl-c">
<h1>Standardowe nagłówki STL (C++)<a class="headerlink" href="#standardowe-naglowki-stl-c" title="Link to this heading">#</a></h1>
<p>Włącza najważniejsze i najczęściej używane kontenery, strumienie i algorytmy z biblioteki standardowej C++.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;sstream&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;set&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;list&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;deque&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;map&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;algorithm&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;functional&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;array&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;unordered_map&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;unordered_set&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;tuple&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;iomanip&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;typeinfo&gt;</span>
</pre></div>
</div>
</section>
<section id="nowoczesne-naglowki-c-c-11-i-nowsze">
<h1>Nowoczesne nagłówki C++ (C++11 i nowsze)<a class="headerlink" href="#nowoczesne-naglowki-c-c-11-i-nowsze" title="Link to this heading">#</a></h1>
<p>Włącza nagłówki związane z wielowątkowością, inteligentnymi wskaźnikami, czasem i losowością, wprowadzone w nowszych standardach C++. Plik <code class="docutils literal notranslate"><span class="pre">filesystem</span></code> jest dołączany warunkowo (poza Androidem).</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;memory&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;functional&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;condition_variable&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;mutex&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;future&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;chrono&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;random&gt;</span>
<span class="cp"># ifndef ANDROID</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>
<span class="cp"># endif</span>
</pre></div>
</div>
</section>
<section id="biblioteka-boost">
<h1>Biblioteka Boost<a class="headerlink" href="#biblioteka-boost" title="Link to this heading">#</a></h1>
<p>Włącza nagłówki z biblioteki Boost, głównie z modułów <strong>Asio</strong> (do operacji sieciowych) i <strong>Beast</strong> (do obsługi protokołów HTTP i WebSocket).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">boost/system/config.hpp</span></code>, <code class="docutils literal notranslate"><span class="pre">error_code.hpp</span></code>: Podstawowe elementy systemu Boost.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/asio.hpp</span></code>, <code class="docutils literal notranslate"><span class="pre">beast.hpp</span></code>: Główne nagłówki dla Asio i Beast.</p></li>
<li><p>Nagłówki warunkowe dla SSL (<code class="docutils literal notranslate"><span class="pre">__EMSCRIPTEN__</span></code> wyłącza je, ponieważ obsługa SSL w przeglądarce jest inna).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/algorithm/hex.hpp</span></code>: Do operacji na systemie szesnastkowym.</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># ifdef ANDROID</span>
<span class="cp"># define BOOST_UUID_RANDOM_PROVIDER_FORCE_POSIX</span>
<span class="cp"># endif</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;boost/system/config.hpp&gt;</span>
<span class="c1">// ... (inne nagłówki boost)</span>
</pre></div>
</div>
</section>
<section id="id11">
<h1>Zależności i powiązania<a class="headerlink" href="#id11" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">pch.h</span></code> jest plikiem „liściem” w hierarchii zależności — sam nie zależy od innych plików projektu. Jednakże, jest on dołączany przez <code class="docutils literal notranslate"><span class="pre">global.h</span></code>, co czyni go pośrednią zależnością dla niemal każdego pliku w projekcie. Zapewnia on dostęp do szerokiej gamy narzędzi z biblioteki standardowej C++ i Boost.</p>
</section>
<hr class="docutils" />
<section id="luafunctions-cpp">
<h1>📄 luafunctions.cpp<a class="headerlink" href="#luafunctions-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id12">
<h1>Opis ogólny<a class="headerlink" href="#id12" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">luafunctions.cpp</span></code> implementuje metodę <code class="docutils literal notranslate"><span class="pre">Application::registerLuaFunctions()</span></code>, która jest kluczowym elementem integracji silnika C++ z Lua. Funkcja ta jest odpowiedzialna za zarejestrowanie (zbindowanie) klas, funkcji i obiektów singletonowych z C++ w globalnym środowisku Lua. Dzięki temu skrypty Lua mogą wywoływać funkcje C++, tworzyć obiekty C++ (np. widgety UI) i manipulować nimi, co stanowi podstawę modularności i rozszerzalności klienta.</p>
</section>
<section id="application-registerluafunctions">
<h1><code class="docutils literal notranslate"><span class="pre">Application::registerLuaFunctions()</span></code><a class="headerlink" href="#application-registerluafunctions" title="Link to this heading">#</a></h1>
</section>
<section id="opis-semantyczny">
<h1>Opis semantyczny<a class="headerlink" href="#opis-semantyczny" title="Link to this heading">#</a></h1>
<p>Metoda ta jest wywoływana jednorazowo podczas inicjalizacji aplikacji (<code class="docutils literal notranslate"><span class="pre">Application::init</span></code>). Przechodzi przez wszystkie główne moduły frameworka (takie jak <code class="docutils literal notranslate"><span class="pre">Platform</span></code>, <code class="docutils literal notranslate"><span class="pre">Application</span></code>, <code class="docutils literal notranslate"><span class="pre">Crypt</span></code>, <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code>, <code class="docutils literal notranslate"><span class="pre">UIManager</span></code> itd.) i udostępnia ich publiczne API w środowisku Lua. Każdy zarejestrowany element staje się dostępny w Lua jako zmienna globalna (np. <code class="docutils literal notranslate"><span class="pre">g_app</span></code>, <code class="docutils literal notranslate"><span class="pre">g_crypt</span></code>) lub jako klasa (np. <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>).</p>
</section>
<section id="zarejestrowane-elementy">
<h1>Zarejestrowane elementy<a class="headerlink" href="#zarejestrowane-elementy" title="Link to this heading">#</a></h1>
<p>Poniżej znajduje się lista zarejestrowanych elementów pogrupowanych według modułów.</p>
</section>
<section id="konwersje-i-narzedzia-globalne">
<h1>Konwersje i narzędzia globalne<a class="headerlink" href="#konwersje-i-narzedzia-globalne" title="Link to this heading">#</a></h1>
<p>Rejestruje globalne funkcje pomocnicze w Lua do konwersji typów danych między stringami a obiektami C++ oraz inne narzędzia.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa w Lua</p></th>
<th class="head text-left"><p>Funkcja C++</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">torect</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">stdext::from_string&lt;Rect&gt;</span></code></p></td>
<td class="text-left"><p>Konwertuje string na obiekt <code class="docutils literal notranslate"><span class="pre">Rect</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">topoint</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">stdext::from_string&lt;Point&gt;</span></code></p></td>
<td class="text-left"><p>Konwertuje string na obiekt <code class="docutils literal notranslate"><span class="pre">Point</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ucwords</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">stdext::ucwords</span></code></p></td>
<td class="text-left"><p>Zamienia pierwszą literę każdego słowa na wielką.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">regexMatch</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">lambda</span></code></p></td>
<td class="text-left"><p>Wyszukuje dopasowania wyrażeń regularnych w stringu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="platform-g-platform">
<h1>Platform (<code class="docutils literal notranslate"><span class="pre">g_platform</span></code>)<a class="headerlink" href="#platform-g-platform" title="Link to this heading">#</a></h1>
<p>Udostępnia funkcje związane z systemem operacyjnym. Niektóre funkcje są dostępne tylko gdy zdefiniowano <code class="docutils literal notranslate"><span class="pre">UNSAFE_LUA_FUNCTIONS</span></code>.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa w Lua</p></th>
<th class="head text-left"><p>Funkcja C++</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">spawnProcess</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Platform::spawnProcess</span></code></p></td>
<td class="text-left"><p>Uruchamia nowy proces (niebezpieczne).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getProcessId</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Platform::getProcessId</span></code></p></td>
<td class="text-left"><p>Zwraca ID bieżącego procesu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">openUrl</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Platform::openUrl</span></code></p></td>
<td class="text-left"><p>Otwiera podany URL w domyślnej przeglądarce.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getOSName</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Platform::getOSName</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę systemu operacyjnego.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="application-g-app">
<h1>Application (<code class="docutils literal notranslate"><span class="pre">g_app</span></code>)<a class="headerlink" href="#application-g-app" title="Link to this heading">#</a></h1>
<p>Udostępnia API do zarządzania głównym obiektem aplikacji.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa w Lua</p></th>
<th class="head text-left"><p>Funkcja C++</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setName</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Application::setName</span></code></p></td>
<td class="text-left"><p>Ustawia nazwę aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">isRunning</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Application::isRunning</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy aplikacja jest uruchomiona.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">exit</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Application::exit</span></code></p></td>
<td class="text-left"><p>Inicjuje proces zamykania aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getBuildCompiler</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Application::getBuildCompiler</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę kompilatora użytego do budowy.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">isMobile</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Application::isMobile</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy aplikacja działa w trybie mobilnym.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="crypt-g-crypt">
<h1>Crypt (<code class="docutils literal notranslate"><span class="pre">g_crypt</span></code>)<a class="headerlink" href="#crypt-g-crypt" title="Link to this heading">#</a></h1>
<p>Udostępnia funkcje kryptograficzne.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa w Lua</p></th>
<th class="head text-left"><p>Funkcja C++</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">genUUID</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Crypt::genUUID</span></code></p></td>
<td class="text-left"><p>Generuje unikalny identyfikator UUID.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">sha1Encode</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Crypt::sha1Encode</span></code></p></td>
<td class="text-left"><p>Koduje string za pomocą SHA1.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">rsaGenerateKey</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Crypt::rsaGenerateKey</span></code></p></td>
<td class="text-left"><p>Generuje klucze RSA.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="clock-g-clock">
<h1>Clock (<code class="docutils literal notranslate"><span class="pre">g_clock</span></code>)<a class="headerlink" href="#clock-g-clock" title="Link to this heading">#</a></h1>
<p>Udostępnia funkcje związane z czasem i zegarem systemowym.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa w Lua</p></th>
<th class="head text-left"><p>Funkcja C++</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">micros</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Clock::micros</span></code></p></td>
<td class="text-left"><p>Zwraca czas w mikrosekundach od uruchomienia aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">millis</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Clock::millis</span></code></p></td>
<td class="text-left"><p>Zwraca czas w milisekundach.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">seconds</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Clock::seconds</span></code></p></td>
<td class="text-left"><p>Zwraca czas w sekundach.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="configmanager-g-configs">
<h1>ConfigManager (<code class="docutils literal notranslate"><span class="pre">g_configs</span></code>)<a class="headerlink" href="#configmanager-g-configs" title="Link to this heading">#</a></h1>
<p>API do zarządzania plikami konfiguracyjnymi.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa w Lua</p></th>
<th class="head text-left"><p>Funkcja C++</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getSettings</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ConfigManager::getSettings</span></code></p></td>
<td class="text-left"><p>Zwraca główny obiekt konfiguracyjny.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">load</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ConfigManager::load</span></code></p></td>
<td class="text-left"><p>Ładuje plik konfiguracyjny.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="logger-g-logger">
<h1>Logger (<code class="docutils literal notranslate"><span class="pre">g_logger</span></code>)<a class="headerlink" href="#logger-g-logger" title="Link to this heading">#</a></h1>
<p>API do logowania wiadomości.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa w Lua</p></th>
<th class="head text-left"><p>Funkcja C++</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">log</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Logger::log</span></code></p></td>
<td class="text-left"><p>Loguje wiadomość z podanym poziomem.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">debug</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Logger::debug</span></code></p></td>
<td class="text-left"><p>Loguje wiadomość na poziomie <code class="docutils literal notranslate"><span class="pre">LogDebug</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="resourcemanager-g-resources">
<h1>ResourceManager (<code class="docutils literal notranslate"><span class="pre">g_resources</span></code>)<a class="headerlink" href="#resourcemanager-g-resources" title="Link to this heading">#</a></h1>
<p>Zarządzanie plikami i zasobami.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa w Lua</p></th>
<th class="head text-left"><p>Funkcja C++</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">fileExists</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ResourceManager::fileExists</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy plik istnieje.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">readFileContents</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ResourceManager::readFileContentsSafe</span></code></p></td>
<td class="text-left"><p>Odczytuje zawartość pliku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">writeFileContents</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ResourceManager::writeFileContents</span></code></p></td>
<td class="text-left"><p>Zapisuje zawartość do pliku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">createArchive</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ResourceManager::createArchive</span></code></p></td>
<td class="text-left"><p>Tworzy archiwum ZIP z podanych plików.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="ui-i-grafika-zalezne-od-fw-graphics">
<h1>UI i Grafika (zależne od <code class="docutils literal notranslate"><span class="pre">FW_GRAPHICS</span></code>)<a class="headerlink" href="#ui-i-grafika-zalezne-od-fw-graphics" title="Link to this heading">#</a></h1>
<p>Rejestruje klasy i funkcje związane z interfejsem użytkownika, oknem, grafiką i fontami. To najobszerniejsza sekcja.</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_app</span></code> (metody graficzne)</strong>: <code class="docutils literal notranslate"><span class="pre">setMaxFps</span></code>, <code class="docutils literal notranslate"><span class="pre">getFps</span></code>, <code class="docutils literal notranslate"><span class="pre">doScreenshot</span></code></p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_window</span></code></strong>: Zarządzanie oknem aplikacji (<code class="docutils literal notranslate"><span class="pre">move</span></code>, <code class="docutils literal notranslate"><span class="pre">resize</span></code>, <code class="docutils literal notranslate"><span class="pre">setTitle</span></code>, <code class="docutils literal notranslate"><span class="pre">setFullscreen</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_mouse</span></code></strong>: Zarządzanie kursorami myszy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_graphics</span></code></strong>: Informacje o sterowniku graficznym.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_textures</span></code></strong>: Zarządzanie teksturami.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_shaders</span></code></strong>: Tworzenie i zarządzanie shaderami.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_ui</span></code></strong>: Główny menedżer UI (<code class="docutils literal notranslate"><span class="pre">loadUI</span></code>, <code class="docutils literal notranslate"><span class="pre">createWidget</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_fonts</span></code></strong>: Zarządzanie fontami.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">UIWidget</span></code></strong>: Rejestracja klasy bazowej dla wszystkich widgetów z ogromną liczbą metod (np. <code class="docutils literal notranslate"><span class="pre">addChild</span></code>, <code class="docutils literal notranslate"><span class="pre">setRect</span></code>, <code class="docutils literal notranslate"><span class="pre">setText</span></code>, <code class="docutils literal notranslate"><span class="pre">setImageSource</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">UILayout</span></code> i pochodne</strong>: Rejestracja klas layoutów (<code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code>, <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code>, <code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code>, <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code></strong>: Rejestracja widgetu do edycji tekstu.</p></li>
</ul>
</section>
<section id="siec-zalezne-od-fw-net">
<h1>Sieć (zależne od <code class="docutils literal notranslate"><span class="pre">FW_NET</span></code>)<a class="headerlink" href="#siec-zalezne-od-fw-net" title="Link to this heading">#</a></h1>
<p>Rejestruje klasy do obsługi sieci.</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">Server</span></code></strong>: Do tworzenia serwerów nasłuchujących.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">Connection</span></code></strong>: Reprezentuje połączenie TCP.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">Protocol</span></code></strong>: Implementuje protokół komunikacyjny.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">InputMessage</span></code> / <code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code></strong>: Do odczytu i zapisu pakietów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_proxy</span></code></strong>: Menedżer proxy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_http</span></code></strong>: Do zapytań HTTP/HTTPS i WebSocket.</p></li>
</ul>
</section>
<section id="dzwiek-zalezne-od-fw-sound">
<h1>Dźwięk (zależne od <code class="docutils literal notranslate"><span class="pre">FW_SOUND</span></code>)<a class="headerlink" href="#dzwiek-zalezne-od-fw-sound" title="Link to this heading">#</a></h1>
<p>Rejestruje klasy i funkcje do obsługi dźwięku.</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">g_sounds</span></code></strong>: Menedżer dźwięku (<code class="docutils literal notranslate"><span class="pre">play</span></code>, <code class="docutils literal notranslate"><span class="pre">stopAll</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">SoundChannel</span></code></strong>: Kanały dźwiękowe.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">SoundSource</span></code></strong>: Źródła dźwięku.</p></li>
</ul>
</section>
<section id="id13">
<h1>Zależności i powiązania<a class="headerlink" href="#id13" title="Link to this heading">#</a></h1>
<p>Plik ten jest silnie powiązany z praktycznie każdym modułem frameworka, ponieważ jego zadaniem jest udostępnienie ich funkcjonalności w Lua. Włącza nagłówki z:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics</span></code> (jeśli <code class="docutils literal notranslate"><span class="pre">FW_GRAPHICS</span></code> jest zdefiniowane)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound</span></code> (jeśli <code class="docutils literal notranslate"><span class="pre">FW_SOUND</span></code> jest zdefiniowane)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/http</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/proxy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/input</span></code></p></li>
</ul>
<p>Jest to centralny punkt łączący warstwę C++ z warstwą skryptową Lua.</p>
</section>
<hr class="docutils" />
<section id="resourcemanager-h">
<h1>📄 resourcemanager.h<a class="headerlink" href="#resourcemanager-h" title="Link to this heading">#</a></h1>
</section>
<section id="id14">
<h1>Opis ogólny<a class="headerlink" href="#id14" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">resourcemanager.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_resources</span></code>) odpowiedzialnym za zarządzanie wszystkimi zasobami plików w aplikacji. Abstrakcjonuje dostęp do plików, umożliwiając ich odczyt zarówno z fizycznego systemu plików, jak i z wirtualnych archiwów (np. <code class="docutils literal notranslate"><span class="pre">data.zip</span></code>) lub nawet z pamięci (dane wbudowane w plik wykonywalny). Jest to kluczowy element, który umożliwia łatwe zarządzanie zasobami gry, takimi jak grafiki, dźwięki, skrypty i pliki konfiguracyjne.</p>
</section>
<section id="klasa-resourcemanager">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code><a class="headerlink" href="#klasa-resourcemanager" title="Link to this heading">#</a></h1>
</section>
<section id="id15">
<h1>Opis semantyczny<a class="headerlink" href="#id15" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code> inicjalizuje wirtualny system plików oparty na bibliotece <strong>PhysFS</strong>. Określa on katalogi robocze (<code class="docutils literal notranslate"><span class="pre">work</span> <span class="pre">dir</span></code>) i katalogi do zapisu (<code class="docutils literal notranslate"><span class="pre">write</span> <span class="pre">dir</span></code>), montuje archiwa z danymi i dostarcza ujednolicony interfejs do operacji na plikach. Klasa ta obsługuje również szyfrowanie i deszyfrowanie plików w locie oraz mechanizmy aktualizacji klienta.</p>
</section>
<section id="metody-publiczne">
<h1>Metody publiczne<a class="headerlink" href="#metody-publiczne" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">init(const</span> <span class="pre">char</span> <span class="pre">*argv0)</span></code></p></td>
<td class="text-left"><p>Inicjalizuje PhysFS i ustawia ścieżkę do pliku binarnego aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Deinicjalizuje PhysFS.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">launchCorrect(...)</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy istnieje nowsza wersja pliku wykonywalnego w katalogu zapisu i ją uruchamia (tylko Windows).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setupWriteDir(...)</span></code></p></td>
<td class="text-left"><p>Konfiguruje i montuje katalog zapisu dla danych użytkownika.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setup()</span></code></p></td>
<td class="text-left"><p>Wyszukuje i montuje główny katalog roboczy (np. z plikiem <code class="docutils literal notranslate"><span class="pre">init.lua</span></code> lub archiwum <code class="docutils literal notranslate"><span class="pre">data.zip</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">loadDataFromSelf(...)</span></code></p></td>
<td class="text-left"><p>Próbuje załadować dane (archiwum) wbudowane w sam plik wykonywalny.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">fileExists(...)</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy plik istnieje w wirtualnym systemie plików.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">directoryExists(...)</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy katalog istnieje.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">readFileContents(...)</span></code></p></td>
<td class="text-left"><p>Odczytuje zawartość pliku jako string, opcjonalnie deszyfrując go.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">writeFileContents(...)</span></code></p></td>
<td class="text-left"><p>Zapisuje string do pliku w katalogu zapisu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">openFile(...)</span></code></p></td>
<td class="text-left"><p>Otwiera plik i zwraca wskaźnik do <code class="docutils literal notranslate"><span class="pre">FileStream</span></code> do odczytu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">createFile(...)</span></code></p></td>
<td class="text-left"><p>Tworzy plik i zwraca wskaźnik do <code class="docutils literal notranslate"><span class="pre">FileStream</span></code> do zapisu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">deleteFile(...)</span></code></p></td>
<td class="text-left"><p>Usuwa plik.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">makeDir(...)</span></code></p></td>
<td class="text-left"><p>Tworzy katalog.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">listDirectoryFiles(...)</span></code></p></td>
<td class="text-left"><p>Zwraca listę plików w danym katalogu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">resolvePath(...)</span></code></p></td>
<td class="text-left"><p>Tłumaczy ścieżkę relatywną (np. względem bieżącego skryptu Lua) na ścieżkę absolutną w wirtualnym systemie plików.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getWorkDir()</span></code></p></td>
<td class="text-left"><p>Zwraca główny katalog roboczy (zawsze „/”).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getWriteDir()</span></code></p></td>
<td class="text-left"><p>Zwraca ścieżkę do katalogu zapisu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getBinaryName()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę pliku wykonywalnego aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">fileChecksum(...)</span></code></p></td>
<td class="text-left"><p>Oblicza sumę kontrolną CRC32 dla pliku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">filesChecksums()</span></code></p></td>
<td class="text-left"><p>Zwraca mapę sum kontrolnych dla wszystkich plików w zamontowanym archiwum.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">selfChecksum()</span></code></p></td>
<td class="text-left"><p>Oblicza sumę kontrolną CRC32 dla samego pliku wykonywalnego.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">updateData(...)</span></code></p></td>
<td class="text-left"><p>Aktualizuje pliki w głównym archiwum <code class="docutils literal notranslate"><span class="pre">data.zip</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">updateExecutable(...)</span></code></p></td>
<td class="text-left"><p>Zastępuje plik wykonywalny nową wersją (np. po aktualizacji).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">createArchive(...)</span></code></p></td>
<td class="text-left"><p>Tworzy archiwum ZIP w pamięci z podanej mapy plików.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">decompressArchive(...)</span></code></p></td>
<td class="text-left"><p>Dekompresuje archiwum ZIP (z pliku lub danych w pamięci) i zwraca mapę plików.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">encrypt(...)</span></code></p></td>
<td class="text-left"><p>(Tylko z <code class="docutils literal notranslate"><span class="pre">WITH_ENCRYPTION</span></code>) Szyfruje pliki w katalogach <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">modules</span></code> itp.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setLayout(...)</span></code></p></td>
<td class="text-left"><p>Ustawia aktywny layout UI, co wpływa na rozwiązywanie ścieżek do zasobów.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="zmienne-prywatne">
<h1>Zmienne prywatne<a class="headerlink" href="#zmienne-prywatne" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_binaryPath</span></code>: Ścieżka do pliku wykonywalnego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_writeDir</span></code>: Ścieżka do katalogu zapisu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_loadedFromMemory</span></code>: Flaga wskazująca, czy zasoby zostały załadowane z pamięci.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_loadedFromArchive</span></code>: Flaga wskazująca, czy zasoby zostały załadowane z archiwum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_memoryData</span></code>: Wskaźnik na dane archiwum w pamięci.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_customEncryption</span></code>: Klucz do niestandardowego szyfrowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_layout</span></code>: Nazwa aktywnego layoutu.</p></li>
</ul>
</section>
<section id="id16">
<h1>Zależności i powiązania<a class="headerlink" href="#id16" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/declarations.h</span></code>: Definicje podstawowych typów w rdzeniu frameworka.</p></li>
<li><p><strong>PhysFS</strong>: Biblioteka do obsługi wirtualnego systemu plików jest kluczową zależnością.</p></li>
<li><p><strong>ZLIB, LibZip</strong>: Używane do obsługi archiwów ZIP.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FileStream</span></code>: Klasa <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code> tworzy i zwraca obiekty <code class="docutils literal notranslate"><span class="pre">FileStream</span></code> do operacji na plikach.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Application</span></code>: Używane do sprawdzania stanu aplikacji (np. czy jest zamykana).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Logger</span></code>: Do logowania błędów i informacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Crypt</span></code>: Do obliczania sum kontrolnych i (de)szyfrowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Http</span></code>: Używane w kontekście pobierania plików (<code class="docutils literal notranslate"><span class="pre">/downloads</span></code>).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="adaptiverenderer-cpp">
<h1>📄 adaptiverenderer.cpp<a class="headerlink" href="#adaptiverenderer-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id17">
<h1>Opis ogólny<a class="headerlink" href="#id17" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">adaptiverenderer.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code>, która jest odpowiedzialna za dynamiczne dostosowywanie jakości i wydajności renderowania grafiki w zależności od aktualnej liczby klatek na sekundę (FPS). Celem tego mechanizmu jest utrzymanie płynności działania aplikacji, zwłaszcza na słabszych komputerach, poprzez redukcję liczby renderowanych obiektów lub obniżenie częstotliwości aktualizacji, gdy FPS spada.</p>
</section>
<section id="id18">
<h1>Zmienne globalne<a class="headerlink" href="#id18" title="Link to this heading">#</a></h1>
</section>
<section id="g-adaptiverenderer">
<h1><code class="docutils literal notranslate"><span class="pre">g_adaptiveRenderer</span></code><a class="headerlink" href="#g-adaptiverenderer" title="Link to this heading">#</a></h1>
<p>Globalna instancja klasy <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code>, dostępna w całym projekcie.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AdaptiveRenderer</span><span class="w"> </span><span class="n">g_adaptiveRenderer</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-adaptiverenderer">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code><a class="headerlink" href="#klasa-adaptiverenderer" title="Link to this heading">#</a></h1>
</section>
<section id="void-newframe">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">newFrame()</span></code><a class="headerlink" href="#void-newframe" title="Link to this heading">#</a></h1>
</section>
<section id="id19">
<h1>Opis semantyczny<a class="headerlink" href="#id19" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana na początku każdej klatki renderowania. Rejestruje czas bieżącej klatki i na podstawie liczby klatek z ostatnich 5 sekund decyduje, czy należy zmienić poziom wydajności (zwiększyć lub zmniejszyć).</p>
</section>
<section id="dzialanie">
<h1>Działanie<a class="headerlink" href="#dzialanie" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Dodaje bieżący czas (w milisekundach) do kolejki <code class="docutils literal notranslate"><span class="pre">m_frames</span></code>.</p></li>
<li><p>Usuwa z kolejki klatki starsze niż 5 sekund.</p></li>
<li><p>Jeśli poziom wydajności jest narzucony (<code class="docutils literal notranslate"><span class="pre">m_forcedSpeed</span></code>), metoda kończy działanie.</p></li>
<li><p>Co 5 sekund (<code class="docutils literal notranslate"><span class="pre">m_update</span> <span class="pre">+</span> <span class="pre">5000</span> <span class="pre">&gt;</span> <span class="pre">now</span></code>):</p>
<ul class="simple">
<li><p>Pobiera maksymalny docelowy FPS z <code class="docutils literal notranslate"><span class="pre">g_app.getMaxFps()</span></code>.</p></li>
<li><p>Jeśli aktualna liczba klatek jest niższa niż próg, zwiększa poziom <code class="docutils literal notranslate"><span class="pre">m_speed</span></code> (obniża jakość).</p></li>
<li><p>Jeśli aktualna liczba klatek jest wyższa niż próg, zmniejsza poziom <code class="docutils literal notranslate"><span class="pre">m_speed</span></code> (zwiększa jakość).</p></li>
<li><p>Poziom <code class="docutils literal notranslate"><span class="pre">m_speed</span></code> jest ograniczony do przedziału <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">RenderSpeeds</span> <span class="pre">-</span> <span class="pre">1]</span></code>.</p></li>
</ul>
</li>
</ol>
</section>
<section id="void-refresh">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">refresh()</span></code><a class="headerlink" href="#void-refresh" title="Link to this heading">#</a></h1>
</section>
<section id="id20">
<h1>Opis semantyczny<a class="headerlink" href="#id20" title="Link to this heading">#</a></h1>
<p>Resetuje czas ostatniej aktualizacji poziomu wydajności, co powoduje, że kolejna ocena FPS nastąpi dopiero za 5 sekund.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">AdaptiveRenderer::refresh</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">m_update</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stdext</span><span class="o">::</span><span class="n">millis</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="metody-limitujace">
<h1>Metody limitujące<a class="headerlink" href="#metody-limitujace" title="Link to this heading">#</a></h1>
</section>
<section id="id21">
<h1>Opis semantyczny<a class="headerlink" href="#id21" title="Link to this heading">#</a></h1>
<p>Grupa metod zwracających limity dla różnych aspektów renderowania w zależności od aktualnego poziomu <code class="docutils literal notranslate"><span class="pre">m_speed</span></code>. Im wyższy <code class="docutils literal notranslate"><span class="pre">m_speed</span></code>, tym niższe limity i większe interwały, co przekłada się na mniejsze obciążenie procesora i karty graficznej.</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">effetsLimit()</span></code></strong>: Zwraca maksymalną liczbę efektów do renderowania.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">creaturesLimit()</span></code></strong>: Zwraca maksymalną liczbę stworzeń.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">itemsLimit()</span></code></strong>: Zwraca maksymalną liczbę przedmiotów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">mapRenderInterval()</span></code></strong>: Zwraca interwał (w milisekundach) ponownego renderowania mapy. <code class="docutils literal notranslate"><span class="pre">0</span></code> oznacza renderowanie w każdej klatce.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">textsLimit()</span></code></strong>: Zwraca maksymalną liczbę tekstów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">creaturesRenderInterval()</span></code></strong>: Zwraca interwał renderowania stworzeń (obecnie nieużywane).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">allowFading()</span></code></strong>: Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli dozwolone jest płynne zanikanie/pojawianie się obiektów (tylko na wyższych poziomach jakości).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">foregroundUpdateInterval()</span></code></strong>: Zwraca interwał aktualizacji pierwszego planu.</p></li>
</ul>
</section>
<section id="std-string-getdebuginfo">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getDebugInfo()</span></code><a class="headerlink" href="#std-string-getdebuginfo" title="Link to this heading">#</a></h1>
</section>
<section id="id22">
<h1>Opis semantyczny<a class="headerlink" href="#id22" title="Link to this heading">#</a></h1>
<p>Zwraca sformatowany ciąg znaków z informacjami debugowania, takimi jak aktualna liczba klatek, bieżący poziom <code class="docutils literal notranslate"><span class="pre">m_speed</span></code> i narzucony poziom <code class="docutils literal notranslate"><span class="pre">m_forcedSpeed</span></code>.</p>
</section>
<section id="id23">
<h1>Zależności i powiązania<a class="headerlink" href="#id23" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/graphicalapplication.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_app.getMaxFps()</span></code> do określenia docelowej liczby klatek.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/format.h</span></code>: Do formatowania stringa w <code class="docutils literal notranslate"><span class="pre">getDebugInfo</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/extras.h</span></code>: Potencjalnie do flag debugowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/logger.h</span></code>: Do logowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="adaptiverenderer-h">
<h1>📄 adaptiverenderer.h<a class="headerlink" href="#adaptiverenderer-h" title="Link to this heading">#</a></h1>
</section>
<section id="id24">
<h1>Opis ogólny<a class="headerlink" href="#id24" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">adaptiverenderer.h</span></code> jest plikiem nagłówkowym dla klasy <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code>. Deklaruje on interfejs tej klasy, stałe oraz globalną instancję <code class="docutils literal notranslate"><span class="pre">g_adaptiveRenderer</span></code>. Umożliwia to innym częściom systemu odpytywanie o aktualne limity i ustawienia wydajności renderowania.</p>
</section>
<section id="id25">
<h1>Definicje i Makra<a class="headerlink" href="#id25" title="Link to this heading">#</a></h1>
</section>
<section id="constexpr-int-renderspeeds">
<h1><code class="docutils literal notranslate"><span class="pre">constexpr</span> <span class="pre">int</span> <span class="pre">RenderSpeeds</span></code><a class="headerlink" href="#constexpr-int-renderspeeds" title="Link to this heading">#</a></h1>
<p>Definiuje liczbę dostępnych poziomów wydajności renderowania.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">constexpr</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">RenderSpeeds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id26">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code><a class="headerlink" href="#id26" title="Link to this heading">#</a></h1>
</section>
<section id="id27">
<h1>Opis semantyczny<a class="headerlink" href="#id27" title="Link to this heading">#</a></h1>
<p>Klasa <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code> zarządza dynamicznym skalowaniem jakości grafiki w celu utrzymania płynności działania aplikacji. Implementuje mechanizm, który na podstawie bieżącej liczby klatek na sekundę (FPS) dostosowuje różne parametry renderowania, takie jak limity renderowanych obiektów czy częstotliwość odświeżania.</p>
</section>
<section id="id28">
<h1>Metody publiczne<a class="headerlink" href="#id28" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">newFrame()</span></code></p></td>
<td class="text-left"><p>Rejestruje nową klatkę i aktualizuje poziom wydajności, jeśli to konieczne.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">refresh()</span></code></p></td>
<td class="text-left"><p>Resetuje zegar aktualizacji, opóźniając następną ocenę wydajności.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">effetsLimit()</span></code></p></td>
<td class="text-left"><p>Zwraca limit dla renderowanych efektów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">creaturesLimit()</span></code></p></td>
<td class="text-left"><p>Zwraca limit dla renderowanych stworzeń.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">itemsLimit()</span></code></p></td>
<td class="text-left"><p>Zwraca limit dla renderowanych przedmiotów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">textsLimit()</span></code></p></td>
<td class="text-left"><p>Zwraca limit dla renderowanych tekstów.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mapRenderInterval()</span></code></p></td>
<td class="text-left"><p>Zwraca interwał (opóźnienie) ponownego renderowania mapy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">creaturesRenderInterval()</span></code></p></td>
<td class="text-left"><p>Zwraca interwał renderowania stworzeń.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">allowFading()</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy dozwolone jest renderowanie efektów przejścia (fading).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getLevel()</span></code></p></td>
<td class="text-left"><p>Zwraca aktualny poziom wydajności (<code class="docutils literal notranslate"><span class="pre">m_speed</span></code>).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">foregroundUpdateInterval()</span></code></p></td>
<td class="text-left"><p>Zwraca interwał aktualizacji pierwszego planu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getDebugInfo()</span></code></p></td>
<td class="text-left"><p>Zwraca informacje debugowania jako string.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setForcedLevel(int</span> <span class="pre">value)</span></code></p></td>
<td class="text-left"><p>Umożliwia ręczne ustawienie (narzucenie) poziomu wydajności.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id29">
<h1>Zmienne prywatne<a class="headerlink" href="#id29" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_forcedSpeed</span></code>: Narzucony poziom wydajności (-1 oznacza automatyczny).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_speed</span></code>: Aktualny, automatycznie wyliczony poziom wydajności (od 0 do <code class="docutils literal notranslate"><span class="pre">RenderSpeeds-1</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_update</span></code>: Czas ostatniej aktualizacji poziomu wydajności.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_frames</span></code>: Lista czasów ostatnich klatek, używana do obliczania FPS.</p></li>
</ul>
</section>
<section id="id30">
<h1>Zmienne globalne<a class="headerlink" href="#id30" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_adaptiveRenderer</span></code>: Globalna instancja klasy <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code>.</p></li>
</ul>
</section>
<section id="id31">
<h1>Zależności i powiązania<a class="headerlink" href="#id31" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Plik włącza <code class="docutils literal notranslate"><span class="pre">&lt;list&gt;</span></code> do przechowywania czasów klatek.</p></li>
<li><p>Klasa jest używana przez silnik renderujący (np. w <code class="docutils literal notranslate"><span class="pre">client/mapview.cpp</span></code> - niezałączony, ale można się domyślać), aby dynamicznie ograniczać liczbę rysowanych obiektów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="application-cpp">
<h1>📄 application.cpp<a class="headerlink" href="#application-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id32">
<h1>Opis ogólny<a class="headerlink" href="#id32" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">application.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Application</span></code>, która jest bazową klasą dla całej aplikacji. Odpowiada za podstawowy cykl życia programu, w tym inicjalizację, de-inicjalizację, obsługę sygnałów systemowych oraz zarządzanie głównymi komponentami frameworka, takimi jak menedżer zasobów, menedżer modułów, silnik Lua i połączenia sieciowe.</p>
</section>
<section id="funkcje-globalne">
<h1>Funkcje globalne<a class="headerlink" href="#funkcje-globalne" title="Link to this heading">#</a></h1>
</section>
<section id="exitsignalhandler-int-sig">
<h1><code class="docutils literal notranslate"><span class="pre">exitSignalHandler(int</span> <span class="pre">sig)</span></code><a class="headerlink" href="#exitsignalhandler-int-sig" title="Link to this heading">#</a></h1>
<p>Funkcja obsługująca sygnały systemowe <code class="docutils literal notranslate"><span class="pre">SIGTERM</span></code> i <code class="docutils literal notranslate"><span class="pre">SIGINT</span></code> (np. zamknięcie terminala lub Ctrl+C). Po otrzymaniu sygnału, dodaje do kolejki zdarzeń wywołanie metody <code class="docutils literal notranslate"><span class="pre">Application::close()</span></code>, co pozwala na bezpieczne zamknięcie aplikacji.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">exitSignalHandler</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">sig</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">signaled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">switch</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SIGTERM</span><span class="p">:</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SIGINT</span><span class="p">:</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">signaled</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">g_app</span><span class="p">.</span><span class="n">isStopping</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">g_app</span><span class="p">.</span><span class="n">isTerminated</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">signaled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">                </span><span class="n">g_dispatcher</span><span class="p">.</span><span class="n">addEvent</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Application</span><span class="o">::</span><span class="n">close</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">g_app</span><span class="p">));</span>
<span class="p">}</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="klasa-application">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Application</span></code><a class="headerlink" href="#klasa-application" title="Link to this heading">#</a></h1>
</section>
<section id="application-application">
<h1><code class="docutils literal notranslate"><span class="pre">Application::Application()</span></code><a class="headerlink" href="#application-application" title="Link to this heading">#</a></h1>
<p>Konstruktor, który ustawia domyślne wartości dla nazwy aplikacji, wersji, kodowania znaków oraz flag stanu. Wykrywa również, czy aplikacja działa na platformie mobilnej (Android).</p>
</section>
<section id="void-application-init-std-vector-std-string-args">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::init(std::vector&lt;std::string&gt;&amp;</span> <span class="pre">args)</span></code><a class="headerlink" href="#void-application-init-std-vector-std-string-args" title="Link to this heading">#</a></h1>
</section>
<section id="id33">
<h1>Opis semantyczny<a class="headerlink" href="#id33" title="Link to this heading">#</a></h1>
<p>Metoda inicjalizująca kluczowe komponenty aplikacji. Jest wywoływana na samym początku działania programu.</p>
</section>
<section id="id34">
<h1>Działanie<a class="headerlink" href="#id34" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Rejestruje <code class="docutils literal notranslate"><span class="pre">exitSignalHandler</span></code> do obsługi sygnałów zamknięcia.</p></li>
<li><p>Ustawia globalne locale.</p></li>
<li><p>Przetwarza argumenty wiersza poleceń za pomocą <code class="docutils literal notranslate"><span class="pre">g_platform</span></code>.</p></li>
<li><p>Inicjalizuje <code class="docutils literal notranslate"><span class="pre">g_asyncDispatcher</span></code> do zadań asynchronicznych.</p></li>
<li><p>Zapisuje opcje startowe i sprawdza, czy włączono tryb mobilny (<code class="docutils literal notranslate"><span class="pre">-mobile</span></code>).</p></li>
<li><p>Inicjalizuje menedżera konfiguracji (<code class="docutils literal notranslate"><span class="pre">g_configs</span></code>).</p></li>
<li><p>Inicjalizuje silnik Lua (<code class="docutils literal notranslate"><span class="pre">g_lua</span></code>) i rejestruje funkcje C++ (<code class="docutils literal notranslate"><span class="pre">registerLuaFunctions</span></code>).</p></li>
<li><p>Inicjalizuje menedżera proxy (<code class="docutils literal notranslate"><span class="pre">g_proxy</span></code>).</p></li>
</ol>
</section>
<section id="void-application-deinit">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::deinit()</span></code><a class="headerlink" href="#void-application-deinit" title="Link to this heading">#</a></h1>
</section>
<section id="id35">
<h1>Opis semantyczny<a class="headerlink" href="#id35" title="Link to this heading">#</a></h1>
<p>Metoda de-inicjalizująca, wywoływana przed zamknięciem aplikacji. Dba o poprawne zwolnienie zasobów w odwrotnej kolejności do inicjalizacji.</p>
</section>
<section id="id36">
<h1>Działanie<a class="headerlink" href="#id36" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Wywołuje lua <code class="docutils literal notranslate"><span class="pre">g_app.onTerminate</span></code>.</p></li>
<li><p>Odładowuje wszystkie moduły.</p></li>
<li><p>Uruchamia garbage collector Lua, aby zwolnić referencje do obiektów.</p></li>
<li><p>Przetwarza pozostałe zdarzenia z kolejki.</p></li>
<li><p>Wyłącza <code class="docutils literal notranslate"><span class="pre">g_dispatcher</span></code>.</p></li>
</ol>
</section>
<section id="void-application-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::terminate()</span></code><a class="headerlink" href="#void-application-terminate" title="Link to this heading">#</a></h1>
</section>
<section id="id37">
<h1>Opis semantyczny<a class="headerlink" href="#id37" title="Link to this heading">#</a></h1>
<p>Finalny etap zamykania aplikacji. Zwalnia zasoby, które muszą być zwolnione jako ostatnie.</p>
</section>
<section id="id38">
<h1>Działanie<a class="headerlink" href="#id38" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Zamyka wszystkie połączenia sieciowe.</p></li>
<li><p>Terminuje menedżera konfiguracji.</p></li>
<li><p>Terminuje menedżera zasobów.</p></li>
<li><p>Terminuje silnik Lua.</p></li>
<li><p>Terminuje menedżera proxy.</p></li>
<li><p>Resetuje obsługę sygnałów systemowych do domyślnej.</p></li>
</ol>
</section>
<section id="void-application-poll">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::poll()</span></code><a class="headerlink" href="#void-application-poll" title="Link to this heading">#</a></h1>
</section>
<section id="id39">
<h1>Opis semantyczny<a class="headerlink" href="#id39" title="Link to this heading">#</a></h1>
<p>Przetwarza zdarzenia sieciowe i zdarzenia z głównej kolejki (<code class="docutils literal notranslate"><span class="pre">g_dispatcher</span></code>). Jest to serce pętli zdarzeń aplikacji.</p>
</section>
<section id="void-application-exit">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::exit()</span></code><a class="headerlink" href="#void-application-exit" title="Link to this heading">#</a></h1>
<p>Inicjuje proces zamykania aplikacji poprzez ustawienie flagi <code class="docutils literal notranslate"><span class="pre">m_stopping</span></code> i wywołanie lua <code class="docutils literal notranslate"><span class="pre">g_app.onExit</span></code>.</p>
</section>
<section id="void-application-quick-exit">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::quick_exit()</span></code><a class="headerlink" href="#void-application-quick-exit" title="Link to this heading">#</a></h1>
<p>Natychmiastowo zamyka aplikację z kodem 0, bez zwalniania zasobów.</p>
</section>
<section id="void-application-close">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::close()</span></code><a class="headerlink" href="#void-application-close" title="Link to this heading">#</a></h1>
<p>Próbuje zamknąć aplikację, wywołując lua <code class="docutils literal notranslate"><span class="pre">g_app.onClose</span></code>. Jeśli skrypt zwróci <code class="docutils literal notranslate"><span class="pre">false</span></code> (lub nic), wywoływana jest metoda <code class="docutils literal notranslate"><span class="pre">exit()</span></code>.</p>
</section>
<section id="void-application-restart-i-void-application-restartargs-const-std-vector-std-string-args">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::restart()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::restartArgs(const</span> <span class="pre">std::vector&lt;std::string&gt;&amp;</span> <span class="pre">args)</span></code><a class="headerlink" href="#void-application-restart-i-void-application-restartargs-const-std-vector-std-string-args" title="Link to this heading">#</a></h1>
<p>Metody do restartowania aplikacji. Uruchamiają nową instancję procesu i natychmiast zamykają bieżącą. Używają <code class="docutils literal notranslate"><span class="pre">boost::process</span></code> do stworzenia nowego procesu. Niedostępne na Androidzie i w wersji <code class="docutils literal notranslate"><span class="pre">FREE_VERSION</span></code>.</p>
</section>
<section id="std-string-application-getos">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">Application::getOs()</span></code><a class="headerlink" href="#std-string-application-getos" title="Link to this heading">#</a></h1>
<p>Zwraca nazwę bieżącego systemu operacyjnego („android”, „windows”, „mac”, „linux”).</p>
</section>
<section id="id40">
<h1>Zależności i powiązania<a class="headerlink" href="#id40" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Do operacji na czasie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>, <code class="docutils literal notranslate"><span class="pre">modulemanager.h</span></code>, <code class="docutils literal notranslate"><span class="pre">eventdispatcher.h</span></code>, <code class="docutils literal notranslate"><span class="pre">configmanager.h</span></code>: Główne moduły frameworka, którymi zarządza.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asyncdispatcher.h</span></code>: Do obsługi zadań w tle.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luainterface.h</span></code>: Do interakcji z Lua.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platform.h</span></code>: Do operacji specyficznych dla platformy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/http/http.h</span></code>: Do obsługi HTTP.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/connection.h</span></code>: Do zarządzania połączeniami sieciowymi.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/proxy/proxy.h</span></code>: Do zarządzania proxy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/process.hpp</span></code>: Do restartowania aplikacji.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="application-h">
<h1>📄 application.h<a class="headerlink" href="#application-h" title="Link to this heading">#</a></h1>
</section>
<section id="id41">
<h1>Opis ogólny<a class="headerlink" href="#id41" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">application.h</span></code> jest plikiem nagłówkowym dla klasy <code class="docutils literal notranslate"><span class="pre">Application</span></code>. Deklaruje on interfejs tej klasy, jej składowe oraz zawiera dyrektywy dołączające jedną z dwóch możliwych implementacji aplikacji: <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> lub <code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code>, w zależności od tego, czy zdefiniowano flagę <code class="docutils literal notranslate"><span class="pre">FW_GRAPHICS</span></code>.</p>
</section>
<section id="id42">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Application</span></code><a class="headerlink" href="#id42" title="Link to this heading">#</a></h1>
</section>
<section id="id43">
<h1>Opis semantyczny<a class="headerlink" href="#id43" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Application</span></code> jest abstrakcyjną klasą bazową, która definiuje podstawowy interfejs i cykl życia aplikacji. Zawiera metody do inicjalizacji, de-inicjalizacji, zamykania, restartowania oraz dostarcza informacji o samej aplikacji, takich jak nazwa, wersja czy system operacyjny.</p>
</section>
<section id="id44">
<h1>Metody publiczne<a class="headerlink" href="#id44" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">init(...)</span></code></p></td>
<td class="text-left"><p>Inicjalizuje aplikację.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">deinit()</span></code></p></td>
<td class="text-left"><p>Zwalnia zasoby przed zamknięciem.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Finalizuje zamykanie aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">run()</span> <span class="pre">=</span> <span class="pre">0</span></code></p></td>
<td class="text-left"><p>Czysto wirtualna metoda, która musi być zaimplementowana przez klasy pochodne. Zawiera główną pętlę programu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">poll()</span></code></p></td>
<td class="text-left"><p>Przetwarza zdarzenia.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">exit()</span></code></p></td>
<td class="text-left"><p>Rozpoczyna proces zamykania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">quick_exit()</span></code></p></td>
<td class="text-left"><p>Natychmiastowe zamknięcie programu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">close()</span></code></p></td>
<td class="text-left"><p>Próbuje zamknąć program (może być przerwane przez skrypt Lua).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">restart()</span></code></p></td>
<td class="text-left"><p>Restartuje aplikację.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">restartArgs(...)</span></code></p></td>
<td class="text-left"><p>Restartuje aplikację z nowymi argumentami.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setName(...)</span></code></p></td>
<td class="text-left"><p>Ustawia nazwę aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setCompactName(...)</span></code></p></td>
<td class="text-left"><p>Ustawia skróconą nazwę aplikacji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setVersion(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wersję aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isRunning()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli aplikacja jest w głównej pętli.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isStopping()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli trwa proces zamykania.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isTerminated()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli aplikacja została zakończona.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">getName()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getBuildCompiler()</span></code></p></td>
<td class="text-left"><p>Zwraca informacje o kompilatorze.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getBuildDate()</span></code></p></td>
<td class="text-left"><p>Zwraca datę kompilacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getBuildRevision()</span></code></p></td>
<td class="text-left"><p>Zwraca numer rewizji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getBuildCommit()</span></code></p></td>
<td class="text-left"><p>Zwraca hash commita Git.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getBuildType()</span></code></p></td>
<td class="text-left"><p>Zwraca typ budowania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getBuildArch()</span></code></p></td>
<td class="text-left"><p>Zwraca architekturę.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getAuthor()</span></code></p></td>
<td class="text-left"><p>Zwraca autora.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getOs()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę systemu operacyjnego.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getStartupOptions()</span></code></p></td>
<td class="text-left"><p>Zwraca opcje startowe.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isMobile()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli aplikacja działa w trybie mobilnym.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="metody-chronione">
<h1>Metody chronione<a class="headerlink" href="#metody-chronione" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">registerLuaFunctions()</span></code>: Deklaracja metody odpowiedzialnej za bindowanie funkcji C++ do Lua.</p></li>
</ul>
</section>
<section id="zmienne-chronione">
<h1>Zmienne chronione<a class="headerlink" href="#zmienne-chronione" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_charset</span></code>: Kodowanie znaków.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_appName</span></code>, <code class="docutils literal notranslate"><span class="pre">m_appCompactName</span></code>, <code class="docutils literal notranslate"><span class="pre">m_appVersion</span></code>: Informacje o aplikacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_startupOptions</span></code>: Opcje startowe.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_running</span></code>, <code class="docutils literal notranslate"><span class="pre">m_stopping</span></code>, <code class="docutils literal notranslate"><span class="pre">m_terminated</span></code>, <code class="docutils literal notranslate"><span class="pre">m_mobile</span></code>: Flagi stanu aplikacji.</p></li>
</ul>
</section>
<section id="dolaczanie-implementacji">
<h1>Dołączanie implementacji<a class="headerlink" href="#dolaczanie-implementacji" title="Link to this heading">#</a></h1>
<p>W zależności od flagi <code class="docutils literal notranslate"><span class="pre">FW_GRAPHICS</span></code>, dołączany jest jeden z dwóch plików:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">graphicalapplication.h</span></code>: Jeśli <code class="docutils literal notranslate"><span class="pre">FW_GRAPHICS</span></code> jest zdefiniowane, aplikacja będzie miała interfejs graficzny.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">consoleapplication.h</span></code>: W przeciwnym razie, będzie to aplikacja konsolowa.</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># ifdef FW_GRAPHICS</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&quot;graphicalapplication.h&quot;</span>
<span class="cp"># else</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&quot;consoleapplication.h&quot;</span>
<span class="cp"># endif</span>
</pre></div>
</div>
</section>
<section id="id45">
<h1>Zależności i powiązania<a class="headerlink" href="#id45" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Zawiera podstawowe definicje i nagłówki używane w całym projekcie.</p></li>
<li><p>Klasa jest oznaczona adnotacją <code class="docutils literal notranslate"><span class="pre">&#64;bindsingleton</span> <span class="pre">g_app</span></code>, co sugeruje, że jej instancja będzie dostępna w Lua pod globalną nazwą <code class="docutils literal notranslate"><span class="pre">g_app</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="asyncdispatcher-h">
<h1>📄 asyncdispatcher.h<a class="headerlink" href="#asyncdispatcher-h" title="Link to this heading">#</a></h1>
</section>
<section id="id46">
<h1>Opis ogólny<a class="headerlink" href="#id46" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">asyncdispatcher.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code>, która zarządza pulą wątków roboczych do wykonywania zadań asynchronicznie. Jest to kluczowy komponent do odciążenia głównego wątku aplikacji (wątku zdarzeń) z operacji, które mogą zająć dużo czasu, takich jak operacje wejścia/wyjścia na plikach, zapytania sieciowe czy intensywne obliczenia.</p>
</section>
<section id="klasa-asyncdispatcher">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code><a class="headerlink" href="#klasa-asyncdispatcher" title="Link to this heading">#</a></h1>
</section>
<section id="id47">
<h1>Opis semantyczny<a class="headerlink" href="#id47" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code> implementuje prosty model producent-konsument. Zadania (funkcje do wykonania) są dodawane do kolejki, a wątki robocze pobierają je i wykonują. Klasa używa <code class="docutils literal notranslate"><span class="pre">std::thread</span></code>, <code class="docutils literal notranslate"><span class="pre">std::mutex</span></code> i <code class="docutils literal notranslate"><span class="pre">std::condition_variable</span></code> do synchronizacji.</p>
</section>
<section id="id48">
<h1>Metody publiczne<a class="headerlink" href="#id48" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje dyspozytor i tworzy pierwszy wątek roboczy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Zatrzymuje wszystkie wątki i czyści kolejkę zadań.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">spawn_thread()</span></code></p></td>
<td class="text-left"><p>Tworzy i uruchamia nowy wątek roboczy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">stop()</span></code></p></td>
<td class="text-left"><p>Zatrzymuje działanie wszystkich wątków roboczych.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">template&lt;class</span> <span class="pre">F&gt;</span> <span class="pre">schedule(const</span> <span class="pre">F&amp;</span> <span class="pre">task)</span></code></p></td>
<td class="text-left"><p>Planuje wykonanie zadania i zwraca <code class="docutils literal notranslate"><span class="pre">std::shared_future</span></code>, które pozwoli uzyskać wynik zadania w przyszłości. Używa <code class="docutils literal notranslate"><span class="pre">std::promise</span></code> do przekazania wyniku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">dispatch(std::function&lt;void()&gt;</span> <span class="pre">f)</span></code></p></td>
<td class="text-left"><p>Dodaje zadanie do kolejki bez oczekiwania na wynik (fire-and-forget).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="przyklad-uzycia-schedule">
<h1>Przykład użycia <code class="docutils literal notranslate"><span class="pre">schedule</span></code><a class="headerlink" href="#przyklad-uzycia-schedule" title="Link to this heading">#</a></h1>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Wątek główny</span>
<span class="k">auto</span><span class="w"> </span><span class="n">future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_asyncDispatcher</span><span class="p">.</span><span class="n">schedule</span><span class="p">([]()</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Długotrwała operacja</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// Później, w wątku głównym</span>
<span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">future</span><span class="p">.</span><span class="n">get</span><span class="p">();</span><span class="w"> </span><span class="c1">// Czeka na zakończenie zadania i pobiera wynik</span>
</pre></div>
</div>
</section>
<section id="przyklad-uzycia-dispatch">
<h1>Przykład użycia <code class="docutils literal notranslate"><span class="pre">dispatch</span></code><a class="headerlink" href="#przyklad-uzycia-dispatch" title="Link to this heading">#</a></h1>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Wątek główny</span>
<span class="n">g_asyncDispatcher</span><span class="p">.</span><span class="n">dispatch</span><span class="p">([]()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Operacja w tle, której wynik nie jest bezpośrednio potrzebny</span>
<span class="w">    </span><span class="n">save_game_state</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="id49">
<h1>Metody chronione<a class="headerlink" href="#id49" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">exec_loop()</span></code>: Główna pętla wykonywana przez każdy wątek roboczy. Czeka na zadania w kolejce i wykonuje je.</p></li>
</ul>
</section>
<section id="id50">
<h1>Zmienne prywatne<a class="headerlink" href="#id50" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_tasks</span></code>: Lista (kolejka) zadań do wykonania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_threads</span></code>: Lista wątków roboczych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_mutex</span></code>: Mutex do ochrony dostępu do <code class="docutils literal notranslate"><span class="pre">m_tasks</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_condition</span></code>: Zmienna warunkowa do powiadamiania wątków o nowych zadaniach.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_running</span></code>: Flaga kontrolująca, czy wątki powinny kontynuować pracę.</p></li>
</ul>
</section>
<section id="id51">
<h1>Zmienne globalne<a class="headerlink" href="#id51" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_asyncDispatcher</span></code>: Globalna instancja klasy <code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code>.</p></li>
</ul>
</section>
<section id="id52">
<h1>Zależności i powiązania<a class="headerlink" href="#id52" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/declarations.h</span></code>: Podstawowe deklaracje frameworka.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/thread.h</span></code>: Zawiera nagłówki <code class="docutils literal notranslate"><span class="pre">&lt;thread&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;mutex&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;condition_variable&gt;</span></code>.</p></li>
<li><p>Jest używany przez inne moduły do wykonywania operacji w tle, np. <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code> do zapisu zrzutów ekranu, czy <code class="docutils literal notranslate"><span class="pre">Http</span></code> do zapytań sieciowych (chociaż <code class="docutils literal notranslate"><span class="pre">Http</span></code> używa własnego <code class="docutils literal notranslate"><span class="pre">io_service</span></code> Boost.Asio, <code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code> może być używany do przetwarzania wyników).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="binarytree-cpp">
<h1>📄 binarytree.cpp<a class="headerlink" href="#binarytree-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id53">
<h1>Opis ogólny<a class="headerlink" href="#id53" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">binarytree.cpp</span></code> zawiera implementację klas <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code> i <code class="docutils literal notranslate"><span class="pre">OutputBinaryTree</span></code>. Te klasy służą do odczytu i zapisu danych w niestandardowym, hierarchicznym formacie binarnym, który przypomina drzewo. Format ten jest używany w kliencie Tibii do przechowywania danych, np. plików map (<code class="docutils literal notranslate"><span class="pre">.otbm</span></code>).</p>
</section>
<section id="klasa-binarytree">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code><a class="headerlink" href="#klasa-binarytree" title="Link to this heading">#</a></h1>
</section>
<section id="binarytree-binarytree-const-filestreamptr-fin">
<h1><code class="docutils literal notranslate"><span class="pre">BinaryTree::BinaryTree(const</span> <span class="pre">FileStreamPtr&amp;</span> <span class="pre">fin)</span></code><a class="headerlink" href="#binarytree-binarytree-const-filestreamptr-fin" title="Link to this heading">#</a></h1>
<p>Konstruktor, który przyjmuje wskaźnik do strumienia pliku (<code class="docutils literal notranslate"><span class="pre">FileStream</span></code>) i zapamiętuje pozycję startową, od której zaczyna się węzeł drzewa.</p>
</section>
<section id="void-binarytree-skipnodes">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BinaryTree::skipNodes()</span></code><a class="headerlink" href="#void-binarytree-skipnodes" title="Link to this heading">#</a></h1>
<p>Metoda pomocnicza, która przeskakuje przez zagnieżdżone węzły w strumieniu danych, aby szybko przejść do końca bieżącego węzła bez potrzeby jego pełnego parsowania.</p>
</section>
<section id="void-binarytree-unserialize">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BinaryTree::unserialize()</span></code><a class="headerlink" href="#void-binarytree-unserialize" title="Link to this heading">#</a></h1>
</section>
<section id="id54">
<h1>Opis semantyczny<a class="headerlink" href="#id54" title="Link to this heading">#</a></h1>
<p>To kluczowa metoda, która odczytuje „płaskie” dane (właściwości) bieżącego węzła ze strumienia pliku i zapisuje je do wewnętrznego bufora (<code class="docutils literal notranslate"><span class="pre">m_buffer</span></code>). Operacja ta jest wykonywana tylko raz (lazy loading), przy pierwszym dostępie do danych węzła. Deserializacja polega na odczytywaniu bajtów aż do napotkania znacznika końca węzła (<code class="docutils literal notranslate"><span class="pre">BINARYTREE_NODE_END</span></code>), z uwzględnieniem znaków specjalnych (<code class="docutils literal notranslate"><span class="pre">BINARYTREE_ESCAPE_CHAR</span></code>).</p>
</section>
<section id="binarytreevec-binarytree-getchildren">
<h1><code class="docutils literal notranslate"><span class="pre">BinaryTreeVec</span> <span class="pre">BinaryTree::getChildren()</span></code><a class="headerlink" href="#binarytreevec-binarytree-getchildren" title="Link to this heading">#</a></h1>
<p>Zwraca wektor wskaźników do <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code>, reprezentujących wszystkie bezpośrednie dzieci bieżącego węzła. Przeszukuje strumień w poszukiwaniu znaczników początku węzła (<code class="docutils literal notranslate"><span class="pre">BINARYTREE_NODE_START</span></code>).</p>
</section>
<section id="metody-odczytu-danych-getu8-getu16-getstring-etc">
<h1>Metody odczytu danych (<code class="docutils literal notranslate"><span class="pre">getU8</span></code>, <code class="docutils literal notranslate"><span class="pre">getU16</span></code>, <code class="docutils literal notranslate"><span class="pre">getString</span></code>, etc.)<a class="headerlink" href="#metody-odczytu-danych-getu8-getu16-getstring-etc" title="Link to this heading">#</a></h1>
<p>Są to metody do odczytywania konkretnych typów danych z wewnętrznego, zdeserializowanego bufora. Każde wywołanie przesuwa wskaźnik odczytu (<code class="docutils literal notranslate"><span class="pre">m_pos</span></code>). Jeśli bufor nie został jeszcze wypełniony, najpierw wywoływana jest metoda <code class="docutils literal notranslate"><span class="pre">unserialize()</span></code>.</p>
</section>
<section id="klasa-outputbinarytree">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OutputBinaryTree</span></code><a class="headerlink" href="#klasa-outputbinarytree" title="Link to this heading">#</a></h1>
</section>
<section id="outputbinarytree-outputbinarytree-const-filestreamptr-fin">
<h1><code class="docutils literal notranslate"><span class="pre">OutputBinaryTree::OutputBinaryTree(const</span> <span class="pre">FileStreamPtr&amp;</span> <span class="pre">fin)</span></code><a class="headerlink" href="#outputbinarytree-outputbinarytree-const-filestreamptr-fin" title="Link to this heading">#</a></h1>
<p>Konstruktor, który przyjmuje strumień pliku do zapisu i natychmiast rozpoczyna nowy węzeł, zapisując znacznik <code class="docutils literal notranslate"><span class="pre">BINARYTREE_NODE_START</span></code>.</p>
</section>
<section id="metody-zapisu-danych-addu8-addu16-addstring-etc">
<h1>Metody zapisu danych (<code class="docutils literal notranslate"><span class="pre">addU8</span></code>, <code class="docutils literal notranslate"><span class="pre">addU16</span></code>, <code class="docutils literal notranslate"><span class="pre">addString</span></code>, etc.)<a class="headerlink" href="#metody-zapisu-danych-addu8-addu16-addstring-etc" title="Link to this heading">#</a></h1>
<p>Metody te służą do zapisywania danych do strumienia. Używają metody <code class="docutils literal notranslate"><span class="pre">write</span></code>, aby zapewnić poprawne „uciekanie” (escaping) znaków specjalnych (<code class="docutils literal notranslate"><span class="pre">0xFD</span></code>, <code class="docutils literal notranslate"><span class="pre">0xFE</span></code>, <code class="docutils literal notranslate"><span class="pre">0xFF</span></code>).</p>
</section>
<section id="void-outputbinarytree-startnode-uint8-node">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputBinaryTree::startNode(uint8</span> <span class="pre">node)</span></code><a class="headerlink" href="#void-outputbinarytree-startnode-uint8-node" title="Link to this heading">#</a></h1>
<p>Rozpoczyna nowy, zagnieżdżony węzeł wewnątrz bieżącego węzła.</p>
</section>
<section id="void-outputbinarytree-endnode">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputBinaryTree::endNode()</span></code><a class="headerlink" href="#void-outputbinarytree-endnode" title="Link to this heading">#</a></h1>
<p>Kończy bieżący węzeł, zapisując znacznik <code class="docutils literal notranslate"><span class="pre">BINARYTREE_NODE_END</span></code>.</p>
</section>
<section id="void-outputbinarytree-write-const-uint8-data-size-t-size">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputBinaryTree::write(const</span> <span class="pre">uint8*</span> <span class="pre">data,</span> <span class="pre">size_t</span> <span class="pre">size)</span></code><a class="headerlink" href="#void-outputbinarytree-write-const-uint8-data-size-t-size" title="Link to this heading">#</a></h1>
<p>Prywatna metoda pomocnicza, która zapisuje surowe dane do strumienia, dodając znak <code class="docutils literal notranslate"><span class="pre">BINARYTREE_ESCAPE_CHAR</span></code> przed każdym bajtem, który jest znakiem specjalnym.</p>
</section>
<section id="id55">
<h1>Zależności i powiązania<a class="headerlink" href="#id55" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/binarytree.h</span></code>: Plik nagłówkowy dla tych klas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/filestream.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">FileStream</span></code> do operacji na plikach.</p></li>
<li><p>Format danych, który obsługują te klasy, jest specyficzny dla klienta Tibii i jest używany m.in. do parsowania plików <code class="docutils literal notranslate"><span class="pre">.otbm</span></code> (mapy).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="asyncdispatcher-cpp">
<h1>📄 asyncdispatcher.cpp<a class="headerlink" href="#asyncdispatcher-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id56">
<h1>Opis ogólny<a class="headerlink" href="#id56" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">asyncdispatcher.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code>, która zarządza asynchronicznym wykonywaniem zadań w tle. Jest to realizacja mechanizmu puli wątków, który pozwala na odciążenie głównego wątku aplikacji.</p>
</section>
<section id="id57">
<h1>Zmienne globalne<a class="headerlink" href="#id57" title="Link to this heading">#</a></h1>
</section>
<section id="g-asyncdispatcher">
<h1><code class="docutils literal notranslate"><span class="pre">g_asyncDispatcher</span></code><a class="headerlink" href="#g-asyncdispatcher" title="Link to this heading">#</a></h1>
<p>Globalna instancja klasy <code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code>, zapewniająca scentralizowany dostęp do puli wątków z dowolnego miejsca w aplikacji.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AsyncDispatcher</span><span class="w"> </span><span class="n">g_asyncDispatcher</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id58">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code><a class="headerlink" href="#id58" title="Link to this heading">#</a></h1>
</section>
<section id="void-asyncdispatcher-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AsyncDispatcher::init()</span></code><a class="headerlink" href="#void-asyncdispatcher-init" title="Link to this heading">#</a></h1>
</section>
<section id="id59">
<h1>Opis semantyczny<a class="headerlink" href="#id59" title="Link to this heading">#</a></h1>
<p>Inicjalizuje dyspozytor, wywołując <code class="docutils literal notranslate"><span class="pre">spawn_thread()</span></code> w celu utworzenia i uruchomienia pierwszego wątku roboczego.</p>
</section>
<section id="void-asyncdispatcher-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AsyncDispatcher::terminate()</span></code><a class="headerlink" href="#void-asyncdispatcher-terminate" title="Link to this heading">#</a></h1>
</section>
<section id="id60">
<h1>Opis semantyczny<a class="headerlink" href="#id60" title="Link to this heading">#</a></h1>
<p>Zamyka dyspozytor. Zatrzymuje wszystkie wątki robocze i czyści kolejkę zadań.</p>
</section>
<section id="void-asyncdispatcher-spawn-thread">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AsyncDispatcher::spawn_thread()</span></code><a class="headerlink" href="#void-asyncdispatcher-spawn-thread" title="Link to this heading">#</a></h1>
</section>
<section id="id61">
<h1>Opis semantyczny<a class="headerlink" href="#id61" title="Link to this heading">#</a></h1>
<p>Tworzy nowy <code class="docutils literal notranslate"><span class="pre">std::thread</span></code>, który rozpoczyna wykonywanie pętli <code class="docutils literal notranslate"><span class="pre">exec_loop()</span></code>. Wątek jest dodawany do listy <code class="docutils literal notranslate"><span class="pre">m_threads</span></code>. Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_running</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</section>
<section id="void-asyncdispatcher-stop">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AsyncDispatcher::stop()</span></code><a class="headerlink" href="#void-asyncdispatcher-stop" title="Link to this heading">#</a></h1>
</section>
<section id="id62">
<h1>Opis semantyczny<a class="headerlink" href="#id62" title="Link to this heading">#</a></h1>
<p>Bezpiecznie zatrzymuje wszystkie wątki robocze. Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_running</span></code> na <code class="docutils literal notranslate"><span class="pre">false</span></code>, powiadamia wszystkie oczekujące wątki za pomocą <code class="docutils literal notranslate"><span class="pre">m_condition.notify_all()</span></code>, a następnie czeka na ich zakończenie za pomocą <code class="docutils literal notranslate"><span class="pre">thread.join()</span></code>.</p>
</section>
<section id="void-asyncdispatcher-exec-loop">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AsyncDispatcher::exec_loop()</span></code><a class="headerlink" href="#void-asyncdispatcher-exec-loop" title="Link to this heading">#</a></h1>
</section>
<section id="id63">
<h1>Opis semantyczny<a class="headerlink" href="#id63" title="Link to this heading">#</a></h1>
<p>Jest to główna funkcja pętli dla każdego wątku roboczego.</p>
</section>
<section id="id64">
<h1>Działanie<a class="headerlink" href="#id64" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Wątek wchodzi w nieskończoną pętlę i blokuje mutex <code class="docutils literal notranslate"><span class="pre">m_mutex</span></code>.</p></li>
<li><p>Czeka na zmiennej warunkowej <code class="docutils literal notranslate"><span class="pre">m_condition</span></code>, aż w kolejce <code class="docutils literal notranslate"><span class="pre">m_tasks</span></code> pojawi się zadanie lub flaga <code class="docutils literal notranslate"><span class="pre">m_running</span></code> zostanie ustawiona na <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p>Gdy zostanie obudzony i flaga <code class="docutils literal notranslate"><span class="pre">m_running</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code>, pobiera pierwsze zadanie z kolejki <code class="docutils literal notranslate"><span class="pre">m_tasks</span></code>.</p></li>
<li><p>Odblokowuje mutex, aby inne wątki mogły dodawać lub pobierać zadania.</p></li>
<li><p>Wykonuje pobrane zadanie (<code class="docutils literal notranslate"><span class="pre">task()</span></code>).</p></li>
<li><p>Ponownie blokuje mutex i wraca na początek pętli.</p></li>
<li><p>Jeśli flaga <code class="docutils literal notranslate"><span class="pre">m_running</span></code> jest <code class="docutils literal notranslate"><span class="pre">false</span></code>, wątek kończy działanie.</p></li>
</ol>
</section>
<section id="id65">
<h1>Zależności i powiązania<a class="headerlink" href="#id65" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">asyncdispatcher.h</span></code>: Plik nagłówkowy dla tej klasy.</p></li>
<li><p>Klasa intensywnie korzysta z narzędzi wielowątkowości z biblioteki standardowej C++ (<code class="docutils literal notranslate"><span class="pre">&lt;thread&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;mutex&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;condition_variable&gt;</span></code>).</p></li>
<li><p>Jest używana przez różne moduły, które potrzebują wykonywać operacje w tle, np. <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code> do zapisu plików, <code class="docutils literal notranslate"><span class="pre">Http</span></code> do przetwarzania pobranych danych.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="clock-h">
<h1>📄 clock.h<a class="headerlink" href="#clock-h" title="Link to this heading">#</a></h1>
</section>
<section id="id66">
<h1>Opis ogólny<a class="headerlink" href="#id66" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">clock.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Clock</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_clock</span></code>) odpowiedzialnym za zarządzanie czasem w aplikacji. Zapewnia buforowany, spójny czas dla jednej klatki oraz dostęp do „rzeczywistego” czasu systemowego.</p>
</section>
<section id="klasa-clock">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Clock</span></code><a class="headerlink" href="#klasa-clock" title="Link to this heading">#</a></h1>
</section>
<section id="id67">
<h1>Opis semantyczny<a class="headerlink" href="#id67" title="Link to this heading">#</a></h1>
<p>Klasa <code class="docutils literal notranslate"><span class="pre">Clock</span></code> ma dwa główne zadania:</p>
<ol class="arabic simple">
<li><p>Dostarczać „buforowany” czas, który jest stały w obrębie jednej iteracji głównej pętli. Metoda <code class="docutils literal notranslate"><span class="pre">update()</span></code> jest wywoływana raz na klatkę, a metody <code class="docutils literal notranslate"><span class="pre">micros()</span></code>, <code class="docutils literal notranslate"><span class="pre">millis()</span></code>, <code class="docutils literal notranslate"><span class="pre">seconds()</span></code> zwracają tę samą, zapisaną wartość czasu przez całą klatkę. Zapewnia to spójność obliczeń zależnych od czasu.</p></li>
<li><p>Dostarczać „rzeczywisty” czas systemowy za pomocą metod <code class="docutils literal notranslate"><span class="pre">realMicros()</span></code> i <code class="docutils literal notranslate"><span class="pre">realMillis()</span></code>, które zawsze odczytują aktualny czas systemowy.</p></li>
</ol>
<p>Wszystkie składowe przechowujące czas są typu <code class="docutils literal notranslate"><span class="pre">std::atomic</span></code>, co zapewnia bezpieczeństwo wątkowe przy odczycie.</p>
</section>
<section id="id68">
<h1>Metody publiczne<a class="headerlink" href="#id68" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Clock()</span></code></p></td>
<td class="text-left"><p>Konstruktor, inicjalizuje czas na 0.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">update()</span></code></p></td>
<td class="text-left"><p>Aktualizuje buforowany czas (<code class="docutils literal notranslate"><span class="pre">m_currentMicros</span></code>, <code class="docutils literal notranslate"><span class="pre">m_currentMillis</span></code>, <code class="docutils literal notranslate"><span class="pre">m_currentSeconds</span></code>) na podstawie aktualnego czasu systemowego. Powinna być wywoływana raz na klatkę.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">micros()</span></code></p></td>
<td class="text-left"><p>Zwraca buforowany czas w mikrosekundach.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">millis()</span></code></p></td>
<td class="text-left"><p>Zwraca buforowany czas w milisekundach.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">seconds()</span></code></p></td>
<td class="text-left"><p>Zwraca buforowany czas w sekundach (jako <code class="docutils literal notranslate"><span class="pre">float</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">realMicros()</span></code></p></td>
<td class="text-left"><p>Zwraca aktualny, „rzeczywisty” czas systemowy w mikrosekundach.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">realMillis()</span></code></p></td>
<td class="text-left"><p>Zwraca aktualny, „rzeczywisty” czas systemowy w milisekundach.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id69">
<h1>Zmienne prywatne<a class="headerlink" href="#id69" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_currentMicros</span></code>: Atomowy licznik przechowujący buforowany czas w mikrosekundach.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_currentMillis</span></code>: Atomowy licznik przechowujący buforowany czas w milisekundach.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_currentSeconds</span></code>: Atomowa zmienna przechowująca buforowany czas w sekundach.</p></li>
</ul>
</section>
<section id="id70">
<h1>Zmienne globalne<a class="headerlink" href="#id70" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_clock</span></code>: Globalna instancja klasy <code class="docutils literal notranslate"><span class="pre">Clock</span></code>.</p></li>
</ul>
</section>
<section id="id71">
<h1>Zależności i powiązania<a class="headerlink" href="#id71" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/declarations.h</span></code>: Definicje podstawowych typów, w tym <code class="docutils literal notranslate"><span class="pre">ticks_t</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/time.h</span></code>: Używa funkcji <code class="docutils literal notranslate"><span class="pre">stdext::micros()</span></code> i <code class="docutils literal notranslate"><span class="pre">stdext::millis()</span></code> do pobierania czasu systemowego.</p></li>
<li><p>Klasa jest kluczowa dla całego systemu, szczególnie dla <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> (do planowania zdarzeń), animacji i logiki gry. Metoda <code class="docutils literal notranslate"><span class="pre">update()</span></code> jest wywoływana w głównej pętli aplikacji (w <code class="docutils literal notranslate"><span class="pre">GraphicalApplication::run()</span></code> i <code class="docutils literal notranslate"><span class="pre">ConsoleApplication::run()</span></code>).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="binarytree-h">
<h1>📄 binarytree.h<a class="headerlink" href="#binarytree-h" title="Link to this heading">#</a></h1>
</section>
<section id="id72">
<h1>Opis ogólny<a class="headerlink" href="#id72" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">binarytree.h</span></code> deklaruje interfejsy dla klas <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code> i <code class="docutils literal notranslate"><span class="pre">OutputBinaryTree</span></code>. Klasy te służą do obsługi niestandardowego, hierarchicznego formatu binarnego, używanego do serializacji danych w strukturze drzewa. Format ten jest charakterystyczny dla plików <code class="docutils literal notranslate"><span class="pre">.otbm</span></code> (OTClient Binary Map).</p>
</section>
<section id="id73">
<h1>Definicje i Makra<a class="headerlink" href="#id73" title="Link to this heading">#</a></h1>
</section>
<section id="znaczniki-binarne">
<h1>Znaczniki binarne<a class="headerlink" href="#znaczniki-binarne" title="Link to this heading">#</a></h1>
<p>Zdefiniowano trzy specjalne bajty, które kontrolują strukturę drzewa w strumieniu binarnym:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BINARYTREE_ESCAPE_CHAR</span></code> (0xFD): Znak „ucieczki”, używany do kodowania bajtów, które mają taką samą wartość jak inne znaki specjalne.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BINARYTREE_NODE_START</span></code> (0xFE): Znacznik początku nowego węzła (dziecka).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BINARYTREE_NODE_END</span></code> (0xFF): Znacznik końca bieżącego węzła.</p></li>
</ul>
</section>
<section id="id74">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code><a class="headerlink" href="#id74" title="Link to this heading">#</a></h1>
</section>
<section id="id75">
<h1>Opis semantyczny<a class="headerlink" href="#id75" title="Link to this heading">#</a></h1>
<p>Klasa <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code> reprezentuje pojedynczy węzeł w drzewie danych i służy do <strong>odczytu</strong> danych z tego węzła. Działa na strumieniu <code class="docutils literal notranslate"><span class="pre">FileStream</span></code> i implementuje mechanizm leniwego odczytu (lazy loading) – dane właściwości węzła są deserializowane do wewnętrznego bufora dopiero przy pierwszej próbie dostępu do nich.</p>
</section>
<section id="id76">
<h1>Metody publiczne<a class="headerlink" href="#id76" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">BinaryTree(const</span> <span class="pre">FileStreamPtr&amp;</span> <span class="pre">fin)</span></code></p></td>
<td class="text-left"><p>Konstruktor, przyjmuje strumień wejściowy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">seek(uint</span> <span class="pre">pos)</span></code></p></td>
<td class="text-left"><p>Ustawia pozycję odczytu w zdeserializowanym buforze.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">skip(uint</span> <span class="pre">len)</span></code></p></td>
<td class="text-left"><p>Przeskakuje o <code class="docutils literal notranslate"><span class="pre">len</span></code> bajtów w buforze.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">tell()</span></code></p></td>
<td class="text-left"><p>Zwraca bieżącą pozycję odczytu w buforze.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">size()</span></code></p></td>
<td class="text-left"><p>Zwraca rozmiar zdeserializowanych danych węzła.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getU8()</span></code>, <code class="docutils literal notranslate"><span class="pre">getU16()</span></code>, <code class="docutils literal notranslate"><span class="pre">getU32()</span></code>, <code class="docutils literal notranslate"><span class="pre">getU64()</span></code></p></td>
<td class="text-left"><p>Odczytują liczby całkowite bez znaku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getString(uint16</span> <span class="pre">len</span> <span class="pre">=</span> <span class="pre">0)</span></code></p></td>
<td class="text-left"><p>Odczytuje ciąg znaków (długość podana lub odczytana jako U16).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getPoint()</span></code></p></td>
<td class="text-left"><p>Odczytuje obiekt <code class="docutils literal notranslate"><span class="pre">Point</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getChildren()</span></code></p></td>
<td class="text-left"><p>Zwraca wektor <code class="docutils literal notranslate"><span class="pre">BinaryTreePtr</span></code> zawierający wszystkie dzieci bieżącego węzła.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">canRead()</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy można jeszcze odczytywać dane z bufora.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id77">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OutputBinaryTree</span></code><a class="headerlink" href="#id77" title="Link to this heading">#</a></h1>
</section>
<section id="id78">
<h1>Opis semantyczny<a class="headerlink" href="#id78" title="Link to this heading">#</a></h1>
<p>Klasa <code class="docutils literal notranslate"><span class="pre">OutputBinaryTree</span></code> jest odpowiednikiem <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code> do <strong>zapisu</strong> danych w formacie drzewa binarnego. Umożliwia tworzenie węzłów i zapisywanie do nich właściwości, dbając o poprawne formatowanie i „uciekanie” (escaping) znaków specjalnych.</p>
</section>
<section id="id79">
<h1>Metody publiczne<a class="headerlink" href="#id79" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OutputBinaryTree(const</span> <span class="pre">FileStreamPtr&amp;</span> <span class="pre">fin)</span></code></p></td>
<td class="text-left"><p>Konstruktor, przyjmuje strumień wyjściowy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">addU8()</span></code>, <code class="docutils literal notranslate"><span class="pre">addU16()</span></code>, <code class="docutils literal notranslate"><span class="pre">addU32()</span></code></p></td>
<td class="text-left"><p>Zapisują liczby całkowite bez znaku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">addString(const</span> <span class="pre">std::string&amp;</span> <span class="pre">v)</span></code></p></td>
<td class="text-left"><p>Zapisuje ciąg znaków (z długością).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">addPos(uint16</span> <span class="pre">x,</span> <span class="pre">uint16</span> <span class="pre">y,</span> <span class="pre">uint8</span> <span class="pre">z)</span></code></p></td>
<td class="text-left"><p>Zapisuje pozycję (x, y, z).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">addPoint(const</span> <span class="pre">Point&amp;</span> <span class="pre">point)</span></code></p></td>
<td class="text-left"><p>Zapisuje obiekt <code class="docutils literal notranslate"><span class="pre">Point</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">startNode(uint8</span> <span class="pre">node)</span></code></p></td>
<td class="text-left"><p>Rozpoczyna nowy zagnieżdżony węzeł z danym typem (atrybutem).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">endNode()</span></code></p></td>
<td class="text-left"><p>Kończy bieżący węzeł.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id80">
<h1>Zależności i powiązania<a class="headerlink" href="#id80" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/declarations.h</span></code>: Definicje wskaźników, np. <code class="docutils literal notranslate"><span class="pre">FileStreamPtr</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/databuffer.h</span></code>: Wewnętrzny bufor w <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code> jest typu <code class="docutils literal notranslate"><span class="pre">DataBuffer</span></code>.</p></li>
<li><p>Jest używana przez moduły, które muszą przetwarzać dane w formacie <code class="docutils literal notranslate"><span class="pre">.otbm</span></code>, np. edytor map lub sam klient do wczytywania mapy gry.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="config-cpp">
<h1>📄 config.cpp<a class="headerlink" href="#config-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id81">
<h1>Opis ogólny<a class="headerlink" href="#id81" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">config.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Config</span></code>, która jest opakowaniem na dokument OTML (<code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code>). Służy do zarządzania pojedynczym plikiem konfiguracyjnym, umożliwiając łatwy odczyt, zapis i modyfikację wartości w formacie <code class="docutils literal notranslate"><span class="pre">key-value</span></code> oraz bardziej złożonych struktur zagnieżdżonych.</p>
</section>
<section id="klasa-config">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Config</span></code><a class="headerlink" href="#klasa-config" title="Link to this heading">#</a></h1>
</section>
<section id="config-config">
<h1><code class="docutils literal notranslate"><span class="pre">Config::Config()</span></code><a class="headerlink" href="#config-config" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje pusty dokument OTML (<code class="docutils literal notranslate"><span class="pre">m_confsDoc</span></code>) i zeruje nazwę pliku (<code class="docutils literal notranslate"><span class="pre">m_fileName</span></code>).</p>
</section>
<section id="bool-config-load-const-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Config::load(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code><a class="headerlink" href="#bool-config-load-const-std-string-file" title="Link to this heading">#</a></h1>
</section>
<section id="id82">
<h1>Opis semantyczny<a class="headerlink" href="#id82" title="Link to this heading">#</a></h1>
<p>Ładuje i parsuje plik konfiguracyjny w formacie OTML.</p>
</section>
<section id="id83">
<h1>Działanie<a class="headerlink" href="#id83" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Zapamiętuje nazwę pliku w <code class="docutils literal notranslate"><span class="pre">m_fileName</span></code>.</p></li>
<li><p>Sprawdza, czy plik istnieje za pomocą <code class="docutils literal notranslate"><span class="pre">g_resources.fileExists</span></code>.</p></li>
<li><p>Jeśli plik istnieje, parsuje go za pomocą <code class="docutils literal notranslate"><span class="pre">OTMLDocument::parse</span></code>.</p></li>
<li><p>W przypadku sukcesu, zastępuje wewnętrzny dokument (<code class="docutils literal notranslate"><span class="pre">m_confsDoc</span></code>) nowo sparsowanym.</p></li>
<li><p>W przypadku błędu parsowania, loguje błąd i zwraca <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
</ol>
</section>
<section id="bool-config-unload">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Config::unload()</span></code><a class="headerlink" href="#bool-config-unload" title="Link to this heading">#</a></h1>
<p>Zwalnia wewnętrzny dokument OTML i resetuje nazwę pliku. Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli obiekt był załadowany.</p>
</section>
<section id="bool-config-save">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Config::save()</span></code><a class="headerlink" href="#bool-config-save" title="Link to this heading">#</a></h1>
<p>Zapisuje bieżącą zawartość dokumentu OTML do pliku, którego nazwa jest przechowywana w <code class="docutils literal notranslate"><span class="pre">m_fileName</span></code>. Używa do tego metody <code class="docutils literal notranslate"><span class="pre">m_confsDoc→save()</span></code>.</p>
</section>
<section id="void-config-clear">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::clear()</span></code><a class="headerlink" href="#void-config-clear" title="Link to this heading">#</a></h1>
<p>Czyści wszystkie węzły z wewnętrznego dokumentu OTML.</p>
</section>
<section id="void-config-setvalue-const-std-string-key-const-std-string-value">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::setValue(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">value)</span></code><a class="headerlink" href="#void-config-setvalue-const-std-string-key-const-std-string-value" title="Link to this heading">#</a></h1>
<p>Ustawia wartość dla danego klucza. Jeśli wartość jest pusta, klucz jest usuwany. W przeciwnym razie tworzony jest nowy węzeł OTML (<code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code>) i dodawany do dokumentu. Istniejące węzły o tym samym kluczu są nadpisywane.</p>
</section>
<section id="void-config-setlist-const-std-string-key-const-std-vector-std-string-list">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::setList(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key,</span> <span class="pre">const</span> <span class="pre">std::vector&lt;std::string&gt;&amp;</span> <span class="pre">list)</span></code><a class="headerlink" href="#void-config-setlist-const-std-string-key-const-std-vector-std-string-list" title="Link to this heading">#</a></h1>
<p>Zapisuje wektor stringów jako listę w dokumencie OTML. Tworzy węzeł główny o nazwie <code class="docutils literal notranslate"><span class="pre">key</span></code>, a następnie dodaje każdy element wektora jako jego dziecko bez nazwy.</p>
</section>
<section id="bool-config-exists-const-std-string-key">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Config::exists(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code><a class="headerlink" href="#bool-config-exists-const-std-string-key" title="Link to this heading">#</a></h1>
<p>Sprawdza, czy w dokumencie istnieje węzeł o podanym kluczu.</p>
</section>
<section id="std-string-config-getvalue-const-std-string-key">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">Config::getValue(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code><a class="headerlink" href="#std-string-config-getvalue-const-std-string-key" title="Link to this heading">#</a></h1>
<p>Zwraca wartość stringową dla podanego klucza. Jeśli klucz nie istnieje, zwraca pusty string.</p>
</section>
<section id="std-vector-std-string-config-getlist-const-std-string-key">
<h1><code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::string&gt;</span> <span class="pre">Config::getList(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code><a class="headerlink" href="#std-vector-std-string-config-getlist-const-std-string-key" title="Link to this heading">#</a></h1>
<p>Odczytuje listę stringów z węzła o podanym kluczu. Zwraca pusty wektor, jeśli klucz nie istnieje.</p>
</section>
<section id="void-config-remove-const-std-string-key">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::remove(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code><a class="headerlink" href="#void-config-remove-const-std-string-key" title="Link to this heading">#</a></h1>
<p>Usuwa węzeł o podanym kluczu z dokumentu.</p>
</section>
<section id="void-config-setnode-const-std-string-key-const-otmlnodeptr-node">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::setNode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key,</span> <span class="pre">const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node)</span></code><a class="headerlink" href="#void-config-setnode-const-std-string-key-const-otmlnodeptr-node" title="Link to this heading">#</a></h1>
<p>Zastępuje istniejący węzeł nowym węzłem OTML. Najpierw usuwa stary węzeł, a następnie dodaje sklonowaną wersję nowego.</p>
</section>
<section id="void-config-mergenode-const-std-string-key-const-otmlnodeptr-node">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::mergeNode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key,</span> <span class="pre">const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node)</span></code><a class="headerlink" href="#void-config-mergenode-const-std-string-key-const-otmlnodeptr-node" title="Link to this heading">#</a></h1>
<p>Łączy podany węzeł z istniejącym (lub tworzy nowy). Działa podobnie do <code class="docutils literal notranslate"><span class="pre">setNode</span></code>, ale jest używane do dodawania/aktualizowania danych bez usuwania całego węzła.</p>
</section>
<section id="otmlnodeptr-config-getnode-const-std-string-key">
<h1><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span> <span class="pre">Config::getNode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code><a class="headerlink" href="#otmlnodeptr-config-getnode-const-std-string-key" title="Link to this heading">#</a></h1>
<p>Zwraca wskaźnik do węzła OTML o podanym kluczu.</p>
</section>
<section id="int-config-getnodesize-const-std-string-key">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Config::getNodeSize(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code><a class="headerlink" href="#int-config-getnodesize-const-std-string-key" title="Link to this heading">#</a></h1>
<p>Zwraca liczbę dzieci węzła o podanym kluczu. Zwraca 0, jeśli węzeł nie istnieje.</p>
</section>
<section id="bool-config-isloaded">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Config::isLoaded()</span></code><a class="headerlink" href="#bool-config-isloaded" title="Link to this heading">#</a></h1>
<p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli obiekt <code class="docutils literal notranslate"><span class="pre">Config</span></code> jest powiązany z plikiem i ma załadowaną zawartość.</p>
</section>
<section id="id84">
<h1>Zależności i powiązania<a class="headerlink" href="#id84" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/config.h</span></code>: Plik nagłówkowy dla tej klasy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Używany do sprawdzania istnienia plików.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/configmanager.h</span></code>: <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code> zarządza instancjami klasy <code class="docutils literal notranslate"><span class="pre">Config</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otml.h</span></code>: Intensywnie korzysta z <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code> i <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code> do przechowywania i manipulowania danymi konfiguracyjnymi.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="configmanager-cpp">
<h1>📄 configmanager.cpp<a class="headerlink" href="#configmanager-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id85">
<h1>Opis ogólny<a class="headerlink" href="#id85" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">configmanager.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_configs</span></code>) służącym do zarządzania wieloma plikami konfiguracyjnymi (<code class="docutils literal notranslate"><span class="pre">Config</span></code>) w aplikacji. Umożliwia ładowanie, tworzenie, pobieranie i zwalnianie konfiguracji na żądanie.</p>
</section>
<section id="id86">
<h1>Zmienne globalne<a class="headerlink" href="#id86" title="Link to this heading">#</a></h1>
</section>
<section id="g-configs">
<h1><code class="docutils literal notranslate"><span class="pre">g_configs</span></code><a class="headerlink" href="#g-configs" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code>, zapewniająca centralny punkt dostępu do wszystkich konfiguracji.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ConfigManager</span><span class="w"> </span><span class="n">g_configs</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-configmanager">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code><a class="headerlink" href="#klasa-configmanager" title="Link to this heading">#</a></h1>
</section>
<section id="void-configmanager-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ConfigManager::init()</span></code><a class="headerlink" href="#void-configmanager-init" title="Link to this heading">#</a></h1>
</section>
<section id="id87">
<h1>Opis semantyczny<a class="headerlink" href="#id87" title="Link to this heading">#</a></h1>
<p>Inicjalizuje menedżera. Tworzy główny obiekt konfiguracyjny, zwany „settings” (<code class="docutils literal notranslate"><span class="pre">m_settings</span></code>), który jest przeznaczony do przechowywania ustawień samej aplikacji.</p>
</section>
<section id="void-configmanager-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ConfigManager::terminate()</span></code><a class="headerlink" href="#void-configmanager-terminate" title="Link to this heading">#</a></h1>
</section>
<section id="id88">
<h1>Opis semantyczny<a class="headerlink" href="#id88" title="Link to this heading">#</a></h1>
<p>Zwalnia wszystkie zarządzane obiekty <code class="docutils literal notranslate"><span class="pre">Config</span></code>. Zapewnia, że główna konfiguracja (<code class="docutils literal notranslate"><span class="pre">m_settings</span></code>) jest zapisywana przed zamknięciem.</p>
</section>
<section id="id89">
<h1>Działanie<a class="headerlink" href="#id89" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Zapisuje główny plik ustawień (<code class="docutils literal notranslate"><span class="pre">m_settings→save()</span></code>).</p></li>
<li><p>Odładowuje (<code class="docutils literal notranslate"><span class="pre">unload()</span></code>) główny obiekt ustawień.</p></li>
<li><p>Iteruje po wszystkich pozostałych załadowanych konfiguracjach i je odładowuje.</p></li>
<li><p>Czyści listę <code class="docutils literal notranslate"><span class="pre">m_configs</span></code>.</p></li>
</ol>
</section>
<section id="configptr-configmanager-getsettings">
<h1><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">ConfigManager::getSettings()</span></code><a class="headerlink" href="#configptr-configmanager-getsettings" title="Link to this heading">#</a></h1>
<p>Zwraca wskaźnik do głównego obiektu konfiguracyjnego <code class="docutils literal notranslate"><span class="pre">m_settings</span></code>.</p>
</section>
<section id="configptr-configmanager-get-const-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">ConfigManager::get(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code><a class="headerlink" href="#configptr-configmanager-get-const-std-string-file" title="Link to this heading">#</a></h1>
<p>Wyszukuje i zwraca wskaźnik do już załadowanego obiektu <code class="docutils literal notranslate"><span class="pre">Config</span></code> na podstawie nazwy pliku. Jeśli konfiguracja nie jest załadowana, zwraca <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>.</p>
</section>
<section id="configptr-configmanager-loadsettings-const-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">ConfigManager::loadSettings(const</span> <span class="pre">std::string</span> <span class="pre">file)</span></code><a class="headerlink" href="#configptr-configmanager-loadsettings-const-std-string-file" title="Link to this heading">#</a></h1>
<p>Ładuje główny plik ustawień z podanej ścieżki. Zastępuje domyślny, pusty obiekt <code class="docutils literal notranslate"><span class="pre">m_settings</span></code>.</p>
</section>
<section id="configptr-configmanager-create-const-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">ConfigManager::create(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code><a class="headerlink" href="#configptr-configmanager-create-const-std-string-file" title="Link to this heading">#</a></h1>
<p>Ładuje plik konfiguracyjny, a jeśli on nie istnieje, tworzy go. Jest to przydatne do tworzenia domyślnych plików konfiguracyjnych przy pierwszym uruchomieniu.</p>
</section>
<section id="id90">
<h1>Działanie<a class="headerlink" href="#id90" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Próbuje załadować plik za pomocą <code class="docutils literal notranslate"><span class="pre">load(file)</span></code>.</p></li>
<li><p>Jeśli ładowanie się nie powiedzie (plik nie istnieje), tworzy nowy obiekt <code class="docutils literal notranslate"><span class="pre">Config</span></code>, ładuje go (co tworzy pusty dokument), zapisuje go na dysku (tworząc plik) i dodaje do listy zarządzanych konfiguracji.</p></li>
</ol>
</section>
<section id="configptr-configmanager-load-const-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">ConfigManager::load(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code><a class="headerlink" href="#configptr-configmanager-load-const-std-string-file" title="Link to this heading">#</a></h1>
<p>Ładuje plik konfiguracyjny. Jeśli plik był już załadowany, zwraca istniejącą instancję. W przeciwnym razie tworzy nowy obiekt <code class="docutils literal notranslate"><span class="pre">Config</span></code>, próbuje załadować plik z dysku i, jeśli się powiedzie, dodaje go do listy zarządzanych konfiguracji.</p>
</section>
<section id="bool-configmanager-unload-const-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ConfigManager::unload(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code><a class="headerlink" href="#bool-configmanager-unload-const-std-string-file" title="Link to this heading">#</a></h1>
<p>Znajduje obiekt <code class="docutils literal notranslate"><span class="pre">Config</span></code> po nazwie pliku, odładowuje go (zwalniając pamięć) i usuwa z listy zarządzanych konfiguracji.</p>
</section>
<section id="void-configmanager-remove-const-configptr-config">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ConfigManager::remove(const</span> <span class="pre">ConfigPtr</span> <span class="pre">config)</span></code><a class="headerlink" href="#void-configmanager-remove-const-configptr-config" title="Link to this heading">#</a></h1>
<p>Usuwa podany obiekt <code class="docutils literal notranslate"><span class="pre">Config</span></code> z listy <code class="docutils literal notranslate"><span class="pre">m_configs</span></code>.</p>
</section>
<section id="id91">
<h1>Zależności i powiązania<a class="headerlink" href="#id91" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/configmanager.h</span></code>: Plik nagłówkowy dla tej klasy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/config.h</span></code>: <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code> zarządza obiektami typu <code class="docutils literal notranslate"><span class="pre">Config</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/logger.h</span></code>: Używany do logowania błędów, np. gdy nie można załadować pliku.</p></li>
<li><p>Jest kluczowym komponentem rdzenia aplikacji, używanym przez moduły do odczytu i zapisu swoich konfiguracji.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="configmanager-h">
<h1>📄 configmanager.h<a class="headerlink" href="#configmanager-h" title="Link to this heading">#</a></h1>
</section>
<section id="id92">
<h1>Opis ogólny<a class="headerlink" href="#id92" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">configmanager.h</span></code> deklaruje interfejs klasy <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code>, która pełni rolę centralnego menedżera plików konfiguracyjnych w formacie OTML. Umożliwia zarządzanie cyklem życia wielu obiektów <code class="docutils literal notranslate"><span class="pre">Config</span></code>, w tym ich ładowanie, tworzenie i zwalnianie.</p>
</section>
<section id="id93">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code><a class="headerlink" href="#id93" title="Link to this heading">#</a></h1>
</section>
<section id="id94">
<h1>Opis semantyczny<a class="headerlink" href="#id94" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code> to klasa singletonowa (<code class="docutils literal notranslate"><span class="pre">g_configs</span></code>), która przechowuje listę wszystkich aktywnych obiektów <code class="docutils literal notranslate"><span class="pre">Config</span></code>. Wyróżnia jeden specjalny obiekt konfiguracyjny, <code class="docutils literal notranslate"><span class="pre">m_settings</span></code>, przeznaczony na główne ustawienia aplikacji. Pozostałe konfiguracje są zarządzane w liście <code class="docutils literal notranslate"><span class="pre">m_configs</span></code> i identyfikowane po nazwie pliku.</p>
</section>
<section id="id95">
<h1>Metody publiczne<a class="headerlink" href="#id95" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje menedżera, tworząc domyślny obiekt <code class="docutils literal notranslate"><span class="pre">m_settings</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Zwalnia wszystkie załadowane konfiguracje, zapisując wcześniej <code class="docutils literal notranslate"><span class="pre">m_settings</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">getSettings()</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik do głównego obiektu ustawień aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">get(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></p></td>
<td class="text-left"><p>Wyszukuje i zwraca wskaźnik do załadowanej konfiguracji o podanej nazwie pliku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">create(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></p></td>
<td class="text-left"><p>Ładuje konfigurację z pliku lub tworzy nowy, pusty plik, jeśli nie istnieje.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">loadSettings(const</span> <span class="pre">std::string</span> <span class="pre">file)</span></code></p></td>
<td class="text-left"><p>Ładuje główny plik ustawień aplikacji z podanej ścieżki.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">load(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></p></td>
<td class="text-left"><p>Ładuje dodatkowy plik konfiguracyjny.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">unload(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></p></td>
<td class="text-left"><p>Zwalnia i usuwa z menedżera konfigurację o podanej nazwie pliku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">remove(const</span> <span class="pre">ConfigPtr</span> <span class="pre">config)</span></code></p></td>
<td class="text-left"><p>Usuwa podany obiekt <code class="docutils literal notranslate"><span class="pre">Config</span></code> z wewnętrznej listy.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id96">
<h1>Zmienne chronione<a class="headerlink" href="#id96" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_settings</span></code>: Wskaźnik na główny obiekt <code class="docutils literal notranslate"><span class="pre">Config</span></code> przechowujący ustawienia aplikacji.</p></li>
</ul>
</section>
<section id="id97">
<h1>Zmienne prywatne<a class="headerlink" href="#id97" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_configs</span></code>: Lista wskaźników na wszystkie dodatkowe załadowane obiekty <code class="docutils literal notranslate"><span class="pre">Config</span></code>.</p></li>
</ul>
</section>
<section id="id98">
<h1>Zmienne globalne<a class="headerlink" href="#id98" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_configs</span></code>: Globalna instancja singletonu <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code>.</p></li>
</ul>
</section>
<section id="id99">
<h1>Zależności i powiązania<a class="headerlink" href="#id99" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/config.h</span></code>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Config</span></code>, którą zarządza <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code>.</p></li>
<li><p>Jest oznaczona adnotacją <code class="docutils literal notranslate"><span class="pre">&#64;bindsingleton</span> <span class="pre">g_configs</span></code>, co oznacza, że jej funkcjonalność jest dostępna w skryptach Lua pod globalną nazwą <code class="docutils literal notranslate"><span class="pre">g_configs</span></code>.</p></li>
<li><p>Współpracuje z <code class="docutils literal notranslate"><span class="pre">Application</span></code> (która wywołuje <code class="docutils literal notranslate"><span class="pre">init</span></code> i <code class="docutils literal notranslate"><span class="pre">terminate</span></code>) oraz z modułami, które potrzebują dostępu do swoich plików konfiguracyjnych.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="config-h">
<h1>📄 config.h<a class="headerlink" href="#config-h" title="Link to this heading">#</a></h1>
</section>
<section id="id100">
<h1>Opis ogólny<a class="headerlink" href="#id100" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">config.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Config</span></code>, która jest obiektowym interfejsem do odczytu, zapisu i manipulacji danymi w plikach konfiguracyjnych formatu OTML. Klasa ta dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, co oznacza, że jej instancje mogą być tworzone i używane w skryptach Lua.</p>
</section>
<section id="id101">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Config</span></code><a class="headerlink" href="#id101" title="Link to this heading">#</a></h1>
</section>
<section id="id102">
<h1>Opis semantyczny<a class="headerlink" href="#id102" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Config</span></code> działa jako opakowanie (wrapper) na <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code>. Każda instancja tej klasy reprezentuje jeden plik konfiguracyjny. Umożliwia operacje takie jak ustawianie wartości (<code class="docutils literal notranslate"><span class="pre">setValue</span></code>), list (<code class="docutils literal notranslate"><span class="pre">setList</span></code>), a także bardziej złożonych struktur (<code class="docutils literal notranslate"><span class="pre">setNode</span></code>, <code class="docutils literal notranslate"><span class="pre">mergeNode</span></code>). Wszystkie dane są przechowywane wewnętrznie jako drzewo węzłów OTML.</p>
</section>
<section id="id103">
<h1>Metody publiczne<a class="headerlink" href="#id103" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Config()</span></code></p></td>
<td class="text-left"><p>Konstruktor domyślny.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">load(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></p></td>
<td class="text-left"><p>Ładuje i parsuje konfigurację z pliku OTML.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">unload()</span></code></p></td>
<td class="text-left"><p>Zwalnia załadowaną konfigurację.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">save()</span></code></p></td>
<td class="text-left"><p>Zapisuje bieżący stan konfiguracji do pliku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clear()</span></code></p></td>
<td class="text-left"><p>Usuwa wszystkie dane z konfiguracji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setValue(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wartość dla danego klucza.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setList(...)</span></code></p></td>
<td class="text-left"><p>Ustawia listę wartości dla danego klucza.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getValue(...)</span></code></p></td>
<td class="text-left"><p>Odczytuje wartość dla danego klucza.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::string&gt;</span> <span class="pre">getList(...)</span></code></p></td>
<td class="text-left"><p>Odczytuje listę wartości dla danego klucza.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setNode(...)</span></code></p></td>
<td class="text-left"><p>Zastępuje węzeł o danym kluczu nowym węzłem OTML.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">mergeNode(...)</span></code></p></td>
<td class="text-left"><p>Łączy (merge) podany węzeł z istniejącym węzłem o danym kluczu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span> <span class="pre">getNode(...)</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik do węzła OTML o podanym kluczu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getNodeSize(...)</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę dzieci węzła o danym kluczu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">exists(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy klucz istnieje.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">remove(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code></p></td>
<td class="text-left"><p>Usuwa klucz i jego wartość.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getFileName()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę pliku powiązanego z tą konfiguracją.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isLoaded()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli konfiguracja została załadowana z pliku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">asConfig()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code> do siebie (<code class="docutils literal notranslate"><span class="pre">static_self_cast</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id104">
<h1>Zmienne prywatne<a class="headerlink" href="#id104" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_fileName</span></code>: Nazwa pliku konfiguracyjnego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_confsDoc</span></code>: Wskaźnik na <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code>, który przechowuje dane konfiguracyjne.</p></li>
</ul>
</section>
<section id="id105">
<h1>Zależności i powiązania<a class="headerlink" href="#id105" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/declarations.h</span></code>: Deklaracje typów, w tym <code class="docutils literal notranslate"><span class="pre">ConfigPtr</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Dziedziczy z <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, aby być dostępną w Lua.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/declarations.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">OTMLDocumentPtr</span></code> i <code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span></code> do przechowywania danych.</p></li>
<li><p>Jest oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, co oznacza, że metody tej klasy są dostępne do wywołania z poziomu skryptów Lua na instancjach obiektów <code class="docutils literal notranslate"><span class="pre">Config</span></code>.</p></li>
<li><p>Instancje tej klasy są tworzone i zarządzane przez <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="clock-cpp">
<h1>📄 clock.cpp<a class="headerlink" href="#clock-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id106">
<h1>Opis ogólny<a class="headerlink" href="#id106" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">clock.cpp</span></code> zawiera implementację metod klasy <code class="docutils literal notranslate"><span class="pre">Clock</span></code>. Odpowiada za dostarczanie mechanizmów pomiaru czasu, które są kluczowe dla pętli głównej aplikacji, planowania zdarzeń i animacji.</p>
</section>
<section id="id107">
<h1>Zmienne globalne<a class="headerlink" href="#id107" title="Link to this heading">#</a></h1>
</section>
<section id="g-clock">
<h1><code class="docutils literal notranslate"><span class="pre">g_clock</span></code><a class="headerlink" href="#g-clock" title="Link to this heading">#</a></h1>
<p>Globalna instancja klasy <code class="docutils literal notranslate"><span class="pre">Clock</span></code>, która jest używana w całym frameworku do uzyskiwania spójnych informacji o czasie.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Clock</span><span class="w"> </span><span class="n">g_clock</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id108">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Clock</span></code><a class="headerlink" href="#id108" title="Link to this heading">#</a></h1>
</section>
<section id="clock-clock">
<h1><code class="docutils literal notranslate"><span class="pre">Clock::Clock()</span></code><a class="headerlink" href="#clock-clock" title="Link to this heading">#</a></h1>
<p>Konstruktor klasy. Inicjalizuje wszystkie liczniki czasu na 0.</p>
</section>
<section id="void-clock-update">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Clock::update()</span></code><a class="headerlink" href="#void-clock-update" title="Link to this heading">#</a></h1>
</section>
<section id="id109">
<h1>Opis semantyczny<a class="headerlink" href="#id109" title="Link to this heading">#</a></h1>
<p>Aktualizuje wewnętrzne, „buforowane” liczniki czasu. Ta metoda powinna być wywoływana raz na każdą iterację głównej pętli aplikacji. Dzięki temu wszystkie operacje wewnątrz jednej klatki (np. logika gry, animacje, fizyka) bazują na tej samej wartości czasu, co zapobiega niespójnościom.</p>
</section>
<section id="id110">
<h1>Działanie<a class="headerlink" href="#id110" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Pobiera aktualny czas systemowy w mikrosekundach za pomocą <code class="docutils literal notranslate"><span class="pre">stdext::micros()</span></code>.</p></li>
<li><p>Zapisuje tę wartość do atomowej zmiennej <code class="docutils literal notranslate"><span class="pre">m_currentMicros</span></code>.</p></li>
<li><p>Oblicza i zapisuje czas w milisekundach (<code class="docutils literal notranslate"><span class="pre">m_currentMillis</span></code>) i sekundach (<code class="docutils literal notranslate"><span class="pre">m_currentSeconds</span></code>).</p></li>
</ol>
</section>
<section id="ticks-t-clock-realmicros">
<h1><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">Clock::realMicros()</span></code><a class="headerlink" href="#ticks-t-clock-realmicros" title="Link to this heading">#</a></h1>
<p>Zwraca „na żywo” aktualny czas systemowy w mikrosekundach. W przeciwieństwie do <code class="docutils literal notranslate"><span class="pre">micros()</span></code>, ta metoda nie korzysta z buforowanej wartości i przy każdym wywołaniu odpytuje system operacyjny.</p>
</section>
<section id="ticks-t-clock-realmillis">
<h1><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">Clock::realMillis()</span></code><a class="headerlink" href="#ticks-t-clock-realmillis" title="Link to this heading">#</a></h1>
<p>Zwraca „na żywo” aktualny czas systemowy w milisekundach. Podobnie jak <code class="docutils literal notranslate"><span class="pre">realMicros()</span></code>, odczytuje aktualny czas.</p>
</section>
<section id="id111">
<h1>Zależności i powiązania<a class="headerlink" href="#id111" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Plik nagłówkowy dla tej klasy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/time.h</span></code>: Używa funkcji <code class="docutils literal notranslate"><span class="pre">stdext::micros()</span></code> i <code class="docutils literal notranslate"><span class="pre">stdext::millis()</span></code>, które są opakowaniem na <code class="docutils literal notranslate"><span class="pre">std::chrono</span></code> do pobierania czasu o wysokiej precyzji.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> do planowania zdarzeń, <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> do synchronizacji pętli renderowania oraz przez wiele innych komponentów do mierzenia czasu trwania operacji.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="consoleapplication-h">
<h1>📄 consoleapplication.h<a class="headerlink" href="#consoleapplication-h" title="Link to this heading">#</a></h1>
</section>
<section id="id112">
<h1>Opis ogólny<a class="headerlink" href="#id112" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">consoleapplication.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code>, która jest konkretną implementacją klasy <code class="docutils literal notranslate"><span class="pre">Application</span></code> dla aplikacji działającej w trybie konsolowym, bez interfejsu graficznego. Jest używana, gdy flaga <code class="docutils literal notranslate"><span class="pre">FW_GRAPHICS</span></code> nie jest zdefiniowana podczas kompilacji.</p>
</section>
<section id="klasa-consoleapplication">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code><a class="headerlink" href="#klasa-consoleapplication" title="Link to this heading">#</a></h1>
</section>
<section id="id113">
<h1>Opis semantyczny<a class="headerlink" href="#id113" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">Application</span></code> i implementuje jej czysto wirtualną metodę <code class="docutils literal notranslate"><span class="pre">run()</span></code>. Ta implementacja zawiera prostą pętlę główną, która przetwarza zdarzenia i usypia wątek na krótki czas, aby uniknąć 100% użycia procesora.</p>
</section>
<section id="id114">
<h1>Metody publiczne<a class="headerlink" href="#id114" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">run()</span></code></p></td>
<td class="text-left"><p>Implementuje główną pętlę aplikacji konsolowej.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id115">
<h1>Zmienne globalne<a class="headerlink" href="#id115" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_app</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code>, która staje się głównym obiektem aplikacji, gdy kompilacja odbywa się bez wsparcia dla grafiki.</p></li>
</ul>
</section>
<section id="id116">
<h1>Zależności i powiązania<a class="headerlink" href="#id116" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/application.h</span></code>: Klasa bazowa, z której dziedziczy <code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code>.</p></li>
<li><p>Jest to jedna z dwóch możliwych implementacji aplikacji, wybierana w <code class="docutils literal notranslate"><span class="pre">application.h</span></code> za pomocą dyrektyw preprocesora.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="declarations-h">
<h1>📄 declarations.h<a class="headerlink" href="#declarations-h" title="Link to this heading">#</a></h1>
</section>
<section id="id117">
<h1>Opis ogólny<a class="headerlink" href="#id117" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">declarations.h</span></code> w module <code class="docutils literal notranslate"><span class="pre">core</span></code> jest plikiem nagłówkowym służącym do wczesnych deklaracji (forward declarations) klas i definicji typów wskaźników (<code class="docutils literal notranslate"><span class="pre">typedef</span></code>) dla rdzennych komponentów frameworka. Jego celem jest rozwiązanie problemu zależności cyklicznych między plikami nagłówkowymi oraz zmniejszenie ilości dołączanych nagłówków w plikach, które potrzebują jedynie znać istnienie danego typu, a nie jego pełną definicję.</p>
</section>
<section id="wczesne-deklaracje-forward-declarations">
<h1>Wczesne deklaracje (Forward Declarations)<a class="headerlink" href="#wczesne-deklaracje-forward-declarations" title="Link to this heading">#</a></h1>
<p>Plik deklaruje istnienie następujących klas, nie definiując ich zawartości:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Module</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Config</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Event</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FileStream</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutputBinaryTree</span></code></p></li>
</ul>
</section>
<section id="definicje-typow-typedefs">
<h1>Definicje typów (Typedefs)<a class="headerlink" href="#definicje-typow-typedefs" title="Link to this heading">#</a></h1>
<p>Na podstawie wczesnych deklaracji, plik definiuje typy inteligentnych wskaźników (<code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code>), które są używane w całym frameworku. Upraszcza to składnię i zapewnia spójność.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ModulePtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;Module&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;Config&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EventPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;Event&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ScheduledEventPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;ScheduledEvent&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FileStreamPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;FileStream&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BinaryTreePtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;BinaryTree&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutputBinaryTreePtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;OutputBinaryTree&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BinaryTreeVec</span></code>: <code class="docutils literal notranslate"><span class="pre">std::vector&lt;BinaryTreePtr&gt;</span></code></p></li>
</ul>
</section>
<section id="id118">
<h1>Zależności i powiązania<a class="headerlink" href="#id118" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Zawiera podstawowe definicje i typy, w tym <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr</span></code>.</p></li>
<li><p>Ten plik jest dołączany przez wiele innych plików nagłówkowych w module <code class="docutils literal notranslate"><span class="pre">core</span></code> i poza nim, aby umożliwić deklarowanie zmiennych i parametrów funkcji bez konieczności dołączania pełnych definicji klas.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="event-cpp">
<h1>📄 event.cpp<a class="headerlink" href="#event-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id119">
<h1>Opis ogólny<a class="headerlink" href="#id119" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">event.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Event</span></code>, która jest podstawowym obiektem reprezentującym jednorazowe, opóźnione lub cykliczne zdarzenie w systemie.</p>
</section>
<section id="klasa-event">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Event</span></code><a class="headerlink" href="#klasa-event" title="Link to this heading">#</a></h1>
</section>
<section id="event-event-const-std-string-function-const-std-function-void-callback-bool-botsafe">
<h1><code class="docutils literal notranslate"><span class="pre">Event::Event(const</span> <span class="pre">std::string&amp;</span> <span class="pre">function,</span> <span class="pre">const</span> <span class="pre">std::function&lt;void()&gt;&amp;</span> <span class="pre">callback,</span> <span class="pre">bool</span> <span class="pre">botSafe)</span></code><a class="headerlink" href="#event-event-const-std-string-function-const-std-function-void-callback-bool-botsafe" title="Link to this heading">#</a></h1>
<p>Konstruktor, który inicjalizuje zdarzenie.</p>
<ul class="simple">
<li><p><strong>Parametry</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">function</span></code>: Nazwa funkcji (lub opis), używana do celów debugowania i statystyk.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callback</span></code>: Funkcja (lambda lub <code class="docutils literal notranslate"><span class="pre">std::function</span></code>), która zostanie wykonana.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">botSafe</span></code>: Flaga określająca, czy zdarzenie może być wywołane przez bota (używane do filtrowania w niektórych kontekstach).</p></li>
</ul>
</li>
<li><p><strong>Działanie</strong>: Inicjalizuje flagi <code class="docutils literal notranslate"><span class="pre">m_canceled</span></code> i <code class="docutils literal notranslate"><span class="pre">m_executed</span></code> na <code class="docutils literal notranslate"><span class="pre">false</span></code> oraz przechowuje podane parametry.</p></li>
</ul>
</section>
<section id="event-event">
<h1><code class="docutils literal notranslate"><span class="pre">Event::~Event()</span></code><a class="headerlink" href="#event-event" title="Link to this heading">#</a></h1>
<p>Destruktor. W trybie debugowania, <code class="docutils literal notranslate"><span class="pre">VALIDATE(m_callback</span> <span class="pre">==</span> <span class="pre">nullptr)</span></code> sprawdza, czy <code class="docutils literal notranslate"><span class="pre">callback</span></code> został poprawnie zwolniony, aby zapobiec wyciekom pamięci lub wiszącym referencjom.</p>
</section>
<section id="void-event-execute">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Event::execute()</span></code><a class="headerlink" href="#void-event-execute" title="Link to this heading">#</a></h1>
</section>
<section id="id120">
<h1>Opis semantyczny<a class="headerlink" href="#id120" title="Link to this heading">#</a></h1>
<p>Wykonuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> powiązany ze zdarzeniem.</p>
</section>
<section id="id121">
<h1>Działanie<a class="headerlink" href="#id121" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy zdarzenie nie zostało anulowane (<code class="docutils literal notranslate"><span class="pre">!m_canceled</span></code>) i czy nie zostało już wykonane (<code class="docutils literal notranslate"><span class="pre">!m_executed</span></code>).</p></li>
<li><p>Jeśli warunki są spełnione i <code class="docutils literal notranslate"><span class="pre">callback</span></code> istnieje, wywołuje go.</p></li>
<li><p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_executed</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>Resetuje <code class="docutils literal notranslate"><span class="pre">m_callback</span></code> do <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>, aby zwolnić wszelkie zasoby (np. obiekty przechwycone przez lambdę).</p></li>
</ol>
</section>
<section id="void-event-cancel">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Event::cancel()</span></code><a class="headerlink" href="#void-event-cancel" title="Link to this heading">#</a></h1>
</section>
<section id="id122">
<h1>Opis semantyczny<a class="headerlink" href="#id122" title="Link to this heading">#</a></h1>
<p>Anuluje zdarzenie, zapobiegając jego przyszłemu wykonaniu.</p>
</section>
<section id="id123">
<h1>Działanie<a class="headerlink" href="#id123" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_canceled</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>Resetuje <code class="docutils literal notranslate"><span class="pre">m_callback</span></code> do <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>, aby natychmiast zwolnić zasoby.</p></li>
</ol>
</section>
<section id="id124">
<h1>Zależności i powiązania<a class="headerlink" href="#id124" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/event.h</span></code>: Plik nagłówkowy dla tej klasy.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code>.</p></li>
<li><p>Jest zarządzana przez <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code>, który przechowuje instancje <code class="docutils literal notranslate"><span class="pre">Event</span></code> w kolejce i wywołuje ich metodę <code class="docutils literal notranslate"><span class="pre">execute()</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="event-h">
<h1>📄 event.h<a class="headerlink" href="#event-h" title="Link to this heading">#</a></h1>
</section>
<section id="id125">
<h1>Opis ogólny<a class="headerlink" href="#id125" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">event.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Event</span></code>, która jest podstawową klasą do obsługi zdarzeń w systemie opartym na kolejce zdarzeń. Reprezentuje pojedyncze zadanie, które ma zostać wykonane w przyszłości przez <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code>.</p>
</section>
<section id="id126">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Event</span></code><a class="headerlink" href="#id126" title="Link to this heading">#</a></h1>
</section>
<section id="id127">
<h1>Opis semantyczny<a class="headerlink" href="#id127" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Event</span></code> to obiekt, który enkapsuluje funkcję zwrotną (<code class="docutils literal notranslate"><span class="pre">callback</span></code>) do wykonania. Dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, co pozwala na przekazywanie go do skryptów Lua. Posiada mechanizmy do wykonania, anulowania i sprawdzania jego stanu.</p>
</section>
<section id="id128">
<h1>Metody publiczne<a class="headerlink" href="#id128" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Event(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">~Event()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">execute()</span></code></p></td>
<td class="text-left"><p>Wykonuje <code class="docutils literal notranslate"><span class="pre">callback</span></code>, jeśli zdarzenie nie jest anulowane.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">cancel()</span></code></p></td>
<td class="text-left"><p>Anuluje zdarzenie, zapobiegając jego wykonaniu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isCanceled()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli zdarzenie zostało anulowane.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isExecuted()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli zdarzenie zostało już wykonane.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isBotSafe()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli zdarzenie jest bezpieczne do wykonania w kontekście bota.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">getFunction()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę/opis funkcji powiązanej ze zdarzeniem.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id129">
<h1>Zmienne chronione<a class="headerlink" href="#id129" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_function</span></code>: <code class="docutils literal notranslate"><span class="pre">std::string</span></code> przechowująca nazwę funkcji dla celów debugowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_callback</span></code>: <code class="docutils literal notranslate"><span class="pre">std::function&lt;void()&gt;</span></code> zawierająca kod do wykonania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_canceled</span></code>: Flaga wskazująca, czy zdarzenie zostało anulowane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_executed</span></code>: Flaga wskazująza, czy zdarzenie zostało wykonane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_botSafe</span></code>: Flaga bezpieczeństwa.</p></li>
</ul>
</section>
<section id="id130">
<h1>Zależności i powiązania<a class="headerlink" href="#id130" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Jest klasą pochodną <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> do tworzenia i zarządzania kolejką zdarzeń.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code>.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, co oznacza, że jest dostępna w Lua, a jej metody (<code class="docutils literal notranslate"><span class="pre">cancel</span></code>, <code class="docutils literal notranslate"><span class="pre">execute</span></code> itd.) mogą być wywoływane ze skryptów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="eventdispatcher-cpp">
<h1>📄 eventdispatcher.cpp<a class="headerlink" href="#eventdispatcher-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id131">
<h1>Opis ogólny<a class="headerlink" href="#id131" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">eventdispatcher.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code>, która jest sercem systemu zdarzeń. Odpowiada za zarządzanie kolejką zdarzeń natychmiastowych oraz kolejką priorytetową zdarzeń zaplanowanych w czasie.</p>
</section>
<section id="id132">
<h1>Zmienne globalne<a class="headerlink" href="#id132" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_dispatcher</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> dla głównego wątku aplikacji (logika gry, sieć).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> dla wątku graficznego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g_mainThreadId</span></code>, <code class="docutils literal notranslate"><span class="pre">g_graphicsThreadId</span></code>, <code class="docutils literal notranslate"><span class="pre">g_dispatcherThreadId</span></code>: Przechowują identyfikatory wątków w celu weryfikacji, czy dana operacja jest wykonywana w odpowiednim wątku.</p></li>
</ul>
</section>
<section id="klasa-eventdispatcher">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code><a class="headerlink" href="#klasa-eventdispatcher" title="Link to this heading">#</a></h1>
</section>
<section id="void-eventdispatcher-shutdown">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">EventDispatcher::shutdown()</span></code><a class="headerlink" href="#void-eventdispatcher-shutdown" title="Link to this heading">#</a></h1>
</section>
<section id="id133">
<h1>Opis semantyczny<a class="headerlink" href="#id133" title="Link to this heading">#</a></h1>
<p>Zamyka dyspozytor, przetwarzając wszystkie pozostałe zdarzenia i anulując zaplanowane.</p>
</section>
<section id="id134">
<h1>Działanie<a class="headerlink" href="#id134" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Przetwarza wszystkie zdarzenia z <code class="docutils literal notranslate"><span class="pre">m_eventList</span></code> za pomocą <code class="docutils literal notranslate"><span class="pre">poll()</span></code>.</p></li>
<li><p>Iteruje po wszystkich zdarzeniach w <code class="docutils literal notranslate"><span class="pre">m_scheduledEventList</span></code>, anuluje je i usuwa z kolejki.</p></li>
<li><p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_disabled</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code>, aby zapobiec dodawaniu nowych zdarzeń.</p></li>
</ol>
</section>
<section id="void-eventdispatcher-poll">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">EventDispatcher::poll()</span></code><a class="headerlink" href="#void-eventdispatcher-poll" title="Link to this heading">#</a></h1>
</section>
<section id="id135">
<h1>Opis semantyczny<a class="headerlink" href="#id135" title="Link to this heading">#</a></h1>
<p>Główna metoda przetwarzająca zdarzenia. Wywoływana regularnie w pętli aplikacji.</p>
</section>
<section id="id136">
<h1>Działanie<a class="headerlink" href="#id136" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p><strong>Przetwarzanie zdarzeń zaplanowanych (<code class="docutils literal notranslate"><span class="pre">m_scheduledEventList</span></code>)</strong>:</p>
<ul class="simple">
<li><p>Sprawdza kolejkę priorytetową i wykonuje wszystkie zdarzenia, dla których minął czas (<code class="docutils literal notranslate"><span class="pre">remainingTicks()</span> <span class="pre">&lt;=</span> <span class="pre">0</span></code>).</p></li>
<li><p>Jeśli zdarzenie jest cykliczne (<code class="docutils literal notranslate"><span class="pre">nextCycle()</span></code> zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>), jest ponownie dodawane do kolejki z nowym czasem wykonania.</p></li>
</ul>
</li>
<li><p><strong>Przetwarzanie zdarzeń natychmiastowych (<code class="docutils literal notranslate"><span class="pre">m_eventList</span></code>)</strong>:</p>
<ul class="simple">
<li><p>Wchodzi w pętlę, która wykonuje wszystkie zdarzenia z <code class="docutils literal notranslate"><span class="pre">m_eventList</span></code>.</p></li>
<li><p>Pętla jest powtarzana, jeśli w trakcie wykonywania zdarzeń zostały dodane nowe (np. zdarzenie A dodaje zdarzenie B), aby zapewnić, że wszystkie zdarzenia związane z bieżącą klatką zostaną wykonane przed jej zakończeniem.</p></li>
<li><p>Posiada zabezpieczenie przed nieskończoną pętlą (jeśli zdarzenia ciągle dodają nowe zdarzenia).</p></li>
</ul>
</li>
<li><p>Zapisuje statystyki dotyczące liczby przetworzonych zdarzeń.</p></li>
</ol>
</section>
<section id="scheduledeventptr-eventdispatcher-scheduleeventex">
<h1><code class="docutils literal notranslate"><span class="pre">ScheduledEventPtr</span> <span class="pre">EventDispatcher::scheduleEventEx(...)</span></code><a class="headerlink" href="#scheduledeventptr-eventdispatcher-scheduleeventex" title="Link to this heading">#</a></h1>
<p>Tworzy i dodaje do kolejki priorytetowej nowe jednorazowe zdarzenie zaplanowane, które zostanie wykonane po upływie <code class="docutils literal notranslate"><span class="pre">delay</span></code> milisekund.</p>
</section>
<section id="scheduledeventptr-eventdispatcher-cycleeventex">
<h1><code class="docutils literal notranslate"><span class="pre">ScheduledEventPtr</span> <span class="pre">EventDispatcher::cycleEventEx(...)</span></code><a class="headerlink" href="#scheduledeventptr-eventdispatcher-cycleeventex" title="Link to this heading">#</a></h1>
<p>Tworzy i dodaje do kolejki priorytetowej nowe cykliczne zdarzenie zaplanowane, które będzie wykonywane co <code class="docutils literal notranslate"><span class="pre">delay</span></code> milisekund.</p>
</section>
<section id="eventptr-eventdispatcher-addeventex">
<h1><code class="docutils literal notranslate"><span class="pre">EventPtr</span> <span class="pre">EventDispatcher::addEventEx(...)</span></code><a class="headerlink" href="#eventptr-eventdispatcher-addeventex" title="Link to this heading">#</a></h1>
<p>Dodaje nowe zdarzenie do kolejki zdarzeń natychmiastowych. Jeśli <code class="docutils literal notranslate"><span class="pre">pushFront</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code>, zdarzenie jest dodawane na początek kolejki, co gwarantuje jego wykonanie w bieżącej iteracji pętli <code class="docutils literal notranslate"><span class="pre">poll()</span></code>.</p>
</section>
<section id="id137">
<h1>Zależności i powiązania<a class="headerlink" href="#id137" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_clock</span></code> do sprawdzania czasu dla zdarzeń zaplanowanych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/graphicalapplication.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_app.isOnInputEvent()</span></code> do oznaczenia, czy zdarzenie zostało wywołane w trakcie obsługi zdarzenia wejściowego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graph.h</span></code>: Zapisuje statystyki do <code class="docutils literal notranslate"><span class="pre">g_graphs</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/stats.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">AutoStat</span></code> do profilowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/timer.h</span></code>: Używany do zabezpieczenia przed nieskończonymi pętlami.</p></li>
<li><p>Jest kluczowym komponentem, używanym przez niemal każdą część aplikacji do planowania i wykonywania operacji w sposób asynchroniczny (względem głównej pętli).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="eventdispatcher-h">
<h1>📄 eventdispatcher.h<a class="headerlink" href="#eventdispatcher-h" title="Link to this heading">#</a></h1>
</section>
<section id="id138">
<h1>Opis ogólny<a class="headerlink" href="#id138" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">eventdispatcher.h</span></code> deklaruje interfejs klasy <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> oraz powiązane z nią globalne instancje i makra. Definiuje on publiczne API do zarządzania kolejką zdarzeń w aplikacji.</p>
</section>
<section id="id139">
<h1>Definicje i Makra<a class="headerlink" href="#id139" title="Link to this heading">#</a></h1>
</section>
<section id="makra-pomocnicze-do-dodawania-zdarzen">
<h1>Makra pomocnicze do dodawania zdarzeń<a class="headerlink" href="#makra-pomocnicze-do-dodawania-zdarzen" title="Link to this heading">#</a></h1>
<p>Upraszczają one wywołania metod <code class="docutils literal notranslate"><span class="pre">...Ex</span></code>, automatycznie dodając nazwę bieżącej funkcji (<code class="docutils literal notranslate"><span class="pre">__FUNCTION__</span></code>) jako opis zdarzenia dla celów debugowania.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">addEvent(...)</span></code>: Opakowanie na <code class="docutils literal notranslate"><span class="pre">addEventEx(__FUNCTION__,</span> <span class="pre">...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scheduleEvent(...)</span></code>: Opakowanie na <code class="docutils literal notranslate"><span class="pre">scheduleEventEx(__FUNCTION__,</span> <span class="pre">...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cycleEvent(...)</span></code>: Opakowanie na <code class="docutils literal notranslate"><span class="pre">cycleEventEx(__FUNCTION__,</span> <span class="pre">...)</span></code></p></li>
</ul>
</section>
<section id="makra-do-walidacji-watkow">
<h1>Makra do walidacji wątków<a class="headerlink" href="#makra-do-walidacji-watkow" title="Link to this heading">#</a></h1>
<p>Służą do sprawdzania, czy dana funkcja jest wywoływana w odpowiednim wątku, co jest kluczowe dla bezpieczeństwa w środowisku wielowątkowym.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">VALIDATE_GRAPHICS_THREAD()</span></code>: Sprawdza, czy bieżący wątek to wątek graficzny.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VALIDATE_DISPATCHER_THREAD()</span></code>: Sprawdza, czy bieżący wątek to wątek dyspozytora (główny wątek logiki).</p></li>
</ul>
</section>
<section id="id140">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code><a class="headerlink" href="#id140" title="Link to this heading">#</a></h1>
</section>
<section id="id141">
<h1>Opis semantyczny<a class="headerlink" href="#id141" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> jest centralnym mechanizmem do zarządzania i wykonywania zadań w sposób asynchroniczny, ale w ramach jednego, określonego wątku. Posiada dwie kolejki: jedną dla zdarzeń natychmiastowych i drugą (priorytetową) dla zdarzeń zaplanowanych w czasie.</p>
</section>
<section id="id142">
<h1>Metody publiczne<a class="headerlink" href="#id142" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">shutdown()</span></code></p></td>
<td class="text-left"><p>Zamyka dyspozytor, czyszcząc i anulując wszystkie zdarzenia.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">poll()</span></code></p></td>
<td class="text-left"><p>Przetwarza zdarzenia, które są gotowe do wykonania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">EventPtr</span> <span class="pre">addEventEx(...)</span></code></p></td>
<td class="text-left"><p>Dodaje zdarzenie do wykonania w następnej iteracji pętli <code class="docutils literal notranslate"><span class="pre">poll()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ScheduledEventPtr</span> <span class="pre">scheduleEventEx(...)</span></code></p></td>
<td class="text-left"><p>Planuje jednorazowe wykonanie zdarzenia po określonym czasie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ScheduledEventPtr</span> <span class="pre">cycleEventEx(...)</span></code></p></td>
<td class="text-left"><p>Planuje cykliczne wykonywanie zdarzenia co określony czas.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isBotSafe()</span></code></p></td>
<td class="text-left"><p>Zwraca, czy aktualnie wykonywane zdarzenie jest oznaczone jako „bezpieczne dla bota”.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id143">
<h1>Zmienne prywatne<a class="headerlink" href="#id143" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_eventList</span></code>: Lista (<code class="docutils literal notranslate"><span class="pre">std::list</span></code>) zdarzeń do natychmiastowego wykonania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_pollEventsSize</span></code>: Rozmiar <code class="docutils literal notranslate"><span class="pre">m_eventList</span></code> na początku pętli <code class="docutils literal notranslate"><span class="pre">poll()</span></code>, aby obsłużyć zdarzenia dodane w trakcie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_disabled</span></code>: Flaga blokująca dodawanie nowych zdarzeń po wywołaniu <code class="docutils literal notranslate"><span class="pre">shutdown()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_botSafe</span></code>: Flaga stanu dla aktualnie wykonywanego zdarzenia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_mutex</span></code>: Mutex rekurencyjny do ochrony kolejek.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_scheduledEventList</span></code>: Kolejka priorytetowa (<code class="docutils literal notranslate"><span class="pre">std::priority_queue</span></code>) dla zdarzeń zaplanowanych w czasie.</p></li>
</ul>
</section>
<section id="id144">
<h1>Zmienne globalne<a class="headerlink" href="#id144" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_dispatcher</span></code>: Globalny dyspozytor dla głównego wątku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code>: Globalny dyspozytor dla wątku graficznego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g_mainThreadId</span></code>, <code class="docutils literal notranslate"><span class="pre">g_dispatcherThreadId</span></code>, <code class="docutils literal notranslate"><span class="pre">g_graphicsThreadId</span></code>: Identyfikatory wątków.</p></li>
</ul>
</section>
<section id="id145">
<h1>Zależności i powiązania<a class="headerlink" href="#id145" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Wymagany do obsługi czasu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/scheduledevent.h</span></code>: Definicja <code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code> i komparatora <code class="docutils literal notranslate"><span class="pre">lessScheduledEvent</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;queue&gt;</span></code>: Używany do implementacji kolejki priorytetowej.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="filestream-cpp">
<h1>📄 filestream.cpp<a class="headerlink" href="#filestream-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id146">
<h1>Opis ogólny<a class="headerlink" href="#id146" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">filestream.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">FileStream</span></code>, która jest opakowaniem (wrapperem) na operacje plikowe, głównie z wykorzystaniem biblioteki <strong>PhysFS</strong>. Umożliwia zarówno odczyt z plików na dysku, jak i z danych w pamięci (np. z wbudowanego archiwum lub zdekompresowanych danych).</p>
</section>
<section id="klasa-filestream">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">FileStream</span></code><a class="headerlink" href="#klasa-filestream" title="Link to this heading">#</a></h1>
</section>
<section id="konstruktory">
<h1>Konstruktory<a class="headerlink" href="#konstruktory" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">FileStream::FileStream(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">PHYSFS_File</span> <span class="pre">*fileHandle,</span> <span class="pre">bool</span> <span class="pre">writeable)</span></code></strong>: Tworzy strumień na podstawie otwartego uchwytu pliku PhysFS.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">FileStream::FileStream(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">std::string&amp;&amp;</span> <span class="pre">buffer)</span></code></strong>: Tworzy strumień na podstawie bufora danych w pamięci (<code class="docutils literal notranslate"><span class="pre">std::string</span></code>). Próbuje również zdekompresować bufor, jeśli jest on w formacie GZIP.</p></li>
</ul>
</section>
<section id="bool-filestream-initfromgzip-const-std-string-buffer">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">FileStream::initFromGzip(const</span> <span class="pre">std::string&amp;</span> <span class="pre">buffer)</span></code><a class="headerlink" href="#bool-filestream-initfromgzip-const-std-string-buffer" title="Link to this heading">#</a></h1>
<p>Prywatna metoda pomocnicza, która sprawdza, czy bufor danych jest skompresowany za pomocą GZIP (na podstawie „magicznych bajtów”). Jeśli tak, dekompresuje go za pomocą biblioteki ZLIB i zapisuje wynik do wewnętrznego bufora <code class="docutils literal notranslate"><span class="pre">m_data</span></code>.</p>
</section>
<section id="filestream-filestream-i-void-filestream-close">
<h1><code class="docutils literal notranslate"><span class="pre">FileStream::~FileStream()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FileStream::close()</span></code><a class="headerlink" href="#filestream-filestream-i-void-filestream-close" title="Link to this heading">#</a></h1>
<p>Destruktor i metoda <code class="docutils literal notranslate"><span class="pre">close()</span></code> zwalniają zasoby. Jeśli strumień był otwarty z pliku PhysFS, zamyka uchwyt <code class="docutils literal notranslate"><span class="pre">m_fileHandle</span></code>. Czyści również wewnętrzne bufory danych (<code class="docutils literal notranslate"><span class="pre">m_data</span></code>, <code class="docutils literal notranslate"><span class="pre">m_strData</span></code>).</p>
</section>
<section id="void-filestream-flush">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FileStream::flush()</span></code><a class="headerlink" href="#void-filestream-flush" title="Link to this heading">#</a></h1>
<p>W przypadku strumienia do zapisu, zapisuje zawartość bufora <code class="docutils literal notranslate"><span class="pre">m_data</span></code> na dysk za pomocą <code class="docutils literal notranslate"><span class="pre">PHYSFS_writeBytes</span></code>.</p>
</section>
<section id="int-filestream-read-void-buffer-uint32-size-uint32-nmemb">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">FileStream::read(void*</span> <span class="pre">buffer,</span> <span class="pre">uint32</span> <span class="pre">size,</span> <span class="pre">uint32</span> <span class="pre">nmemb)</span></code><a class="headerlink" href="#int-filestream-read-void-buffer-uint32-size-uint32-nmemb" title="Link to this heading">#</a></h1>
<p>Odczytuje dane ze strumienia. Jeśli strumień jest oparty na pliku, używa <code class="docutils literal notranslate"><span class="pre">PHYSFS_readBytes</span></code>. Jeśli na buforze w pamięci, kopiuje dane z <code class="docutils literal notranslate"><span class="pre">m_strData</span></code> lub <code class="docutils literal notranslate"><span class="pre">m_data</span></code> i przesuwa wskaźnik odczytu <code class="docutils literal notranslate"><span class="pre">m_pos</span></code>.</p>
</section>
<section id="void-filestream-write-const-void-buffer-uint32-count">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FileStream::write(const</span> <span class="pre">void</span> <span class="pre">*buffer,</span> <span class="pre">uint32</span> <span class="pre">count)</span></code><a class="headerlink" href="#void-filestream-write-const-void-buffer-uint32-count" title="Link to this heading">#</a></h1>
<p>Zapisuje dane do strumienia. Dla plików używa <code class="docutils literal notranslate"><span class="pre">PHYSFS_writeBytes</span></code>, a dla buforów w pamięci dodaje dane do <code class="docutils literal notranslate"><span class="pre">m_data</span></code>.</p>
</section>
<section id="seek-skip-size-tell-eof">
<h1><code class="docutils literal notranslate"><span class="pre">seek</span></code>, <code class="docutils literal notranslate"><span class="pre">skip</span></code>, <code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">tell</span></code>, <code class="docutils literal notranslate"><span class="pre">eof</span></code><a class="headerlink" href="#seek-skip-size-tell-eof" title="Link to this heading">#</a></h1>
<p>Implementacje standardowych operacji na strumieniach, które delegują wywołania do odpowiednich funkcji PhysFS lub operują na wewnętrznym wskaźniku <code class="docutils literal notranslate"><span class="pre">m_pos</span></code> i rozmiarze bufora.</p>
</section>
<section id="metody-odczytu-typow-getu8-getu16-getstring-etc">
<h1>Metody odczytu typów (<code class="docutils literal notranslate"><span class="pre">getU8</span></code>, <code class="docutils literal notranslate"><span class="pre">getU16</span></code>, <code class="docutils literal notranslate"><span class="pre">getString</span></code>, etc.)<a class="headerlink" href="#metody-odczytu-typow-getu8-getu16-getstring-etc" title="Link to this heading">#</a></h1>
<p>Metody te służą do odczytywania konkretnych typów danych ze strumienia. Działają zarówno na plikach PhysFS, jak i na buforach w pamięci. Wykonują konwersję z porządku bajtów Little Endian.</p>
</section>
<section id="binarytreeptr-filestream-getbinarytree">
<h1><code class="docutils literal notranslate"><span class="pre">BinaryTreePtr</span> <span class="pre">FileStream::getBinaryTree()</span></code><a class="headerlink" href="#binarytreeptr-filestream-getbinarytree" title="Link to this heading">#</a></h1>
<p>Rozpoczyna odczyt zagnieżdżonej struktury <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code> ze strumienia, sprawdzając najpierw znacznik początku węzła.</p>
</section>
<section id="metody-zapisu-typow-addu8-addu16-addstring-etc">
<h1>Metody zapisu typów (<code class="docutils literal notranslate"><span class="pre">addU8</span></code>, <code class="docutils literal notranslate"><span class="pre">addU16</span></code>, <code class="docutils literal notranslate"><span class="pre">addString</span></code>, etc.)<a class="headerlink" href="#metody-zapisu-typow-addu8-addu16-addstring-etc" title="Link to this heading">#</a></h1>
<p>Służą do zapisywania danych do strumienia.</p>
</section>
<section id="void-filestream-throwerror">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FileStream::throwError(...)</span></code><a class="headerlink" href="#void-filestream-throwerror" title="Link to this heading">#</a></h1>
<p>Metoda pomocnicza do generowania wyjątków z dodatkowymi informacjami o nazwie pliku i błędzie PhysFS.</p>
</section>
<section id="id147">
<h1>Zależności i powiązania<a class="headerlink" href="#id147" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/filestream.h</span></code>: Plik nagłówkowy dla tej klasy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/binarytree.h</span></code>: Używana do odczytu i zapisu struktur <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/application.h</span></code>: Używana do sprawdzania, czy aplikacja jest w trakcie zamykania.</p></li>
<li><p><strong>PhysFS</strong>: Kluczowa zależność do operacji na plikach w wirtualnym systemie plików.</p></li>
<li><p><strong>ZLIB</strong>: Używana do dekompresji GZIP.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code> i używana w całym projekcie do odczytu zasobów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="filestream-h">
<h1>📄 filestream.h<a class="headerlink" href="#filestream-h" title="Link to this heading">#</a></h1>
</section>
<section id="id148">
<h1>Opis ogólny<a class="headerlink" href="#id148" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">filestream.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">FileStream</span></code>, która jest kluczowym elementem systemu zarządzania zasobami. Stanowi ona abstrakcję nad strumieniem danych, który może pochodzić z pliku na dysku (obsługiwanego przez PhysFS) lub bezpośrednio z bufora w pamięci. Klasa dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, dzięki czemu może być używana w skryptach Lua.</p>
</section>
<section id="id149">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">FileStream</span></code><a class="headerlink" href="#id149" title="Link to this heading">#</a></h1>
</section>
<section id="id150">
<h1>Opis semantyczny<a class="headerlink" href="#id150" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">FileStream</span></code> dostarcza interfejs podobny do standardowych strumieni plików, umożliwiając sekwencyjny odczyt i zapis różnych typów danych (liczby całkowite, stringi, dane binarne). Jest to podstawowe narzędzie do parsowania plików binarnych i tekstowych w całym projekcie.</p>
</section>
<section id="id151">
<h1>Metody publiczne<a class="headerlink" href="#id151" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">FileStream(...)</span></code></p></td>
<td class="text-left"><p>Konstruktory tworzące strumień z uchwytu pliku PhysFS lub z bufora w pamięci.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">~FileStream()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">close()</span></code></p></td>
<td class="text-left"><p>Zamyka strumień i zwalnia zasoby.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">flush()</span></code></p></td>
<td class="text-left"><p>Wymusza zapis buforowanych danych do pliku (dla strumieni do zapisu).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">write(...)</span></code></p></td>
<td class="text-left"><p>Zapisuje blok danych do strumienia.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">read(...)</span></code></p></td>
<td class="text-left"><p>Odczytuje blok danych ze strumienia.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">seek(uint</span> <span class="pre">pos)</span></code></p></td>
<td class="text-left"><p>Ustawia pozycję wskaźnika w strumieniu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">skip(uint</span> <span class="pre">len)</span></code></p></td>
<td class="text-left"><p>Przesuwa wskaźnik o <code class="docutils literal notranslate"><span class="pre">len</span></code> bajtów.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">size()</span></code></p></td>
<td class="text-left"><p>Zwraca całkowity rozmiar strumienia.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">tell()</span></code></p></td>
<td class="text-left"><p>Zwraca bieżącą pozycję wskaźnika.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">eof()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli osiągnięto koniec strumienia.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">name()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę/źródło strumienia.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getU8()</span></code>, <code class="docutils literal notranslate"><span class="pre">getU16()</span></code>, <code class="docutils literal notranslate"><span class="pre">getU32()</span></code>, <code class="docutils literal notranslate"><span class="pre">getU64()</span></code></p></td>
<td class="text-left"><p>Odczytują liczby całkowite bez znaku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">get8()</span></code>, <code class="docutils literal notranslate"><span class="pre">get16()</span></code>, <code class="docutils literal notranslate"><span class="pre">get32()</span></code>, <code class="docutils literal notranslate"><span class="pre">get64()</span></code></p></td>
<td class="text-left"><p>Odczytują liczby całkowite ze znakiem.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getString()</span></code></p></td>
<td class="text-left"><p>Odczytuje string (poprzedzony 2-bajtową długością).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getBinaryTree()</span></code></p></td>
<td class="text-left"><p>Odczytuje i zwraca obiekt <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">startNode(uint8</span> <span class="pre">n)</span></code></p></td>
<td class="text-left"><p>Rozpoczyna zapis nowego węzła w formacie <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">endNode()</span></code></p></td>
<td class="text-left"><p>Kończy zapis węzła.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">addU8()</span></code>, …, <code class="docutils literal notranslate"><span class="pre">addString()</span></code></p></td>
<td class="text-left"><p>Zapisują różne typy danych do strumienia.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">asFileStream()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code> do siebie (<code class="docutils literal notranslate"><span class="pre">static_self_cast</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id152">
<h1>Zmienne prywatne<a class="headerlink" href="#id152" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_name</span></code>: Nazwa pliku lub źródła danych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_fileHandle</span></code>: Wskaźnik na uchwyt pliku PhysFS (jeśli dotyczy).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_pos</span></code>: Bieżąca pozycja odczytu/zapisu w buforze pamięci.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_writeable</span></code>: Flaga wskazująca, czy strumień jest otwarty do zapisu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_caching</span></code>: Flaga wskazująca, czy strumień operuje na buforze w pamięci.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_data</span></code>: Bufor danych (<code class="docutils literal notranslate"><span class="pre">DataBuffer&lt;uint8_t&gt;</span></code>) dla strumieni w pamięci.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_strData</span></code>: Bufor danych (<code class="docutils literal notranslate"><span class="pre">std::string</span></code>) dla strumieni w pamięci.</p></li>
</ul>
</section>
<section id="id153">
<h1>Zależności i powiązania<a class="headerlink" href="#id153" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/declarations.h</span></code>: Definicje typów, np. <code class="docutils literal notranslate"><span class="pre">BinaryTreePtr</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Dziedziczy z <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/databuffer.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">DataBuffer</span></code> do przechowywania danych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/point.h</span></code>: Do zapisu i odczytu obiektów <code class="docutils literal notranslate"><span class="pre">Point</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">physfs.h</span></code>: Wymagany do deklaracji <code class="docutils literal notranslate"><span class="pre">PHYSFS_File</span></code>.</p></li>
<li><p>Klasa jest oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, co oznacza, że jest dostępna w Lua. Jest to kluczowe dla modułów, które muszą parsować niestandardowe formaty plików ze skryptów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="graphicalapplication-cpp">
<h1>📄 graphicalapplication.cpp<a class="headerlink" href="#graphicalapplication-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id154">
<h1>Opis ogólny<a class="headerlink" href="#id154" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">graphicalapplication.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>, która jest konkretną implementacją <code class="docutils literal notranslate"><span class="pre">Application</span></code> dla aplikacji z interfejsem graficznym. Odpowiada za inicjalizację, zarządzanie i zamykanie wszystkich podsystemów graficznych, a także za implementację głównej pętli renderowania i logiki.</p>
</section>
<section id="id155">
<h1>Zmienne globalne<a class="headerlink" href="#id155" title="Link to this heading">#</a></h1>
</section>
<section id="g-app">
<h1><code class="docutils literal notranslate"><span class="pre">g_app</span></code><a class="headerlink" href="#g-app" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>, która jest głównym obiektem aplikacji, gdy kompilacja odbywa się z flagą <code class="docutils literal notranslate"><span class="pre">FW_GRAPHICS</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">GraphicalApplication</span><span class="w"> </span><span class="n">g_app</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-graphicalapplication">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code><a class="headerlink" href="#klasa-graphicalapplication" title="Link to this heading">#</a></h1>
</section>
<section id="void-graphicalapplication-init-std-vector-std-string-args">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::init(std::vector&lt;std::string&gt;&amp;</span> <span class="pre">args)</span></code><a class="headerlink" href="#void-graphicalapplication-init-std-vector-std-string-args" title="Link to this heading">#</a></h1>
</section>
<section id="id156">
<h1>Opis semantyczny<a class="headerlink" href="#id156" title="Link to this heading">#</a></h1>
<p>Inicjalizuje aplikację graficzną. Wywołuje najpierw <code class="docutils literal notranslate"><span class="pre">Application::init()</span></code>, a następnie inicjalizuje wszystkie komponenty związane z grafiką.</p>
</section>
<section id="id157">
<h1>Działanie<a class="headerlink" href="#id157" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">Application::init(args)</span></code>.</p></li>
<li><p>Inicjalizuje okno platformy (<code class="docutils literal notranslate"><span class="pre">g_window.init()</span></code>).</p></li>
<li><p>Ustawia callbacki dla okna: <code class="docutils literal notranslate"><span class="pre">onResize</span></code>, <code class="docutils literal notranslate"><span class="pre">onInputEvent</span></code>, <code class="docutils literal notranslate"><span class="pre">onClose</span></code>.</p></li>
<li><p>Inicjalizuje menedżera myszy (<code class="docutils literal notranslate"><span class="pre">g_mouse.init()</span></code>).</p></li>
<li><p>Inicjalizuje menedżera UI (<code class="docutils literal notranslate"><span class="pre">g_ui.init()</span></code>).</p></li>
<li><p>Inicjalizuje silnik graficzny (<code class="docutils literal notranslate"><span class="pre">g_graphics.init()</span></code>).</p></li>
<li><p>Wywołuje pierwsze zdarzenie zmiany rozmiaru.</p></li>
<li><p>Inicjalizuje menedżera dźwięku (<code class="docutils literal notranslate"><span class="pre">g_sounds.init()</span></code>), jeśli <code class="docutils literal notranslate"><span class="pre">FW_SOUND</span></code> jest zdefiniowane.</p></li>
</ol>
</section>
<section id="void-graphicalapplication-deinit">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::deinit()</span></code><a class="headerlink" href="#void-graphicalapplication-deinit" title="Link to this heading">#</a></h1>
<p>Deinicjalizuje aplikację w odwrotnej kolejności, ukrywając okno i zwalniając zasoby.</p>
</section>
<section id="void-graphicalapplication-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::terminate()</span></code><a class="headerlink" href="#void-graphicalapplication-terminate" title="Link to this heading">#</a></h1>
<p>Finalizuje zamykanie podsystemów graficznych, w tym <code class="docutils literal notranslate"><span class="pre">g_ui</span></code>, <code class="docutils literal notranslate"><span class="pre">g_sounds</span></code>, <code class="docutils literal notranslate"><span class="pre">g_mouse</span></code> i <code class="docutils literal notranslate"><span class="pre">g_graphics</span></code>.</p>
</section>
<section id="void-graphicalapplication-run">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::run()</span></code><a class="headerlink" href="#void-graphicalapplication-run" title="Link to this heading">#</a></h1>
</section>
<section id="id158">
<h1>Opis semantyczny<a class="headerlink" href="#id158" title="Link to this heading">#</a></h1>
<p>Implementuje główną pętlę aplikacji, która jest podzielona na dwa równoległe wątki:</p>
<ol class="arabic simple">
<li><p><strong>Wątek logiki (<code class="docutils literal notranslate"><span class="pre">worker</span></code>)</strong>: Odpowiada za aktualizację stanu gry, przetwarzanie zdarzeń i przygotowywanie kolejek rysowania (<code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>).</p></li>
<li><p><strong>Wątek renderowania (główny wątek)</strong>: Odpowiada za przetwarzanie zdarzeń okna, renderowanie zawartości przygotowanych kolejek na ekranie i synchronizację klatek.</p></li>
</ol>
</section>
<section id="dzialanie-watku-logiki-worker">
<h1>Działanie wątku logiki (<code class="docutils literal notranslate"><span class="pre">worker</span></code>)<a class="headerlink" href="#dzialanie-watku-logiki-worker" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>W nieskończonej pętli:</p>
<ul>
<li><p>Aktualizuje zegar (<code class="docutils literal notranslate"><span class="pre">g_clock.update()</span></code>).</p></li>
<li><p>Przetwarza zdarzenia (<code class="docutils literal notranslate"><span class="pre">poll()</span></code>).</p></li>
<li><p>Czeka, jeśli poprzednia klatka nie została jeszcze wyrenderowana.</p></li>
<li><p>Renderuje UI do trzech osobnych kolejek: <code class="docutils literal notranslate"><span class="pre">MapBackgroundPane</span></code>, <code class="docutils literal notranslate"><span class="pre">MapForegroundPane</span></code>, <code class="docutils literal notranslate"><span class="pre">ForegroundPane</span></code>.</p></li>
<li><p>Przekazuje gotowe kolejki do wątku renderowania za pomocą mutexu.</p></li>
<li><p>Usypia na 1ms, jeśli <code class="docutils literal notranslate"><span class="pre">m_maxFps</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> lub włączona jest synchronizacja pionowa.</p></li>
</ul>
</li>
</ul>
</section>
<section id="dzialanie-watku-renderowania-glownego">
<h1>Działanie wątku renderowania (głównego)<a class="headerlink" href="#dzialanie-watku-renderowania-glownego" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>W nieskończonej pętli:</p>
<ul>
<li><p>Aktualizuje zegar i przetwarza zdarzenia graficzne (<code class="docutils literal notranslate"><span class="pre">pollGraphics()</span></code>).</p></li>
<li><p>Czeka na gotowe kolejki rysowania z wątku logiki.</p></li>
<li><p>Aktualizuje <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code>.</p></li>
<li><p>Synchronizuje klatki zgodnie z <code class="docutils literal notranslate"><span class="pre">m_maxFps</span></code>.</p></li>
<li><p>Ustawia <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> do renderowania poza ekranem, jeśli skalowanie jest włączone.</p></li>
<li><p>Renderuje tło mapy do <code class="docutils literal notranslate"><span class="pre">m_mapFramebuffer</span></code>.</p></li>
<li><p>Renderuje właściwą scenę, łącząc tło mapy, pierwszy plan mapy i interfejs użytkownika.</p></li>
<li><p>Jeśli włączono skalowanie, rysuje zawartość <code class="docutils literal notranslate"><span class="pre">m_framebuffer</span></code> na ekranie.</p></li>
<li><p>Rysuje grafy debugowania.</p></li>
<li><p>Zamienia bufory (<code class="docutils literal notranslate"><span class="pre">g_window.swapBuffers()</span></code>).</p></li>
</ul>
</li>
</ul>
</section>
<section id="void-graphicalapplication-poll-i-void-graphicalapplication-pollgraphics">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::poll()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::pollGraphics()</span></code><a class="headerlink" href="#void-graphicalapplication-poll-i-void-graphicalapplication-pollgraphics" title="Link to this heading">#</a></h1>
<p>Metody pomocnicze wywoływane w odpowiednich wątkach do przetwarzania zdarzeń. <code class="docutils literal notranslate"><span class="pre">poll()</span></code> obsługuje dźwięk i logikę, a <code class="docutils literal notranslate"><span class="pre">pollGraphics()</span></code> obsługuje zdarzenia okna i aktualizację tekstów.</p>
</section>
<section id="inne-metody">
<h1>Inne metody<a class="headerlink" href="#inne-metody" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">close()</span></code>: Wywoływana przy zamykaniu okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resize()</span></code>: Wywoływana przy zmianie rozmiaru okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inputEvent()</span></code>: Przekazuje zdarzenia wejściowe do <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doScreenshot()</span></code>: Robi zrzut ekranu i zapisuje go do pliku asynchronicznie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scaleUp()</span></code>, <code class="docutils literal notranslate"><span class="pre">scaleDown()</span></code>, <code class="docutils literal notranslate"><span class="pre">scale()</span></code>: Zarządzają skalowaniem interfejsu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setSmooth()</span></code>: Włącza/wyłącza wygładzanie dla <code class="docutils literal notranslate"><span class="pre">m_mapFramebuffer</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doMapScreenshot()</span></code>: Robi zrzut ekranu samej mapy.</p></li>
</ul>
</section>
<section id="id159">
<h1>Zależności i powiązania<a class="headerlink" href="#id159" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to centralna klasa, która integruje prawie wszystkie moduły graficzne i rdzenia.</p></li>
<li><p>Zależy od <code class="docutils literal notranslate"><span class="pre">Application</span></code>, <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>, <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>, <code class="docutils literal notranslate"><span class="pre">Graphics</span></code>, <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code>, <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code> i innych.</p></li>
<li><p>Używa <code class="docutils literal notranslate"><span class="pre">std::thread</span></code> i <code class="docutils literal notranslate"><span class="pre">std::mutex</span></code> do implementacji wielowątkowej pętli.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="inputevent-h">
<h1>📄 inputevent.h<a class="headerlink" href="#inputevent-h" title="Link to this heading">#</a></h1>
</section>
<section id="id160">
<h1>Opis ogólny<a class="headerlink" href="#id160" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">inputevent.h</span></code> deklaruje strukturę <code class="docutils literal notranslate"><span class="pre">InputEvent</span></code>, która jest używana do przekazywania informacji o zdarzeniach wejściowych (z klawiatury i myszy) w systemie. Jest to prosta struktura danych, która agreguje wszystkie możliwe parametry zdarzenia.</p>
</section>
<section id="struktura-inputevent">
<h1>Struktura <code class="docutils literal notranslate"><span class="pre">InputEvent</span></code><a class="headerlink" href="#struktura-inputevent" title="Link to this heading">#</a></h1>
</section>
<section id="id161">
<h1>Opis semantyczny<a class="headerlink" href="#id161" title="Link to this heading">#</a></h1>
<p>Struktura <code class="docutils literal notranslate"><span class="pre">InputEvent</span></code> jest uniwersalnym kontenerem na dane o zdarzeniach. W zależności od pola <code class="docutils literal notranslate"><span class="pre">type</span></code>, inne pola przechowują odpowiednie informacje. Na przykład, dla zdarzenia klawiatury (<code class="docutils literal notranslate"><span class="pre">KeyDownInputEvent</span></code>), pole <code class="docutils literal notranslate"><span class="pre">keyCode</span></code> będzie miało znaczenie, a dla zdarzenia myszy (<code class="docutils literal notranslate"><span class="pre">MouseMoveInputEvent</span></code>) - <code class="docutils literal notranslate"><span class="pre">mousePos</span></code> i <code class="docutils literal notranslate"><span class="pre">mouseMoved</span></code>.</p>
</section>
<section id="pola-struktury">
<h1>Pola struktury<a class="headerlink" href="#pola-struktury" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Pole</p></th>
<th class="head text-left"><p>Typ</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Fw::InputEventType</span></code></p></td>
<td class="text-left"><p>Typ zdarzenia (np. wciśnięcie klawisza, ruch myszy).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">wheelDirection</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Fw::MouseWheelDirection</span></code></p></td>
<td class="text-left"><p>Kierunek przewijania kółkiem myszy (<code class="docutils literal notranslate"><span class="pre">MouseWheelUp</span></code> lub <code class="docutils literal notranslate"><span class="pre">MouseWheelDown</span></code>).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">mouseButton</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Fw::MouseButton</span></code></p></td>
<td class="text-left"><p>Przycisk myszy, który wywołał zdarzenie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">keyCode</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Fw::Key</span></code></p></td>
<td class="text-left"><p>Kod wciśniętego klawisza.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">keyText</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td class="text-left"><p>Znak tekstowy odpowiadający wciśniętemu klawiszowi (dla <code class="docutils literal notranslate"><span class="pre">KeyTextInputEvent</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">keyboardModifiers</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td class="text-left"><p>Flagi bitowe dla klawiszy modyfikujących (Ctrl, Alt, Shift).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">mousePos</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Point</span></code></p></td>
<td class="text-left"><p>Aktualna pozycja kursora myszy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">mouseMoved</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Point</span></code></p></td>
<td class="text-left"><p>Wektor przesunięcia kursora myszy od ostatniego zdarzenia.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">autoRepeatTicks</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td class="text-left"><p>Czas (w milisekundach), przez jaki klawisz jest przytrzymywany (dla <code class="docutils literal notranslate"><span class="pre">KeyPressInputEvent</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="metody">
<h1>Metody<a class="headerlink" href="#metody" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">InputEvent()</span></code></strong>: Konstruktor, inicjalizuje strukturę.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">reset(Fw::InputEventType</span> <span class="pre">eventType</span> <span class="pre">=</span> <span class="pre">Fw::NoInputEvent)</span></code></strong>: Resetuje wszystkie pola do wartości domyślnych i ustawia nowy typ zdarzenia.</p></li>
</ul>
</section>
<section id="id162">
<h1>Zależności i powiązania<a class="headerlink" href="#id162" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p>Struktura ta jest tworzona w klasie <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> (np. <code class="docutils literal notranslate"><span class="pre">win32window.cpp</span></code>) na podstawie zdarzeń systemowych, a następnie przekazywana do <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> i dalej do <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>, który rozsyła je do odpowiednich widgetów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="graphicalapplication-h">
<h1>📄 graphicalapplication.h<a class="headerlink" href="#graphicalapplication-h" title="Link to this heading">#</a></h1>
</section>
<section id="id163">
<h1>Opis ogólny<a class="headerlink" href="#id163" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">graphicalapplication.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>, która jest implementacją <code class="docutils literal notranslate"><span class="pre">Application</span></code> dla aplikacji z interfejsem graficznym. Jest to główna klasa zarządzająca pętlą renderowania, zdarzeniami wejściowymi i komponentami graficznymi.</p>
</section>
<section id="id164">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code><a class="headerlink" href="#id164" title="Link to this heading">#</a></h1>
</section>
<section id="id165">
<h1>Opis semantyczny<a class="headerlink" href="#id165" title="Link to this heading">#</a></h1>
<p>Dziedziczy po <code class="docutils literal notranslate"><span class="pre">Application</span></code> i implementuje jej metody wirtualne, dodając funkcjonalność specyficzną dla aplikacji graficznej. Odpowiada za koordynację między oknem (<code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>), menedżerem UI (<code class="docutils literal notranslate"><span class="pre">UIManager</span></code>), silnikiem renderującym (<code class="docutils literal notranslate"><span class="pre">Painter</span></code>) i innymi systemami. Implementuje wielowątkową pętlę główną, gdzie logika jest oddzielona od renderowania.</p>
</section>
<section id="id166">
<h1>Metody publiczne<a class="headerlink" href="#id166" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init(...)</span></code></p></td>
<td class="text-left"><p>Inicjalizuje podsystemy graficzne.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">deinit()</span></code></p></td>
<td class="text-left"><p>Zwalnia zasoby graficzne przed zamknięciem.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Finalizuje zamykanie podsystemów graficznych.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">run()</span></code></p></td>
<td class="text-left"><p>Uruchamia główną, wielowątkową pętlę aplikacji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">poll()</span></code></p></td>
<td class="text-left"><p>Przetwarza zdarzenia logiki i dźwięku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">pollGraphics()</span></code></p></td>
<td class="text-left"><p>Przetwarza zdarzenia okna i grafiki.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">close()</span></code></p></td>
<td class="text-left"><p>Obsługuje zdarzenie zamknięcia okna.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">willRepaint()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli zaplanowano przemalowanie ekranu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">repaint()</span></code></p></td>
<td class="text-left"><p>Wymusza przemalowanie ekranu w następnej klatce.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setMaxFps(int</span> <span class="pre">maxFps)</span></code></p></td>
<td class="text-left"><p>Ustawia maksymalną liczbę klatek na sekundę.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getMaxFps()</span></code></p></td>
<td class="text-left"><p>Zwraca ustawiony limit FPS.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getFps()</span></code></p></td>
<td class="text-left"><p>Zwraca aktualny FPS renderowania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getGraphicsFps()</span></code></p></td>
<td class="text-left"><p>Zwraca FPS wątku graficznego.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getProcessingFps()</span></code></p></td>
<td class="text-left"><p>Zwraca FPS wątku logiki.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isOnInputEvent()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli aplikacja jest w trakcie przetwarzania zdarzenia wejściowego.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getIteration()</span></code></p></td>
<td class="text-left"><p>Zwraca licznik iteracji głównej pętli.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">doScreenshot(...)</span></code></p></td>
<td class="text-left"><p>Robi zrzut całego ekranu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">scaleUp()</span></code> / <code class="docutils literal notranslate"><span class="pre">scaleDown()</span></code> / <code class="docutils literal notranslate"><span class="pre">scale()</span></code></p></td>
<td class="text-left"><p>Zarządzają skalowaniem interfejsu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setSmooth(bool</span> <span class="pre">value)</span></code></p></td>
<td class="text-left"><p>Włącza/wyłącza wygładzanie dla bufora ramki mapy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">doMapScreenshot(...)</span></code></p></td>
<td class="text-left"><p>Robi zrzut ekranu samej mapy gry.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id167">
<h1>Metody chronione<a class="headerlink" href="#id167" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code>: Obsługuje zdarzenie zmiany rozmiaru okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">inputEvent(InputEvent</span> <span class="pre">event)</span></code>: Otrzymuje i przekazuje zdarzenia wejściowe.</p></li>
</ul>
</section>
<section id="id168">
<h1>Zmienne prywatne<a class="headerlink" href="#id168" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_iteration</span></code>: Licznik klatek.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_scaling</span></code>, <code class="docutils literal notranslate"><span class="pre">m_lastScaling</span></code>: Aktualne i poprzednie skalowanie UI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_maxFps</span></code>: Maksymalny limit FPS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_onInputEvent</span></code>: Flaga aktywna podczas obsługi zdarzenia wejściowego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_mustRepaint</span></code>: Flaga wymuszająca przemalowanie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_framebuffer</span></code>, <code class="docutils literal notranslate"><span class="pre">m_mapFramebuffer</span></code>: Bufory ramki do renderowania poza ekranem (off-screen rendering).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_graphicsFrames</span></code>, <code class="docutils literal notranslate"><span class="pre">m_processingFrames</span></code>: Liczniki klatek dla wątku graficznego i logiki.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_windowPollTimer</span></code>: Timer do ograniczania częstotliwości odpytywania okna.</p></li>
</ul>
</section>
<section id="id169">
<h1>Zmienne globalne<a class="headerlink" href="#id169" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_app</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>.</p></li>
</ul>
</section>
<section id="id170">
<h1>Zależności i powiązania<a class="headerlink" href="#id170" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/application.h</span></code>: Klasa bazowa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Deklaracje typów graficznych (np. <code class="docutils literal notranslate"><span class="pre">FrameBufferPtr</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/inputevent.h</span></code>: Struktura <code class="docutils literal notranslate"><span class="pre">InputEvent</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/adaptiverenderer.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code> do dynamicznego dostosowywania wydajności.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/framecounter.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">FrameCounter</span></code> do śledzenia FPS.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="logger-h">
<h1>📄 logger.h<a class="headerlink" href="#logger-h" title="Link to this heading">#</a></h1>
</section>
<section id="id171">
<h1>Opis ogólny<a class="headerlink" href="#id171" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">logger.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Logger</span></code>, która implementuje system logowania dla całej aplikacji. Jest to singleton (<code class="docutils literal notranslate"><span class="pre">g_logger</span></code>) zapewniający scentralizowany i bezpieczny wątkowo mechanizm do zapisywania komunikatów o różnym poziomie ważności (debug, info, warning, error, fatal).</p>
</section>
<section id="struktura-logmessage">
<h1>Struktura <code class="docutils literal notranslate"><span class="pre">LogMessage</span></code><a class="headerlink" href="#struktura-logmessage" title="Link to this heading">#</a></h1>
<p>Prosta struktura przechowująca pojedynczą wiadomość logu.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Pole</p></th>
<th class="head text-left"><p>Typ</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">level</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Fw::LogLevel</span></code></p></td>
<td class="text-left"><p>Poziom ważności wiadomości.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">message</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td class="text-left"><p>Treść wiadomości.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">when</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::size_t</span></code></p></td>
<td class="text-left"><p>Czas (timestamp) utworzenia wiadomości.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="klasa-logger">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Logger</span></code><a class="headerlink" href="#klasa-logger" title="Link to this heading">#</a></h1>
</section>
<section id="id172">
<h1>Opis semantyczny<a class="headerlink" href="#id172" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Logger</span></code> umożliwia logowanie komunikatów do standardowego wyjścia (konsola), opcjonalnego pliku oraz przekazywanie ich do zarejestrowanego <code class="docutils literal notranslate"><span class="pre">callbacka</span></code> (np. w celu wyświetlenia w interfejsie użytkownika). Przechowuje również historię ostatnich <code class="docutils literal notranslate"><span class="pre">MAX_LOG_HISTORY</span></code> wiadomości.</p>
</section>
<section id="id173">
<h1>Metody publiczne<a class="headerlink" href="#id173" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">log(...)</span></code></p></td>
<td class="text-left"><p>Główna metoda logująca wiadomość z określonym poziomem.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">logFunc(...)</span></code></p></td>
<td class="text-left"><p>Loguje wiadomość wraz z informacją o funkcji, z której została wywołana (<code class="docutils literal notranslate"><span class="pre">__PRETTY_FUNCTION__</span></code>).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">debug(..)</span></code></p></td>
<td class="text-left"><p>Skrót do <code class="docutils literal notranslate"><span class="pre">log(Fw::LogDebug,</span> <span class="pre">...)</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">info(...)</span></code></p></td>
<td class="text-left"><p>Skrót do <code class="docutils literal notranslate"><span class="pre">log(Fw::LogInfo,</span> <span class="pre">...)</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">warning(...)</span></code></p></td>
<td class="text-left"><p>Skrót do <code class="docutils literal notranslate"><span class="pre">log(Fw::LogWarning,</span> <span class="pre">...)</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">error(...)</span></code></p></td>
<td class="text-left"><p>Skrót do <code class="docutils literal notranslate"><span class="pre">log(Fw::LogError,</span> <span class="pre">...)</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">fatal(...)</span></code></p></td>
<td class="text-left"><p>Skrót do <code class="docutils literal notranslate"><span class="pre">log(Fw::LogFatal,</span> <span class="pre">...)</span></code>, który dodatkowo powoduje zamknięcie aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">fireOldMessages()</span></code></p></td>
<td class="text-left"><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> <code class="docutils literal notranslate"><span class="pre">m_onLog</span></code> dla wszystkich historycznych wiadomości.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setLogFile(...)</span></code></p></td>
<td class="text-left"><p>Ustawia plik, do którego będą zapisywane logi.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setOnLog(...)</span></code></p></td>
<td class="text-left"><p>Rejestruje funkcję zwrotną, która będzie wywoływana dla każdej nowej wiadomości.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getLastLog()</span></code></p></td>
<td class="text-left"><p>Zwraca ostatnio zalogowaną wiadomość.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setTestingMode()</span></code></p></td>
<td class="text-left"><p>Ustawia tryb testowy, w którym błędy (<code class="docutils literal notranslate"><span class="pre">LogError</span></code>) działają jak błędy krytyczne (<code class="docutils literal notranslate"><span class="pre">LogFatal</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id174">
<h1>Zmienne prywatne<a class="headerlink" href="#id174" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_logMessages</span></code>: Lista ostatnich wiadomości.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_onLog</span></code>: Wskaźnik na funkcję zwrotną.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_outFile</span></code>: Strumień pliku do zapisu logów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_mutex</span></code>: Mutex rekurencyjny zapewniający bezpieczeństwo wątkowe.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_lastLog</span></code>: Przechowuje ostatnią wiadomość.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_testingMode</span></code>: Flaga trybu testowego.</p></li>
</ul>
</section>
<section id="makra-pomocnicze">
<h1>Makra pomocnicze<a class="headerlink" href="#makra-pomocnicze" title="Link to this heading">#</a></h1>
<p>Plik definiuje makra ułatwiające logowanie z dodatkowymi informacjami o kontekście.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trace()</span></code>: Loguje nazwę bieżącej funkcji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">traceDebug(a)</span></code>, <code class="docutils literal notranslate"><span class="pre">traceInfo(a)</span></code>, …: Logują wiadomość <code class="docutils literal notranslate"><span class="pre">a</span></code> wraz z nazwą funkcji i śladem stosu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logTraceCounter()</span></code>: Loguje licznik wywołań co sekundę.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logTraceFrameCounter()</span></code>: Loguje licznik wywołań co klatkę.</p></li>
</ul>
</section>
<section id="id175">
<h1>Zmienne globalne<a class="headerlink" href="#id175" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_logger</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">Logger</span></code>.</p></li>
</ul>
</section>
<section id="id176">
<h1>Zależności i powiązania<a class="headerlink" href="#id176" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/thread.h</span></code>: Zawiera <code class="docutils literal notranslate"><span class="pre">&lt;mutex&gt;</span></code> do synchronizacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;fstream&gt;</span></code>: Do obsługi zapisu do pliku.</p></li>
<li><p>Jest używany w całym projekcie do raportowania stanu, błędów i informacji debugowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="module-cpp">
<h1>📄 module.cpp<a class="headerlink" href="#module-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id177">
<h1>Opis ogólny<a class="headerlink" href="#id177" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">module.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Module</span></code>, która reprezentuje pojedynczy, ładowalny moduł funkcjonalności w aplikacji. Moduły są podstawą architektury wtyczek, pozwalając na dynamiczne ładowanie, odładowywanie i ponowne ładowanie kodu (głównie skryptów Lua) w trakcie działania programu.</p>
</section>
<section id="klasa-module">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Module</span></code><a class="headerlink" href="#klasa-module" title="Link to this heading">#</a></h1>
</section>
<section id="module-module-const-std-string-name">
<h1><code class="docutils literal notranslate"><span class="pre">Module::Module(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code><a class="headerlink" href="#module-module-const-std-string-name" title="Link to this heading">#</a></h1>
<p>Konstruktor. Ustawia nazwę modułu i tworzy dla niego nowe, odizolowane środowisko Lua (piaskownicę - sandbox) za pomocą <code class="docutils literal notranslate"><span class="pre">g_lua.newSandboxEnv()</span></code>.</p>
</section>
<section id="bool-module-load">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Module::load()</span></code><a class="headerlink" href="#bool-module-load" title="Link to this heading">#</a></h1>
</section>
<section id="id178">
<h1>Opis semantyczny<a class="headerlink" href="#id178" title="Link to this heading">#</a></h1>
<p>Główna metoda ładująca moduł. Jest odpowiedzialna za sprawdzenie i załadowanie zależności, a następnie wykonanie skryptów modułu.</p>
</section>
<section id="id179">
<h1>Działanie<a class="headerlink" href="#id179" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy moduł nie jest już załadowany.</p></li>
<li><p>Definiuje <code class="docutils literal notranslate"><span class="pre">errorHandler</span></code> do obsługi błędów ładowania.</p></li>
<li><p>Dodaje środowisko modułu do <code class="docutils literal notranslate"><span class="pre">package.loaded</span></code> w Lua, aby <code class="docutils literal notranslate"><span class="pre">require</span></code> działało poprawnie.</p></li>
<li><p>Iteruje po zależnościach (<code class="docutils literal notranslate"><span class="pre">m_dependencies</span></code>):</p>
<ul class="simple">
<li><p>Sprawdza, czy moduł nie zależy sam od siebie.</p></li>
<li><p>Sprawdza, czy zależność istnieje.</p></li>
<li><p>Sprawdza, czy nie ma zależności cyklicznych.</p></li>
<li><p>Jeśli zależność nie jest załadowana, próbuje ją załadować.</p></li>
</ul>
</li>
<li><p>Jeśli moduł jest w piaskownicy (<code class="docutils literal notranslate"><span class="pre">m_sandboxed</span></code>), ustawia jego środowisko jako globalne w Lua.</p></li>
<li><p>Wykonuje wszystkie skrypty z listy <code class="docutils literal notranslate"><span class="pre">m_scripts</span></code>.</p></li>
<li><p>Wykonuje skrypt z <code class="docutils literal notranslate"><span class="pre">m_onLoadFunc</span></code>, jeśli jest zdefiniowany.</p></li>
<li><p>Jeśli wystąpił błąd, wywołuje <code class="docutils literal notranslate"><span class="pre">errorHandler</span></code> i zwraca <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p>Przywraca globalne środowisko Lua, jeśli było zmienione.</p></li>
<li><p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_loaded</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code> i aktualizuje kolejność ładowania modułów.</p></li>
<li><p>Ładuje moduły z listy <code class="docutils literal notranslate"><span class="pre">m_loadLaterModules</span></code>.</p></li>
</ol>
</section>
<section id="void-module-unload">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Module::unload()</span></code><a class="headerlink" href="#void-module-unload" title="Link to this heading">#</a></h1>
</section>
<section id="id180">
<h1>Opis semantyczny<a class="headerlink" href="#id180" title="Link to this heading">#</a></h1>
<p>Odładowuje moduł, wykonując jego skrypt <code class="docutils literal notranslate"><span class="pre">onUnload</span></code> i czyszcząc jego środowisko Lua.</p>
</section>
<section id="id181">
<h1>Działanie<a class="headerlink" href="#id181" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy moduł jest załadowany.</p></li>
<li><p>Jeśli tak, wykonuje skrypt <code class="docutils literal notranslate"><span class="pre">onUnload</span></code> (<code class="docutils literal notranslate"><span class="pre">m_onUnloadFunc</span></code>).</p></li>
<li><p>Czyści całą tabelę środowiska Lua modułu, aby zwolnić wszystkie referencje.</p></li>
<li><p>Usuwa moduł z <code class="docutils literal notranslate"><span class="pre">package.loaded</span></code> w Lua.</p></li>
<li><p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_loaded</span></code> na <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
</ol>
</section>
<section id="bool-module-reload">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Module::reload()</span></code><a class="headerlink" href="#bool-module-reload" title="Link to this heading">#</a></h1>
<p>Odładowuje i ponownie ładuje moduł.</p>
</section>
<section id="bool-module-isdependent">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Module::isDependent()</span></code><a class="headerlink" href="#bool-module-isdependent" title="Link to this heading">#</a></h1>
<p>Sprawdza, czy jakikolwiek inny załadowany moduł zależy od tego modułu. Jest to używane do określenia, czy moduł można bezpiecznie odładować.</p>
</section>
<section id="bool-module-hasdependency-const-std-string-name-bool-recursive">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Module::hasDependency(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">bool</span> <span class="pre">recursive)</span></code><a class="headerlink" href="#bool-module-hasdependency-const-std-string-name-bool-recursive" title="Link to this heading">#</a></h1>
<p>Sprawdza, czy moduł ma zależność o podanej nazwie. Opcja <code class="docutils literal notranslate"><span class="pre">recursive</span></code> pozwala na sprawdzanie zależności pośrednich.</p>
</section>
<section id="int-module-getsandbox-luainterface-lua">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Module::getSandbox(LuaInterface*</span> <span class="pre">lua)</span></code><a class="headerlink" href="#int-module-getsandbox-luainterface-lua" title="Link to this heading">#</a></h1>
<p>Zwraca na stos Lua tabelę środowiska (piaskownicę) tego modułu.</p>
</section>
<section id="void-module-discover-const-otmlnodeptr-modulenode">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Module::discover(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">moduleNode)</span></code><a class="headerlink" href="#void-module-discover-const-otmlnodeptr-modulenode" title="Link to this heading">#</a></h1>
<p>Parsuje węzeł OTML (z pliku <code class="docutils literal notranslate"><span class="pre">.otmod</span></code>) i inicjalizuje pola modułu, takie jak opis, autor, wersja, zależności, lista skryptów, oraz skrypty <code class="docutils literal notranslate"><span class="pre">onLoad</span></code> i <code class="docutils literal notranslate"><span class="pre">onUnload</span></code>.</p>
</section>
<section id="id182">
<h1>Zależności i powiązania<a class="headerlink" href="#id182" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/module.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/modulemanager.h</span></code>: Współpracuje z <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> do zarządzania zależnościami i kolejnością ładowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Używany do rozwiązywania ścieżek do skryptów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otml.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code> do odczytu metadanych modułu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luainterface.h</span></code>: Intensywnie korzysta z <code class="docutils literal notranslate"><span class="pre">g_lua</span></code> do zarządzania środowiskiem i wykonywania skryptów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="modulemanager-cpp">
<h1>📄 modulemanager.cpp<a class="headerlink" href="#modulemanager-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id183">
<h1>Opis ogólny<a class="headerlink" href="#id183" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">modulemanager.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_modules</span></code>) odpowiedzialnym za zarządzanie wszystkimi modułami w aplikacji. Odpowiada za ich odkrywanie, ładowanie, odładowywanie i ponowne ładowanie, a także za zarządzanie zależnościami między nimi.</p>
</section>
<section id="id184">
<h1>Zmienne globalne<a class="headerlink" href="#id184" title="Link to this heading">#</a></h1>
</section>
<section id="g-modules">
<h1><code class="docutils literal notranslate"><span class="pre">g_modules</span></code><a class="headerlink" href="#g-modules" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ModuleManager</span><span class="w"> </span><span class="n">g_modules</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-modulemanager">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code><a class="headerlink" href="#klasa-modulemanager" title="Link to this heading">#</a></h1>
</section>
<section id="void-modulemanager-clear">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::clear()</span></code><a class="headerlink" href="#void-modulemanager-clear" title="Link to this heading">#</a></h1>
<p>Czyści wszystkie dane menedżera, usuwając listę modułów i modułów do automatycznego ładowania.</p>
</section>
<section id="void-modulemanager-discovermodules">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::discoverModules()</span></code><a class="headerlink" href="#void-modulemanager-discovermodules" title="Link to this heading">#</a></h1>
</section>
<section id="id185">
<h1>Opis semantyczny<a class="headerlink" href="#id185" title="Link to this heading">#</a></h1>
<p>Przeszukuje wirtualny system plików (katalogi <code class="docutils literal notranslate"><span class="pre">/modules</span></code> i <code class="docutils literal notranslate"><span class="pre">/mods</span></code>) w poszukiwaniu plików <code class="docutils literal notranslate"><span class="pre">.otmod</span></code>, parsuje je i tworzy obiekty <code class="docutils literal notranslate"><span class="pre">Module</span></code> dla każdego znalezionego modułu. Moduły oznaczone jako <code class="docutils literal notranslate"><span class="pre">autoload</span></code> są dodawane do specjalnej listy.</p>
</section>
<section id="void-modulemanager-autoloadmodules-int-maxpriority">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::autoLoadModules(int</span> <span class="pre">maxPriority)</span></code><a class="headerlink" href="#void-modulemanager-autoloadmodules-int-maxpriority" title="Link to this heading">#</a></h1>
<p>Ładuje wszystkie moduły z listy <code class="docutils literal notranslate"><span class="pre">m_autoLoadModules</span></code>, których priorytet jest mniejszy lub równy <code class="docutils literal notranslate"><span class="pre">maxPriority</span></code>. Moduły są ładowane w kolejności rosnącego priorytetu.</p>
</section>
<section id="moduleptr-modulemanager-discovermodule-const-std-string-modulefile">
<h1><code class="docutils literal notranslate"><span class="pre">ModulePtr</span> <span class="pre">ModuleManager::discoverModule(const</span> <span class="pre">std::string&amp;</span> <span class="pre">moduleFile)</span></code><a class="headerlink" href="#moduleptr-modulemanager-discovermodule-const-std-string-modulefile" title="Link to this heading">#</a></h1>
<p>Parsuje pojedynczy plik <code class="docutils literal notranslate"><span class="pre">.otmod</span></code>, tworzy lub aktualizuje obiekt <code class="docutils literal notranslate"><span class="pre">Module</span></code> i dodaje go do listy <code class="docutils literal notranslate"><span class="pre">m_modules</span></code>.</p>
</section>
<section id="void-modulemanager-ensuremoduleloaded-const-std-string-modulename">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::ensureModuleLoaded(const</span> <span class="pre">std::string&amp;</span> <span class="pre">moduleName)</span></code><a class="headerlink" href="#void-modulemanager-ensuremoduleloaded-const-std-string-modulename" title="Link to this heading">#</a></h1>
<p>Sprawdza, czy moduł o podanej nazwie jest załadowany. Jeśli nie, próbuje go załadować. Jeśli ładowanie się nie powiedzie, aplikacja jest zamykana z błędem krytycznym.</p>
</section>
<section id="void-modulemanager-unloadmodules">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::unloadModules()</span></code><a class="headerlink" href="#void-modulemanager-unloadmodules" title="Link to this heading">#</a></h1>
<p>Odładowuje wszystkie załadowane moduły. Używa kopii listy modułów, aby uniknąć problemów z iteratorami podczas usuwania.</p>
</section>
<section id="void-modulemanager-reloadmodules">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::reloadModules()</span></code><a class="headerlink" href="#void-modulemanager-reloadmodules" title="Link to this heading">#</a></h1>
</section>
<section id="id186">
<h1>Opis semantyczny<a class="headerlink" href="#id186" title="Link to this heading">#</a></h1>
<p>Implementuje mechanizm „hot-reloading” modułów.</p>
</section>
<section id="id187">
<h1>Działanie<a class="headerlink" href="#id187" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Tworzy listę modułów do ponownego załadowania (<code class="docutils literal notranslate"><span class="pre">toLoadList</span></code>).</p></li>
<li><p>W pętli (do 10 prób) próbuje odładować wszystkie moduły, które mogą być odładowane (<code class="docutils literal notranslate"><span class="pre">canUnload()</span></code>). Moduły są odładowywane w odwrotnej kolejności zależności.</p></li>
<li><p>Po odładowaniu, ładuje ponownie moduły z <code class="docutils literal notranslate"><span class="pre">toLoadList</span></code>.</p></li>
</ol>
</section>
<section id="moduleptr-modulemanager-getmodule-const-std-string-modulename">
<h1><code class="docutils literal notranslate"><span class="pre">ModulePtr</span> <span class="pre">ModuleManager::getModule(const</span> <span class="pre">std::string&amp;</span> <span class="pre">moduleName)</span></code><a class="headerlink" href="#moduleptr-modulemanager-getmodule-const-std-string-modulename" title="Link to this heading">#</a></h1>
<p>Wyszukuje i zwraca wskaźnik do modułu o podanej nazwie.</p>
</section>
<section id="void-modulemanager-updatemoduleloadorder-moduleptr-module">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::updateModuleLoadOrder(ModulePtr</span> <span class="pre">module)</span></code><a class="headerlink" href="#void-modulemanager-updatemoduleloadorder-moduleptr-module" title="Link to this heading">#</a></h1>
<p>Aktualizuje wewnętrzną listę modułów (<code class="docutils literal notranslate"><span class="pre">m_modules</span></code>), aby załadowane moduły znajdowały się na jej początku. Zapewnia to poprawną kolejność odładowywania (odwrotną do ładowania).</p>
</section>
<section id="id188">
<h1>Zależności i powiązania<a class="headerlink" href="#id188" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/modulemanager.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Używany do przeszukiwania katalogów z modułami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otml.h</span></code>: Do parsowania plików <code class="docutils literal notranslate"><span class="pre">.otmod</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/application.h</span></code>: Do obsługi błędów krytycznych.</p></li>
<li><p>Jest centralnym elementem architektury wtyczek i ściśle współpracuje z klasą <code class="docutils literal notranslate"><span class="pre">Module</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="logger-cpp">
<h1>📄 logger.cpp<a class="headerlink" href="#logger-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id189">
<h1>Opis ogólny<a class="headerlink" href="#id189" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">logger.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Logger</span></code>, która jest odpowiedzialna za system logowania w aplikacji. Zapewnia mechanizmy do zapisywania komunikatów o różnym poziomie ważności do konsoli, pliku oraz przekazywania ich do zarejestrowanych funkcji zwrotnych (callbacków).</p>
</section>
<section id="id190">
<h1>Zmienne globalne<a class="headerlink" href="#id190" title="Link to this heading">#</a></h1>
</section>
<section id="g-logger">
<h1><code class="docutils literal notranslate"><span class="pre">g_logger</span></code><a class="headerlink" href="#g-logger" title="Link to this heading">#</a></h1>
<p>Globalna, jedyna instancja klasy <code class="docutils literal notranslate"><span class="pre">Logger</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Logger</span><span class="w"> </span><span class="n">g_logger</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id191">
<h1>Funkcje globalne<a class="headerlink" href="#id191" title="Link to this heading">#</a></h1>
</section>
<section id="void-fatalerror-const-char-error-const-char-file-int-line">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">fatalError(const</span> <span class="pre">char*</span> <span class="pre">error,</span> <span class="pre">const</span> <span class="pre">char*</span> <span class="pre">file,</span> <span class="pre">int</span> <span class="pre">line)</span></code><a class="headerlink" href="#void-fatalerror-const-char-error-const-char-file-int-line" title="Link to this heading">#</a></h1>
<p>Funkcja wywoływana przez makro <code class="docutils literal notranslate"><span class="pre">VALIDATE</span></code>. Loguje błąd krytyczny za pomocą <code class="docutils literal notranslate"><span class="pre">g_logger.fatal</span></code>, zawierający komunikat, plik i numer linii, a następnie przerywa działanie aplikacji.</p>
</section>
<section id="id192">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Logger</span></code><a class="headerlink" href="#id192" title="Link to this heading">#</a></h1>
</section>
<section id="void-logger-log-fw-loglevel-level-const-std-string-message">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Logger::log(Fw::LogLevel</span> <span class="pre">level,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">message)</span></code><a class="headerlink" href="#void-logger-log-fw-loglevel-level-const-std-string-message" title="Link to this heading">#</a></h1>
</section>
<section id="id193">
<h1>Opis semantyczny<a class="headerlink" href="#id193" title="Link to this heading">#</a></h1>
<p>Główna, prywatna metoda logująca. Jest bezpieczna wątkowo dzięki użyciu <code class="docutils literal notranslate"><span class="pre">std::recursive_mutex</span></code>.</p>
</section>
<section id="id194">
<h1>Działanie<a class="headerlink" href="#id194" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Blokuje mutex, aby zapewnić wyłączny dostęp.</p></li>
<li><p>W trybie <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> (wydajnościowym) ignoruje wiadomości o poziomie <code class="docutils literal notranslate"><span class="pre">LogDebug</span></code>.</p></li>
<li><p>Dodaje odpowiedni prefiks do wiadomości (np. „WARNING: „, „ERROR: „).</p></li>
<li><p>Wypisuje sformatowaną wiadomość na standardowe wyjście (<code class="docutils literal notranslate"><span class="pre">std::cout</span></code>) lub <code class="docutils literal notranslate"><span class="pre">__android_log_print</span></code> na Androidzie.</p></li>
<li><p>Jeśli ustawiono plik logu, zapisuje wiadomość do pliku.</p></li>
<li><p>Dodaje wiadomość do wewnętrznej historii <code class="docutils literal notranslate"><span class="pre">m_logMessages</span></code>.</p></li>
<li><p>Jeśli zarejestrowano <code class="docutils literal notranslate"><span class="pre">callback</span></code> (<code class="docutils literal notranslate"><span class="pre">m_onLog</span></code>), dodaje zdarzenie do <code class="docutils literal notranslate"><span class="pre">g_dispatcher</span></code>, które wywoła ten <code class="docutils literal notranslate"><span class="pre">callback</span></code> w głównym wątku.</p></li>
<li><p>Jeśli poziom to <code class="docutils literal notranslate"><span class="pre">LogFatal</span></code> (lub <code class="docutils literal notranslate"><span class="pre">LogError</span></code> w trybie testowym), wyświetla okno błędu (w wersji graficznej) i natychmiast kończy aplikację.</p></li>
</ol>
</section>
<section id="void-logger-logfunc-fw-loglevel-level-const-std-string-message-std-string-prettyfunction">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Logger::logFunc(Fw::LogLevel</span> <span class="pre">level,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">message,</span> <span class="pre">std::string</span> <span class="pre">prettyFunction)</span></code><a class="headerlink" href="#void-logger-logfunc-fw-loglevel-level-const-std-string-message-std-string-prettyfunction" title="Link to this heading">#</a></h1>
<p>Metoda pomocnicza, która wzbogaca wiadomość o informacje o funkcji, z której została wywołana, oraz o ślad stosu (traceback) z Lua i C++. Używana przez makra takie jak <code class="docutils literal notranslate"><span class="pre">traceError</span></code>.</p>
</section>
<section id="void-logger-fireoldmessages">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Logger::fireOldMessages()</span></code><a class="headerlink" href="#void-logger-fireoldmessages" title="Link to this heading">#</a></h1>
<p>Wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> <code class="docutils literal notranslate"><span class="pre">m_onLog</span></code> dla wszystkich wiadomości, które zostały zalogowane przed jego zarejestrowaniem. Przydatne do wyświetlania wczesnych logów w UI, gdy UI jest już gotowe.</p>
</section>
<section id="void-logger-setlogfile-const-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Logger::setLogFile(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code><a class="headerlink" href="#void-logger-setlogfile-const-std-string-file" title="Link to this heading">#</a></h1>
<p>Otwiera podany plik do zapisu logów. Przed otwarciem do dopisywania, odczytuje ostatnie 100 KB z istniejącego pliku do <code class="docutils literal notranslate"><span class="pre">m_lastLog</span></code>, aby można było przejrzeć logi z poprzedniej sesji.</p>
</section>
<section id="id195">
<h1>Zależności i powiązania<a class="headerlink" href="#id195" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/logger.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_dispatcher</span></code> do bezpiecznego wywoływania <code class="docutils literal notranslate"><span class="pre">callbacków</span></code> w głównym wątku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Potencjalnie używany do rozwiązywania ścieżek do plików logów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/graphicalapplication.h</span></code>: W wersji graficznej, <code class="docutils literal notranslate"><span class="pre">g_window</span></code> jest używane do wyświetlania okna błędu krytycznego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platform.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_platform</span></code> do generowania śladu stosu C++.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luainterface.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_lua</span></code> do generowania śladu stosu Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="module-h">
<h1>📄 module.h<a class="headerlink" href="#module-h" title="Link to this heading">#</a></h1>
</section>
<section id="id196">
<h1>Opis ogólny<a class="headerlink" href="#id196" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">module.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Module</span></code>, która jest podstawowym elementem systemu modularności aplikacji. Każdy moduł reprezentuje logicznie oddzieloną część funkcjonalności (np. interfejs, mini-mapa, bot), która może być dynamicznie ładowana i odładowywana.</p>
</section>
<section id="id197">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Module</span></code><a class="headerlink" href="#id197" title="Link to this heading">#</a></h1>
</section>
<section id="id198">
<h1>Opis semantyczny<a class="headerlink" href="#id198" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Module</span></code> enkapsuluje zestaw skryptów Lua, metadane (nazwa, autor, wersja), zależności od innych modułów oraz własne, izolowane środowisko Lua (piaskownicę - sandbox). Dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, dzięki czemu może być zarządzany z poziomu skryptów Lua.</p>
</section>
<section id="id199">
<h1>Metody publiczne<a class="headerlink" href="#id199" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Module(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">load()</span></code></p></td>
<td class="text-left"><p>Ładuje moduł, wykonując jego skrypty i zależności.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">unload()</span></code></p></td>
<td class="text-left"><p>Odładowuje moduł, wykonując skrypt <code class="docutils literal notranslate"><span class="pre">onUnload</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">reload()</span></code></p></td>
<td class="text-left"><p>Ponownie ładuje moduł.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">canUnload()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli moduł jest przeładowywalny i żaden inny moduł od niego nie zależy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">canReload()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli moduł jest przeładowywalny i nie ma zależności.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isLoaded()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli moduł jest załadowany.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isReloadable()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli moduł można przeładować.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isDependent()</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy inny załadowany moduł zależy od tego modułu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isSandboxed()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli moduł działa w odizolowanym środowisku Lua.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">hasDependency(...)</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy moduł ma daną zależność (opcjonalnie rekurencyjnie).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getSandbox(LuaInterface</span> <span class="pre">*lua)</span></code></p></td>
<td class="text-left"><p>Umieszcza na stosie Lua tabelę środowiska tego modułu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getDescription()</span></code>, <code class="docutils literal notranslate"><span class="pre">getName()</span></code>, <code class="docutils literal notranslate"><span class="pre">getAuthor()</span></code>, <code class="docutils literal notranslate"><span class="pre">getWebsite()</span></code>, <code class="docutils literal notranslate"><span class="pre">getVersion()</span></code></p></td>
<td class="text-left"><p>Zwracają metadane modułu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isAutoLoad()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli moduł powinien być ładowany automatycznie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getAutoLoadPriority()</span></code></p></td>
<td class="text-left"><p>Zwraca priorytet automatycznego ładowania.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id200">
<h1>Metody chronione<a class="headerlink" href="#id200" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">discover(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">moduleNode)</span></code>: Metoda wywoływana przez <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> do wczytania metadanych modułu z pliku <code class="docutils literal notranslate"><span class="pre">.otmod</span></code>.</p></li>
</ul>
</section>
<section id="id201">
<h1>Zmienne prywatne<a class="headerlink" href="#id201" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_loaded</span></code>, <code class="docutils literal notranslate"><span class="pre">m_autoLoad</span></code>, <code class="docutils literal notranslate"><span class="pre">m_reloadable</span></code>, <code class="docutils literal notranslate"><span class="pre">m_sandboxed</span></code>: Flagi stanu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_autoLoadPriority</span></code>: Priorytet ładowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_sandboxEnv</span></code>: Referencja do środowiska Lua (piaskownicy).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_onLoadFunc</span></code>, <code class="docutils literal notranslate"><span class="pre">m_onUnloadFunc</span></code>: Przechowują kod skryptów <code class="docutils literal notranslate"><span class="pre">onLoad</span></code> i <code class="docutils literal notranslate"><span class="pre">onUnload</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_name</span></code>, <code class="docutils literal notranslate"><span class="pre">m_description</span></code>, …: Metadane modułu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_dependencies</span></code>, <code class="docutils literal notranslate"><span class="pre">m_scripts</span></code>, <code class="docutils literal notranslate"><span class="pre">m_loadLaterModules</span></code>: Listy zależności i skryptów.</p></li>
</ul>
</section>
<section id="id202">
<h1>Zależności i powiązania<a class="headerlink" href="#id202" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/declarations.h</span></code>: Definicje wskaźników.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/declarations.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span></code> do parsowania metadanych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Jest klasą pochodną <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p></li>
<li><p>Jest oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, co pozwala na interakcję z obiektami <code class="docutils literal notranslate"><span class="pre">Module</span></code> z poziomu Lua.</p></li>
<li><p>Jest zarządzana przez <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="modulemanager-h">
<h1>📄 modulemanager.h<a class="headerlink" href="#modulemanager-h" title="Link to this heading">#</a></h1>
</section>
<section id="id203">
<h1>Opis ogólny<a class="headerlink" href="#id203" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">modulemanager.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_modules</span></code>) odpowiedzialnym za zarządzanie cyklem życia wszystkich modułów w aplikacji.</p>
</section>
<section id="id204">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code><a class="headerlink" href="#id204" title="Link to this heading">#</a></h1>
</section>
<section id="id205">
<h1>Opis semantyczny<a class="headerlink" href="#id205" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> pełni rolę centralnego rejestru modułów. Odpowiada za ich odkrywanie (przez skanowanie katalogów w poszukiwaniu plików <code class="docutils literal notranslate"><span class="pre">.otmod</span></code>), ładowanie w odpowiedniej kolejności (z uwzględnieniem zależności i priorytetów), a także za ich odładowywanie i ponowne ładowanie.</p>
</section>
<section id="id206">
<h1>Metody publiczne<a class="headerlink" href="#id206" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clear()</span></code></p></td>
<td class="text-left"><p>Czyści listę modułów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">discoverModules()</span></code></p></td>
<td class="text-left"><p>Przeszukuje system plików w poszukiwaniu plików <code class="docutils literal notranslate"><span class="pre">.otmod</span></code> i tworzy dla nich obiekty <code class="docutils literal notranslate"><span class="pre">Module</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">autoLoadModules(int</span> <span class="pre">maxPriority)</span></code></p></td>
<td class="text-left"><p>Ładuje wszystkie moduły, które mają flagę <code class="docutils literal notranslate"><span class="pre">autoload</span></code> i priorytet nie większy niż podany.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ModulePtr</span> <span class="pre">discoverModule(...)</span></code></p></td>
<td class="text-left"><p>Parsuje pojedynczy plik <code class="docutils literal notranslate"><span class="pre">.otmod</span></code> i tworzy lub aktualizuje obiekt <code class="docutils literal notranslate"><span class="pre">Module</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ensureModuleLoaded(...)</span></code></p></td>
<td class="text-left"><p>Upewnia się, że dany moduł jest załadowany; jeśli nie, próbuje go załadować, a w razie porażki kończy aplikację.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">unloadModules()</span></code></p></td>
<td class="text-left"><p>Odładowuje wszystkie załadowane moduły.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">reloadModules()</span></code></p></td>
<td class="text-left"><p>Próbuje odładować i ponownie załadować wszystkie moduły, które na to pozwalają.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ModulePtr</span> <span class="pre">getModule(...)</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik do modułu o podanej nazwie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::deque&lt;ModulePtr&gt;</span> <span class="pre">getModules()</span></code></p></td>
<td class="text-left"><p>Zwraca listę wszystkich odkrytych modułów.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id207">
<h1>Metody chronione<a class="headerlink" href="#id207" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">updateModuleLoadOrder(ModulePtr</span> <span class="pre">module)</span></code>: Aktualizuje wewnętrzną kolejkę modułów, aby zachować poprawną kolejność ładowania/odładowywania.</p></li>
</ul>
</section>
<section id="id208">
<h1>Zmienne prywatne<a class="headerlink" href="#id208" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_modules</span></code>: Kolejka (<code class="docutils literal notranslate"><span class="pre">std::deque</span></code>) wszystkich odkrytych modułów. Załadowane moduły są na początku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_autoLoadModules</span></code>: Mapa (<code class="docutils literal notranslate"><span class="pre">std::multimap</span></code>) przechowująca moduły do automatycznego załadowania, posortowane według priorytetu.</p></li>
</ul>
</section>
<section id="id209">
<h1>Zmienne globalne<a class="headerlink" href="#id209" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_modules</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code>.</p></li>
</ul>
</section>
<section id="id210">
<h1>Zależności i powiązania<a class="headerlink" href="#id210" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/module.h</span></code>: Definicja klasy <code class="docutils literal notranslate"><span class="pre">Module</span></code>, którą zarządza <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code>.</p></li>
<li><p>Jest oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindsingleton</span> <span class="pre">g_modules</span></code>, co udostępnia jej API w skryptach Lua.</p></li>
<li><p>Współpracuje z <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code> do przeszukiwania systemu plików i z <code class="docutils literal notranslate"><span class="pre">Application</span></code> do inicjalizacji i zamykania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="scheduledevent-cpp">
<h1>📄 scheduledevent.cpp<a class="headerlink" href="#scheduledevent-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id211">
<h1>Opis ogólny<a class="headerlink" href="#id211" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">scheduledevent.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code>, która reprezentuje zdarzenie zaplanowane do wykonania w przyszłości.</p>
</section>
<section id="klasa-scheduledevent">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code><a class="headerlink" href="#klasa-scheduledevent" title="Link to this heading">#</a></h1>
</section>
<section id="scheduledevent-scheduledevent">
<h1><code class="docutils literal notranslate"><span class="pre">ScheduledEvent::ScheduledEvent(...)</span></code><a class="headerlink" href="#scheduledevent-scheduledevent" title="Link to this heading">#</a></h1>
<p>Konstruktor, który dziedziczy po <code class="docutils literal notranslate"><span class="pre">Event</span></code> i dodatkowo inicjalizuje parametry związane z czasem.</p>
<ul class="simple">
<li><p><strong>Parametry</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">function</span></code>, <code class="docutils literal notranslate"><span class="pre">callback</span></code>, <code class="docutils literal notranslate"><span class="pre">botSafe</span></code>: Przekazywane do konstruktora klasy bazowej <code class="docutils literal notranslate"><span class="pre">Event</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay</span></code>: Czas w milisekundach, po którym zdarzenie ma zostać wykonane po raz pierwszy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxCycles</span></code>: Maksymalna liczba wykonań. <code class="docutils literal notranslate"><span class="pre">0</span></code> oznacza nieskończoność.</p></li>
</ul>
</li>
<li><p><strong>Działanie</strong>:</p>
<ul>
<li><p>Oblicza czas pierwszego wykonania: <code class="docutils literal notranslate"><span class="pre">m_ticks</span> <span class="pre">=</span> <span class="pre">g_clock.millis()</span> <span class="pre">+</span> <span class="pre">delay</span></code>.</p></li>
<li><p>Zapisuje opóźnienie, maksymalną liczbę cykli i zeruje licznik wykonanych cykli.</p></li>
</ul>
</li>
</ul>
</section>
<section id="void-scheduledevent-execute">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ScheduledEvent::execute()</span></code><a class="headerlink" href="#void-scheduledevent-execute" title="Link to this heading">#</a></h1>
</section>
<section id="id212">
<h1>Opis semantyczny<a class="headerlink" href="#id212" title="Link to this heading">#</a></h1>
<p>Wykonuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> zdarzenia, jeśli warunki są spełnione.</p>
</section>
<section id="id213">
<h1>Działanie<a class="headerlink" href="#id213" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy zdarzenie nie jest anulowane, czy <code class="docutils literal notranslate"><span class="pre">callback</span></code> istnieje i czy nie przekroczono <code class="docutils literal notranslate"><span class="pre">maxCycles</span></code>.</p></li>
<li><p>Jeśli warunki są spełnione, wykonuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> i ustawia <code class="docutils literal notranslate"><span class="pre">m_executed</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code>. W przeciwieństwie do <code class="docutils literal notranslate"><span class="pre">Event</span></code>, nie resetuje <code class="docutils literal notranslate"><span class="pre">callback</span></code>, ponieważ może być on potrzebny w następnym cyklu.</p></li>
<li><p>Jeśli warunki nie są spełnione (np. zdarzenie jednorazowe zostało wykonane), resetuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> do <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>.</p></li>
<li><p>Inkrementuje licznik <code class="docutils literal notranslate"><span class="pre">m_cyclesExecuted</span></code>.</p></li>
</ol>
</section>
<section id="bool-scheduledevent-nextcycle">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ScheduledEvent::nextCycle()</span></code><a class="headerlink" href="#bool-scheduledevent-nextcycle" title="Link to this heading">#</a></h1>
</section>
<section id="id214">
<h1>Opis semantyczny<a class="headerlink" href="#id214" title="Link to this heading">#</a></h1>
<p>Przygotowuje zdarzenie do następnego cyklu. Jest wywoływana przez <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> po wykonaniu zdarzenia.</p>
</section>
<section id="id215">
<h1>Działanie<a class="headerlink" href="#id215" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy zdarzenie powinno być wykonane ponownie (nieanulowane, nie przekroczono <code class="docutils literal notranslate"><span class="pre">maxCycles</span></code>).</p></li>
<li><p>Jeśli tak, przesuwa czas następnego wykonania o <code class="docutils literal notranslate"><span class="pre">m_delay</span></code>: <code class="docutils literal notranslate"><span class="pre">m_ticks</span> <span class="pre">+=</span> <span class="pre">m_delay</span></code> i zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>Jeśli nie, resetuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> do <code class="docutils literal notranslate"><span class="pre">nullptr</span></code> i zwraca <code class="docutils literal notranslate"><span class="pre">false</span></code>, co powoduje usunięcie zdarzenia z kolejki dyspozytora.</p></li>
</ol>
</section>
<section id="id216">
<h1>Zależności i powiązania<a class="headerlink" href="#id216" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/scheduledevent.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_clock.millis()</span></code> do pobierania bieżącego czasu.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="resourcemanager-cpp">
<h1>📄 resourcemanager.cpp<a class="headerlink" href="#resourcemanager-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id217">
<h1>Opis ogólny<a class="headerlink" href="#id217" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">resourcemanager.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code>, która jest sercem systemu zarządzania zasobami aplikacji. Implementuje ona logikę wyszukiwania, ładowania, odczytu i zapisu plików, abstrakcjonując źródło danych (dysk, archiwum, pamięć).</p>
</section>
<section id="id218">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code><a class="headerlink" href="#id218" title="Link to this heading">#</a></h1>
</section>
<section id="void-resourcemanager-init-const-char-argv0">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ResourceManager::init(const</span> <span class="pre">char</span> <span class="pre">*argv0)</span></code><a class="headerlink" href="#void-resourcemanager-init-const-char-argv0" title="Link to this heading">#</a></h1>
<p>Inicjalizuje bibliotekę PhysFS i ustala ścieżkę do pliku wykonywalnego aplikacji na podstawie argumentu <code class="docutils literal notranslate"><span class="pre">argv0</span></code>.</p>
</section>
<section id="bool-resourcemanager-setupwritedir">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ResourceManager::setupWriteDir(...)</span></code><a class="headerlink" href="#bool-resourcemanager-setupwritedir" title="Link to this heading">#</a></h1>
<p>Konfiguruje katalog zapisu dla aplikacji, używając <code class="docutils literal notranslate"><span class="pre">PHYSFS_getPrefDir</span></code>. Ten katalog jest zazwyczaj zlokalizowany w folderze danych użytkownika (np. <code class="docutils literal notranslate"><span class="pre">%APPDATA%</span></code> na Windows, <code class="docutils literal notranslate"><span class="pre">~/.local/share</span></code> na Linux). Montuje ten katalog i ustawia go jako domyślny katalog do zapisu.</p>
</section>
<section id="bool-resourcemanager-setup">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ResourceManager::setup()</span></code><a class="headerlink" href="#bool-resourcemanager-setup" title="Link to this heading">#</a></h1>
<p>Kluczowa metoda, która próbuje zlokalizować i zamontować główny katalog roboczy aplikacji. Przeszukuje kilka potencjalnych lokalizacji w następującej kolejności:</p>
<ol class="arabic simple">
<li><p>Katalogi na dysku (katalog zapisu, bieżący katalog, katalog bazowy).</p></li>
<li><p>Archiwum <code class="docutils literal notranslate"><span class="pre">data.zip</span></code> w tych samych lokalizacjach.</p></li>
<li><p>Dane wbudowane w sam plik wykonywalny (<code class="docutils literal notranslate"><span class="pre">loadDataFromSelf</span></code>).</p></li>
</ol>
</section>
<section id="std-string-resourcemanager-getcompactname">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">ResourceManager::getCompactName()</span></code><a class="headerlink" href="#std-string-resourcemanager-getcompactname" title="Link to this heading">#</a></h1>
<p>Metoda próbująca odgadnąć „skróconą nazwę” aplikacji na podstawie zawartości pliku <code class="docutils literal notranslate"><span class="pre">init.lua</span></code>, który powinien zawierać definicję <code class="docutils literal notranslate"><span class="pre">APP_NAME</span></code>. Jest to używane m.in. do tworzenia katalogu zapisu.</p>
</section>
<section id="bool-resourcemanager-loaddatafromself">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ResourceManager::loadDataFromSelf(...)</span></code><a class="headerlink" href="#bool-resourcemanager-loaddatafromself" title="Link to this heading">#</a></h1>
<p>Przeszukuje plik binarny aplikacji w poszukiwaniu sygnatury archiwum ZIP (<code class="docutils literal notranslate"><span class="pre">PK..</span></code>). Jeśli znajdzie, traktuje resztę pliku jako archiwum i montuje je w pamięci za pomocą <code class="docutils literal notranslate"><span class="pre">PHYSFS_mountMemory</span></code>.</p>
</section>
<section id="std-string-resourcemanager-readfilecontents">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">ResourceManager::readFileContents(...)</span></code><a class="headerlink" href="#std-string-resourcemanager-readfilecontents" title="Link to this heading">#</a></h1>
<p>Odczytuje zawartość pliku. Po odczytaniu surowych bajtów, próbuje je zdeszyfrować za pomocą <code class="docutils literal notranslate"><span class="pre">decryptBuffer</span></code>. Obsługuje również specjalny wirtualny katalog <code class="docutils literal notranslate"><span class="pre">/downloads</span></code> do odczytu plików pobranych przez <code class="docutils literal notranslate"><span class="pre">Http</span></code>.</p>
</section>
<section id="bool-resourcemanager-decryptbuffer-std-string-buffer">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ResourceManager::decryptBuffer(std::string&amp;</span> <span class="pre">buffer)</span></code><a class="headerlink" href="#bool-resourcemanager-decryptbuffer-std-string-buffer" title="Link to this heading">#</a></h1>
<p>Deszyfruje bufor, jeśli jest on zaszyfrowany (rozpoznaje po nagłówku „ENC3”). Proces deszyfracji obejmuje:</p>
<ol class="arabic simple">
<li><p>Odczytanie metadanych (klucz, rozmiary, suma kontrolna).</p></li>
<li><p>Deszyfrację za pomocą algorytmu <code class="docutils literal notranslate"><span class="pre">bdecrypt</span></code> (odmiana TEA/XTEA).</p></li>
<li><p>Dekompresję za pomocą ZLIB.</p></li>
<li><p>Weryfikację sumy kontrolnej Adler-32.</p></li>
</ol>
</section>
<section id="bool-resourcemanager-encryptbuffer">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ResourceManager::encryptBuffer(...)</span></code><a class="headerlink" href="#bool-resourcemanager-encryptbuffer" title="Link to this heading">#</a></h1>
<p>Szyfruje bufor, wykonując operacje odwrotne do <code class="docutils literal notranslate"><span class="pre">decryptBuffer</span></code>: kompresja, szyfrowanie i dodanie nagłówka. Dostępne tylko z flagą <code class="docutils literal notranslate"><span class="pre">WITH_ENCRYPTION</span></code>.</p>
</section>
<section id="std-string-resourcemanager-resolvepath-std-string-path">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">ResourceManager::resolvePath(std::string</span> <span class="pre">path)</span></code><a class="headerlink" href="#std-string-resourcemanager-resolvepath-std-string-path" title="Link to this heading">#</a></h1>
<p>Konwertuje ścieżkę względną na ścieżkę absolutną w wirtualnym systemie plików. Obsługuje ścieżki względne do bieżącego skryptu Lua oraz specjalne ścieżki dla layoutów UI (np. <code class="docutils literal notranslate"><span class="pre">/layouts/nazwa_layoutu/...</span></code>).</p>
</section>
<section id="updatedata-i-updateexecutable">
<h1><code class="docutils literal notranslate"><span class="pre">updateData(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">updateExecutable(...)</span></code><a class="headerlink" href="#updatedata-i-updateexecutable" title="Link to this heading">#</a></h1>
<p>Metody służące do aktualizacji klienta. <code class="docutils literal notranslate"><span class="pre">updateData</span></code> przebudowuje archiwum <code class="docutils literal notranslate"><span class="pre">data.zip</span></code> na podstawie pobranych plików, a <code class="docutils literal notranslate"><span class="pre">updateExecutable</span></code> zastępuje plik binarny nową wersją.</p>
</section>
<section id="createarchive-i-decompressarchive">
<h1><code class="docutils literal notranslate"><span class="pre">createArchive(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">decompressArchive(...)</span></code><a class="headerlink" href="#createarchive-i-decompressarchive" title="Link to this heading">#</a></h1>
<p>Metody pomocnicze do tworzenia i rozpakowywania archiwów ZIP w pamięci przy użyciu biblioteki <code class="docutils literal notranslate"><span class="pre">libzip</span></code>.</p>
</section>
<section id="id219">
<h1>Zależności i powiązania<a class="headerlink" href="#id219" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><strong>PhysFS</strong>: Podstawowa zależność do obsługi wirtualnego systemu plików.</p></li>
<li><p><strong>ZLIB, LibZip</strong>: Do obsługi kompresji i archiwów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platform.h</span></code>: Do operacji specyficznych dla systemu, jak pobieranie bieżącego katalogu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/crypt.h</span></code>: Do szyfrowania, deszyfrowania i obliczania sum kontrolnych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/http/http.h</span></code>: Do obsługi wirtualnego katalogu <code class="docutils literal notranslate"><span class="pre">/downloads</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/process.hpp</span></code>: Do uruchamiania nowszej wersji klienta.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="scheduledevent-h">
<h1>📄 scheduledevent.h<a class="headerlink" href="#scheduledevent-h" title="Link to this heading">#</a></h1>
</section>
<section id="id220">
<h1>Opis ogólny<a class="headerlink" href="#id220" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">scheduledevent.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code>, która rozszerza funkcjonalność <code class="docutils literal notranslate"><span class="pre">Event</span></code>, dodając możliwość planowania wykonania w czasie, cykliczności oraz obsługi opóźnień.</p>
</section>
<section id="id221">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code><a class="headerlink" href="#id221" title="Link to this heading">#</a></h1>
</section>
<section id="id222">
<h1>Opis semantyczny<a class="headerlink" href="#id222" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code> to zdarzenie, które nie jest wykonywane natychmiast, lecz po upływie określonego czasu (<code class="docutils literal notranslate"><span class="pre">delay</span></code>). Może być jednorazowe lub cykliczne (<code class="docutils literal notranslate"><span class="pre">maxCycles</span></code>). Jest zarządzane przez <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> w kolejce priorytetowej, gdzie priorytetem jest czas wykonania.</p>
</section>
<section id="id223">
<h1>Metody publiczne<a class="headerlink" href="#id223" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ScheduledEvent(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor, ustawia parametry czasowe zdarzenia.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">execute()</span></code></p></td>
<td class="text-left"><p>Wykonuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> i inkrementuje licznik wykonanych cykli.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">nextCycle()</span></code></p></td>
<td class="text-left"><p>Przygotowuje zdarzenie do następnego cyklu, aktualizując czas wykonania. Zwraca <code class="docutils literal notranslate"><span class="pre">false</span></code>, jeśli zdarzenie nie powinno być ponownie wykonane.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">ticks()</span></code></p></td>
<td class="text-left"><p>Zwraca absolutny czas (w tickach), w którym zdarzenie ma zostać wykonane.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">remainingTicks()</span></code></p></td>
<td class="text-left"><p>Zwraca czas pozostały do wykonania zdarzenia.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">delay()</span></code></p></td>
<td class="text-left"><p>Zwraca opóźnienie między cyklami.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">cyclesExecuted()</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę dotychczasowych wykonań.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">maxCycles()</span></code></p></td>
<td class="text-left"><p>Zwraca maksymalną liczbę wykonań (0 dla nieskończoności).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id224">
<h1>Zmienne prywatne<a class="headerlink" href="#id224" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_ticks</span></code>: Czas (w tickach systemowych), w którym ma nastąpić następne wykonanie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_delay</span></code>: Opóźnienie między kolejnymi wykonaniami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_maxCycles</span></code>: Maksymalna liczba wykonań.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_cyclesExecuted</span></code>: Licznik wykonanych cykli.</p></li>
</ul>
</section>
<section id="struktura-lessscheduledevent">
<h1>Struktura <code class="docutils literal notranslate"><span class="pre">lessScheduledEvent</span></code><a class="headerlink" href="#struktura-lessscheduledevent" title="Link to this heading">#</a></h1>
<p>Funktor (obiekt funkcyjny) używany przez <code class="docutils literal notranslate"><span class="pre">std::priority_queue</span></code> w <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> do sortowania zdarzeń. Zapewnia, że zdarzenia z najwcześniejszym czasem wykonania mają najwyższy priorytet.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">lessScheduledEvent</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">operator</span><span class="p">()(</span><span class="k">const</span><span class="w"> </span><span class="n">ScheduledEventPtr</span><span class="o">&amp;</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ScheduledEventPtr</span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w">  </span><span class="n">b</span><span class="err">→</span><span class="n">ticks</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="err">→</span><span class="n">ticks</span><span class="p">();</span>
<span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id225">
<h1>Zależności i powiązania<a class="headerlink" href="#id225" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/event.h</span></code>: Klasa bazowa <code class="docutils literal notranslate"><span class="pre">Event</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_clock</span></code> do pobierania bieżącego czasu.</p></li>
<li><p>Jest tworzona przez <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> i zarządzana w jego kolejce priorytetowej.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, co pozwala na interakcję z obiektami tego typu z poziomu Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="timer-cpp">
<h1>📄 timer.cpp<a class="headerlink" href="#timer-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id226">
<h1>Opis ogólny<a class="headerlink" href="#id226" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">timer.cpp</span></code> zawiera implementację prostych metod klasy <code class="docutils literal notranslate"><span class="pre">Timer</span></code>, która służy do mierzenia upływu czasu.</p>
</section>
<section id="klasa-timer">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Timer</span></code><a class="headerlink" href="#klasa-timer" title="Link to this heading">#</a></h1>
</section>
<section id="void-timer-restart">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Timer::restart()</span></code><a class="headerlink" href="#void-timer-restart" title="Link to this heading">#</a></h1>
</section>
<section id="id227">
<h1>Opis semantyczny<a class="headerlink" href="#id227" title="Link to this heading">#</a></h1>
<p>Resetuje timer, ustawiając jego punkt startowy na bieżący czas.</p>
</section>
<section id="id228">
<h1>Działanie<a class="headerlink" href="#id228" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Pobiera aktualny czas w milisekundach za pomocą <code class="docutils literal notranslate"><span class="pre">g_clock.millis()</span></code>.</p></li>
<li><p>Zapisuje tę wartość do <code class="docutils literal notranslate"><span class="pre">m_startTicks</span></code>.</p></li>
<li><p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_stopped</span></code> na <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
</ol>
</section>
<section id="ticks-t-timer-tickselapsed">
<h1><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">Timer::ticksElapsed()</span></code><a class="headerlink" href="#ticks-t-timer-tickselapsed" title="Link to this heading">#</a></h1>
</section>
<section id="id229">
<h1>Opis semantyczny<a class="headerlink" href="#id229" title="Link to this heading">#</a></h1>
<p>Oblicza i zwraca czas, jaki upłynął od ostatniego zresetowania timera.</p>
</section>
<section id="id230">
<h1>Działanie<a class="headerlink" href="#id230" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Zwraca różnicę między aktualnym czasem (<code class="docutils literal notranslate"><span class="pre">g_clock.millis()</span></code>) a zapisanym czasem startowym (<code class="docutils literal notranslate"><span class="pre">m_startTicks</span></code>).</p></li>
</ul>
</section>
<section id="id231">
<h1>Zależności i powiązania<a class="headerlink" href="#id231" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/timer.h</span></code>: Plik nagłówkowy dla tej klasy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_clock</span></code> do pobierania bieżącego czasu, co zapewnia spójność z buforowanym czasem klatki.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="timer-h">
<h1>📄 timer.h<a class="headerlink" href="#timer-h" title="Link to this heading">#</a></h1>
</section>
<section id="id232">
<h1>Opis ogólny<a class="headerlink" href="#id232" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">timer.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Timer</span></code>, która jest prostym, ale użytecznym narzędziem do mierzenia upływającego czasu. Jest to klasa pomocnicza, szeroko stosowana w całym frameworku do obsługi opóźnień, animacji i synchronizacji.</p>
</section>
<section id="id233">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Timer</span></code><a class="headerlink" href="#id233" title="Link to this heading">#</a></h1>
</section>
<section id="id234">
<h1>Opis semantyczny<a class="headerlink" href="#id234" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Timer</span></code> działa jak stoper. Po utworzeniu lub zresetowaniu (<code class="docutils literal notranslate"><span class="pre">restart()</span></code>) zapamiętuje punkt w czasie. Następnie można w dowolnym momencie sprawdzić, ile czasu upłynęło od tego punktu za pomocą metod <code class="docutils literal notranslate"><span class="pre">ticksElapsed()</span></code> lub <code class="docutils literal notranslate"><span class="pre">timeElapsed()</span></code>.</p>
</section>
<section id="id235">
<h1>Metody publiczne<a class="headerlink" href="#id235" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Timer()</span></code></p></td>
<td class="text-left"><p>Konstruktor, który natychmiast wywołuje <code class="docutils literal notranslate"><span class="pre">restart()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">restart()</span></code></p></td>
<td class="text-left"><p>Resetuje timer, ustawiając jego punkt startowy na bieżący czas.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">stop()</span></code></p></td>
<td class="text-left"><p>Zatrzymuje timer (ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_stopped</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">adjust(ticks_t</span> <span class="pre">value)</span></code></p></td>
<td class="text-left"><p>Przesuwa punkt startowy o podaną wartość, efektywnie „dodając” lub „odejmując” czas.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">startTicks()</span></code></p></td>
<td class="text-left"><p>Zwraca punkt startowy timera w tickach.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">ticksElapsed()</span></code></p></td>
<td class="text-left"><p>Zwraca czas, jaki upłynął od startu, w milisekundach.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">timeElapsed()</span></code></p></td>
<td class="text-left"><p>Zwraca czas, jaki upłynął od startu, w sekundach.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">running()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli timer nie został zatrzymany.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id236">
<h1>Zmienne prywatne<a class="headerlink" href="#id236" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_startTicks</span></code>: Czas (w tickach/milisekundach), w którym timer został uruchomiony/zresetowany.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_stopped</span></code>: Flaga wskazująca, czy timer jest zatrzymany.</p></li>
</ul>
</section>
<section id="id237">
<h1>Zależności i powiązania<a class="headerlink" href="#id237" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Zawiera podstawowe definicje, w tym <code class="docutils literal notranslate"><span class="pre">ticks_t</span></code>.</p></li>
<li><p>Używa <code class="docutils literal notranslate"><span class="pre">g_clock</span></code> (poprzez <code class="docutils literal notranslate"><span class="pre">ticksElapsed</span></code>) do pomiaru czasu.</p></li>
<li><p>Jest wykorzystywana w wielu miejscach, np. w <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> do obsługi podwójnego kliknięcia (<code class="docutils literal notranslate"><span class="pre">m_clickTimer</span></code>), w <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> do ograniczania częstotliwości sprawdzania klawiszy (<code class="docutils literal notranslate"><span class="pre">m_keyPressTimer</span></code>), oraz w animacjach.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="consoleapplication-cpp">
<h1>📄 consoleapplication.cpp<a class="headerlink" href="#consoleapplication-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id238">
<h1>Opis ogólny<a class="headerlink" href="#id238" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">consoleapplication.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code>, która jest wersją aplikacji przeznaczoną do działania w trybie tekstowym, bez interfejsu graficznego. Jest ona używana, gdy projekt jest kompilowany bez flagi <code class="docutils literal notranslate"><span class="pre">FW_GRAPHICS</span></code>.</p>
</section>
<section id="id239">
<h1>Zmienne globalne<a class="headerlink" href="#id239" title="Link to this heading">#</a></h1>
</section>
<section id="id240">
<h1><code class="docutils literal notranslate"><span class="pre">g_app</span></code><a class="headerlink" href="#id240" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code>. Gdy framework jest kompilowany w trybie konsolowym, ta instancja staje się głównym obiektem aplikacji.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ConsoleApplication</span><span class="w"> </span><span class="n">g_app</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id241">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code><a class="headerlink" href="#id241" title="Link to this heading">#</a></h1>
</section>
<section id="void-consoleapplication-run">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ConsoleApplication::run()</span></code><a class="headerlink" href="#void-consoleapplication-run" title="Link to this heading">#</a></h1>
</section>
<section id="id242">
<h1>Opis semantyczny<a class="headerlink" href="#id242" title="Link to this heading">#</a></h1>
<p>Implementuje główną pętlę aplikacji konsolowej. W przeciwieństwie do <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>, jest to prosta pętla, która regularnie przetwarza zdarzenia i usypia wątek, aby nie zużywać 100% zasobów procesora.</p>
</section>
<section id="id243">
<h1>Działanie<a class="headerlink" href="#id243" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_running</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>Wykonuje pierwsze wywołanie <code class="docutils literal notranslate"><span class="pre">poll()</span></code>, aby przetworzyć ewentualne początkowe zdarzenia.</p></li>
<li><p>Aktualizuje zegar (<code class="docutils literal notranslate"><span class="pre">g_clock.update()</span></code>).</p></li>
<li><p>Wywołuje funkcję <code class="docutils literal notranslate"><span class="pre">onRun</span></code> w globalnym skrypcie Lua (<code class="docutils literal notranslate"><span class="pre">g_app.onRun</span></code>).</p></li>
<li><p>Wchodzi w pętlę, która trwa, dopóki flaga <code class="docutils literal notranslate"><span class="pre">m_stopping</span></code> nie zostanie ustawiona na <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>W każdej iteracji pętli:</p>
<ul class="simple">
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">poll()</span></code> do przetworzenia zdarzeń (np. sieciowych, zaplanowanych).</p></li>
<li><p>Usypia główny wątek na 1 milisekundę (<code class="docutils literal notranslate"><span class="pre">stdext::millisleep(1)</span></code>).</p></li>
<li><p>Aktualizuje zegar (<code class="docutils literal notranslate"><span class="pre">g_clock.update()</span></code>).</p></li>
<li><p>Aktualizuje licznik klatek/iteracji (<code class="docutils literal notranslate"><span class="pre">m_frameCounter.update()</span></code>).</p></li>
</ul>
</li>
<li><p>Po wyjściu z pętli, resetuje flagi <code class="docutils literal notranslate"><span class="pre">m_stopping</span></code> i <code class="docutils literal notranslate"><span class="pre">m_running</span></code>.</p></li>
</ol>
<blockquote>
<div><p><strong>NOTE:</strong> Pomimo braku grafiki, wciąż istnieje pojęcie „klatki” lub iteracji, które jest śledzone przez <code class="docutils literal notranslate"><span class="pre">m_frameCounter</span></code>.</p>
</div></blockquote>
</section>
<section id="id244">
<h1>Zależności i powiązania<a class="headerlink" href="#id244" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/consoleapplication.h</span></code>: Plik nagłówkowy dla tej klasy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_clock</span></code> do aktualizacji czasu w każdej iteracji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luainterface.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_lua</span></code> do wywołania <code class="docutils literal notranslate"><span class="pre">onRun</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/connection.h</span></code>: Metoda <code class="docutils literal notranslate"><span class="pre">poll()</span></code> wywołuje m.in. <code class="docutils literal notranslate"><span class="pre">Connection::poll()</span></code>, więc aplikacja konsolowa może obsługiwać sieć.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="shaderprogram-h">
<h1>📄 shaderprogram.h<a class="headerlink" href="#shaderprogram-h" title="Link to this heading">#</a></h1>
</section>
<section id="id245">
<h1>Opis ogólny<a class="headerlink" href="#id245" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">shaderprogram.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code>, która jest obiektowym opakowaniem na program shadera w OpenGL. Zarządza ona kompilacją, linkowaniem i aktywacją shaderów wierzchołków i fragmentów.</p>
</section>
<section id="klasa-shaderprogram">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code><a class="headerlink" href="#klasa-shaderprogram" title="Link to this heading">#</a></h1>
</section>
<section id="id246">
<h1>Opis semantyczny<a class="headerlink" href="#id246" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code> agreguje obiekty <code class="docutils literal notranslate"><span class="pre">Shader</span></code> (reprezentujące pojedyncze shadery, np. wierzchołków lub fragmentów), linkuje je w jeden wykonywalny program, który może być użyty w potoku renderowania OpenGL, i dostarcza interfejs do ustawiania uniformów i atrybutów. Dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p>
</section>
<section id="id247">
<h1>Metody publiczne<a class="headerlink" href="#id247" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ShaderProgram(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code></p></td>
<td class="text-left"><p>Konstruktor, tworzy program shadera.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">PainterShaderProgramPtr</span> <span class="pre">create(...)</span></code></p></td>
<td class="text-left"><p>Statyczna metoda fabryczna do tworzenia <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">addShader(...)</span></code></p></td>
<td class="text-left"><p>Dodaje skompilowany obiekt <code class="docutils literal notranslate"><span class="pre">Shader</span></code> do programu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">addShaderFromSourceCode(...)</span></code></p></td>
<td class="text-left"><p>Tworzy, kompiluje i dodaje shader z kodu źródłowego.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">addShaderFromSourceFile(...)</span></code></p></td>
<td class="text-left"><p>Tworzy, kompiluje i dodaje shader z pliku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">removeShader(...)</span></code></p></td>
<td class="text-left"><p>Usuwa shader z programu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">link()</span></code></p></td>
<td class="text-left"><p>Linkuje wszystkie dodane shadery w jeden program.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">bind()</span></code></p></td>
<td class="text-left"><p>Aktywuje ten program shadera w kontekście OpenGL.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">void</span> <span class="pre">release()</span></code></p></td>
<td class="text-left"><p>Deaktywuje jakikolwiek aktywny program shadera.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">log()</span></code></p></td>
<td class="text-left"><p>Zwraca logi z procesu linkowania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">void</span> <span class="pre">disableAttributeArray(...)</span></code></p></td>
<td class="text-left"><p>Wyłącza tablicę atrybutów wierzchołków.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">void</span> <span class="pre">enableAttributeArray(...)</span></code></p></td>
<td class="text-left"><p>Włącza tablicę atrybutów wierzchołków.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getAttributeLocation(...)</span></code></p></td>
<td class="text-left"><p>Pobiera lokalizację atrybutu o danej nazwie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">bindAttributeLocation(...)</span></code></p></td>
<td class="text-left"><p>Przypisuje lokalizację do atrybutu (przed linkowaniem).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">bindUniformLocation(...)</span></code></p></td>
<td class="text-left"><p>Wyszukuje i buforuje lokalizację uniformu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setAttributeArray(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wskaźnik na dane dla tablicy atrybutów.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setAttributeValue(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wartość dla pojedynczego atrybutu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setUniformValue(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wartość dla uniformu (przeciążona dla różnych typów: <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">Color</span></code>, <code class="docutils literal notranslate"><span class="pre">Matrix</span></code>).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isLinked()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli program został pomyślnie zlinkowany.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">getProgramId()</span></code></p></td>
<td class="text-left"><p>Zwraca ID programu OpenGL.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ShaderList</span> <span class="pre">getShaders()</span></code></p></td>
<td class="text-left"><p>Zwraca listę powiązanych shaderów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getName()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę programu.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id248">
<h1>Zmienne prywatne<a class="headerlink" href="#id248" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_name</span></code>: Nazwa programu (dla celów identyfikacji).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_linked</span></code>: Flaga wskazująca, czy program jest zlinkowany.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_programId</span></code>: ID programu w OpenGL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_currentProgram</span></code>: Statyczna zmienna śledząca aktualnie aktywny program.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_shaders</span></code>: Lista powiązanych obiektów <code class="docutils literal notranslate"><span class="pre">Shader</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_uniformLocations</span></code>: Tablica przechowująca zbuforowane lokalizacje uniformów.</p></li>
</ul>
</section>
<section id="id249">
<h1>Zależności i powiązania<a class="headerlink" href="#id249" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/shader.h</span></code>: Definicja klasy <code class="docutils literal notranslate"><span class="pre">Shader</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Dziedziczy z <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code>, która rozszerza ją o uniformy specyficzne dla <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
<li><p>Jest zarządzana przez <code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code>.</p></li>
<li><p>Jest oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, co pozwala na interakcję z obiektami tego typu z poziomu Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="animatedtexture-cpp">
<h1>📄 animatedtexture.cpp<a class="headerlink" href="#animatedtexture-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id250">
<h1>Opis ogólny<a class="headerlink" href="#id250" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">animatedtexture.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code>, która reprezentuje teksturę składającą się z wielu klatek, odtwarzanych w pętli. Jest to podklasa <code class="docutils literal notranslate"><span class="pre">Texture</span></code>.</p>
</section>
<section id="klasa-animatedtexture">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code><a class="headerlink" href="#klasa-animatedtexture" title="Link to this heading">#</a></h1>
</section>
<section id="animatedtexture-animatedtexture">
<h1><code class="docutils literal notranslate"><span class="pre">AnimatedTexture::AnimatedTexture(...)</span></code><a class="headerlink" href="#animatedtexture-animatedtexture" title="Link to this heading">#</a></h1>
<p>Konstruktor, który tworzy animowaną teksturę.</p>
<ul class="simple">
<li><p><strong>Parametry</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code>: Rozmiar pojedynczej klatki.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frames</span></code>: Wektor wskaźników na obiekty <code class="docutils literal notranslate"><span class="pre">Image</span></code>, reprezentujące poszczególne klatki animacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framesDelay</span></code>: Wektor czasów (w milisekundach), jak długo każda klatka ma być wyświetlana.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buildMipmaps</span></code>, <code class="docutils literal notranslate"><span class="pre">compress</span></code>: Flagi przekazywane do konstruktora <code class="docutils literal notranslate"><span class="pre">Texture</span></code> dla każdej klatki.</p></li>
</ul>
</li>
<li><p><strong>Działanie</strong>:</p>
<ol class="arabic simple">
<li><p>Iteruje przez wektor <code class="docutils literal notranslate"><span class="pre">frames</span></code> i dla każdego <code class="docutils literal notranslate"><span class="pre">Image</span></code> tworzy nowy obiekt <code class="docutils literal notranslate"><span class="pre">Texture</span></code>, który jest przechowywany w <code class="docutils literal notranslate"><span class="pre">m_frames</span></code>.</p></li>
<li><p>Inicjalizuje timer <code class="docutils literal notranslate"><span class="pre">m_animTimer</span></code> i ustawia bieżącą klatkę na 0.</p></li>
</ol>
</li>
</ul>
</section>
<section id="bool-animatedtexture-buildhardwaremipmaps">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">AnimatedTexture::buildHardwareMipmaps()</span></code><a class="headerlink" href="#bool-animatedtexture-buildhardwaremipmaps" title="Link to this heading">#</a></h1>
<p>Włącza generowanie mipmap dla wszystkich klatek animacji.</p>
</section>
<section id="void-animatedtexture-setsmooth-bool-smooth-i-void-animatedtexture-setrepeat-bool-repeat">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AnimatedTexture::setSmooth(bool</span> <span class="pre">smooth)</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AnimatedTexture::setRepeat(bool</span> <span class="pre">repeat)</span></code><a class="headerlink" href="#void-animatedtexture-setsmooth-bool-smooth-i-void-animatedtexture-setrepeat-bool-repeat" title="Link to this heading">#</a></h1>
<p>Ustawiają odpowiednio flagi wygładzania i powtarzania dla wszystkich tekstur-klatek.</p>
</section>
<section id="void-animatedtexture-update">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AnimatedTexture::update()</span></code><a class="headerlink" href="#void-animatedtexture-update" title="Link to this heading">#</a></h1>
</section>
<section id="id251">
<h1>Opis semantyczny<a class="headerlink" href="#id251" title="Link to this heading">#</a></h1>
<p>Aktualizuje stan animacji. Ta metoda jest kluczowa i musi być wywoływana przed każdym użyciem tekstury w pętli renderowania.</p>
</section>
<section id="id252">
<h1>Działanie<a class="headerlink" href="#id252" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy czas, jaki upłynął od ostatniej zmiany klatki (<code class="docutils literal notranslate"><span class="pre">m_animTimer.ticksElapsed()</span></code>) jest większy lub równy czasowi opóźnienia dla bieżącej klatki (<code class="docutils literal notranslate"><span class="pre">m_framesDelay[m_currentFrame]</span></code>).</p></li>
<li><p>Jeśli tak, przechodzi do następnej klatki, zapętlając animację (<code class="docutils literal notranslate"><span class="pre">m_currentFrame</span> <span class="pre">=</span> <span class="pre">(m_currentFrame</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">%</span> <span class="pre">m_frames.size()</span></code>), i resetuje timer.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">update()</span></code> na teksturze bieżącej klatki.</p></li>
<li><p>Aktualizuje ID tekstury (<code class="docutils literal notranslate"><span class="pre">m_id</span></code>) i unikalne ID (<code class="docutils literal notranslate"><span class="pre">m_uniqueId</span></code>) klasy bazowej <code class="docutils literal notranslate"><span class="pre">Texture</span></code> na wartości z bieżącej klatki. Dzięki temu reszta systemu renderującego może traktować <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code> jak zwykłą, statyczną teksturę, nie wiedząc, że jej ID zmienia się w czasie.</p></li>
</ol>
</section>
<section id="id253">
<h1>Zależności i powiązania<a class="headerlink" href="#id253" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/animatedtexture.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graphics.h</span></code>: Do operacji na OpenGL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Potencjalnie do planowania aktualizacji.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code> podczas ładowania animowanych plików PNG (APNG).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="animatedtexture-h">
<h1>📄 animatedtexture.h<a class="headerlink" href="#animatedtexture-h" title="Link to this heading">#</a></h1>
</section>
<section id="id254">
<h1>Opis ogólny<a class="headerlink" href="#id254" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">animatedtexture.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code>, która jest specjalizacją klasy <code class="docutils literal notranslate"><span class="pre">Texture</span></code>. Reprezentuje ona teksturę, która zmienia swój wygląd w czasie, odtwarzając sekwencję klatek.</p>
</section>
<section id="id255">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code><a class="headerlink" href="#id255" title="Link to this heading">#</a></h1>
</section>
<section id="id256">
<h1>Opis semantyczny<a class="headerlink" href="#id256" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">Texture</span></code> i przechowuje kolekcję tekstur (<code class="docutils literal notranslate"><span class="pre">std::vector&lt;TexturePtr&gt;</span></code>), które reprezentują poszczególne klatki animacji. Wewnętrzny timer (<code class="docutils literal notranslate"><span class="pre">m_animTimer</span></code>) kontroluje, która klatka jest aktualnie aktywna. Metoda <code class="docutils literal notranslate"><span class="pre">update()</span></code> jest odpowiedzialna za przełączanie klatek i aktualizowanie ID tekstury w klasie bazowej, dzięki czemu dla systemu renderującego wygląda ona jak pojedyncza, dynamicznie zmieniająca się tekstura.</p>
</section>
<section id="id257">
<h1>Metody publiczne<a class="headerlink" href="#id257" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AnimatedTexture(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor, tworzy animowaną teksturę z wektora obrazów i czasów opóźnień.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">~AnimatedTexture()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">replace(const</span> <span class="pre">ImagePtr&amp;</span> <span class="pre">image)</span></code></p></td>
<td class="text-left"><p>Pusta implementacja; zastępowanie animowanej tekstury pojedynczym obrazem nie jest obsługiwane w ten sposób.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">update()</span></code></p></td>
<td class="text-left"><p>Aktualizuje bieżącą klatkę animacji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">bool</span> <span class="pre">isAnimatedTexture()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, odróżniając tę klasę od <code class="docutils literal notranslate"><span class="pre">Texture</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id258">
<h1>Metody chronione<a class="headerlink" href="#id258" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">bool</span> <span class="pre">buildHardwareMipmaps()</span></code>: Włącza mipmapping dla wszystkich klatek.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setSmooth(bool</span> <span class="pre">smooth)</span></code>: Ustawia wygładzanie dla wszystkich klatek.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setRepeat(bool</span> <span class="pre">repeat)</span></code>: Ustawia powtarzanie dla wszystkich klatek.</p></li>
</ul>
</section>
<section id="id259">
<h1>Zmienne prywatne<a class="headerlink" href="#id259" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_frames</span></code>: Wektor wskaźników na tekstury poszczególnych klatek.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_framesDelay</span></code>: Wektor czasów opóźnień dla każdej klatki.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_currentFrame</span></code>: Indeks bieżącej klatki.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_animTimer</span></code>: Timer do śledzenia czasu wyświetlania klatki.</p></li>
</ul>
</section>
<section id="id260">
<h1>Zależności i powiązania<a class="headerlink" href="#id260" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/texture.h</span></code>: Klasa bazowa <code class="docutils literal notranslate"><span class="pre">Texture</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/timer.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">Timer</span></code> do zarządzania animacją.</p></li>
<li><p>Jest tworzona przez <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code> podczas ładowania plików APNG (Animated PNG).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="apngloader-cpp">
<h1>📄 apngloader.cpp<a class="headerlink" href="#apngloader-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id261">
<h1>Opis ogólny<a class="headerlink" href="#id261" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">apngloader.cpp</span></code> zawiera implementację funkcji do ładowania animowanych plików PNG (APNG) oraz do zapisu standardowych plików PNG. Kod jest oparty na bibliotece APNG Disassembler 2.3 autorstwa Maxa Stepina i został dostosowany do potrzeb frameworka.</p>
</section>
<section id="funkcje">
<h1>Funkcje<a class="headerlink" href="#funkcje" title="Link to this heading">#</a></h1>
</section>
<section id="load-apng-std-stringstream-file-struct-apng-data-apng">
<h1><code class="docutils literal notranslate"><span class="pre">load_apng(std::stringstream&amp;</span> <span class="pre">file,</span> <span class="pre">struct</span> <span class="pre">apng_data</span> <span class="pre">*apng)</span></code><a class="headerlink" href="#load-apng-std-stringstream-file-struct-apng-data-apng" title="Link to this heading">#</a></h1>
</section>
<section id="id262">
<h1>Opis semantyczny<a class="headerlink" href="#id262" title="Link to this heading">#</a></h1>
<p>Główna funkcja do parsowania pliku w formacie APNG. Odczytuje ona poszczególne „chunki” (fragmenty) pliku PNG, takie jak <code class="docutils literal notranslate"><span class="pre">IHDR</span></code> (nagłówek), <code class="docutils literal notranslate"><span class="pre">PLTE</span></code> (paleta), <code class="docutils literal notranslate"><span class="pre">tRNS</span></code> (przezroczystość), <code class="docutils literal notranslate"><span class="pre">acTL</span></code> (nagłówek animacji), <code class="docutils literal notranslate"><span class="pre">fcTL</span></code> (kontrola klatki) oraz <code class="docutils literal notranslate"><span class="pre">IDAT</span></code>/<code class="docutils literal notranslate"><span class="pre">fdAT</span></code> (dane obrazu).</p>
</section>
<section id="id263">
<h1>Działanie<a class="headerlink" href="#id263" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza sygnaturę pliku PNG.</p></li>
<li><p>Odczytuje nagłówek <code class="docutils literal notranslate"><span class="pre">IHDR</span></code> w celu uzyskania wymiarów, głębi kolorów i innych podstawowych informacji.</p></li>
<li><p>Alokuje bufory na zdekompresowane dane obrazu.</p></li>
<li><p>W pętli odczytuje kolejne chunki:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PLTE</span></code> i <code class="docutils literal notranslate"><span class="pre">tRNS</span></code>: Wczytuje paletę kolorów i informacje o przezroczystości.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">acTL</span></code>: Identyfikuje plik jako animowany, odczytuje liczbę klatek i zapętleń.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fcTL</span></code>: Odczytuje metadane dla pojedynczej klatki, takie jak wymiary, przesunięcie, czas trwania i operacje mieszania (<code class="docutils literal notranslate"><span class="pre">blend_op</span></code>) oraz usuwania (<code class="docutils literal notranslate"><span class="pre">dispose_op</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IDAT</span></code> i <code class="docutils literal notranslate"><span class="pre">fdAT</span></code>: Gromadzi skompresowane dane obrazu dla klatki.</p></li>
</ul>
</li>
<li><p>Po odczytaniu danych dla klatki (<code class="docutils literal notranslate"><span class="pre">fcTL</span></code> lub <code class="docutils literal notranslate"><span class="pre">IEND</span></code>), dekompresuje je za pomocą ZLIB (<code class="docutils literal notranslate"><span class="pre">inflate</span></code>), a następnie odfiltrowuje (usuwa filtry PNG takie jak Sub, Up, Average, Paeth).</p></li>
<li><p>Komponuje finalny obraz klatki na podstawie poprzedniej klatki, stosując operacje <code class="docutils literal notranslate"><span class="pre">dispose_op</span></code> (np. zostaw, wyczyść do tła) i <code class="docutils literal notranslate"><span class="pre">blend_op</span></code> (np. zastąp, nałóż).</p></li>
<li><p>Wynikowe dane klatki w formacie RGBA są zapisywane do bufora w strukturze <code class="docutils literal notranslate"><span class="pre">apng_data</span></code>.</p></li>
<li><p>Zwraca 0 w przypadku sukcesu, -1 w przypadku błędu.</p></li>
</ol>
</section>
<section id="save-png-std-stringstream-f-unsigned-int-width-unsigned-int-height-int-channels-unsigned-char-pixels">
<h1><code class="docutils literal notranslate"><span class="pre">save_png(std::stringstream&amp;</span> <span class="pre">f,</span> <span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">width,</span> <span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">height,</span> <span class="pre">int</span> <span class="pre">channels,</span> <span class="pre">unsigned</span> <span class="pre">char</span> <span class="pre">*pixels)</span></code><a class="headerlink" href="#save-png-std-stringstream-f-unsigned-int-width-unsigned-int-height-int-channels-unsigned-char-pixels" title="Link to this heading">#</a></h1>
</section>
<section id="id264">
<h1>Opis semantyczny<a class="headerlink" href="#id264" title="Link to this heading">#</a></h1>
<p>Zapisuje dane obrazu do formatu PNG. Implementuje podstawową kompresję z filtrowaniem, dynamicznie wybierając najlepszy filtr dla każdej linii obrazu w celu uzyskania lepszej kompresji.</p>
</section>
<section id="id265">
<h1>Działanie<a class="headerlink" href="#id265" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Zapisuje sygnaturę PNG i nagłówek <code class="docutils literal notranslate"><span class="pre">IHDR</span></code>.</p></li>
<li><p>Inicjalizuje strumienie kompresji ZLIB.</p></li>
<li><p>Dla każdej linii obrazu:</p>
<ul class="simple">
<li><p>Testuje pięć różnych filtrów PNG (None, Sub, Up, Average, Paeth).</p></li>
<li><p>Wybiera filtr, który generuje dane o najmniejszej sumie wartości bezwzględnych bajtów (co zwykle prowadzi do lepszej kompresji).</p></li>
<li><p>Kompresuje przefiltrowaną linię za pomocą <code class="docutils literal notranslate"><span class="pre">deflate</span></code>.</p></li>
</ul>
</li>
<li><p>Zapisuje skompresowane dane w chunkach <code class="docutils literal notranslate"><span class="pre">IDAT</span></code>.</p></li>
<li><p>Zapisuje chunk końcowy <code class="docutils literal notranslate"><span class="pre">IEND</span></code>.</p></li>
</ol>
</section>
<section id="funkcje-pomocnicze">
<h1>Funkcje pomocnicze<a class="headerlink" href="#funkcje-pomocnicze" title="Link to this heading">#</a></h1>
<p>Plik zawiera wiele funkcji pomocniczych, m.in.:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read32</span></code>, <code class="docutils literal notranslate"><span class="pre">read16</span></code>: Do odczytu liczb w porządku big-endian.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sub_row</span></code>, <code class="docutils literal notranslate"><span class="pre">read_up_row</span></code>, <code class="docutils literal notranslate"><span class="pre">read_average_row</span></code>, <code class="docutils literal notranslate"><span class="pre">read_paeth_row</span></code>: Do odfiltrowywania danych obrazu PNG.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compose0</span></code>, <code class="docutils literal notranslate"><span class="pre">compose2</span></code>, <code class="docutils literal notranslate"><span class="pre">compose3</span></code>, <code class="docutils literal notranslate"><span class="pre">compose4</span></code>, <code class="docutils literal notranslate"><span class="pre">compose6</span></code>: Do kompozycji klatek animacji, konwertując różne formaty pikseli na RGBA i stosując operacje mieszania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unpack</span></code>: Dekompresuje i odfiltrowuje dane jednej klatki.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_chunk</span></code>, <code class="docutils literal notranslate"><span class="pre">write_IDATs</span></code>: Do zapisu chunków PNG.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">free_apng</span></code>: Zwalnia pamięć zaalokowaną w strukturze <code class="docutils literal notranslate"><span class="pre">apng_data</span></code>.</p></li>
</ul>
</section>
<section id="id266">
<h1>Zależności i powiązania<a class="headerlink" href="#id266" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/apngloader.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><strong>ZLIB</strong>: Używana do kompresji i dekompresji danych obrazu.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Image::loadPNG</span></code> do ładowania obrazów i <code class="docutils literal notranslate"><span class="pre">Image::savePNG</span></code> do ich zapisu.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="apngloader-h">
<h1>📄 apngloader.h<a class="headerlink" href="#apngloader-h" title="Link to this heading">#</a></h1>
</section>
<section id="id267">
<h1>Opis ogólny<a class="headerlink" href="#id267" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">apngloader.h</span></code> jest plikiem nagłówkowym, który deklaruje struktury danych i funkcje do obsługi plików w formacie APNG (Animated PNG). Definiuje on publiczny interfejs do ładowania, zapisywania i zwalniania danych obrazu.</p>
</section>
<section id="struktura-apng-data">
<h1>Struktura <code class="docutils literal notranslate"><span class="pre">apng_data</span></code><a class="headerlink" href="#struktura-apng-data" title="Link to this heading">#</a></h1>
</section>
<section id="id268">
<h1>Opis semantyczny<a class="headerlink" href="#id268" title="Link to this heading">#</a></h1>
<p>Struktura ta przechowuje wszystkie zdekompresowane i sparsowane dane z pliku APNG.</p>
</section>
<section id="id269">
<h1>Pola struktury<a class="headerlink" href="#id269" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Pole</p></th>
<th class="head text-left"><p>Typ</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">pdata</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">char</span> <span class="pre">*</span></code></p></td>
<td class="text-left"><p>Wskaźnik na surowe dane pikseli wszystkich klatek, w formacie RGBA, jedna po drugiej.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">width</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code></p></td>
<td class="text-left"><p>Szerokość obrazu w pikselach.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">height</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code></p></td>
<td class="text-left"><p>Wysokość obrazu w pikselach.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">first_frame</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code></p></td>
<td class="text-left"><p>Indeks pierwszej klatki animacji (zwykle 0).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">last_frame</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code></p></td>
<td class="text-left"><p>Indeks ostatniej klatki animacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bpp</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">char</span></code></p></td>
<td class="text-left"><p>Liczba bajtów na piksel.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">coltype</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">char</span></code></p></td>
<td class="text-left"><p>Typ koloru z nagłówka PNG.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">num_frames</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code></p></td>
<td class="text-left"><p>Całkowita liczba klatek w animacji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">num_plays</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code></p></td>
<td class="text-left"><p>Liczba powtórzeń animacji (0 oznacza nieskończoność).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">frames_delay</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">short</span> <span class="pre">*</span></code></p></td>
<td class="text-left"><p>Tablica czasów wyświetlania dla każdej klatki, w milisekundach.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="funkcje-publiczne">
<h1>Funkcje publiczne<a class="headerlink" href="#funkcje-publiczne" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Funkcja</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">load_apng(std::stringstream&amp;</span> <span class="pre">file,</span> <span class="pre">struct</span> <span class="pre">apng_data</span> <span class="pre">*apng)</span></code></p></td>
<td class="text-left"><p>Ładuje i parsuje dane APNG ze strumienia <code class="docutils literal notranslate"><span class="pre">file</span></code> i zapisuje wyniki w strukturze <code class="docutils literal notranslate"><span class="pre">apng</span></code>. Zwraca 0 w przypadku sukcesu, -1 w przypadku błędu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">save_png(std::stringstream&amp;</span> <span class="pre">file,</span> <span class="pre">...)</span></code></p></td>
<td class="text-left"><p>Zapisuje dane obrazu (pojedynczej klatki) do strumienia <code class="docutils literal notranslate"><span class="pre">file</span></code> w formacie PNG.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">free_apng(struct</span> <span class="pre">apng_data</span> <span class="pre">*apng)</span></code></p></td>
<td class="text-left"><p>Zwalnia pamięć zaalokowaną dynamicznie w strukturze <code class="docutils literal notranslate"><span class="pre">apng_data</span></code> (tj. <code class="docutils literal notranslate"><span class="pre">pdata</span></code> i <code class="docutils literal notranslate"><span class="pre">frames_delay</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id270">
<h1>Zależności i powiązania<a class="headerlink" href="#id270" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;sstream&gt;</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">std::stringstream</span></code> jako źródła danych wejściowych i wyjściowych.</p></li>
<li><p>Funkcje te są wykorzystywane przez klasę <code class="docutils literal notranslate"><span class="pre">Image</span></code> do implementacji metod <code class="docutils literal notranslate"><span class="pre">loadPNG</span></code> i <code class="docutils literal notranslate"><span class="pre">savePNG</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="atlas-cpp">
<h1>📄 atlas.cpp<a class="headerlink" href="#atlas-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id271">
<h1>Opis ogólny<a class="headerlink" href="#id271" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">atlas.cpp</span></code> implementuje klasę <code class="docutils literal notranslate"><span class="pre">Atlas</span></code>, która zarządza tzw. „atlasem tekstur”. Jest to technika optymalizacyjna, polegająca na łączeniu wielu małych tekstur w jedną dużą teksturę, aby zminimalizować liczbę zmian stanu w potoku renderowania grafiki (zmiana tekstury jest kosztowną operacją).</p>
</section>
<section id="id272">
<h1>Zmienne globalne<a class="headerlink" href="#id272" title="Link to this heading">#</a></h1>
</section>
<section id="g-atlas">
<h1><code class="docutils literal notranslate"><span class="pre">g_atlas</span></code><a class="headerlink" href="#g-atlas" title="Link to this heading">#</a></h1>
<p>Globalna instancja klasy <code class="docutils literal notranslate"><span class="pre">Atlas</span></code>, zapewniająca scentralizowany dostęp do mechanizmu cachowania tekstur.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Atlas</span><span class="w"> </span><span class="n">g_atlas</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-atlas">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Atlas</span></code><a class="headerlink" href="#klasa-atlas" title="Link to this heading">#</a></h1>
</section>
<section id="void-atlas-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::init()</span></code><a class="headerlink" href="#void-atlas-init" title="Link to this heading">#</a></h1>
</section>
<section id="id273">
<h1>Opis semantyczny<a class="headerlink" href="#id273" title="Link to this heading">#</a></h1>
<p>Inicjalizuje atlas.</p>
</section>
<section id="id274">
<h1>Działanie<a class="headerlink" href="#id274" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Określa maksymalny rozmiar tekstury atlasu, biorąc pod uwagę ograniczenia karty graficznej (<code class="docutils literal notranslate"><span class="pre">g_graphics.getMaxTextureSize()</span></code>), ale nie przekraczając <code class="docutils literal notranslate"><span class="pre">4096x4096</span></code>.</p></li>
<li><p>Tworzy dwa obiekty <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_atlas[0]</span></code>: Główny atlas dla ogólnych tekstur.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_atlas[1]</span></code>: Atlas dla tekstur fontów.</p></li>
</ul>
</li>
<li><p>Wiąże tekstury atlasów do jednostek teksturujących <code class="docutils literal notranslate"><span class="pre">GL_TEXTURE6</span></code> i <code class="docutils literal notranslate"><span class="pre">GL_TEXTURE7</span></code>, aby były globalnie dostępne dla shaderów.</p></li>
<li><p>Resetuje oba atlasy, przygotowując je do użycia.</p></li>
</ol>
</section>
<section id="void-atlas-reset-i-void-atlas-resetatlas-int-location">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::reset()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::resetAtlas(int</span> <span class="pre">location)</span></code><a class="headerlink" href="#void-atlas-reset-i-void-atlas-resetatlas-int-location" title="Link to this heading">#</a></h1>
<p>Metody do czyszczenia atlasu. <code class="docutils literal notranslate"><span class="pre">reset()</span></code> czyści główny atlas i bufor <code class="docutils literal notranslate"><span class="pre">m_cache</span></code>. <code class="docutils literal notranslate"><span class="pre">resetAtlas()</span></code> przygotowuje konkretny atlas do ponownego użycia, czyszcząc jego zawartość (wypełniając przezroczystością) i resetując informacje o wolnych przestrzeniach (<code class="docutils literal notranslate"><span class="pre">m_locations</span></code>).</p>
</section>
<section id="void-atlas-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::terminate()</span></code><a class="headerlink" href="#void-atlas-terminate" title="Link to this heading">#</a></h1>
<p>Zwalnia obiekty <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> atlasów.</p>
</section>
<section id="point-atlas-cache-uint64-t-hash-const-size-size-bool-draw">
<h1><code class="docutils literal notranslate"><span class="pre">Point</span> <span class="pre">Atlas::cache(uint64_t</span> <span class="pre">hash,</span> <span class="pre">const</span> <span class="pre">Size&amp;</span> <span class="pre">size,</span> <span class="pre">bool&amp;</span> <span class="pre">draw)</span></code><a class="headerlink" href="#point-atlas-cache-uint64-t-hash-const-size-size-bool-draw" title="Link to this heading">#</a></h1>
</section>
<section id="id275">
<h1>Opis semantyczny<a class="headerlink" href="#id275" title="Link to this heading">#</a></h1>
<p>Główna metoda do cachowania tekstury. Sprawdza, czy tekstura o danym hashu jest już w atlasie. Jeśli nie, znajduje dla niej wolne miejsce.</p>
</section>
<section id="id276">
<h1>Działanie<a class="headerlink" href="#id276" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Jeśli <code class="docutils literal notranslate"><span class="pre">m_doReset</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code>, najpierw resetuje atlas.</p></li>
<li><p>Sprawdza, czy hash istnieje w <code class="docutils literal notranslate"><span class="pre">m_cache</span></code>. Jeśli tak, zwraca zapisaną pozycję.</p></li>
<li><p>Jeśli nie, oblicza, jakiego rozmiaru bloku potrzebuje tekstura (<code class="docutils literal notranslate"><span class="pre">calculateIndex</span></code>).</p></li>
<li><p>Jeśli tekstura jest za duża, zwraca <code class="docutils literal notranslate"><span class="pre">Point(-1,</span> <span class="pre">-1)</span></code>.</p></li>
<li><p>Próbuje znaleźć wolne miejsce w <code class="docutils literal notranslate"><span class="pre">m_locations</span></code>. Jeśli go nie ma, wywołuje <code class="docutils literal notranslate"><span class="pre">findSpace</span></code> w celu podziału większego bloku.</p></li>
<li><p>Jeśli nie ma miejsca, ustawia <code class="docutils literal notranslate"><span class="pre">m_doReset</span> <span class="pre">=</span> <span class="pre">true</span></code> i zwraca <code class="docutils literal notranslate"><span class="pre">Point(-1,</span> <span class="pre">-1)</span></code>.</p></li>
<li><p>Jeśli miejsce się znajdzie, zapisuje pozycję w <code class="docutils literal notranslate"><span class="pre">m_cache</span></code>, ustawia <code class="docutils literal notranslate"><span class="pre">draw</span> <span class="pre">=</span> <span class="pre">true</span></code> (sygnalizując, że tekstura musi zostać narysowana w atlasie) i zwraca pozycję.</p></li>
</ol>
</section>
<section id="void-atlas-bind-i-void-atlas-release">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::bind()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::release()</span></code><a class="headerlink" href="#void-atlas-bind-i-void-atlas-release" title="Link to this heading">#</a></h1>
<p>Metody do bindowania i zwalniania <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> głównego atlasu, aby umożliwić rysowanie w nim nowych tekstur.</p>
</section>
<section id="point-atlas-cachefont-const-textureptr-fonttexture">
<h1><code class="docutils literal notranslate"><span class="pre">Point</span> <span class="pre">Atlas::cacheFont(const</span> <span class="pre">TexturePtr&amp;</span> <span class="pre">fontTexture)</span></code><a class="headerlink" href="#point-atlas-cachefont-const-textureptr-fonttexture" title="Link to this heading">#</a></h1>
<p>Specjalna metoda do cachowania tekstur fontów w drugim atlasie (<code class="docutils literal notranslate"><span class="pre">m_atlas[1]</span></code>). Działa podobnie do <code class="docutils literal notranslate"><span class="pre">cache</span></code>, ale od razu rysuje teksturę fontu w znalezionym miejscu.</p>
</section>
<section id="int-atlas-calculateindex-const-size-size">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Atlas::calculateIndex(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code><a class="headerlink" href="#int-atlas-calculateindex-const-size-size" title="Link to this heading">#</a></h1>
<p>Oblicza indeks (od 0 do 6) odpowiadający rozmiarowi bloku potrzebnego do przechowania tekstury (np. 32x32, 64x64, …, 2048x2048).</p>
</section>
<section id="bool-atlas-findspace-int-location-int-index">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Atlas::findSpace(int</span> <span class="pre">location,</span> <span class="pre">int</span> <span class="pre">index)</span></code><a class="headerlink" href="#bool-atlas-findspace-int-location-int-index" title="Link to this heading">#</a></h1>
<p>Rekurencyjna metoda, która próbuje znaleźć wolne miejsce dla bloku o danym <code class="docutils literal notranslate"><span class="pre">index</span></code>. Jeśli nie ma wolnych bloków tego rozmiaru, próbuje znaleźć i podzielić większy blok (o <code class="docutils literal notranslate"><span class="pre">index</span> <span class="pre">+</span> <span class="pre">1</span></code>).</p>
</section>
<section id="std-string-atlas-getstats">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">Atlas::getStats()</span></code><a class="headerlink" href="#std-string-atlas-getstats" title="Link to this heading">#</a></h1>
<p>Zwraca informacje debugowania o liczbie wolnych miejsc w poszczególnych blokach atlasu.</p>
</section>
<section id="id277">
<h1>Zależności i powiązania<a class="headerlink" href="#id277" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/atlas.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/framebuffermanager.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code> do tworzenia <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> dla atlasów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/painter.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">Painter</span></code> do rysowania w atlasie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graphics.h</span></code>: Do pobierania maksymalnego rozmiaru tekstury.</p></li>
<li><p>Jest używany przez <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> i <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code> do optymalizacji renderowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="bitmapfont-cpp">
<h1>📄 bitmapfont.cpp<a class="headerlink" href="#bitmapfont-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id278">
<h1>Opis ogólny<a class="headerlink" href="#id278" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">bitmapfont.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code>, która zarządza fontami opartymi na bitmapach (obrazach). Taki font składa się z pojedynczej tekstury zawierającej wszystkie glify (znaki) ułożone w siatce.</p>
</section>
<section id="klasa-bitmapfont">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code><a class="headerlink" href="#klasa-bitmapfont" title="Link to this heading">#</a></h1>
</section>
<section id="void-bitmapfont-load-const-otmlnodeptr-fontnode">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BitmapFont::load(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">fontNode)</span></code><a class="headerlink" href="#void-bitmapfont-load-const-otmlnodeptr-fontnode" title="Link to this heading">#</a></h1>
</section>
<section id="id279">
<h1>Opis semantyczny<a class="headerlink" href="#id279" title="Link to this heading">#</a></h1>
<p>Ładuje definicję fontu z węzła OTML (zazwyczaj z pliku <code class="docutils literal notranslate"><span class="pre">.otfont</span></code>).</p>
</section>
<section id="id280">
<h1>Działanie<a class="headerlink" href="#id280" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Odczytuje z węzła OTML podstawowe atrybuty fontu:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">texture</span></code>: Ścieżka do pliku z obrazem fontu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glyph-size</span></code>: Rozmiar pojedynczego glifu w siatce.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">height</span></code>: Rzeczywista wysokość glifu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y-offset</span></code>: Przesunięcie w osi Y.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">first-glyph</span></code>: Kod ASCII pierwszego znaku w siatce (zwykle 32 - spacja).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spacing</span></code>: Odstępy między glifami.</p></li>
</ul>
</li>
<li><p>Oblicza szerokości poszczególnych glifów:</p>
<ul class="simple">
<li><p>Jeśli zdefiniowano <code class="docutils literal notranslate"><span class="pre">fixed-glyph-width</span></code>, wszystkie glify mają tę samą szerokość.</p></li>
<li><p>W przeciwnym razie wywołuje <code class="docutils literal notranslate"><span class="pre">calculateGlyphsWidthsAutomatically</span></code>, aby automatycznie wykryć szerokość każdego znaku.</p></li>
</ul>
</li>
<li><p>Ustawia specjalne szerokości dla spacji (32) i znaku nowej linii (<code class="docutils literal notranslate"><span class="pre">\n</span></code>).</p></li>
<li><p>Ładuje teksturę fontu za pomocą <code class="docutils literal notranslate"><span class="pre">g_textures.getTexture()</span></code>.</p></li>
<li><p>Jeśli fonty są cachowane w atlasie (<code class="docutils literal notranslate"><span class="pre">!DONT_CACHE_FONTS</span></code>), wywołuje <code class="docutils literal notranslate"><span class="pre">g_atlas.cacheFont()</span></code> i ustawia teksturę atlasu jako źródłową.</p></li>
<li><p>Oblicza i zapisuje współrzędne tekstury dla każdego glifu w <code class="docutils literal notranslate"><span class="pre">m_glyphsTextureCoords</span></code>.</p></li>
</ol>
</section>
<section id="void-bitmapfont-drawtext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BitmapFont::drawText(...)</span></code><a class="headerlink" href="#void-bitmapfont-drawtext" title="Link to this heading">#</a></h1>
<p>Metody te nie rysują tekstu bezpośrednio, lecz dodają zadanie rysowania do globalnej kolejki <code class="docutils literal notranslate"><span class="pre">g_drawQueue</span></code>.</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">drawText(...,</span> <span class="pre">const</span> <span class="pre">Color&amp;</span> <span class="pre">color,</span> <span class="pre">...)</span></code></strong>: Dodaje zadanie rysowania tekstu jednokolorowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">drawColoredText(...,</span> <span class="pre">const</span> <span class="pre">std::vector&lt;std::pair&lt;int,</span> <span class="pre">Color&gt;&gt;&amp;</span> <span class="pre">colors,</span> <span class="pre">...)</span></code></strong>: Dodaje zadanie rysowania tekstu z wieloma kolorami.</p></li>
</ul>
</section>
<section id="void-bitmapfont-calculatedrawtextcoords">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BitmapFont::calculateDrawTextCoords(...)</span></code><a class="headerlink" href="#void-bitmapfont-calculatedrawtextcoords" title="Link to this heading">#</a></h1>
<p>Oblicza współrzędne ekranowe i tekstury dla każdego glifu w podanym tekście, uwzględniając wyrównanie i przycinanie do podanego prostokąta. Wyniki są zapisywane w <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code>.</p>
</section>
<section id="const-std-vector-point-bitmapfont-calculateglyphspositions">
<h1><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::vector&lt;Point&gt;&amp;</span> <span class="pre">BitmapFont::calculateGlyphsPositions(...)</span></code><a class="headerlink" href="#const-std-vector-point-bitmapfont-calculateglyphspositions" title="Link to this heading">#</a></h1>
<p>Oblicza pozycje (lewy górny róg) każdego glifu w tekście, uwzględniająd wyrównanie. Używa statycznych, lokalnych dla wątku wektorów w celu optymalizacji. Zwraca również obliczony rozmiar całego bloku tekstu.</p>
</section>
<section id="size-bitmapfont-calculatetextrectsize-const-std-string-text">
<h1><code class="docutils literal notranslate"><span class="pre">Size</span> <span class="pre">BitmapFont::calculateTextRectSize(const</span> <span class="pre">std::string&amp;</span> <span class="pre">text)</span></code><a class="headerlink" href="#size-bitmapfont-calculatetextrectsize-const-std-string-text" title="Link to this heading">#</a></h1>
<p>Zwraca rozmiar prostokąta, jaki zajmie podany tekst, używając <code class="docutils literal notranslate"><span class="pre">calculateGlyphsPositions</span></code>.</p>
</section>
<section id="std-string-bitmapfont-wraptext">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">BitmapFont::wrapText(...)</span></code><a class="headerlink" href="#std-string-bitmapfont-wraptext" title="Link to this heading">#</a></h1>
<p>Implementuje zawijanie tekstu. Dzieli tekst na linie, tak aby żadna nie przekraczała <code class="docutils literal notranslate"><span class="pre">maxWidth</span></code>. Obsługuje również przenoszenie definicji kolorów (<code class="docutils literal notranslate"><span class="pre">m_textColors</span></code>) do nowych linii.</p>
</section>
<section id="void-bitmapfont-calculateglyphswidthsautomatically">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BitmapFont::calculateGlyphsWidthsAutomatically(...)</span></code><a class="headerlink" href="#void-bitmapfont-calculateglyphswidthsautomatically" title="Link to this heading">#</a></h1>
<p>Prywatna metoda, która analizuje obraz tekstury fontu piksel po pikselu. Dla każdego glifu znajduje ostatnią nieprzezroczystą kolumnę pikseli, aby precyzyjnie określić jego szerokość.</p>
</section>
<section id="id281">
<h1>Zależności i powiązania<a class="headerlink" href="#id281" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/atlas.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_atlas</span></code> do cachowania tekstur fontów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/bitmapfont.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/texturemanager.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_textures</span></code> do ładowania obrazu fontu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/image.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">Image</span></code> do analizy pikseli w <code class="docutils literal notranslate"><span class="pre">calculateGlyphsWidthsAutomatically</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/drawqueue.h</span></code>: Dodaje zadania rysowania tekstu do <code class="docutils literal notranslate"><span class="pre">g_drawQueue</span></code>.</p></li>
<li><p>Jest zarządzana przez <code class="docutils literal notranslate"><span class="pre">FontManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="atlas-h">
<h1>📄 atlas.h<a class="headerlink" href="#atlas-h" title="Link to this heading">#</a></h1>
</section>
<section id="id282">
<h1>Opis ogólny<a class="headerlink" href="#id282" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">atlas.h</span></code> deklaruje interfejs klasy <code class="docutils literal notranslate"><span class="pre">Atlas</span></code>, która implementuje mechanizm atlasu tekstur. Celem atlasu jest optymalizacja renderowania poprzez grupowanie wielu małych tekstur w jedną dużą teksturę, co redukuje liczbę wywołań <code class="docutils literal notranslate"><span class="pre">glBindTexture</span></code> w OpenGL.</p>
</section>
<section id="id283">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Atlas</span></code><a class="headerlink" href="#id283" title="Link to this heading">#</a></h1>
</section>
<section id="id284">
<h1>Opis semantyczny<a class="headerlink" href="#id284" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Atlas</span></code> zarządza jednym lub kilkoma dużymi obiektami <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>, które działają jak „płótna”. Kiedy system renderujący potrzebuje narysować małą teksturę, <code class="docutils literal notranslate"><span class="pre">Atlas</span></code> znajduje dla niej wolne miejsce w jednym z płócien, kopiuje tam jej zawartość (jeśli jeszcze jej tam nie ma) i zwraca współrzędne wewnątrz atlasu. Późniejsze odwołania do tej samej tekstury używają już skopiowanej wersji z atlasu.</p>
</section>
<section id="id285">
<h1>Metody publiczne<a class="headerlink" href="#id285" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje atlas, tworząc <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> o maksymalnym możliwym rozmiarze.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Zwalnia zasoby atlasu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">reload()</span></code></p></td>
<td class="text-left"><p>Resetuje i czyści zawartość atlasów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Point</span> <span class="pre">cache(uint64_t</span> <span class="pre">hash,</span> <span class="pre">const</span> <span class="pre">Size&amp;</span> <span class="pre">size,</span> <span class="pre">bool&amp;</span> <span class="pre">draw)</span></code></p></td>
<td class="text-left"><p>Główna metoda cachująca. Sprawdza, czy tekstura o danym hashu jest już w atlasie. Jeśli nie, znajduje wolne miejsce i zwraca jego koordynaty. Parametr <code class="docutils literal notranslate"><span class="pre">draw</span></code> jest ustawiany na <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli teksturę trzeba narysować w atlasie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Point</span> <span class="pre">cacheFont(const</span> <span class="pre">TexturePtr&amp;</span> <span class="pre">fontTexture)</span></code></p></td>
<td class="text-left"><p>Specjalna metoda do cachowania tekstur fontów w dedykowanym atlasie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">TexturePtr</span> <span class="pre">get(int</span> <span class="pre">location)</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik na teksturę atlasu o danym indeksie (0 - główny, 1 - fonty).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">bind()</span></code></p></td>
<td class="text-left"><p>Bindowanie <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> atlasu jako celu renderowania.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">release()</span></code></p></td>
<td class="text-left"><p>Odpinanie <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> atlasu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getStats()</span></code></p></td>
<td class="text-left"><p>Zwraca informacje diagnostyczne o stanie atlasu.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id286">
<h1>Zmienne prywatne<a class="headerlink" href="#id286" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_atlas[2]</span></code>: Tablica wskaźników na <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> (dla ogólnych tekstur i fontów).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_cache</span></code>: Mapa (<code class="docutils literal notranslate"><span class="pre">std::map</span></code>) przechowująca hashe skachowanych tekstur i ich pozycje w atlasie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_locations[2][7]</span></code>: Tablica list przechowująca pozycje wolnych bloków o różnych rozmiarach (od 32x32 do 2048x2048) dla obu atlasów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_size</span></code>: Rozmiar boku tekstury atlasu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_doReset</span></code>: Flaga sygnalizująca konieczność zresetowania atlasu (gdy zabraknie miejsca).</p></li>
</ul>
</section>
<section id="id287">
<h1>Zmienne globalne<a class="headerlink" href="#id287" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_atlas</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">Atlas</span></code>.</p></li>
</ul>
</section>
<section id="id288">
<h1>Zależności i powiązania<a class="headerlink" href="#id288" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/drawqueue.h</span></code>: Potencjalnie używany, ale głównie to <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> używa <code class="docutils literal notranslate"><span class="pre">Atlas</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/framebuffer.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> jako „płótna” dla atlasu.</p></li>
<li><p>Używany przez system renderowania (<code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>, <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>) do optymalizacji rysowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FontManager</span></code> używa go do cachowania tekstur fontów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="bitmapfont-h">
<h1>📄 bitmapfont.h<a class="headerlink" href="#bitmapfont-h" title="Link to this heading">#</a></h1>
</section>
<section id="id289">
<h1>Opis ogólny<a class="headerlink" href="#id289" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">bitmapfont.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code>, która reprezentuje font oparty na bitmapie. Jest to kluczowy element systemu renderowania tekstu w aplikacji.</p>
</section>
<section id="id290">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code><a class="headerlink" href="#id290" title="Link to this heading">#</a></h1>
</section>
<section id="id291">
<h1>Opis semantyczny<a class="headerlink" href="#id291" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code> zarządza pojedynczym fontem, który jest zdefiniowany jako obraz (tekstura) zawierający siatkę znaków (glifów). Klasa przechowuje informacje o rozmiarze glifów, ich pozycjach na teksturze oraz szerokościach poszczególnych znaków. Dostarcza metody do rysowania tekstu (które w rzeczywistości delegują zadanie do <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>) oraz do obliczania wymiarów i zawijania tekstu.</p>
</section>
<section id="id292">
<h1>Metody publiczne<a class="headerlink" href="#id292" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">BitmapFont(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code></p></td>
<td class="text-left"><p>Konstruktor, ustawia nazwę fontu i unikalne ID.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">load(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">fontNode)</span></code></p></td>
<td class="text-left"><p>Ładuje definicję fontu z węzła OTML.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">drawText(...)</span></code></p></td>
<td class="text-left"><p>Dodaje do kolejki renderowania zadanie narysowania tekstu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">drawColoredText(...)</span></code></p></td>
<td class="text-left"><p>Dodaje zadanie narysowania tekstu z wieloma kolorami.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">calculateDrawTextCoords(...)</span></code></p></td>
<td class="text-left"><p>Oblicza współrzędne wierzchołków i tekstur dla renderowanego tekstu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::vector&lt;Point&gt;&amp;</span> <span class="pre">calculateGlyphsPositions(...)</span></code></p></td>
<td class="text-left"><p>Oblicza pozycje poszczególnych glifów w tekście.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Size</span> <span class="pre">calculateTextRectSize(...)</span></code></p></td>
<td class="text-left"><p>Oblicza rozmiar prostokąta zajmowanego przez tekst.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">wrapText(...)</span></code></p></td>
<td class="text-left"><p>Złamuje tekst na wiele linii, aby zmieścił się w podanej szerokości.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getId()</span></code></p></td>
<td class="text-left"><p>Zwraca unikalne ID fontu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getName()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę fontu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getGlyphHeight()</span></code></p></td>
<td class="text-left"><p>Zwraca wysokość glifów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">Rect*</span> <span class="pre">getGlyphsTextureCoords()</span></code></p></td>
<td class="text-left"><p>Zwraca tablicę współrzędnych tekstur dla wszystkich glifów.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">Size*</span> <span class="pre">getGlyphsSize()</span></code></p></td>
<td class="text-left"><p>Zwraca tablicę rozmiarów dla wszystkich glifów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">TexturePtr&amp;</span> <span class="pre">getTexture()</span></code></p></td>
<td class="text-left"><p>Zwraca teksturę fontu (może to być tekstura atlasu).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getYOffset()</span></code></p></td>
<td class="text-left"><p>Zwraca przesunięcie Y.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Size</span> <span class="pre">getGlyphSpacing()</span></code></p></td>
<td class="text-left"><p>Zwraca odstępy między glifami.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id293">
<h1>Zmienne prywatne<a class="headerlink" href="#id293" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_name</span></code>: Nazwa fontu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_glyphHeight</span></code>: Wysokość glifu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_firstGlyph</span></code>: Kod ASCII pierwszego znaku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_yOffset</span></code>: Przesunięcie w osi Y.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_id</span></code>: Unikalne ID fontu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_glyphSpacing</span></code>: Odstępy między glifami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_texture</span></code>: Wskaźnik na teksturę fontu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_glyphsTextureCoords[256]</span></code>: Tablica współrzędnych tekstur dla każdego glifu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_glyphsSize[256]</span></code>: Tablica rozmiarów dla każdego glifu.</p></li>
</ul>
</section>
<section id="id294">
<h1>Zależności i powiązania<a class="headerlink" href="#id294" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Deklaracje typów graficznych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/texture.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">Texture</span></code> do przechowywania obrazu fontu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/declarations.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span></code> w metodzie <code class="docutils literal notranslate"><span class="pre">load</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/coordsbuffer.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> do przechowywania geometrii tekstu.</p></li>
<li><p>Jest zarządzana przez <code class="docutils literal notranslate"><span class="pre">FontManager</span></code>.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> i inne komponenty do renderowania tekstu.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="cachedtext-cpp">
<h1>📄 cachedtext.cpp<a class="headerlink" href="#cachedtext-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id295">
<h1>Opis ogólny<a class="headerlink" href="#id295" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">cachedtext.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">CachedText</span></code>, która służy do optymalizacji renderowania tekstu, który nie zmienia się często.</p>
</section>
<section id="klasa-cachedtext">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">CachedText</span></code><a class="headerlink" href="#klasa-cachedtext" title="Link to this heading">#</a></h1>
</section>
<section id="cachedtext-cachedtext">
<h1><code class="docutils literal notranslate"><span class="pre">CachedText::CachedText()</span></code><a class="headerlink" href="#cachedtext-cachedtext" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje domyślny font, wyrównanie do środka (<code class="docutils literal notranslate"><span class="pre">Fw::AlignCenter</span></code>) i inne wartości domyślne.</p>
</section>
<section id="void-cachedtext-draw-const-rect-rect-const-color-color">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CachedText::draw(const</span> <span class="pre">Rect&amp;</span> <span class="pre">rect,</span> <span class="pre">const</span> <span class="pre">Color&amp;</span> <span class="pre">color)</span></code><a class="headerlink" href="#void-cachedtext-draw-const-rect-rect-const-color-color" title="Link to this heading">#</a></h1>
</section>
<section id="id296">
<h1>Opis semantyczny<a class="headerlink" href="#id296" title="Link to this heading">#</a></h1>
<p>Główna metoda rysująca. Renderuje tekst w podanym prostokącie z danym kolorem.</p>
</section>
<section id="id297">
<h1>Działanie<a class="headerlink" href="#id297" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy font jest ustawiony.</p></li>
<li><p>Sprawdza, czy tekst musi zostać „przekeshowany” (<code class="docutils literal notranslate"><span class="pre">m_textMustRecache</span></code>) lub czy zmienił się prostokąt docelowy (<code class="docutils literal notranslate"><span class="pre">m_textCachedScreenCoords</span></code>). Jeśli tak, aktualizuje buforowane koordynaty.</p></li>
<li><p>Wywołuje metodę <code class="docutils literal notranslate"><span class="pre">m_font→drawText()</span></code> lub <code class="docutils literal notranslate"><span class="pre">m_font→drawColoredText()</span></code> w celu dodania zadania rysowania do <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>.</p></li>
</ol>
<blockquote>
<div><p>NOTE: Nazwa „cached” może być nieco myląca. Klasa nie renderuje tekstu do tekstury. Zamiast tego, „keszuje” obliczenia związane z pozycjonowaniem glifów, ale samo rysowanie odbywa się dynamicznie w każdej klatce za pomocą <code class="docutils literal notranslate"><span class="pre">BitmapFont::drawText</span></code>.</p>
</div></blockquote>
</section>
<section id="void-cachedtext-setcoloredtext-const-std-vector-std-string-texts">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CachedText::setColoredText(const</span> <span class="pre">std::vector&lt;std::string&gt;&amp;</span> <span class="pre">texts)</span></code><a class="headerlink" href="#void-cachedtext-setcoloredtext-const-std-vector-std-string-texts" title="Link to this heading">#</a></h1>
<p>Ustawia tekst składający się z fragmentów o różnych kolorach. Parsuje wektor, tworząc wewnętrzną reprezentację <code class="docutils literal notranslate"><span class="pre">m_text</span></code> i <code class="docutils literal notranslate"><span class="pre">m_textColors</span></code>, a następnie wywołuje <code class="docutils literal notranslate"><span class="pre">update()</span></code>.</p>
</section>
<section id="void-cachedtext-update">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CachedText::update()</span></code><a class="headerlink" href="#void-cachedtext-update" title="Link to this heading">#</a></h1>
<p>Prywatna metoda pomocnicza. Oblicza rozmiar tekstu za pomocą <code class="docutils literal notranslate"><span class="pre">m_font→calculateTextRectSize()</span></code> i ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_textMustRecache</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code>, co wymusza przeliczenie geometrii przy następnym wywołaniu <code class="docutils literal notranslate"><span class="pre">draw()</span></code>.</p>
</section>
<section id="void-cachedtext-wraptext-int-maxwidth">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CachedText::wrapText(int</span> <span class="pre">maxWidth)</span></code><a class="headerlink" href="#void-cachedtext-wraptext-int-maxwidth" title="Link to this heading">#</a></h1>
<p>Zawija tekst, aby zmieścił się w podanej szerokości, używając metody <code class="docutils literal notranslate"><span class="pre">m_font→wrapText()</span></code>, a następnie wywołuje <code class="docutils literal notranslate"><span class="pre">update()</span></code>.</p>
</section>
<section id="id298">
<h1>Zależności i powiązania<a class="headerlink" href="#id298" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/cachedtext.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/painter.h</span></code>: Pośrednio, poprzez <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/fontmanager.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_fonts</span></code> do pobrania domyślnego fontu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/bitmapfont.h</span></code>: Kluczowa zależność; używa <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code> do wszystkich operacji na tekście.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="colorarray-h">
<h1>📄 colorarray.h<a class="headerlink" href="#colorarray-h" title="Link to this heading">#</a></h1>
</section>
<section id="id299">
<h1>Opis ogólny<a class="headerlink" href="#id299" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">colorarray.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">ColorArray</span></code>, która jest prostym kontenerem na tablicę kolorów w formacie <code class="docutils literal notranslate"><span class="pre">float</span></code>. Jest używana do przekazywania kolorów dla poszczególnych wierzchołków do systemu renderującego.</p>
</section>
<section id="klasa-colorarray">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ColorArray</span></code><a class="headerlink" href="#klasa-colorarray" title="Link to this heading">#</a></h1>
</section>
<section id="id300">
<h1>Opis semantyczny<a class="headerlink" href="#id300" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ColorArray</span></code> działa jako bufor dla kolorów. Każdy kolor jest reprezentowany przez cztery wartości <code class="docutils literal notranslate"><span class="pre">float</span></code> (R, G, B, A) w zakresie od 0.0 do 1.0. Klasa udostępnia metody do dodawania kolorów i dostępu do surowego wskaźnika na dane, co jest potrzebne do przekazania ich do OpenGL.</p>
</section>
<section id="id301">
<h1>Metody publiczne<a class="headerlink" href="#id301" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addColor(float</span> <span class="pre">r,</span> <span class="pre">float</span> <span class="pre">g,</span> <span class="pre">float</span> <span class="pre">b,</span> <span class="pre">float</span> <span class="pre">a)</span></code></p></td>
<td class="text-left"><p>Dodaje kolor do bufora, podając składowe jako <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addColor(const</span> <span class="pre">Color&amp;</span> <span class="pre">c)</span></code></p></td>
<td class="text-left"><p>Dodaje kolor do bufora, pobierając składowe z obiektu <code class="docutils literal notranslate"><span class="pre">Color</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clear()</span></code></p></td>
<td class="text-left"><p>Czyści bufor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">*colors()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik na początek danych (alias dla <code class="docutils literal notranslate"><span class="pre">data()</span></code>).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">*data()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik na surowe dane bufora.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">colorCount()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę pełnych kolorów w buforze (alias dla <code class="docutils literal notranslate"><span class="pre">count()</span></code>).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">count()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę kolorów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">size()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca całkowitą liczbę wartości <code class="docutils literal notranslate"><span class="pre">float</span></code> w buforze (tj. <code class="docutils literal notranslate"><span class="pre">colorCount()</span> <span class="pre">*</span> <span class="pre">4</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id302">
<h1>Zmienne prywatne<a class="headerlink" href="#id302" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_buffer</span></code>: Obiekt <code class="docutils literal notranslate"><span class="pre">DataBuffer&lt;float&gt;</span></code>, który przechowuje dane kolorów.</p></li>
</ul>
</section>
<section id="id303">
<h1>Zależności i powiązania<a class="headerlink" href="#id303" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/databuffer.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">DataBuffer</span></code> jako wewnętrznego kontenera.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Painter</span></code> do przekazywania tablicy kolorów do shadera, co pozwala na rysowanie gradientów lub wielokolorowych kształtów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="cachedtext-h">
<h1>📄 cachedtext.h<a class="headerlink" href="#cachedtext-h" title="Link to this heading">#</a></h1>
</section>
<section id="id304">
<h1>Opis ogólny<a class="headerlink" href="#id304" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">cachedtext.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">CachedText</span></code>, która jest opakowaniem (wrapperem) ułatwiającym zarządzanie i renderowanie tekstu, który może być keszowany.</p>
</section>
<section id="id305">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">CachedText</span></code><a class="headerlink" href="#id305" title="Link to this heading">#</a></h1>
</section>
<section id="id306">
<h1>Opis semantyczny<a class="headerlink" href="#id306" title="Link to this heading">#</a></h1>
<p>Klasa <code class="docutils literal notranslate"><span class="pre">CachedText</span></code> przechowuje tekst, font, wyrównanie i inne właściwości. Jej głównym celem jest optymalizacja renderowania poprzez unikanie ponownych obliczeń geometrii tekstu w każdej klatce. Kiedy tekst lub jego parametry się zmieniają, metoda <code class="docutils literal notranslate"><span class="pre">update()</span></code> jest wywoływana, aby przeliczyć rozmiar i ustawić flagę konieczności ponownego buforowania współrzędnych.</p>
</section>
<section id="id307">
<h1>Metody publiczne<a class="headerlink" href="#id307" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">CachedText()</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">draw(const</span> <span class="pre">Rect&amp;</span> <span class="pre">rect,</span> <span class="pre">const</span> <span class="pre">Color&amp;</span> <span class="pre">color)</span></code></p></td>
<td class="text-left"><p>Rysuje skeszowany tekst w podanym prostokącie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">wrapText(int</span> <span class="pre">maxWidth)</span></code></p></td>
<td class="text-left"><p>Zawija tekst do podanej szerokości.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setFont(...)</span></code></p></td>
<td class="text-left"><p>Ustawia font i aktualizuje tekst.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setText(...)</span></code></p></td>
<td class="text-left"><p>Ustawia tekst i aktualizuje go.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setColoredText(...)</span></code></p></td>
<td class="text-left"><p>Ustawia tekst składający się z fragmentów o różnych kolorach.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setAlign(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wyrównanie tekstu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Size</span> <span class="pre">getTextSize()</span></code></p></td>
<td class="text-left"><p>Zwraca obliczony rozmiar tekstu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getText()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca przechowywany tekst.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">BitmapFontPtr</span> <span class="pre">getFont()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca używany font.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Fw::AlignmentFlag</span> <span class="pre">getAlign()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca wyrównanie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">hasText()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli tekst nie jest pusty.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id308">
<h1>Zmienne prywatne<a class="headerlink" href="#id308" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_text</span></code>: Główny, niezmieniony tekst.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_textColors</span></code>: Wektor par przechowujący pozycje i kolory dla tekstu wielokolorowego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_textSize</span></code>: Obliczony rozmiar tekstu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_textMustRecache</span></code>: Flaga wskazująca, że geometria tekstu musi zostać przeliczona.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_textCachedScreenCoords</span></code>: Ostatni prostokąt, w którym tekst był rysowany.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_font</span></code>: Używany <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_align</span></code>: Wyrównanie tekstu.</p></li>
</ul>
</section>
<section id="id309">
<h1>Zależności i powiązania<a class="headerlink" href="#id309" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/coordsbuffer.h</span></code>: Pośrednio, przez <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/drawqueue.h</span></code>: Pośrednio, przez <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code>.</p></li>
<li><p>Klasa ta jest prawdopodobnie używana w komponentach UI, które wyświetlają tekst, aby uprościć i zoptymalizować jego renderowanie.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="coordsbuffer-h">
<h1>📄 coordsbuffer.h<a class="headerlink" href="#coordsbuffer-h" title="Link to this heading">#</a></h1>
</section>
<section id="id310">
<h1>Opis ogólny<a class="headerlink" href="#id310" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">coordsbuffer.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code>, która jest specjalizowanym kontenerem do przechowywania współrzędnych wierzchołków (<code class="docutils literal notranslate"><span class="pre">vertex</span></code>) i tekstur (<code class="docutils literal notranslate"><span class="pre">texture</span> <span class="pre">coord</span></code>). Jest to kluczowy element optymalizacyjny, pozwalający na grupowanie geometrii wielu obiektów i rysowanie ich w jednym wywołaniu (batching).</p>
</section>
<section id="klasa-coordsbuffer">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code><a class="headerlink" href="#klasa-coordsbuffer" title="Link to this heading">#</a></h1>
</section>
<section id="id311">
<h1>Opis semantyczny<a class="headerlink" href="#id311" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> przechowuje dwie tablice wierzchołków (<code class="docutils literal notranslate"><span class="pre">VertexArray</span></code>): jedną dla pozycji na ekranie i drugą dla pozycji na teksturze. Dostarcza metody do dodawania prostych prymitywów geometrycznych (trójkąty, prostokąty). Posiada mechanizm „keszowania” danych w sprzętowym buforze VBO (Vertex Buffer Object) w celu dalszej optymalizacji.</p>
<blockquote>
<div><p><strong>NOTE</strong>: Mimo nazwy, <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> jest jednorazowego użytku dla <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>. Po przekazaniu do kolejki, jego zawartość jest przenoszona (<code class="docutils literal notranslate"><span class="pre">std::move</span></code>), a oryginał staje się pusty. To zachowanie jest wymuszone przez usunięcie konstruktora kopiującego i operatora przypisania, a zdefiniowanie konstruktora przenoszącego.</p>
</div></blockquote>
</section>
<section id="id312">
<h1>Metody publiczne<a class="headerlink" href="#id312" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">CoordsBuffer()</span></code></p></td>
<td class="text-left"><p>Konstruktor, tworzy wewnętrzne obiekty <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">~CoordsBuffer()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">CoordsBuffer(CoordsBuffer&amp;&amp;</span> <span class="pre">c)</span></code></p></td>
<td class="text-left"><p>Konstruktor przenoszący.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clear()</span></code></p></td>
<td class="text-left"><p>Czyści oba bufory wierzchołków.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addTriangle(...)</span></code></p></td>
<td class="text-left"><p>Dodaje trójkąt (tylko współrzędne wierzchołków).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addRect(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest)</span></code></p></td>
<td class="text-left"><p>Dodaje prostokąt (tylko współrzędne wierzchołków).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addRect(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest,</span> <span class="pre">const</span> <span class="pre">Rect&amp;</span> <span class="pre">src)</span></code></p></td>
<td class="text-left"><p>Dodaje prostokąt z teksturą.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addQuad(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">addUpsideDownQuad(...)</span></code></p></td>
<td class="text-left"><p>Dodaje czworokąt (quad) - przydatne do renderowania w trybie <code class="docutils literal notranslate"><span class="pre">TriangleStrip</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addBoudingRect(...)</span></code></p></td>
<td class="text-left"><p>Dodaje geometrię ramki o określonej grubości.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addRepeatedRects(...)</span></code></p></td>
<td class="text-left"><p>Wypełnia prostokąt docelowy powtarzającą się teksturą.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">*getVertexArray()</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik na dane wierzchołków.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">*getTextureCoordArray()</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik na dane współrzędnych tekstury.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getVertexCount()</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę wierzchołków.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">HardwareBuffer*</span> <span class="pre">getVertexHardwareCache()</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik na sprzętowy bufor VBO dla wierzchołków (jeśli istnieje).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">cache()</span></code></p></td>
<td class="text-left"><p>Tworzy i wypełnia sprzętowe bufory VBO na podstawie bieżących danych.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Rect</span> <span class="pre">getTextureRect()</span></code></p></td>
<td class="text-left"><p>Oblicza i zwraca prostokąt ograniczający wszystkie współrzędne tekstury.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id313">
<h1>Zmienne prywatne<a class="headerlink" href="#id313" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_locked</span></code>: Flaga używana do optymalizacji (zapobiega niepotrzebnemu kopiowaniu danych).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_vertexArray</span></code>: Wskaźnik na <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code> przechowujący pozycje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_textureCoordArray</span></code>: Wskaźnik na <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code> przechowujący współrzędne tekstury.</p></li>
</ul>
</section>
<section id="id314">
<h1>Zależności i powiązania<a class="headerlink" href="#id314" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/vertexarray.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code> jako podstawowego kontenera na dane.</p></li>
<li><p>Jest intensywnie używana przez <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> i jego podklasy do generowania geometrii, która następnie jest przekazywana do <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> w celu renderowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="deptharray-h">
<h1>📄 deptharray.h<a class="headerlink" href="#deptharray-h" title="Link to this heading">#</a></h1>
</section>
<section id="id315">
<h1>Opis ogólny<a class="headerlink" href="#id315" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">deptharray.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">DepthArray</span></code>, która jest prostym kontenerem na tablicę wartości głębokości (depth) w formacie <code class="docutils literal notranslate"><span class="pre">float</span></code>. Jest to prawdopodobnie część eksperymentalnego lub nie w pełni zaimplementowanego mechanizmu renderowania 3D lub sortowania głębokości.</p>
</section>
<section id="klasa-deptharray">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">DepthArray</span></code><a class="headerlink" href="#klasa-deptharray" title="Link to this heading">#</a></h1>
</section>
<section id="id316">
<h1>Opis semantyczny<a class="headerlink" href="#id316" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">DepthArray</span></code> działa jako bufor dla wartości głębokości (współrzędna Z). Każda wartość <code class="docutils literal notranslate"><span class="pre">float</span></code> w buforze odpowiada jednemu wierzchołkowi. Klasa udostępnia metody do dodawania wartości i dostępu do surowego wskaźnika na dane, co jest potrzebne do przekazania ich do OpenGL jako atrybut wierzchołka.</p>
</section>
<section id="id317">
<h1>Metody publiczne<a class="headerlink" href="#id317" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addDepth(float</span> <span class="pre">depth)</span></code></p></td>
<td class="text-left"><p>Dodaje nową wartość głębokości do bufora.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clear()</span></code></p></td>
<td class="text-left"><p>Czyści bufor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">*depths()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik na początek danych (alias dla <code class="docutils literal notranslate"><span class="pre">data()</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">*data()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik na surowe dane bufora.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">depthCount()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę wartości w buforze (alias dla <code class="docutils literal notranslate"><span class="pre">count()</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">count()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę wartości.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">size()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę wartości.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id318">
<h1>Zmienne prywatne<a class="headerlink" href="#id318" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_buffer</span></code>: Obiekt <code class="docutils literal notranslate"><span class="pre">DataBuffer&lt;float&gt;</span></code>, który przechowuje dane głębokości.</p></li>
</ul>
</section>
<section id="id319">
<h1>Zależności i powiązania<a class="headerlink" href="#id319" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/databuffer.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">DataBuffer</span></code> jako wewnętrznego kontenera.</p></li>
<li><p>W obecnym kodzie jest używana w <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, ale funkcjonalność związana z buforem głębi jest wykomentowana lub nie w pełni zaimplementowana (<code class="docutils literal notranslate"><span class="pre">WITH_DEPTH_BUFFER</span></code>).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id320">
<h1>📄 declarations.h<a class="headerlink" href="#id320" title="Link to this heading">#</a></h1>
</section>
<section id="id321">
<h1>Opis ogólny<a class="headerlink" href="#id321" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">declarations.h</span></code> w module <code class="docutils literal notranslate"><span class="pre">graphics</span></code> służy jako centralny punkt dla wczesnych deklaracji (forward declarations) i definicji typów (<code class="docutils literal notranslate"><span class="pre">typedef</span></code>) związanych z systemem graficznym. Jego głównym celem jest unikanie zależności cyklicznych między plikami nagłówkowymi i minimalizowanie liczby dołączanych plików.</p>
</section>
<section id="id322">
<h1>Wczesne deklaracje (Forward Declarations)<a class="headerlink" href="#id322" title="Link to this heading">#</a></h1>
<p>Plik deklaruje istnienie następujących klas, co pozwala na używanie wskaźników i referencji do nich bez potrzeby dołączania ich pełnych definicji:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Texture</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TextureManager</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Image</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CachedText</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Shader</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code></p></li>
</ul>
</section>
<section id="id323">
<h1>Definicje typów (Typedefs)<a class="headerlink" href="#id323" title="Link to this heading">#</a></h1>
<p>Plik definiuje aliasy dla inteligentnych wskaźników (<code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code>) do klas graficznych, co ułatwia ich użycie i poprawia czytelność kodu.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ImagePtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;Image&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TexturePtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;Texture&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AnimatedTexturePtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;AnimatedTexture&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BitmapFontPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;BitmapFont&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CachedTextPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;CachedText&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FrameBufferPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;FrameBuffer&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ShaderPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;Shader&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ShaderProgramPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;ShaderProgram&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PainterShaderProgramPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;PainterShaderProgram&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ShaderList</span></code>: <code class="docutils literal notranslate"><span class="pre">std::vector&lt;ShaderPtr&gt;</span></code></p></li>
</ul>
</section>
<section id="id324">
<h1>Zależności i powiązania<a class="headerlink" href="#id324" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Dołącza podstawowe definicje i typy, w tym <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/glutil.h</span></code>: Dołącza nagłówki OpenGL/GLES.</p></li>
<li><p>Ten plik jest intensywnie używany w całym module graficznym i w innych modułach, które wchodzą w interakcję z grafiką (np. <code class="docutils literal notranslate"><span class="pre">UI</span></code>).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="coordsbuffer-cpp">
<h1>📄 coordsbuffer.cpp<a class="headerlink" href="#coordsbuffer-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id325">
<h1>Opis ogólny<a class="headerlink" href="#id325" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">coordsbuffer.cpp</span></code> zawiera implementację metod klasy <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code>, która jest buforem na dane geometryczne do renderowania.</p>
</section>
<section id="id326">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code><a class="headerlink" href="#id326" title="Link to this heading">#</a></h1>
</section>
<section id="coordsbuffer-coordsbuffer">
<h1><code class="docutils literal notranslate"><span class="pre">CoordsBuffer::CoordsBuffer()</span></code><a class="headerlink" href="#coordsbuffer-coordsbuffer" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje dwa wewnętrzne bufory: <code class="docutils literal notranslate"><span class="pre">m_vertexArray</span></code> (dla współrzędnych pozycji) i <code class="docutils literal notranslate"><span class="pre">m_textureCoordArray</span></code> (dla współrzędnych tekstury).</p>
</section>
<section id="void-coordsbuffer-addboudingrect-const-rect-dest-int-innerlinewidth">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CoordsBuffer::addBoudingRect(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest,</span> <span class="pre">int</span> <span class="pre">innerLineWidth)</span></code><a class="headerlink" href="#void-coordsbuffer-addboudingrect-const-rect-dest-int-innerlinewidth" title="Link to this heading">#</a></h1>
<p>Dodaje geometrię czterech prostokątów, które razem tworzą ramkę (border) wewnątrz podanego prostokąta <code class="docutils literal notranslate"><span class="pre">dest</span></code> o grubości <code class="docutils literal notranslate"><span class="pre">innerLineWidth</span></code>.</p>
</section>
<section id="void-coordsbuffer-addrepeatedrects-const-rect-dest-const-rect-src">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CoordsBuffer::addRepeatedRects(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest,</span> <span class="pre">const</span> <span class="pre">Rect&amp;</span> <span class="pre">src)</span></code><a class="headerlink" href="#void-coordsbuffer-addrepeatedrects-const-rect-dest-const-rect-src" title="Link to this heading">#</a></h1>
<p>Wypełnia prostokąt docelowy (<code class="docutils literal notranslate"><span class="pre">dest</span></code>) powtarzającym się wzorem z tekstury (<code class="docutils literal notranslate"><span class="pre">src</span></code>). Dzieli obszar <code class="docutils literal notranslate"><span class="pre">dest</span></code> na mniejsze prostokąty o rozmiarze <code class="docutils literal notranslate"><span class="pre">src</span></code> i dodaje je do bufora, odpowiednio przycinając współrzędne tekstury na krawędziach.</p>
</section>
<section id="void-coordsbuffer-unlock-bool-clear">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CoordsBuffer::unlock(bool</span> <span class="pre">clear)</span></code><a class="headerlink" href="#void-coordsbuffer-unlock-bool-clear" title="Link to this heading">#</a></h1>
<p>Metoda związana z wewnętrznym mechanizmem „blokowania” bufora. Kiedy bufor jest zablokowany (<code class="docutils literal notranslate"><span class="pre">m_locked</span></code>), każda operacja dodawania geometrii powoduje jego odblokowanie. Odblokowanie tworzy kopię wewnętrznych <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code>, aby zapobiec modyfikacji danych, które mogły już zostać przesłane do VBO. Jeśli <code class="docutils literal notranslate"><span class="pre">clear</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code>, zamiast kopiowania tworzone są nowe, puste <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code>.</p>
</section>
<section id="rect-coordsbuffer-gettexturerect">
<h1><code class="docutils literal notranslate"><span class="pre">Rect</span> <span class="pre">CoordsBuffer::getTextureRect()</span></code><a class="headerlink" href="#rect-coordsbuffer-gettexturerect" title="Link to this heading">#</a></h1>
<p>Przechodzi przez wszystkie współrzędne tekstury w buforze, aby znaleźć minimalny i maksymalny punkt, a następnie zwraca prostokąt ograniczający (bounding box) dla używanego fragmentu tekstury.</p>
</section>
<section id="id327">
<h1>Zależności i powiązania<a class="headerlink" href="#id327" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/coordsbuffer.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graphics.h</span></code>: Potencjalnie do funkcji związanych z grafiką.</p></li>
<li><p>Jest używana do budowania geometrii przez klasy takie jak <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>, a następnie konsumowana przez <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> i <code class="docutils literal notranslate"><span class="pre">Painter</span></code> do renderowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="drawcache-cpp">
<h1>📄 drawcache.cpp<a class="headerlink" href="#drawcache-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id328">
<h1>Opis ogólny<a class="headerlink" href="#id328" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">drawcache.cpp</span></code> implementuje klasę <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>, która jest kluczowym elementem systemu optymalizacji renderowania. Jej zadaniem jest grupowanie (batching) operacji rysowania, które używają tej samej tekstury (atlasu), aby zminimalizować liczbę wywołań rysujących (draw calls) do OpenGL.</p>
</section>
<section id="id329">
<h1>Zmienne globalne<a class="headerlink" href="#id329" title="Link to this heading">#</a></h1>
</section>
<section id="g-drawcache">
<h1><code class="docutils literal notranslate"><span class="pre">g_drawCache</span></code><a class="headerlink" href="#g-drawcache" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>, używana przez <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> do buforowania operacji.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">DrawCache</span><span class="w"> </span><span class="n">g_drawCache</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-drawcache">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code><a class="headerlink" href="#klasa-drawcache" title="Link to this heading">#</a></h1>
</section>
<section id="void-drawcache-draw">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawCache::draw()</span></code><a class="headerlink" href="#void-drawcache-draw" title="Link to this heading">#</a></h1>
</section>
<section id="id330">
<h1>Opis semantyczny<a class="headerlink" href="#id330" title="Link to this heading">#</a></h1>
<p>Wykonuje zgrupowane operacje rysowania.</p>
</section>
<section id="id331">
<h1>Działanie<a class="headerlink" href="#id331" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Upewnia się, że atlas tekstur jest odłączony (<code class="docutils literal notranslate"><span class="pre">release()</span></code>).</p></li>
<li><p>Jeśli bufor nie jest pusty (<code class="docutils literal notranslate"><span class="pre">m_size</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>), wywołuje <code class="docutils literal notranslate"><span class="pre">g_painter→drawCache()</span></code>, przekazując jej wszystkie zebrane dane wierzchołków, współrzędnych tekstur i kolorów.</p></li>
<li><p>Resetuje licznik <code class="docutils literal notranslate"><span class="pre">m_size</span></code> do zera.</p></li>
</ol>
</section>
<section id="void-drawcache-bind-i-void-drawcache-release">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawCache::bind()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawCache::release()</span></code><a class="headerlink" href="#void-drawcache-bind-i-void-drawcache-release" title="Link to this heading">#</a></h1>
<p>Metody te zarządzają bindowaniem i zwalnianiem <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> atlasu. <code class="docutils literal notranslate"><span class="pre">bind()</span></code> jest wywoływane, gdy do atlasu musi zostać narysowana nowa tekstura. <code class="docutils literal notranslate"><span class="pre">release()</span></code> jest wywoływane przed wykonaniem <code class="docutils literal notranslate"><span class="pre">draw()</span></code>.</p>
</section>
<section id="metody-dodawania-do-bufora">
<h1>Metody dodawania do bufora<a class="headerlink" href="#metody-dodawania-do-bufora" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">addRect(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest,</span> <span class="pre">const</span> <span class="pre">Color&amp;</span> <span class="pre">color)</span></code></strong>: Dodaje prostokąt wypełniony jednolitym kolorem. Współrzędne tekstury są ustawiane na <code class="docutils literal notranslate"><span class="pre">(-10,</span> <span class="pre">-10)</span></code>, co jest sygnałem dla shadera, aby nie używał tekstury.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">addTexturedRect(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest,</span> <span class="pre">const</span> <span class="pre">Rect&amp;</span> <span class="pre">src,</span> <span class="pre">const</span> <span class="pre">Color&amp;</span> <span class="pre">color)</span></code></strong>: Dodaje teksturowany prostokąt.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">addCoords(CoordsBuffer&amp;</span> <span class="pre">coords,</span> <span class="pre">const</span> <span class="pre">Color&amp;</span> <span class="pre">color)</span></code></strong>: Dodaje geometrię z <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> (bez tekstury).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">addTexturedCoords(CoordsBuffer&amp;</span> <span class="pre">coords,</span> <span class="pre">const</span> <span class="pre">Point&amp;</span> <span class="pre">offset,</span> <span class="pre">const</span> <span class="pre">Color&amp;</span> <span class="pre">color)</span></code></strong>: Dodaje geometrię z <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> z teksturą. Przesuwa współrzędne tekstury o podany <code class="docutils literal notranslate"><span class="pre">offset</span></code>, który jest pozycją tekstury w atlasie.</p></li>
</ul>
</section>
<section id="metody-pomocnicze-addrectraw-addcolorraw">
<h1>Metody pomocnicze (<code class="docutils literal notranslate"><span class="pre">addRectRaw</span></code>, <code class="docutils literal notranslate"><span class="pre">addColorRaw</span></code>)<a class="headerlink" href="#metody-pomocnicze-addrectraw-addcolorraw" title="Link to this heading">#</a></h1>
<p>Prywatne metody <code class="docutils literal notranslate"><span class="pre">inline</span></code> do szybkiego zapisu danych do wewnętrznych wektorów (<code class="docutils literal notranslate"><span class="pre">m_destCoord</span></code>, <code class="docutils literal notranslate"><span class="pre">m_srcCoord</span></code>, <code class="docutils literal notranslate"><span class="pre">m_color</span></code>).</p>
</section>
<section id="id332">
<h1>Zależności i powiązania<a class="headerlink" href="#id332" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/drawcache.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/atlas.h</span></code>: Ściśle współpracuje z <code class="docutils literal notranslate"><span class="pre">g_atlas</span></code> w celu bindowania i zwalniania bufora ramki atlasu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/painter.h</span></code>: Wywołuje <code class="docutils literal notranslate"><span class="pre">g_painter→drawCache()</span></code> do finalnego narysowania zgrupowanej geometrii.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">DrawQueueItem</span></code>, aby spróbować zbuforować operację rysowania zamiast wykonywać ją natychmiast.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="drawcache-h">
<h1>📄 drawcache.h<a class="headerlink" href="#drawcache-h" title="Link to this heading">#</a></h1>
</section>
<section id="id333">
<h1>Opis ogólny<a class="headerlink" href="#id333" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">drawcache.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>, która służy jako bufor dla operacji rysowania. Jest to mechanizm optymalizacyjny, który agreguje wiele małych operacji rysowania (np. prostokątów) w jedno duże wywołanie, co znacząco poprawia wydajność renderowania.</p>
</section>
<section id="id334">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code><a class="headerlink" href="#id334" title="Link to this heading">#</a></h1>
</section>
<section id="id335">
<h1>Opis semantyczny<a class="headerlink" href="#id335" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">DrawCache</span></code> przechowuje trzy duże, prealokowane wektory: na współrzędne wierzchołków (<code class="docutils literal notranslate"><span class="pre">m_destCoord</span></code>), współrzędne tekstur (<code class="docutils literal notranslate"><span class="pre">m_srcCoord</span></code>) i kolory (<code class="docutils literal notranslate"><span class="pre">m_color</span></code>). Metody <code class="docutils literal notranslate"><span class="pre">add...</span></code> dodają dane do tych buforów. Gdy bufor jest pełny lub gdy operacja rysowania nie może być zbuforowana, metoda <code class="docutils literal notranslate"><span class="pre">draw()</span></code> jest wywoływana, aby opróżnić bufor i narysować jego zawartość za pomocą jednego wywołania <code class="docutils literal notranslate"><span class="pre">g_painter→drawCache()</span></code>.</p>
</section>
<section id="stale">
<h1>Stałe<a class="headerlink" href="#stale" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MAX_SIZE</span></code>: Maksymalna liczba wierzchołków, jaką może przechować bufor (65536).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HALF_MAX_SIZE</span></code>: Połowa maksymalnego rozmiaru, używana jako próg do opróżnienia bufora.</p></li>
</ul>
</section>
<section id="id336">
<h1>Metody publiczne<a class="headerlink" href="#id336" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">draw()</span></code></p></td>
<td class="text-left"><p>Rysuje zawartość bufora na ekranie i go czyści.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">bind()</span></code></p></td>
<td class="text-left"><p>Bindowanie <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> atlasu (gdy trzeba do niego coś dorysować).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">release()</span></code></p></td>
<td class="text-left"><p>Odpinanie <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> atlasu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">hasSpace(int</span> <span class="pre">size)</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy w buforze jest wystarczająco miejsca na <code class="docutils literal notranslate"><span class="pre">size</span></code> wierzchołków.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">inline</span> <span class="pre">int</span> <span class="pre">getSize()</span></code></p></td>
<td class="text-left"><p>Zwraca aktualną liczbę wierzchołków w buforze.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addRect(...)</span></code></p></td>
<td class="text-left"><p>Dodaje prostokąt wypełniony kolorem.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addTexturedRect(...)</span></code></p></td>
<td class="text-left"><p>Dodaje teksturowany prostokąt.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addCoords(...)</span></code></p></td>
<td class="text-left"><p>Dodaje geometrię z <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> (bez tekstury).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addTexturedCoords(...)</span></code></p></td>
<td class="text-left"><p>Dodaje geometrię z <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> (z teksturą).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id337">
<h1>Zmienne prywatne<a class="headerlink" href="#id337" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_destCoord</span></code>: Wektor na współrzędne docelowe (pozycji).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_srcCoord</span></code>: Wektor na współrzędne źródłowe (tekstury).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_color</span></code>: Wektor na kolory wierzchołków.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_bound</span></code>: Flaga wskazująca, czy atlas jest zbindowany.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_size</span></code>: Aktualna liczba wierzchołków w buforze.</p></li>
</ul>
</section>
<section id="id338">
<h1>Zmienne globalne<a class="headerlink" href="#id338" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_drawCache</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>.</p></li>
</ul>
</section>
<section id="id339">
<h1>Zależności i powiązania<a class="headerlink" href="#id339" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/atlas.h</span></code>: Do zarządzania atlasem tekstur.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/coordsbuffer.h</span></code>: Do przyjmowania geometrii.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graphics.h</span></code>, <code class="docutils literal notranslate"><span class="pre">painter.h</span></code>: Do operacji renderowania.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>, aby grupować operacje rysowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="drawqueue-cpp">
<h1>📄 drawqueue.cpp<a class="headerlink" href="#drawqueue-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id340">
<h1>Opis ogólny<a class="headerlink" href="#id340" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">drawqueue.cpp</span></code> implementuje logikę dla <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> oraz poszczególnych typów zadań rysowania (<code class="docutils literal notranslate"><span class="pre">DrawQueueItem</span></code>). Jest to centralny element systemu renderowania, który kolekcjonuje wszystkie operacje rysowania w jednej klatce, a następnie wykonuje je w odpowiedniej kolejności, z uwzględnieniem warunków takich jak przycinanie, przezroczystość czy rotacja.</p>
</section>
<section id="id341">
<h1>Zmienne globalne<a class="headerlink" href="#id341" title="Link to this heading">#</a></h1>
</section>
<section id="g-drawqueue">
<h1><code class="docutils literal notranslate"><span class="pre">g_drawQueue</span></code><a class="headerlink" href="#g-drawqueue" title="Link to this heading">#</a></h1>
<p>Globalny wskaźnik na aktualnie aktywną kolejkę rysowania. Wątek logiki tworzy nowe instancje <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>, wypełnia je i przypisuje do tego wskaźnika, a wątek renderowania je konsumuje.</p>
</section>
<section id="klasy-drawqueueitem-implementacje">
<h1>Klasy <code class="docutils literal notranslate"><span class="pre">DrawQueueItem</span></code> (implementacje)<a class="headerlink" href="#klasy-drawqueueitem-implementacje" title="Link to this heading">#</a></h1>
<p>Każda klasa dziedzicząca po <code class="docutils literal notranslate"><span class="pre">DrawQueueItem</span></code> implementuje dwie kluczowe metody:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">draw()</span></code></strong>: Wykonuje faktyczną operację rysowania za pomocą <code class="docutils literal notranslate"><span class="pre">g_painter</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">cache()</span></code></strong>: Próbuje zoptymalizować operację, dodając ją do <code class="docutils literal notranslate"><span class="pre">g_drawCache</span></code> zamiast rysować natychmiast. Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli keszowanie się powiodło.</p></li>
</ul>
</section>
<section id="przyklady-implementacji">
<h1>Przykłady implementacji:<a class="headerlink" href="#przyklady-implementacji" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">DrawQueueItemTextureCoords::cache()</span></code></strong>:</p>
<ol class="arabic simple">
<li><p>Sprawdza, czy tekstura może być skeszowana.</p></li>
<li><p>Pobiera pozycję dla tekstury w atlasie za pomocą <code class="docutils literal notranslate"><span class="pre">g_atlas.cache()</span></code>.</p></li>
<li><p>Jeśli tekstury nie było w atlasie (<code class="docutils literal notranslate"><span class="pre">drawNow</span> <span class="pre">==</span> <span class="pre">true</span></code>), rysuje ją do atlasu.</p></li>
<li><p>Jeśli w <code class="docutils literal notranslate"><span class="pre">g_drawCache</span></code> jest miejsce, dodaje do niego geometrię z przesuniętymi współrzędnymi tekstury.</p></li>
</ol>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">DrawQueueItemFilledRect::cache()</span></code></strong>:</p>
<ol class="arabic simple">
<li><p>Sprawdza, czy jest miejsce w <code class="docutils literal notranslate"><span class="pre">g_drawCache</span></code>.</p></li>
<li><p>Jeśli tak, dodaje prostokąt za pomocą <code class="docutils literal notranslate"><span class="pre">g_drawCache.addRect()</span></code>.</p></li>
</ol>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">DrawQueueItemText::draw()</span></code></strong>: Wywołuje <code class="docutils literal notranslate"><span class="pre">g_text.drawText()</span></code>, która jest zoptymalizowana do renderowania tekstu.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">DrawQueueCondition...::start()</span></code> i <code class="docutils literal notranslate"><span class="pre">end()</span></code></strong>: Implementują zmiany stanu <code class="docutils literal notranslate"><span class="pre">g_painter</span></code> na początku i na końcu bloku warunkowego. Na przykład <code class="docutils literal notranslate"><span class="pre">DrawQueueConditionClip</span></code> zmienia i przywraca prostokąt przycinania.</p></li>
</ul>
</section>
<section id="klasa-drawqueue">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code><a class="headerlink" href="#klasa-drawqueue" title="Link to this heading">#</a></h1>
</section>
<section id="void-drawqueue-setframebuffer">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawQueue::setFrameBuffer(...)</span></code><a class="headerlink" href="#void-drawqueue-setframebuffer" title="Link to this heading">#</a></h1>
<p>Konfiguruje <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> do renderowania do bufora ramki (off-screen). Ustawia docelowy i źródłowy prostokąt oraz oblicza skalowanie, jeśli rozmiar bufora przekracza <code class="docutils literal notranslate"><span class="pre">2048x2048</span></code>.</p>
</section>
<section id="void-drawqueue-addtext-i-void-drawqueue-addcoloredtext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawQueue::addText(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawQueue::addColoredText(...)</span></code><a class="headerlink" href="#void-drawqueue-addtext-i-void-drawqueue-addcoloredtext" title="Link to this heading">#</a></h1>
<p>Tworzą zadanie rysowania tekstu. Najpierw dodają tekst do <code class="docutils literal notranslate"><span class="pre">g_text</span></code> (systemu keszującego geometrię tekstu), uzyskując hash, a następnie tworzą odpowiedni <code class="docutils literal notranslate"><span class="pre">DrawQueueItemText</span></code>.</p>
</section>
<section id="void-drawqueue-correctoutfit">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawQueue::correctOutfit(...)</span></code><a class="headerlink" href="#void-drawqueue-correctoutfit" title="Link to this heading">#</a></h1>
<p>Specjalna metoda do skalowania i pozycjonowania wielu <code class="docutils literal notranslate"><span class="pre">DrawQueueItem</span></code> (części stroju postaci), tak aby całość zmieściła się w podanym prostokącie docelowym, zachowując proporcje.</p>
</section>
<section id="void-drawqueue-draw-drawtype-drawtype">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawQueue::draw(DrawType</span> <span class="pre">drawType)</span></code><a class="headerlink" href="#void-drawqueue-draw-drawtype-drawtype" title="Link to this heading">#</a></h1>
</section>
<section id="id342">
<h1>Opis semantyczny<a class="headerlink" href="#id342" title="Link to this heading">#</a></h1>
<p>Główna metoda wykonująca wszystkie zebrane zadania rysowania.</p>
</section>
<section id="id343">
<h1>Działanie<a class="headerlink" href="#id343" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Określa zakres zadań do narysowania na podstawie <code class="docutils literal notranslate"><span class="pre">drawType</span></code> (wszystkie, przed mapą, po mapie).</p></li>
<li><p>Sortuje warunki (<code class="docutils literal notranslate"><span class="pre">m_conditions</span></code>) po ich pozycjach początkowych.</p></li>
<li><p>Jeśli ustawiono skalowanie, modyfikuje macierz projekcji <code class="docutils literal notranslate"><span class="pre">g_painter</span></code>.</p></li>
<li><p>Iteruje po zadaniach w kolejce (<code class="docutils literal notranslate"><span class="pre">m_queue</span></code>):</p>
<ul class="simple">
<li><p>Przed każdym zadaniem, aktywuje i dezaktywuje odpowiednie warunki (<code class="docutils literal notranslate"><span class="pre">start()</span></code>/<code class="docutils literal notranslate"><span class="pre">end()</span></code>).</p></li>
<li><p>Próbuje skeszować zadanie za pomocą <code class="docutils literal notranslate"><span class="pre">item→cache()</span></code>.</p></li>
<li><p>Jeśli keszowanie się nie powiedzie, opróżnia <code class="docutils literal notranslate"><span class="pre">g_drawCache</span></code> i próbuje ponownie.</p></li>
<li><p>Jeśli ponowne keszowanie się nie powiedzie, wykonuje <code class="docutils literal notranslate"><span class="pre">item→draw()</span></code>.</p></li>
<li><p>Regularnie opróżnia <code class="docutils literal notranslate"><span class="pre">g_drawCache</span></code>, gdy osiągnie połowę pojemności.</p></li>
</ul>
</li>
<li><p>Po zakończeniu pętli, opróżnia <code class="docutils literal notranslate"><span class="pre">g_drawCache</span></code> i deaktywuje wszystkie pozostałe warunki.</p></li>
<li><p>Przywraca oryginalną macierz projekcji i stan <code class="docutils literal notranslate"><span class="pre">g_painter</span></code>.</p></li>
</ol>
</section>
<section id="id344">
<h1>Zależności i powiązania<a class="headerlink" href="#id344" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Ściśle współpracuje z <code class="docutils literal notranslate"><span class="pre">g_painter</span></code>, <code class="docutils literal notranslate"><span class="pre">g_atlas</span></code>, <code class="docutils literal notranslate"><span class="pre">g_drawCache</span></code> i <code class="docutils literal notranslate"><span class="pre">g_text</span></code>, orkiestrując proces renderowania.</p></li>
<li><p>Jest tworzona i wypełniana przez <code class="docutils literal notranslate"><span class="pre">UIManager</span></code> i inne moduły logiki gry.</p></li>
<li><p>Jest konsumowana przez <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> w wątku renderowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="fontmanager-cpp">
<h1>📄 fontmanager.cpp<a class="headerlink" href="#fontmanager-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id345">
<h1>Opis ogólny<a class="headerlink" href="#id345" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">fontmanager.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">FontManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_fonts</span></code>) odpowiedzialnym za zarządzanie wszystkimi fontami bitmapowymi w aplikacji.</p>
</section>
<section id="id346">
<h1>Zmienne globalne<a class="headerlink" href="#id346" title="Link to this heading">#</a></h1>
</section>
<section id="g-fonts">
<h1><code class="docutils literal notranslate"><span class="pre">g_fonts</span></code><a class="headerlink" href="#g-fonts" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">FontManager</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">FontManager</span><span class="w"> </span><span class="n">g_fonts</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-fontmanager">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">FontManager</span></code><a class="headerlink" href="#klasa-fontmanager" title="Link to this heading">#</a></h1>
</section>
<section id="fontmanager-fontmanager">
<h1><code class="docutils literal notranslate"><span class="pre">FontManager::FontManager()</span></code><a class="headerlink" href="#fontmanager-fontmanager" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje domyślny font (<code class="docutils literal notranslate"><span class="pre">m_defaultFont</span></code>) jako pusty obiekt <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code>, aby uniknąć błędów, gdy żaden font nie został jeszcze załadowany.</p>
</section>
<section id="void-fontmanager-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FontManager::terminate()</span></code><a class="headerlink" href="#void-fontmanager-terminate" title="Link to this heading">#</a></h1>
<p>Zwalnia wszystkie załadowane fonty, czyszcząc wektor <code class="docutils literal notranslate"><span class="pre">m_fonts</span></code> i resetując wskaźnik na domyślny font.</p>
</section>
<section id="void-fontmanager-clearfonts">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FontManager::clearFonts()</span></code><a class="headerlink" href="#void-fontmanager-clearfonts" title="Link to this heading">#</a></h1>
<p>Czyści wszystkie załadowane fonty i przywraca pusty font domyślny. Używane np. przy przeładowywaniu zasobów.</p>
</section>
<section id="void-fontmanager-importfont-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FontManager::importFont(std::string</span> <span class="pre">file)</span></code><a class="headerlink" href="#void-fontmanager-importfont-std-string-file" title="Link to this heading">#</a></h1>
</section>
<section id="id347">
<h1>Opis semantyczny<a class="headerlink" href="#id347" title="Link to this heading">#</a></h1>
<p>Ładuje definicję fontu z pliku <code class="docutils literal notranslate"><span class="pre">.otfont</span></code>. Metoda jest bezpieczna wątkowo – jeśli jest wywołana z innego wątku niż graficzny, deleguje zadanie do <code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code>.</p>
</section>
<section id="id348">
<h1>Działanie<a class="headerlink" href="#id348" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Rozwiązuje ścieżkę do pliku.</p></li>
<li><p>Parsuje plik OTML.</p></li>
<li><p>Odczytuje nazwę fontu z węzła <code class="docutils literal notranslate"><span class="pre">Font</span></code>.</p></li>
<li><p>Sprawdza, czy font o tej nazwie już nie istnieje.</p></li>
<li><p>Tworzy nowy obiekt <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code> i wywołuje jego metodę <code class="docutils literal notranslate"><span class="pre">load()</span></code>.</p></li>
<li><p>Dodaje nowo załadowany font do wektora <code class="docutils literal notranslate"><span class="pre">m_fonts</span></code>.</p></li>
<li><p>Jeśli font jest oznaczony jako domyślny (<code class="docutils literal notranslate"><span class="pre">default=&quot;true&quot;</span></code>), ustawia go jako <code class="docutils literal notranslate"><span class="pre">m_defaultFont</span></code>.</p></li>
</ol>
</section>
<section id="bool-fontmanager-fontexists-const-std-string-fontname">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">FontManager::fontExists(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fontName)</span></code><a class="headerlink" href="#bool-fontmanager-fontexists-const-std-string-fontname" title="Link to this heading">#</a></h1>
<p>Sprawdza, czy font o podanej nazwie został już załadowany.</p>
</section>
<section id="bitmapfontptr-fontmanager-getfont-const-std-string-fontname">
<h1><code class="docutils literal notranslate"><span class="pre">BitmapFontPtr</span> <span class="pre">FontManager::getFont(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fontName)</span></code><a class="headerlink" href="#bitmapfontptr-fontmanager-getfont-const-std-string-fontname" title="Link to this heading">#</a></h1>
<p>Wyszukuje i zwraca wskaźnik do fontu o podanej nazwie. Jeśli font nie zostanie znaleziony, loguje błąd i zwraca font domyślny, aby zapobiec awarii.</p>
</section>
<section id="id349">
<h1>Zależności i powiązania<a class="headerlink" href="#id349" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/fontmanager.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/atlas.h</span></code>: Pośrednio, przez <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code>, który używa atlasu do cachowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code> do zapewnienia bezpieczeństwa wątkowego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Do znajdowania i odczytywania plików <code class="docutils literal notranslate"><span class="pre">.otfont</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otml.h</span></code>: Do parsowania plików definicji fontów.</p></li>
<li><p>Jest używany przez <code class="docutils literal notranslate"><span class="pre">UIManager</span></code> i <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> do uzyskiwania dostępu do fontów potrzebnych do renderowania tekstu.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="drawqueue-h">
<h1>📄 drawqueue.h<a class="headerlink" href="#drawqueue-h" title="Link to this heading">#</a></h1>
</section>
<section id="id350">
<h1>Opis ogólny<a class="headerlink" href="#id350" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">drawqueue.h</span></code> deklaruje hierarchię klas <code class="docutils literal notranslate"><span class="pre">DrawQueueItem</span></code> oraz klasę <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>, które razem tworzą system kolejkowania operacji rysowania. Jest to centralny mechanizm, który pozwala na zbieranie wszystkich poleceń rysowania w jednej klatce, a następnie ich zoptymalizowane wykonanie.</p>
</section>
<section id="typ-wyliczeniowy-drawtype">
<h1>Typ wyliczeniowy <code class="docutils literal notranslate"><span class="pre">DrawType</span></code><a class="headerlink" href="#typ-wyliczeniowy-drawtype" title="Link to this heading">#</a></h1>
<p>Określa, która część kolejki ma zostać narysowana. Używane do renderowania warstwowego (np. interfejs za mapą i przed mapą).</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Wartość</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">DRAW_ALL</span></code></p></td>
<td class="text-left"><p>Rysuje całą kolejkę.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">DRAW_BEFORE_MAP</span></code></p></td>
<td class="text-left"><p>Rysuje zadania dodane przed <code class="docutils literal notranslate"><span class="pre">markMapPosition()</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">DRAW_AFTER_MAP</span></code></p></td>
<td class="text-left"><p>Rysuje zadania dodane po <code class="docutils literal notranslate"><span class="pre">markMapPosition()</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="hierarchia-klas-drawqueueitem">
<h1>Hierarchia klas <code class="docutils literal notranslate"><span class="pre">DrawQueueItem</span></code><a class="headerlink" href="#hierarchia-klas-drawqueueitem" title="Link to this heading">#</a></h1>
</section>
<section id="struct-drawqueueitem-baza">
<h1><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">DrawQueueItem</span></code> (baza)<a class="headerlink" href="#struct-drawqueueitem-baza" title="Link to this heading">#</a></h1>
<p>Abstrakcyjna klasa bazowa dla wszystkich zadań w kolejce.</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">draw()</span></code></strong>: Metoda wirtualna do wykonania operacji rysowania.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">bool</span> <span class="pre">cache()</span></code></strong>: Metoda wirtualna do próby zbuforowania operacji w <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>.</p></li>
</ul>
</section>
<section id="klasy-pochodne">
<h1>Klasy pochodne<a class="headerlink" href="#klasy-pochodne" title="Link to this heading">#</a></h1>
<p>Każda klasa reprezentuje konkretną operację rysowania:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueItemTexturedRect</span></code>: Rysowanie prostokąta z teksturą.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueItemTextureCoords</span></code>: Rysowanie geometrii z <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> z teksturą.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueItemColoredTextureCoords</span></code>: Rysowanie geometrii z teksturą i wieloma kolorami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueItemImageWithShader</span></code>: Rysowanie geometrii z teksturą i niestandardowym shaderem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueItemFilledRect</span></code>: Rysowanie wypełnionego prostokąta.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueItemClearRect</span></code>: Czyszczenie prostokątnego obszaru.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueItemFillCoords</span></code>: Wypełnianie geometrii z <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> kolorem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueItemText</span></code>, <code class="docutils literal notranslate"><span class="pre">DrawQueueItemTextColored</span></code>: Rysowanie tekstu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueItemLine</span></code>: Rysowanie linii.</p></li>
</ul>
</section>
<section id="hierarchia-klas-drawqueuecondition">
<h1>Hierarchia klas <code class="docutils literal notranslate"><span class="pre">DrawQueueCondition</span></code><a class="headerlink" href="#hierarchia-klas-drawqueuecondition" title="Link to this heading">#</a></h1>
</section>
<section id="struct-drawqueuecondition-baza">
<h1><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">DrawQueueCondition</span></code> (baza)<a class="headerlink" href="#struct-drawqueuecondition-baza" title="Link to this heading">#</a></h1>
<p>Abstrakcyjna klasa bazowa dla warunków modyfikujących stan renderowania dla grupy zadań.</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">m_start</span></code>, <code class="docutils literal notranslate"><span class="pre">m_end</span></code></strong>: Indeksy w <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> określające zakres działania warunku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">start(DrawQueue*)</span></code></strong>: Metoda wywoływana przed pierwszym zadaniem objętym warunkiem.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">end(DrawQueue*)</span></code></strong>: Metoda wywoływana po ostatnim zadaniu objętym warunkiem.</p></li>
</ul>
</section>
<section id="id351">
<h1>Klasy pochodne<a class="headerlink" href="#id351" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueConditionClip</span></code>: Ustawia prostokąt przycinania (clipping).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueConditionRotation</span></code>: Stosuje transformację rotacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawQueueConditionMark</span></code>: Specjalny warunek do rysowania zaznaczenia (np. na przedmiotach).</p></li>
</ul>
</section>
<section id="id352">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code><a class="headerlink" href="#id352" title="Link to this heading">#</a></h1>
</section>
<section id="id353">
<h1>Opis semantyczny<a class="headerlink" href="#id353" title="Link to this heading">#</a></h1>
<p>Główna klasa zarządzająca kolejką. Przechowuje listę zadań (<code class="docutils literal notranslate"><span class="pre">m_queue</span></code>) i warunków (<code class="docutils literal notranslate"><span class="pre">m_conditions</span></code>). Dostarcza metody do dodawania różnych operacji rysowania i do finalnego wykonania całej kolejki.</p>
</section>
<section id="id354">
<h1>Metody publiczne<a class="headerlink" href="#id354" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">draw(DrawType)</span></code></p></td>
<td class="text-left"><p>Wykonuje wszystkie (lub część) operacje rysowania z kolejki.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">add...(...)</span></code></p></td>
<td class="text-left"><p>Metody do dodawania różnych typów <code class="docutils literal notranslate"><span class="pre">DrawQueueItem</span></code> do kolejki.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setFrameBuffer(...)</span></code></p></td>
<td class="text-left"><p>Konfiguruje renderowanie do bufora ramki.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setOpacity(start,</span> <span class="pre">opacity)</span></code></p></td>
<td class="text-left"><p>Stosuje przezroczystość do zadań od indeksu <code class="docutils literal notranslate"><span class="pre">start</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setClip(start,</span> <span class="pre">clip)</span></code></p></td>
<td class="text-left"><p>Dodaje warunek <code class="docutils literal notranslate"><span class="pre">DrawQueueConditionClip</span></code> dla zadań od <code class="docutils literal notranslate"><span class="pre">start</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="framebuffer-cpp">
<h1>📄 framebuffer.cpp<a class="headerlink" href="#framebuffer-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id355">
<h1>Opis ogólny<a class="headerlink" href="#id355" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">framebuffer.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>, która jest opakowaniem (wrapperem) na obiekt bufora ramki (FBO) w OpenGL. Umożliwia renderowanie sceny do tekstury zamiast bezpośrednio na ekran (tzw. off-screen rendering), co jest kluczowe dla efektów post-processingu, skalowania interfejsu i implementacji atlasu tekstur.</p>
</section>
<section id="id356">
<h1>Zmienne globalne<a class="headerlink" href="#id356" title="Link to this heading">#</a></h1>
</section>
<section id="uint-framebuffer-boundfbo">
<h1><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">FrameBuffer::boundFbo</span></code><a class="headerlink" href="#uint-framebuffer-boundfbo" title="Link to this heading">#</a></h1>
<p>Statyczna zmienna członkowska, która śledzi ID aktualnie związanego (aktywnego) FBO. Służy do optymalizacji poprzez unikanie zbędnych wywołańsk <code class="docutils literal notranslate"><span class="pre">glBindFramebuffer</span></code>, jeśli ten sam FBO jest już aktywny.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">uint</span><span class="w"> </span><span class="n">FrameBuffer</span><span class="o">::</span><span class="n">boundFbo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-framebuffer">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code><a class="headerlink" href="#klasa-framebuffer" title="Link to this heading">#</a></h1>
</section>
<section id="framebuffer-framebuffer-bool-withdepth">
<h1><code class="docutils literal notranslate"><span class="pre">FrameBuffer::FrameBuffer(bool</span> <span class="pre">withDepth)</span></code><a class="headerlink" href="#framebuffer-framebuffer-bool-withdepth" title="Link to this heading">#</a></h1>
<p>Konstruktor. Wywołuje <code class="docutils literal notranslate"><span class="pre">internalCreate()</span></code> w celu utworzenia zasobów OpenGL.</p>
<ul class="simple">
<li><p><strong>Parametr <code class="docutils literal notranslate"><span class="pre">withDepth</span></code></strong>: Jeśli <code class="docutils literal notranslate"><span class="pre">true</span></code> i zdefiniowano <code class="docutils literal notranslate"><span class="pre">WITH_DEPTH_BUFFER</span></code>, tworzony jest również bufor głębi, co pozwala na testowanie głębi podczas renderowania do tego bufora.</p></li>
</ul>
</section>
<section id="framebuffer-framebuffer">
<h1><code class="docutils literal notranslate"><span class="pre">FrameBuffer::~FrameBuffer()</span></code><a class="headerlink" href="#framebuffer-framebuffer" title="Link to this heading">#</a></h1>
<p>Destruktor. Zwalnia zasoby OpenGL (<code class="docutils literal notranslate"><span class="pre">glDeleteFramebuffers</span></code>, <code class="docutils literal notranslate"><span class="pre">glDeleteRenderbuffers</span></code>) w sposób bezpieczny wątkowo, dodając zadanie do kolejki dyspozytora graficznego (<code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code>).</p>
</section>
<section id="void-framebuffer-resize-const-size-size">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBuffer::resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code><a class="headerlink" href="#void-framebuffer-resize-const-size-size" title="Link to this heading">#</a></h1>
</section>
<section id="id357">
<h1>Opis semantyczny<a class="headerlink" href="#id357" title="Link to this heading">#</a></h1>
<p>Zmienia rozmiar bufora ramki. Tworzy nową teksturę o podanych wymiarach, która będzie służyć jako „płótno” do rysowania.</p>
</section>
<section id="id358">
<h1>Działanie<a class="headerlink" href="#id358" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy zmiana rozmiaru jest konieczna.</p></li>
<li><p>Tworzy nowy obiekt <code class="docutils literal notranslate"><span class="pre">Texture</span></code> o podanym rozmiarze.</p></li>
<li><p>Jeśli bufor głębi jest włączony, alokuje dla niego pamięć (<code class="docutils literal notranslate"><span class="pre">glRenderbufferStorage</span></code>).</p></li>
<li><p>Wiąże FBO, a następnie dołącza do niego nową teksturę jako bufor koloru (<code class="docutils literal notranslate"><span class="pre">glFramebufferTexture2D</span></code>) oraz opcjonalnie bufor głębi (<code class="docutils literal notranslate"><span class="pre">glFramebufferRenderbuffer</span></code>).</p></li>
<li><p>Sprawdza status FBO (<code class="docutils literal notranslate"><span class="pre">glCheckFramebufferStatus</span></code>), aby upewnić się, że jest on kompletny i gotowy do użycia.</p></li>
</ol>
</section>
<section id="void-framebuffer-bind-const-framebufferptr-depthframebuffer">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBuffer::bind(const</span> <span class="pre">FrameBufferPtr&amp;</span> <span class="pre">depthFramebuffer)</span></code><a class="headerlink" href="#void-framebuffer-bind-const-framebufferptr-depthframebuffer" title="Link to this heading">#</a></h1>
<p>Aktywuje bufor ramki jako cel renderowania. Wszystkie kolejne operacje rysowania będą kierowane do tekstury tego bufora.</p>
<ul class="simple">
<li><p>Zapisuje i resetuje stan <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">internalBind()</span></code>.</p></li>
<li><p>Ustawia rozdzielczość <code class="docutils literal notranslate"><span class="pre">Painter</span></code> na rozmiar bufora.</p></li>
</ul>
</section>
<section id="void-framebuffer-release">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBuffer::release()</span></code><a class="headerlink" href="#void-framebuffer-release" title="Link to this heading">#</a></h1>
<p>Deaktywuje bufor ramki i przywraca poprzedni cel renderowania (zazwyczaj bufor ekranu).</p>
<ul class="simple">
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">internalRelease()</span></code>.</p></li>
<li><p>Przywraca poprzedni stan <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
</ul>
</section>
<section id="void-framebuffer-draw">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBuffer::draw(...)</span></code><a class="headerlink" href="#void-framebuffer-draw" title="Link to this heading">#</a></h1>
<p>Metody te służą do rysowania <em>zawartości</em> (tekstury) bufora ramki na aktualnie aktywnym celu renderowania.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">draw()</span></code>: Rysuje całą teksturę.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">draw(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest,</span> <span class="pre">const</span> <span class="pre">Rect&amp;</span> <span class="pre">src)</span></code>: Rysuje fragment (<code class="docutils literal notranslate"><span class="pre">src</span></code>) tekstury w docelowym prostokącie (<code class="docutils literal notranslate"><span class="pre">dest</span></code>).</p></li>
</ul>
</section>
<section id="void-framebuffer-doscreenshot-std-string-filename">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBuffer::doScreenshot(std::string</span> <span class="pre">fileName)</span></code><a class="headerlink" href="#void-framebuffer-doscreenshot-std-string-filename" title="Link to this heading">#</a></h1>
<p>Odczytuje zawartość pikseli z bufora ramki za pomocą <code class="docutils literal notranslate"><span class="pre">glReadPixels</span></code>, a następnie w osobnym wątku (<code class="docutils literal notranslate"><span class="pre">g_asyncDispatcher</span></code>) zapisuje je do pliku PNG, odwracając obraz w osi Y (konwersja z układu współrzędnych OpenGL).</p>
</section>
<section id="metody-internal">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">internal...</span></code><a class="headerlink" href="#metody-internal" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">internalCreate()</span></code>: Generuje obiekty FBO i RBO.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">internalBind()</span></code> / <code class="docutils literal notranslate"><span class="pre">internalRelease()</span></code>: Bezpośrednio wywołują <code class="docutils literal notranslate"><span class="pre">glBindFramebuffer</span></code> i zarządzają statyczną zmienną <code class="docutils literal notranslate"><span class="pre">boundFbo</span></code>.</p></li>
</ul>
</section>
<section id="id359">
<h1>Zależności i powiązania<a class="headerlink" href="#id359" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/framebuffer.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graphics.h</span></code>: Do sprawdzania błędów OpenGL i dostępu do <code class="docutils literal notranslate"><span class="pre">g_graphics</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/texture.h</span></code>: <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> używa obiektu <code class="docutils literal notranslate"><span class="pre">Texture</span></code> jako swojego bufora koloru.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platformwindow.h</span></code>: Dostęp do <code class="docutils literal notranslate"><span class="pre">g_window</span></code> (potencjalnie).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/asyncdispatcher.h</span></code>: Używany do asynchronicznego zapisu zrzutów ekranu.</p></li>
<li><p>Jest zarządzana przez <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="framebuffer-h">
<h1>📄 framebuffer.h<a class="headerlink" href="#framebuffer-h" title="Link to this heading">#</a></h1>
</section>
<section id="id360">
<h1>Opis ogólny<a class="headerlink" href="#id360" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">framebuffer.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>, która jest obiektowym interfejsem do zarządzania buforami ramki (FBO) w OpenGL. Pozwala na renderowanie sceny do tekstury zamiast bezpośrednio na ekran.</p>
</section>
<section id="id361">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code><a class="headerlink" href="#id361" title="Link to this heading">#</a></h1>
</section>
<section id="id362">
<h1>Opis semantyczny<a class="headerlink" href="#id362" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code> enkapsuluje obiekt FBO z OpenGL oraz powiązaną z nim teksturę (jako bufor koloru) i opcjonalnie bufor głębi. Udostępnia metody do bindowania (aktywacji), zwalniania, zmiany rozmiaru i rysowania zawartości bufora.</p>
</section>
<section id="id363">
<h1>Metody publiczne<a class="headerlink" href="#id363" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">FrameBuffer(bool</span> <span class="pre">withDepth</span> <span class="pre">=</span> <span class="pre">false)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">~FrameBuffer()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code></p></td>
<td class="text-left"><p>Zmienia rozmiar bufora i powiązanej tekstury.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">bind(...)</span></code></p></td>
<td class="text-left"><p>Ustawia ten bufor jako aktywny cel renderowania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">release()</span></code></p></td>
<td class="text-left"><p>Przywraca poprzedni cel renderowania.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">draw()</span></code> / <code class="docutils literal notranslate"><span class="pre">draw(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest)</span></code> / <code class="docutils literal notranslate"><span class="pre">draw(...)</span></code></p></td>
<td class="text-left"><p>Rysuje teksturę tego bufora na aktualnie aktywnym celu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setSmooth(bool</span> <span class="pre">enabled)</span></code></p></td>
<td class="text-left"><p>Włącza/wyłącza wygładzanie (filtrowanie liniowe) dla tekstury bufora.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">TexturePtr</span> <span class="pre">getTexture()</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik do tekstury, do której renderuje bufor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Size</span> <span class="pre">getSize()</span></code></p></td>
<td class="text-left"><p>Zwraca rozmiar bufora.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isSmooth()</span></code></p></td>
<td class="text-left"><p>Zwraca stan wygładzania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">getDepthRenderBuffer()</span></code></p></td>
<td class="text-left"><p>(Tylko z <code class="docutils literal notranslate"><span class="pre">WITH_DEPTH_BUFFER</span></code>) Zwraca ID bufora głębi.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">hasDepth()</span></code></p></td>
<td class="text-left"><p>(Tylko z <code class="docutils literal notranslate"><span class="pre">WITH_DEPTH_BUFFER</span></code>) Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli bufor posiada bufor głębi.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;uint32_t&gt;</span> <span class="pre">readPixels()</span></code></p></td>
<td class="text-left"><p>Odczytuje zawartość bufora do pamięci systemowej.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">doScreenshot(std::string</span> <span class="pre">fileName)</span></code></p></td>
<td class="text-left"><p>Zapisuje zawartość bufora do pliku PNG.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id364">
<h1>Zmienne prywatne<a class="headerlink" href="#id364" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_texture</span></code>: Wskaźnik na obiekt <code class="docutils literal notranslate"><span class="pre">Texture</span></code> używany jako bufor koloru.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_fbo</span></code>: ID obiektu FBO w OpenGL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_prevBoundFbo</span></code>: Przechowuje ID poprzednio aktywnego FBO, aby można było go przywrócić.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_smooth</span></code>: Flaga wygładzania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_depthRbo</span></code>, <code class="docutils literal notranslate"><span class="pre">m_depth</span></code>: (Tylko z <code class="docutils literal notranslate"><span class="pre">WITH_DEPTH_BUFFER</span></code>) ID bufora głębi i flaga jego istnienia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boundFbo</span></code>: Statyczna zmienna śledząca globalnie aktywny FBO.</p></li>
</ul>
</section>
<section id="id365">
<h1>Zależności i powiązania<a class="headerlink" href="#id365" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Definicje typów, np. <code class="docutils literal notranslate"><span class="pre">TexturePtr</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/texture.h</span></code>: Wymaga pełnej definicji <code class="docutils literal notranslate"><span class="pre">Texture</span></code>.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code>. Używana przez <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, <code class="docutils literal notranslate"><span class="pre">Atlas</span></code> i w głównej pętli renderowania w <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="framebuffermanager-cpp">
<h1>📄 framebuffermanager.cpp<a class="headerlink" href="#framebuffermanager-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id366">
<h1>Opis ogólny<a class="headerlink" href="#id366" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">framebuffermanager.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_framebuffers</span></code>) odpowiedzialnym za tworzenie i zarządzanie obiektami <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>.</p>
</section>
<section id="id367">
<h1>Zmienne globalne<a class="headerlink" href="#id367" title="Link to this heading">#</a></h1>
</section>
<section id="g-framebuffers">
<h1><code class="docutils literal notranslate"><span class="pre">g_framebuffers</span></code><a class="headerlink" href="#g-framebuffers" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">FrameBufferManager</span><span class="w"> </span><span class="n">g_framebuffers</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-framebuffermanager">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code><a class="headerlink" href="#klasa-framebuffermanager" title="Link to this heading">#</a></h1>
</section>
<section id="void-framebuffermanager-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBufferManager::init()</span></code><a class="headerlink" href="#void-framebuffermanager-init" title="Link to this heading">#</a></h1>
</section>
<section id="id368">
<h1>Opis semantyczny<a class="headerlink" href="#id368" title="Link to this heading">#</a></h1>
<p>Inicjalizuje menedżera. Tworzy dwa predefiniowane, „tymczasowe” bufory ramki, które mogą być używane przez różne części systemu do krótkotrwałych operacji renderowania poza ekranem, bez potrzeby tworzenia i niszczenia własnych buforów.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_temporaryFramebuffer</span></code>: Ogólnego przeznaczenia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_drawQueueTemporaryFramebuffer</span></code>: Prawdopodobnie używany przez <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> do specyficznych operacji.</p></li>
</ul>
</section>
<section id="void-framebuffermanager-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBufferManager::terminate()</span></code><a class="headerlink" href="#void-framebuffermanager-terminate" title="Link to this heading">#</a></h1>
<p>Zwalnia wszystkie utworzone bufory ramki, w tym tymczasowe, czyszcząc listę <code class="docutils literal notranslate"><span class="pre">m_framebuffers</span></code>.</p>
</section>
<section id="framebufferptr-framebuffermanager-createframebuffer-bool-withdepth">
<h1><code class="docutils literal notranslate"><span class="pre">FrameBufferPtr</span> <span class="pre">FrameBufferManager::createFrameBuffer(bool</span> <span class="pre">withDepth)</span></code><a class="headerlink" href="#framebufferptr-framebuffermanager-createframebuffer-bool-withdepth" title="Link to this heading">#</a></h1>
</section>
<section id="id369">
<h1>Opis semantyczny<a class="headerlink" href="#id369" title="Link to this heading">#</a></h1>
<p>Metoda fabryczna do tworzenia nowych obiektów <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>.</p>
</section>
<section id="id370">
<h1>Działanie<a class="headerlink" href="#id370" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Tworzy nową instancję <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>, przekazując flagę <code class="docutils literal notranslate"><span class="pre">withDepth</span></code>.</p></li>
<li><p>Dodaje nowo utworzony bufor do wewnętrznej listy <code class="docutils literal notranslate"><span class="pre">m_framebuffers</span></code> w celu śledzenia.</p></li>
<li><p>Zwraca wskaźnik na nowo utworzony obiekt.</p></li>
</ol>
</section>
<section id="id371">
<h1>Zależności i powiązania<a class="headerlink" href="#id371" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/framebuffermanager.h</span></code>: Plik nagłówkowy.</p></li>
<li><p>Klasa ta jest używana przez <code class="docutils literal notranslate"><span class="pre">Atlas</span></code> do tworzenia swoich „płócien” oraz przez <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> do tworzenia buforów dla głównej sceny i mapy.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="graph-cpp">
<h1>📄 graph.cpp<a class="headerlink" href="#graph-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id372">
<h1>Opis ogólny<a class="headerlink" href="#id372" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">graph.cpp</span></code> implementuje klasę <code class="docutils literal notranslate"><span class="pre">Graph</span></code>, która służy do wizualizacji danych w czasie rzeczywistym w formie prostego wykresu liniowego. Jest to narzędzie głównie do celów debugowania i profilowania wydajności.</p>
</section>
<section id="id373">
<h1>Zmienne globalne<a class="headerlink" href="#id373" title="Link to this heading">#</a></h1>
</section>
<section id="g-graphs-graph-last-1">
<h1><code class="docutils literal notranslate"><span class="pre">g_graphs[GRAPH_LAST</span> <span class="pre">+</span> <span class="pre">1]</span></code><a class="headerlink" href="#g-graphs-graph-last-1" title="Link to this heading">#</a></h1>
<p>Globalna tablica instancji <code class="docutils literal notranslate"><span class="pre">Graph</span></code>, gdzie każda instancja odpowiada za śledzenie i rysowanie innego parametru (np. czasu klatki, liczby wywołań rysujących, opóźnienia sieciowego).</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Graph</span><span class="w"> </span><span class="n">g_graphs</span><span class="p">[</span><span class="n">GRAPH_LAST</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">{</span><span class="s">&quot;Total frame time&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="c1">// ... inne definicje</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="klasa-graph">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Graph</span></code><a class="headerlink" href="#klasa-graph" title="Link to this heading">#</a></h1>
</section>
<section id="graph-graph-const-std-string-name-size-t-capacity">
<h1><code class="docutils literal notranslate"><span class="pre">Graph::Graph(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">size_t</span> <span class="pre">capacity)</span></code><a class="headerlink" href="#graph-graph-const-std-string-name-size-t-capacity" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje wykres z podaną nazwą i maksymalną liczbą próbek do przechowywania.</p>
</section>
<section id="void-graph-draw-const-rect-dest">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graph::draw(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest)</span></code><a class="headerlink" href="#void-graph-draw-const-rect-dest" title="Link to this heading">#</a></h1>
</section>
<section id="id374">
<h1>Opis semantyczny<a class="headerlink" href="#id374" title="Link to this heading">#</a></h1>
<p>Rysuje wykres w podanym prostokącie ekranu. Metoda musi być wywoływana z wątku graficznego.</p>
</section>
<section id="id375">
<h1>Działanie<a class="headerlink" href="#id375" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Rysuje tło i ramkę wykresu.</p></li>
<li><p>Rysuje nazwę wykresu.</p></li>
<li><p>Pobiera <code class="docutils literal notranslate"><span class="pre">elements</span></code> ostatnich próbek z <code class="docutils literal notranslate"><span class="pre">m_values</span></code> (tyle, ile zmieści się w <code class="docutils literal notranslate"><span class="pre">dest</span></code>).</p></li>
<li><p>Znajduje minimalną i maksymalną wartość w pobranym zakresie.</p></li>
<li><p>Normalizuje wartości i tworzy geometrię linii wykresu.</p></li>
<li><p>Rysuje etykiety z wartością minimalną, maksymalną i ostatnią.</p></li>
<li><p>Rysuje linię wykresu za pomocą <code class="docutils literal notranslate"><span class="pre">g_painter→drawLine()</span></code>.</p></li>
</ol>
</section>
<section id="void-graph-clear">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graph::clear()</span></code><a class="headerlink" href="#void-graph-clear" title="Link to this heading">#</a></h1>
<p>Czyści wszystkie zebrane dane z wykresu.</p>
</section>
<section id="void-graph-addvalue-int-value-bool-ignoresmallvalues">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graph::addValue(int</span> <span class="pre">value,</span> <span class="pre">bool</span> <span class="pre">ignoreSmallValues)</span></code><a class="headerlink" href="#void-graph-addvalue-int-value-bool-ignoresmallvalues" title="Link to this heading">#</a></h1>
</section>
<section id="id376">
<h1>Opis semantyczny<a class="headerlink" href="#id376" title="Link to this heading">#</a></h1>
<p>Dodaje nową próbkę danych do wykresu. Metoda jest bezpieczna wątkowo dzięki użyciu <code class="docutils literal notranslate"><span class="pre">std::mutex</span></code>.</p>
</section>
<section id="id377">
<h1>Działanie<a class="headerlink" href="#id377" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Opcjonalnie ignoruje małe, powtarzające się wartości, aby wykres był bardziej czytelny.</p></li>
<li><p>Dodaje nową wartość na koniec kolejki <code class="docutils literal notranslate"><span class="pre">m_values</span></code>.</p></li>
<li><p>Jeśli kolejka przekracza pojemność, usuwa najstarszą wartość.</p></li>
</ol>
</section>
<section id="id378">
<h1>Zależności i powiązania<a class="headerlink" href="#id378" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graph.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/painter.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_painter</span></code> do rysowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/textrender.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_text</span></code> do rysowania etykiet.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Używany do walidacji wątku.</p></li>
<li><p>Jest używana w różnych częściach aplikacji (<code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>, <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>) do zbierania danych o wydajności, które są następnie rysowane w głównej pętli renderowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="graph-h">
<h1>📄 graph.h<a class="headerlink" href="#graph-h" title="Link to this heading">#</a></h1>
</section>
<section id="id379">
<h1>Opis ogólny<a class="headerlink" href="#id379" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">graph.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Graph</span></code> oraz powiązane z nią typy wyliczeniowe. Jest to narzędzie do wizualizacji danych w czasie rzeczywistym, przeznaczone do debugowania i profilowania.</p>
</section>
<section id="typ-wyliczeniowy-graphtype">
<h1>Typ wyliczeniowy <code class="docutils literal notranslate"><span class="pre">GraphType</span></code><a class="headerlink" href="#typ-wyliczeniowy-graphtype" title="Link to this heading">#</a></h1>
<p>Definiuje stałe dla różnych typów wykresów, które mogą być śledzone w aplikacji.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Nazwa</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">GRAPH_TOTAL_FRAME_TIME</span></code></p></td>
<td class="text-left"><p>Całkowity czas klatki.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">GRAPH_CPU_FRAME_TIME</span></code></p></td>
<td class="text-left"><p>Czas renderowania po stronie CPU.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">GRAPH_GPU_CALLS</span></code></p></td>
<td class="text-left"><p>Liczba wywołań do API graficznego.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">GRAPH_GPU_DRAWS</span></code></p></td>
<td class="text-left"><p>Liczba operacji rysowania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">GRAPH_PROCESSING_POLL</span></code></p></td>
<td class="text-left"><p>Czas przetwarzania zdarzeń w wątku logiki.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">GRAPH_GRAPHICS_POLL</span></code></p></td>
<td class="text-left"><p>Czas przetwarzania zdarzeń w wątku graficznym.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">GRAPH_DISPATCHER_EVENTS</span></code></p></td>
<td class="text-left"><p>Liczba zdarzeń w głównym dyspozytorze.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">GRAPH_GRAPHICS_EVENTS</span></code></p></td>
<td class="text-left"><p>Liczba zdarzeń w dyspozytorze graficznym.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">GRAPH_LATENCY</span></code></p></td>
<td class="text-left"><p>Opóźnienie sieciowe (ping).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id380">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Graph</span></code><a class="headerlink" href="#id380" title="Link to this heading">#</a></h1>
</section>
<section id="id381">
<h1>Opis semantyczny<a class="headerlink" href="#id381" title="Link to this heading">#</a></h1>
<p>Klasa <code class="docutils literal notranslate"><span class="pre">Graph</span></code> przechowuje kolejkę (<code class="docutils literal notranslate"><span class="pre">std::deque</span></code>) ostatnich wartości liczbowych i udostępnia metodę do narysowania ich w postaci prostego wykresu liniowego. Jest bezpieczna wątkowo przy dodawaniu wartości.</p>
</section>
<section id="id382">
<h1>Stałe<a class="headerlink" href="#id382" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MAX_CAPACITY</span></code>: Maksymalna liczba próbek, jaką może przechować wykres.</p></li>
</ul>
</section>
<section id="id383">
<h1>Metody publiczne<a class="headerlink" href="#id383" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Graph(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">draw(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest)</span></code></p></td>
<td class="text-left"><p>Rysuje wykres w podanym prostokącie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clear()</span></code></p></td>
<td class="text-left"><p>Czyści dane wykresu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addValue(int</span> <span class="pre">value,</span> <span class="pre">bool</span> <span class="pre">ignoreSmallValues</span> <span class="pre">=</span> <span class="pre">false)</span></code></p></td>
<td class="text-left"><p>Dodaje nową wartość do wykresu.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id384">
<h1>Zmienne prywatne<a class="headerlink" href="#id384" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_name</span></code>: Nazwa wykresu, wyświetlana jako tytuł.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_capacity</span></code>: Maksymalna liczba przechowywanych próbek.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_ignores</span></code>: Licznik ignorowanych małych wartości.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_values</span></code>: Kolejka przechowująca dane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_mutex</span></code>: Mutex chroniący dostęp do <code class="docutils literal notranslate"><span class="pre">m_values</span></code>.</p></li>
</ul>
</section>
<section id="id385">
<h1>Zmienne globalne<a class="headerlink" href="#id385" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_graphs[GRAPH_LAST</span> <span class="pre">+</span> <span class="pre">1]</span></code>: Globalna tablica, w której przechowywane są instancje <code class="docutils literal notranslate"><span class="pre">Graph</span></code> dla każdego typu z <code class="docutils literal notranslate"><span class="pre">GraphType</span></code>.</p></li>
</ul>
</section>
<section id="id386">
<h1>Zależności i powiązania<a class="headerlink" href="#id386" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> do rysowania informacji debugowania. Dane są do niej dodawane z różnych części systemu, np. z pętli głównej, <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code>, <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="glutil-h">
<h1>📄 glutil.h<a class="headerlink" href="#glutil-h" title="Link to this heading">#</a></h1>
</section>
<section id="id387">
<h1>Opis ogólny<a class="headerlink" href="#id387" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">glutil.h</span></code> (GL Utility) jest plikiem nagłówkowym, którego jedynym zadaniem jest włączenie odpowiednich nagłówków OpenGL, OpenGL ES, EGL lub GLEW, w zależności od platformy i opcji kompilacji. Działa jako centralny punkt dołączania bibliotek graficznych, co upraszcza zarządzanie zależnościami w innych plikach.</p>
</section>
<section id="logika-warunkowego-dolaczania">
<h1>Logika warunkowego dołączania<a class="headerlink" href="#logika-warunkowego-dolaczania" title="Link to this heading">#</a></h1>
<p>Plik używa dyrektyw preprocesora do wyboru odpowiednich nagłówków:</p>
<ol class="arabic simple">
<li><p><strong>Android lub Emscripten (<code class="docutils literal notranslate"><span class="pre">ANDROID</span></code> || <code class="docutils literal notranslate"><span class="pre">__EMSCRIPTEN__</span></code>)</strong>:</p>
<ul class="simple">
<li><p>Dołączane są nagłówki <strong>OpenGL ES 2.0</strong> (<code class="docutils literal notranslate"><span class="pre">&lt;GLES2/gl2.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;GLES2/gl2ext.h&gt;</span></code>) oraz <strong>EGL</strong> (<code class="docutils literal notranslate"><span class="pre">&lt;EGL/egl.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;EGL/eglext.h&gt;</span></code>). EGL jest interfejsem, który łączy API renderowania (jak OpenGL ES) z natywnym systemem okienkowym platformy.</p></li>
</ul>
</li>
<li><p><strong>Inne platformy z <code class="docutils literal notranslate"><span class="pre">OPENGL_ES</span></code></strong>:</p>
<ul class="simple">
<li><p>Podobnie jak wyżej, dołączane są nagłówki OpenGL ES 2.0 i EGL. Definiowane są również makra <code class="docutils literal notranslate"><span class="pre">GL_GLEXT_PROTOTYPES</span></code>, <code class="docutils literal notranslate"><span class="pre">EGL_EGL_PROTOTYPES</span></code>, aby zapewnić dostęp do prototypów funkcji.</p></li>
</ul>
</li>
<li><p><strong>Domyślnie (Desktop - Windows/Linux/macOS)</strong>:</p>
<ul class="simple">
<li><p>Dołączana jest biblioteka <strong>GLEW</strong> (<code class="docutils literal notranslate"><span class="pre">&lt;GL/glew.h&gt;</span></code>). GLEW (OpenGL Extension Wrangler) jest biblioteką, która upraszcza zarządzanie i ładowanie rozszerzeń OpenGL, co jest konieczne na platformach desktopowych.</p></li>
<li><p>Na systemach innych niż Windows, <code class="docutils literal notranslate"><span class="pre">GLEW_STATIC</span></code> jest definiowane, aby linkować GLEW statycznie.</p></li>
</ul>
</li>
</ol>
</section>
<section id="id388">
<h1>Zależności i powiązania<a class="headerlink" href="#id388" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Ten plik nie ma zależności od innych plików projektu.</p></li>
<li><p>Jest dołączany przez <code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>, co sprawia, że definicje OpenGL są dostępne we wszystkich plikach modułu graficznego.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="graphics-cpp">
<h1>📄 graphics.cpp<a class="headerlink" href="#graphics-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id389">
<h1>Opis ogólny<a class="headerlink" href="#id389" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">graphics.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Graphics</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_graphics</span></code>) odpowiedzialnym za inicjalizację i zarządzanie globalnym stanem silnika graficznego opartego na OpenGL.</p>
</section>
<section id="id390">
<h1>Zmienne globalne<a class="headerlink" href="#id390" title="Link to this heading">#</a></h1>
</section>
<section id="g-graphics">
<h1><code class="docutils literal notranslate"><span class="pre">g_graphics</span></code><a class="headerlink" href="#g-graphics" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">Graphics</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Graphics</span><span class="w"> </span><span class="n">g_graphics</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-graphics">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Graphics</span></code><a class="headerlink" href="#klasa-graphics" title="Link to this heading">#</a></h1>
</section>
<section id="graphics-graphics">
<h1><code class="docutils literal notranslate"><span class="pre">Graphics::Graphics()</span></code><a class="headerlink" href="#graphics-graphics" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje domyślną maksymalną wielkość tekstury na <code class="docutils literal notranslate"><span class="pre">2048</span></code>.</p>
</section>
<section id="void-graphics-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graphics::init()</span></code><a class="headerlink" href="#void-graphics-init" title="Link to this heading">#</a></h1>
</section>
<section id="id391">
<h1>Opis semantyczny<a class="headerlink" href="#id391" title="Link to this heading">#</a></h1>
<p>Główna metoda inicjalizująca. Uruchamia i konfiguruje kontekst OpenGL oraz inicjalizuje wszystkie pod-menedżery graficzne.</p>
</section>
<section id="id392">
<h1>Działanie<a class="headerlink" href="#id392" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Odczytuje i zapisuje informacje o sterowniku graficznym (<code class="docutils literal notranslate"><span class="pre">GL_VENDOR</span></code>, <code class="docutils literal notranslate"><span class="pre">GL_RENDERER</span></code>, <code class="docutils literal notranslate"><span class="pre">GL_VERSION</span></code>, <code class="docutils literal notranslate"><span class="pre">GL_EXTENSIONS</span></code>) za pomocą <code class="docutils literal notranslate"><span class="pre">glGetString</span></code>.</p></li>
<li><p>Loguje te informacje.</p></li>
<li><p><strong>Na platformach desktopowych</strong>:</p>
<ul class="simple">
<li><p>Sprawdza, czy wersja OpenGL jest co najmniej 2.0.</p></li>
<li><p>Inicjalizuje GLEW (<code class="docutils literal notranslate"><span class="pre">glewInit()</span></code>).</p></li>
<li><p>Sprawdza, czy dostępne są rozszerzenia FBO (Framebuffer Object) i w razie potrzeby mapuje funkcje <code class="docutils literal notranslate"><span class="pre">...EXT</span></code> na standardowe nazwy.</p></li>
</ul>
</li>
<li><p>Włącza globalnie mieszanie kolorów (<code class="docutils literal notranslate"><span class="pre">glEnable(GL_BLEND)</span></code>).</p></li>
<li><p>Pobiera maksymalny obsługiwany rozmiar tekstury z <code class="docutils literal notranslate"><span class="pre">GL_MAX_TEXTURE_SIZE</span></code>.</p></li>
<li><p>(Opcjonalnie) Sprawdza wsparcie dla bufora głębi.</p></li>
<li><p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_ok</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code>, sygnalizując pomyślną inicjalizację.</p></li>
<li><p>Tworzy i bindowanie globalny obiekt <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
<li><p>Inicjalizuje menedżery: <code class="docutils literal notranslate"><span class="pre">g_textures</span></code>, <code class="docutils literal notranslate"><span class="pre">g_framebuffers</span></code>, <code class="docutils literal notranslate"><span class="pre">g_atlas</span></code>, <code class="docutils literal notranslate"><span class="pre">g_text</span></code>.</p></li>
</ol>
</section>
<section id="void-graphics-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graphics::terminate()</span></code><a class="headerlink" href="#void-graphics-terminate" title="Link to this heading">#</a></h1>
<p>Zwalnia zasoby w odwrotnej kolejności do inicjalizacji, wywołując <code class="docutils literal notranslate"><span class="pre">terminate()</span></code> na wszystkich pod-menedżerach oraz niszcząc obiekt <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p>
</section>
<section id="void-graphics-resize-const-size-size">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graphics::resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code><a class="headerlink" href="#void-graphics-resize-const-size-size" title="Link to this heading">#</a></h1>
<p>Aktualizuje rozmiar viewportu. Ustawia <code class="docutils literal notranslate"><span class="pre">m_viewportSize</span></code> i przekazuje nowy rozmiar do <code class="docutils literal notranslate"><span class="pre">g_painter</span></code>, który z kolei aktualizuje macierz projekcji i <code class="docutils literal notranslate"><span class="pre">glViewport</span></code>.</p>
</section>
<section id="void-graphics-checkforerror">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graphics::checkForError(...)</span></code><a class="headerlink" href="#void-graphics-checkforerror" title="Link to this heading">#</a></h1>
<p>Metoda pomocnicza, która sprawdza błędy OpenGL za pomocą <code class="docutils literal notranslate"><span class="pre">glGetError()</span></code>. Jeśli wystąpił błąd, loguje go wraz z informacją o funkcji, pliku i numerze linii, w której został wykryty. W trybie debugowania powoduje to błąd krytyczny.</p>
</section>
<section id="id393">
<h1>Zależności i powiązania<a class="headerlink" href="#id393" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graphics.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fontmanager.h</span></code>, <code class="docutils literal notranslate"><span class="pre">painter.h</span></code>, <code class="docutils literal notranslate"><span class="pre">atlas.h</span></code>, <code class="docutils literal notranslate"><span class="pre">texturemanager.h</span></code>, <code class="docutils literal notranslate"><span class="pre">framebuffermanager.h</span></code>, <code class="docutils literal notranslate"><span class="pre">textrender.h</span></code>: Inicjalizuje i zarządza tymi kluczowymi komponentami graficznymi.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platformwindow.h</span></code>: Pośrednio, poprzez <code class="docutils literal notranslate"><span class="pre">g_window</span></code>, od którego zależy kontekst OpenGL.</p></li>
<li><p>Jest to centralna klasa-menedżer dla całego podsystemu graficznego.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="graphics-h">
<h1>📄 graphics.h<a class="headerlink" href="#graphics-h" title="Link to this heading">#</a></h1>
</section>
<section id="id394">
<h1>Opis ogólny<a class="headerlink" href="#id394" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">graphics.h</span></code> deklaruje interfejs klasy <code class="docutils literal notranslate"><span class="pre">Graphics</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_graphics</span></code>) zarządzającym globalnym stanem i inicjalizacją silnika graficznego.</p>
</section>
<section id="id395">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Graphics</span></code><a class="headerlink" href="#id395" title="Link to this heading">#</a></h1>
</section>
<section id="id396">
<h1>Opis semantyczny<a class="headerlink" href="#id396" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Graphics</span></code> pełni rolę głównego menedżera podsystemu graficznego. Odpowiada za inicjalizację OpenGL/GLES, odpytywanie o możliwości sprzętowe (wersja, rozszerzenia, maksymalny rozmiar tekstury) oraz za zarządzanie cyklem życia innych menedżerów graficznych, takich jak <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code> czy <code class="docutils literal notranslate"><span class="pre">FontManager</span></code>.</p>
</section>
<section id="id397">
<h1>Metody publiczne<a class="headerlink" href="#id397" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Graphics()</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje silnik graficzny (kontekst OpenGL, menedżery).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Zwalnia zasoby silnika graficznego.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code></p></td>
<td class="text-left"><p>Aktualizuje rozmiar viewportu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">checkDepthSupport()</span></code></p></td>
<td class="text-left"><p>Sprawdza wsparcie dla bufora głębi.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getMaxTextureSize()</span></code></p></td>
<td class="text-left"><p>Zwraca maksymalny obsługiwany rozmiar tekstury.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">Size&amp;</span> <span class="pre">getViewportSize()</span></code></p></td>
<td class="text-left"><p>Zwraca aktualny rozmiar viewportu (okna/ekranu).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getVendor()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę producenta karty graficznej.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getRenderer()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę modelu karty graficznej/sterownika.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getVersion()</span></code></p></td>
<td class="text-left"><p>Zwraca wersję OpenGL.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getExtensions()</span></code></p></td>
<td class="text-left"><p>Zwraca listę dostępnych rozszerzeń OpenGL.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ok()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli inicjalizacja grafiki przebiegła pomyślnie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">checkForError(...)</span></code></p></td>
<td class="text-left"><p>Sprawdza i loguje błędy OpenGL.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id398">
<h1>Zmienne prywatne<a class="headerlink" href="#id398" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_viewportSize</span></code>: Aktualny rozmiar obszaru renderowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_vendor</span></code>, <code class="docutils literal notranslate"><span class="pre">m_renderer</span></code>, <code class="docutils literal notranslate"><span class="pre">m_version</span></code>, <code class="docutils literal notranslate"><span class="pre">m_extensions</span></code>: Informacje o sterowniku graficznym.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_maxTextureSize</span></code>: Maksymalny rozmiar tekstury obsługiwany przez sprzęt.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_ok</span></code>: Flaga pomyślnej inicjalizacji.</p></li>
</ul>
</section>
<section id="id399">
<h1>Zmienne globalne<a class="headerlink" href="#id399" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_graphics</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">Graphics</span></code>.</p></li>
</ul>
</section>
<section id="id400">
<h1>Zależności i powiązania<a class="headerlink" href="#id400" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>, <code class="docutils literal notranslate"><span class="pre">painter.h</span></code>: Podstawowe deklaracje i klasa <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
<li><p>Jest oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindsingleton</span> <span class="pre">g_graphics</span></code>, co udostępnia jej metody (np. <code class="docutils literal notranslate"><span class="pre">getVendor</span></code>) w Lua.</p></li>
<li><p>Jest inicjalizowana i zamykana przez <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="image-cpp">
<h1>📄 image.cpp<a class="headerlink" href="#image-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id401">
<h1>Opis ogólny<a class="headerlink" href="#id401" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">image.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Image</span></code>, która reprezentuje obraz rastrowy w pamięci RAM. Jest to podstawowa klasa do ładowania, manipulowania i zapisywania danych obrazów, zanim zostaną one przesłane do pamięci karty graficznej jako tekstury.</p>
</section>
<section id="klasa-image">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Image</span></code><a class="headerlink" href="#klasa-image" title="Link to this heading">#</a></h1>
</section>
<section id="image-image-const-size-size-int-bpp-uint8-pixels">
<h1><code class="docutils literal notranslate"><span class="pre">Image::Image(const</span> <span class="pre">Size&amp;</span> <span class="pre">size,</span> <span class="pre">int</span> <span class="pre">bpp,</span> <span class="pre">uint8</span> <span class="pre">*pixels)</span></code><a class="headerlink" href="#image-image-const-size-size-int-bpp-uint8-pixels" title="Link to this heading">#</a></h1>
<p>Konstruktor. Tworzy obiekt <code class="docutils literal notranslate"><span class="pre">Image</span></code> o podanych wymiarach i głębi bitowej (bpp - bits per pixel). Opcjonalnie kopiuje dane pikseli z podanego bufora.</p>
</section>
<section id="imageptr-image-load-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">ImagePtr</span> <span class="pre">Image::load(std::string</span> <span class="pre">file)</span></code><a class="headerlink" href="#imageptr-image-load-std-string-file" title="Link to this heading">#</a></h1>
<p>Statyczna metoda fabryczna do ładowania obrazu z pliku. Obecnie obsługuje tylko format PNG, wywołując <code class="docutils literal notranslate"><span class="pre">loadPNG</span></code>.</p>
</section>
<section id="imageptr-image-loadpng">
<h1><code class="docutils literal notranslate"><span class="pre">ImagePtr</span> <span class="pre">Image::loadPNG(...)</span></code><a class="headerlink" href="#imageptr-image-loadpng" title="Link to this heading">#</a></h1>
<p>Statyczne metody do ładowania obrazu w formacie PNG z pliku lub z bufora w pamięci. Używają funkcji <code class="docutils literal notranslate"><span class="pre">load_apng</span></code> z <code class="docutils literal notranslate"><span class="pre">apngloader.cpp</span></code> do parsowania danych.</p>
</section>
<section id="void-image-savepng-const-std-string-filename">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Image::savePNG(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code><a class="headerlink" href="#void-image-savepng-const-std-string-filename" title="Link to this heading">#</a></h1>
<p>Zapisuje obraz do pliku w formacie PNG, używając funkcji <code class="docutils literal notranslate"><span class="pre">save_png</span></code> z <code class="docutils literal notranslate"><span class="pre">apngloader.cpp</span></code>.</p>
</section>
<section id="void-image-blit-const-point-dest-const-imageptr-other">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Image::blit(const</span> <span class="pre">Point&amp;</span> <span class="pre">dest,</span> <span class="pre">const</span> <span class="pre">ImagePtr&amp;</span> <span class="pre">other)</span></code><a class="headerlink" href="#void-image-blit-const-point-dest-const-imageptr-other" title="Link to this heading">#</a></h1>
<p>Kopiuje piksele z innego obrazu (<code class="docutils literal notranslate"><span class="pre">other</span></code>) do tego obrazu w podane miejsce (<code class="docutils literal notranslate"><span class="pre">dest</span></code>). Kopiowanie odbywa się z uwzględnieniem przezroczystości – piksele w pełni przezroczyste w obrazie źródłowym nie są kopiowane.</p>
</section>
<section id="void-image-paste-const-imageptr-other">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Image::paste(const</span> <span class="pre">ImagePtr&amp;</span> <span class="pre">other)</span></code><a class="headerlink" href="#void-image-paste-const-imageptr-other" title="Link to this heading">#</a></h1>
<p>Nakłada inny obraz (<code class="docutils literal notranslate"><span class="pre">other</span></code>) na ten obraz, zastępując istniejące piksele. Nie uwzględnia przezroczystości.</p>
</section>
<section id="imageptr-image-upscale">
<h1><code class="docutils literal notranslate"><span class="pre">ImagePtr</span> <span class="pre">Image::upscale()</span></code><a class="headerlink" href="#imageptr-image-upscale" title="Link to this heading">#</a></h1>
<p>Tworzy i zwraca nowy obraz, który jest dwukrotnie większy od oryginalnego. Każdy piksel z obrazu źródłowego jest powielany do bloku 2x2 w obrazie docelowym (skalowanie metodą „najbliższego sąsiada”).</p>
</section>
<section id="bool-image-nextmipmap">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Image::nextMipmap()</span></code><a class="headerlink" href="#bool-image-nextmipmap" title="Link to this heading">#</a></h1>
<p>Generuje następny, mniejszy poziom mipmapy na podstawie bieżących danych pikseli. Oblicza średnią z bloku 2x2 pikseli, aby stworzyć jeden piksel dla mniejszego obrazu. Jest to prosta implementacja filtrowania biliniowego. Zwraca <code class="docutils literal notranslate"><span class="pre">false</span></code>, gdy obraz osiągnie rozmiar 1x1.</p>
</section>
<section id="imageptr-image-fromqrcode-const-std-string-code-int-border">
<h1><code class="docutils literal notranslate"><span class="pre">ImagePtr</span> <span class="pre">Image::fromQRCode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">code,</span> <span class="pre">int</span> <span class="pre">border)</span></code><a class="headerlink" href="#imageptr-image-fromqrcode-const-std-string-code-int-border" title="Link to this heading">#</a></h1>
<p>Statyczna metoda fabryczna, która generuje obraz kodu QR na podstawie podanego tekstu, używając biblioteki <code class="docutils literal notranslate"><span class="pre">qrcodegen</span></code>.</p>
</section>
<section id="id402">
<h1>Zależności i powiązania<a class="headerlink" href="#id402" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/image.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Do otwierania i odczytywania plików obrazów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/apngloader.h</span></code>: Do obsługi formatu PNG/APNG.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/qrcodegen.h</span></code>: Do generowania kodów QR.</p></li>
<li><p>Obiekty <code class="docutils literal notranslate"><span class="pre">Image</span></code> są zazwyczaj krótkotrwałe – istnieją od momentu załadowania z pliku do momentu utworzenia z nich obiektu <code class="docutils literal notranslate"><span class="pre">Texture</span></code> i przesłania danych do GPU.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="hardwarebuffer-h">
<h1>📄 hardwarebuffer.h<a class="headerlink" href="#hardwarebuffer-h" title="Link to this heading">#</a></h1>
</section>
<section id="id403">
<h1>Opis ogólny<a class="headerlink" href="#id403" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">hardwarebuffer.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">HardwareBuffer</span></code>, która jest opakowaniem na sprzętowe bufory wierzchołków (Vertex Buffer Objects - VBO) w OpenGL. Umożliwia przechowywanie danych geometrycznych (np. współrzędnych wierzchołków) w pamięci karty graficznej w celu uzyskania wysokiej wydajności renderowania.</p>
</section>
<section id="klasa-hardwarebuffer">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">HardwareBuffer</span></code><a class="headerlink" href="#klasa-hardwarebuffer" title="Link to this heading">#</a></h1>
</section>
<section id="id404">
<h1>Opis semantyczny<a class="headerlink" href="#id404" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">HardwareBuffer</span></code> enkapsuluje ID bufora VBO w OpenGL i dostarcza podstawowe metody do jego obsługi: bindowania, odpinania i zapisu danych. Użycie VBO jest znacznie wydajniejsze niż przesyłanie danych wierzchołków z pamięci RAM do GPU w każdej klatce.</p>
</section>
<section id="id405">
<h1>Typy wyliczeniowe (Enums)<a class="headerlink" href="#id405" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">Type</span></code></strong>: Określa typ bufora.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">VertexBuffer</span></code> (<code class="docutils literal notranslate"><span class="pre">GL_ARRAY_BUFFER</span></code>): Przechowuje atrybuty wierzchołków (np. pozycje, kolory, współrzędne tekstur).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IndexBuffer</span></code> (<code class="docutils literal notranslate"><span class="pre">GL_ELEMENT_ARRAY_BUFFER</span></code>): Przechowuje indeksy wierzchołków (nieużywane w tym kodzie).</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">UsagePattern</span></code></strong>: Wskazówka dla sterownika OpenGL, jak dane będą używane.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">StreamDraw</span></code> (<code class="docutils literal notranslate"><span class="pre">GL_STREAM_DRAW</span></code>): Dane zmieniane często, używane rzadko.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StaticDraw</span></code> (<code class="docutils literal notranslate"><span class="pre">GL_STATIC_DRAW</span></code>): Dane ustawiane raz, używane często.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DynamicDraw</span></code> (<code class="docutils literal notranslate"><span class="pre">GL_DYNAMIC_DRAW</span></code>): Dane zmieniane i używane często.</p></li>
</ul>
</li>
</ul>
</section>
<section id="id406">
<h1>Metody publiczne<a class="headerlink" href="#id406" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">HardwareBuffer(Type</span> <span class="pre">type)</span></code></p></td>
<td class="text-left"><p>Konstruktor, tworzy nowy obiekt bufora w OpenGL (<code class="docutils literal notranslate"><span class="pre">glGenBuffers</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">~HardwareBuffer()</span></code></p></td>
<td class="text-left"><p>Destruktor, zwalnia obiekt bufora (<code class="docutils literal notranslate"><span class="pre">glDeleteBuffers</span></code>).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">bind()</span></code></p></td>
<td class="text-left"><p>Bindowanie (aktywuje) bufor w kontekście OpenGL (<code class="docutils literal notranslate"><span class="pre">glBindBuffer</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">void</span> <span class="pre">unbind(Type</span> <span class="pre">type)</span></code></p></td>
<td class="text-left"><p>Odpina jakikolwiek bufor danego typu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">write(...)</span></code></p></td>
<td class="text-left"><p>Kopiuje dane z pamięci RAM do bufora w pamięci GPU (<code class="docutils literal notranslate"><span class="pre">glBufferData</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id407">
<h1>Zmienne prywatne<a class="headerlink" href="#id407" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_type</span></code>: Typ bufora (<code class="docutils literal notranslate"><span class="pre">VertexBuffer</span></code> lub <code class="docutils literal notranslate"><span class="pre">IndexBuffer</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_id</span></code>: ID (uchwyt) bufora w OpenGL.</p></li>
</ul>
</section>
<section id="id408">
<h1>Zależności i powiązania<a class="headerlink" href="#id408" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Zawiera <code class="docutils literal notranslate"><span class="pre">glutil.h</span></code> z definicjami OpenGL.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code> (w <code class="docutils literal notranslate"><span class="pre">coordsbuffer.h</span></code>) do opcjonalnego keszowania geometrii na GPU.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Painter</span></code> używa <code class="docutils literal notranslate"><span class="pre">HardwareBuffer</span></code> do ustawiania atrybutów wierzchołków podczas rysowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="image-h">
<h1>📄 image.h<a class="headerlink" href="#image-h" title="Link to this heading">#</a></h1>
</section>
<section id="id409">
<h1>Opis ogólny<a class="headerlink" href="#id409" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">image.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Image</span></code>, która reprezentuje obraz rastrowy przechowywany w pamięci systemowej (RAM). Jest to podstawowa struktura danych do manipulacji pikselami przed ich wysłaniem do karty graficznej jako tekstura.</p>
</section>
<section id="id410">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Image</span></code><a class="headerlink" href="#id410" title="Link to this heading">#</a></h1>
</section>
<section id="id411">
<h1>Opis semantyczny<a class="headerlink" href="#id411" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Image</span></code> to kontener na surowe dane pikseli. Przechowuje wymiary obrazu, liczbę bitów na piksel oraz sam bufor pikseli. Udostępnia metody do ładowania obrazów z plików, zapisywania ich, a także do podstawowych operacji graficznych, takich jak kopiowanie fragmentów (<code class="docutils literal notranslate"><span class="pre">blit</span></code>), generowanie mipmap czy skalowanie.</p>
</section>
<section id="id412">
<h1>Metody publiczne<a class="headerlink" href="#id412" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Image(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">ImagePtr</span> <span class="pre">load(...)</span></code></p></td>
<td class="text-left"><p>Statyczna metoda fabryczna do ładowania obrazu z pliku (obecnie tylko PNG).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">ImagePtr</span> <span class="pre">loadPNG(...)</span></code></p></td>
<td class="text-left"><p>Ładuje obraz PNG z pliku lub bufora w pamięci.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">savePNG(...)</span></code></p></td>
<td class="text-left"><p>Zapisuje obraz do pliku w formacie PNG.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">blit(...)</span></code></p></td>
<td class="text-left"><p>Kopiuje inny obraz na ten obraz z uwzględnieniem przezroczystości.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">paste(...)</span></code></p></td>
<td class="text-left"><p>Nakłada inny obraz na ten obraz, zastępując piksele.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ImagePtr</span> <span class="pre">upscale()</span></code></p></td>
<td class="text-left"><p>Zwraca nową, dwukrotnie większą wersję obrazu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">resize(...)</span></code></p></td>
<td class="text-left"><p>Zmienia rozmiar obrazu, realokując bufor pikseli.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">nextMipmap()</span></code></p></td>
<td class="text-left"><p>Generuje kolejny poziom mipmapy, zmniejszając obraz o połowę.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setPixel(...)</span></code></p></td>
<td class="text-left"><p>Ustawia kolor pojedynczego piksela.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;uint8&gt;&amp;</span> <span class="pre">getPixels()</span></code></p></td>
<td class="text-left"><p>Zwraca referencję do wektora pikseli.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint8*</span> <span class="pre">getPixelData()</span></code></p></td>
<td class="text-left"><p>Zwraca surowy wskaźnik na dane pikseli.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getPixelCount()</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę pikseli.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">Size&amp;</span> <span class="pre">getSize()</span></code></p></td>
<td class="text-left"><p>Zwraca wymiary obrazu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getBpp()</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę bajtów na piksel.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">ImagePtr</span> <span class="pre">fromQRCode(...)</span></code></p></td>
<td class="text-left"><p>Tworzy obraz z kodu QR.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id413">
<h1>Zmienne prywatne<a class="headerlink" href="#id413" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_pixels</span></code>: Wektor przechowujący dane pikseli.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_size</span></code>: Wymiary obrazu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_bpp</span></code>: Liczba bajtów na piksel.</p></li>
</ul>
</section>
<section id="id414">
<h1>Zależności i powiązania<a class="headerlink" href="#id414" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/databuffer.h</span></code>: Potencjalnie, chociaż tutaj używa <code class="docutils literal notranslate"><span class="pre">std::vector</span></code>.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Texture</span></code> i <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code> jako źródło danych pikseli podczas tworzenia tekstur.</p></li>
<li><p>Wykorzystywana przez <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> do ładowania ikon i kursorów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="framebuffermanager-h">
<h1>📄 framebuffermanager.h<a class="headerlink" href="#framebuffermanager-h" title="Link to this heading">#</a></h1>
</section>
<section id="id415">
<h1>Opis ogólny<a class="headerlink" href="#id415" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">framebuffermanager.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_framebuffers</span></code>) służącym do zarządzania i tworzenia obiektów <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>.</p>
</section>
<section id="id416">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code><a class="headerlink" href="#id416" title="Link to this heading">#</a></h1>
</section>
<section id="id417">
<h1>Opis semantyczny<a class="headerlink" href="#id417" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code> pełni rolę fabryki i menedżera dla obiektów <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>. Upraszcza ich tworzenie i zarządzanie cyklem życia. Udostępnia również dwa predefiniowane, „tymczasowe” bufory, które mogą być używane w całym systemie do krótkotrwałych operacji renderowania poza ekranem, co pozwala uniknąć kosztownego tworzenia i niszczenia FBO.</p>
</section>
<section id="id418">
<h1>Metody publiczne<a class="headerlink" href="#id418" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje menedżera i tworzy tymczasowe bufory ramki.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Zwalnia wszystkie zarządzane bufory ramki.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clear()</span></code></p></td>
<td class="text-left"><p>(Brak implementacji) Prawdopodobnie miała służyć do zwolnienia wszystkich buforów poza tymczasowymi.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">FrameBufferPtr</span> <span class="pre">createFrameBuffer(bool</span> <span class="pre">withDepth</span> <span class="pre">=</span> <span class="pre">false)</span></code></p></td>
<td class="text-left"><p>Metoda fabryczna tworząca i zwracająca nowy obiekt <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">FrameBufferPtr&amp;</span> <span class="pre">getTemporaryFrameBuffer()</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik do pierwszego tymczasowego bufora.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">FrameBufferPtr&amp;</span> <span class="pre">getDrawQueueTemporaryFrameBuffer()</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik do drugiego tymczasowego bufora, prawdopodobnie używanego przez <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id419">
<h1>Zmienne chronione<a class="headerlink" href="#id419" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_temporaryFramebuffer</span></code>: Pierwszy tymczasowy <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_drawQueueTemporaryFramebuffer</span></code>: Drugi tymczasowy <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_framebuffers</span></code>: Wektor przechowujący wskaźniki do wszystkich utworzonych (i niezwolnionych) buforów ramki. |</p></li>
</ul>
</section>
<section id="id420">
<h1>Zmienne globalne<a class="headerlink" href="#id420" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_framebuffers</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code>.</p></li>
</ul>
</section>
<section id="id421">
<h1>Zależności i powiązania<a class="headerlink" href="#id421" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/framebuffer.h</span></code>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>.</p></li>
<li><p>Jest to kluczowy komponent, od którego zależą inne części systemu graficznego, takie jak <code class="docutils literal notranslate"><span class="pre">Atlas</span></code> i <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>, które potrzebują tworzyć własne bufory ramki.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="painter-h">
<h1>📄 painter.h<a class="headerlink" href="#painter-h" title="Link to this heading">#</a></h1>
</section>
<section id="id422">
<h1>Opis ogólny<a class="headerlink" href="#id422" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">painter.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, która jest centralnym interfejsem do wszystkich operacji rysowania w 2D. Abstrakcjonuje ona niskopoziomowe wywołania OpenGL, dostarczając prostsze API do rysowania prostokątów, tekstur, linii i zarządzania stanem renderowania.</p>
</section>
<section id="klasa-painter">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Painter</span></code><a class="headerlink" href="#klasa-painter" title="Link to this heading">#</a></h1>
</section>
<section id="id423">
<h1>Opis semantyczny<a class="headerlink" href="#id423" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Painter</span></code> działa jak maszyna stanów. Przechowuje aktualny stan renderowania, taki jak macierze transformacji, kolor, tryb mieszania, aktywny shader, tekstura, itp. Każda operacja rysowania jest wykonywana w kontekście tego stanu. <code class="docutils literal notranslate"><span class="pre">Painter</span></code> zarządza również własnymi, domyślnymi programami shaderów do podstawowych operacji.</p>
</section>
<section id="id424">
<h1>Typy wyliczeniowe (Enums)<a class="headerlink" href="#id424" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlendEquation</span></code>: Określa, jak kolory są mieszane (np. dodawanie, odejmowanie).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CompositionMode</span></code>: Definiuje predefiniowane tryby mieszania (<code class="docutils literal notranslate"><span class="pre">glBlendFunc</span></code>), np. normalne (z przezroczystością), addytywne, mnożenie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DepthFunc</span></code>: Określa funkcję testu głębi.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DrawMode</span></code>: Określa prymityw do rysowania (trójkąty, paski trójkątów).</p></li>
</ul>
</section>
<section id="struktura-painterstate">
<h1>Struktura <code class="docutils literal notranslate"><span class="pre">PainterState</span></code><a class="headerlink" href="#struktura-painterstate" title="Link to this heading">#</a></h1>
<p>Przechowuje pełny stan <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, co pozwala na jego zapisywanie i przywracanie.</p>
</section>
<section id="id425">
<h1>Metody publiczne<a class="headerlink" href="#id425" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><strong>Zarządzanie stanem</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">resetState()</span></code></p></td>
<td class="text-left"><p>Przywraca wszystkie ustawienia do wartości domyślnych.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">saveState()</span></code> / <code class="docutils literal notranslate"><span class="pre">restoreSavedState()</span></code></p></td>
<td class="text-left"><p>Zapisuje/przywraca stan na wewnętrznym stosie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setTransformMatrix(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">setProjectionMatrix(...)</span></code>, …</p></td>
<td class="text-left"><p>Ustawiają poszczególne elementy stanu (macierze, tryb mieszania, etc.).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">scale()</span></code>, <code class="docutils literal notranslate"><span class="pre">translate()</span></code>, <code class="docutils literal notranslate"><span class="pre">rotate()</span></code></p></td>
<td class="text-left"><p>Modyfikują bieżącą macierz transformacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><strong>Operacje rysowania</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">clear(const</span> <span class="pre">Color&amp;</span> <span class="pre">color)</span></code></p></td>
<td class="text-left"><p>Czyści cały bufor ramki.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">drawCoords(...)</span></code></p></td>
<td class="text-left"><p>Niskopoziomowa metoda rysująca geometrię z <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">drawFilledRect(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest)</span></code></p></td>
<td class="text-left"><p>Rysuje wypełniony prostokąt.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">drawTexturedRect(...)</span></code></p></td>
<td class="text-left"><p>Rysuje prostokąt z teksturą.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">drawText(...)</span></code></p></td>
<td class="text-left"><p>Rysuje tekst (przez <code class="docutils literal notranslate"><span class="pre">TextRender</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">drawLine(...)</span></code></p></td>
<td class="text-left"><p>Rysuje linię.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">drawCache(...)</span></code></p></td>
<td class="text-left"><p>Rysuje dane zbuforowane w <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><strong>Gettery</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getTransformMatrix()</span></code>, <code class="docutils literal notranslate"><span class="pre">getColor()</span></code>, <code class="docutils literal notranslate"><span class="pre">getClipRect()</span></code>, …</p></td>
<td class="text-left"><p>Zwracają aktualne wartości stanu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">draws()</span></code>, <code class="docutils literal notranslate"><span class="pre">calls()</span></code></p></td>
<td class="text-left"><p>Zwracają statystyki renderowania dla bieżącej klatki.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="zmienne-chronione-prywatne">
<h1>Zmienne chronione/prywatne<a class="headerlink" href="#zmienne-chronione-prywatne" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_transformMatrix</span></code>, <code class="docutils literal notranslate"><span class="pre">m_projectionMatrix</span></code>, …: Zmienne przechowujące aktualny stan.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_transformMatrixStack</span></code>: Stos do zapisywania macierzy transformacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_olderStates</span></code>: Stos do zapisywania pełnego stanu <code class="docutils literal notranslate"><span class="pre">PainterState</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_draw...Program</span></code>: Wskaźniki na domyślne programy shaderów.</p></li>
</ul>
</section>
<section id="id426">
<h1>Zmienne globalne<a class="headerlink" href="#id426" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_painter</span></code>: Globalny wskaźnik na instancję <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
</ul>
</section>
<section id="id427">
<h1>Zależności i powiązania<a class="headerlink" href="#id427" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>, <code class="docutils literal notranslate"><span class="pre">coordsbuffer.h</span></code>, <code class="docutils literal notranslate"><span class="pre">paintershaderprogram.h</span></code>, <code class="docutils literal notranslate"><span class="pre">texture.h</span></code>, <code class="docutils literal notranslate"><span class="pre">colorarray.h</span></code>, <code class="docutils literal notranslate"><span class="pre">drawqueue.h</span></code>: Deklaracje typów, z którymi <code class="docutils literal notranslate"><span class="pre">Painter</span></code> współpracuje.</p></li>
<li><p>Jest to centralny komponent renderujący, używany bezpośrednio lub pośrednio przez <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>, <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>, <code class="docutils literal notranslate"><span class="pre">TextRender</span></code> i inne.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="painter-cpp">
<h1>📄 painter.cpp<a class="headerlink" href="#painter-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id428">
<h1>Opis ogólny<a class="headerlink" href="#id428" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">painter.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, która jest sercem silnika renderującego. Odpowiada za bezpośrednią komunikację z API graficznym (OpenGL) w celu rysowania prymitywów 2D.</p>
</section>
<section id="id429">
<h1>Zmienne globalne<a class="headerlink" href="#id429" title="Link to this heading">#</a></h1>
</section>
<section id="g-painter">
<h1><code class="docutils literal notranslate"><span class="pre">g_painter</span></code><a class="headerlink" href="#g-painter" title="Link to this heading">#</a></h1>
<p>Globalny wskaźnik na jedyną instancję <code class="docutils literal notranslate"><span class="pre">Painter</span></code>. Jest inicjalizowany w <code class="docutils literal notranslate"><span class="pre">Graphics::init()</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Painter</span><span class="o">*</span><span class="w"> </span><span class="n">g_painter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id430">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Painter</span></code><a class="headerlink" href="#id430" title="Link to this heading">#</a></h1>
</section>
<section id="painter-painter">
<h1><code class="docutils literal notranslate"><span class="pre">Painter::Painter()</span></code><a class="headerlink" href="#painter-painter" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje domyślne wartości stanu, takie jak macierze, kolory i tryby mieszania. Co najważniejsze, tworzy i kompiluje zestaw domyślnych programów shaderów, które są używane do podstawowych operacji rysowania:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_drawTexturedProgram</span></code>: Do rysowania tekstur.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_drawSolidColorProgram</span></code>: Do rysowania jednolitych kolorów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_drawSolidColorOnTextureProgram</span></code>: Do rysowania jednolitego koloru na wierzchu tekstury.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_drawOutfitLayersProgram</span></code>: Specjalny shader do rysowania strojów postaci z kolorowaniem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_drawNewProgram</span></code>: Shader używany przez <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code> do zoptymalizowanego rysowania wsadowego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_drawTextProgram</span></code>, <code class="docutils literal notranslate"><span class="pre">m_drawLineProgram</span></code>: Specjalne shadery do rysowania tekstu i linii.</p></li>
</ul>
</section>
<section id="void-painter-bind-i-void-painter-unbind">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::bind()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::unbind()</span></code><a class="headerlink" href="#void-painter-bind-i-void-painter-unbind" title="Link to this heading">#</a></h1>
<p>Metody wywoływane na początku i na końcu cyklu życia <code class="docutils literal notranslate"><span class="pre">Painter</span></code>. <code class="docutils literal notranslate"><span class="pre">bind()</span></code> włącza podstawowe atrybuty wierzchołków, które są zawsze aktywne.</p>
</section>
<section id="void-painter-resetstate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::resetState()</span></code><a class="headerlink" href="#void-painter-resetstate" title="Link to this heading">#</a></h1>
<p>Przywraca wszystkie parametry <code class="docutils literal notranslate"><span class="pre">Painter</span></code> (kolor, macierze, tryby mieszania itp.) do ich wartości domyślnych.</p>
</section>
<section id="void-painter-savestate-i-void-painter-restoresavedstate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::saveState()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::restoreSavedState()</span></code><a class="headerlink" href="#void-painter-savestate-i-void-painter-restoresavedstate" title="Link to this heading">#</a></h1>
<p>Implementują mechanizm stosu do zapisywania i przywracania stanu renderowania. Pozwala to na tymczasową zmianę stanu (np. ustawienie przycinania) i łatwy powrót do poprzedniego stanu.</p>
</section>
<section id="metody-updategl">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">updateGl...()</span></code><a class="headerlink" href="#metody-updategl" title="Link to this heading">#</a></h1>
<p>Prywatne metody pomocnicze (<code class="docutils literal notranslate"><span class="pre">updateGlTexture</span></code>, <code class="docutils literal notranslate"><span class="pre">updateGlCompositionMode</span></code>, <code class="docutils literal notranslate"><span class="pre">updateGlClipRect</span></code> itd.), które aplikują zmiany stanu <code class="docutils literal notranslate"><span class="pre">Painter</span></code> do rzeczywistego stanu OpenGL. Są wywoływane, gdy odpowiednia właściwość <code class="docutils literal notranslate"><span class="pre">Painter</span></code> (np. <code class="docutils literal notranslate"><span class="pre">m_compositionMode</span></code>) ulega zmianie.</p>
</section>
<section id="void-painter-setresolution-const-size-resolution">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::setResolution(const</span> <span class="pre">Size&amp;</span> <span class="pre">resolution)</span></code><a class="headerlink" href="#void-painter-setresolution-const-size-resolution" title="Link to this heading">#</a></h1>
<p>Aktualizuje rozdzielczość renderowania. Najważniejszą częścią jest przeliczenie macierzy projekcji (<code class="docutils literal notranslate"><span class="pre">m_projectionMatrix</span></code>), która mapuje współrzędne w pikselach na znormalizowane współrzędne urządzenia OpenGL (-1 do 1).</p>
</section>
<section id="void-painter-drawcoords">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::drawCoords(...)</span></code><a class="headerlink" href="#void-painter-drawcoords" title="Link to this heading">#</a></h1>
<p>Niskopoziomowa metoda, która jest podstawą większości operacji rysowania.</p>
<ol class="arabic simple">
<li><p>Bindowanie i konfiguruje odpowiedni program shadera.</p></li>
<li><p>Przekazuje do shadera uniformy (macierze, kolor, czas itp.).</p></li>
<li><p>Ustawia wskaźniki na dane atrybutów wierzchołków (pozycja, współrzędne tekstury, kolor).</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">glDrawArrays</span></code> w celu narysowania geometrii.</p></li>
<li><p>Zlicza statystyki (<code class="docutils literal notranslate"><span class="pre">m_draws</span></code>, <code class="docutils literal notranslate"><span class="pre">m_calls</span></code>).</p></li>
</ol>
</section>
<section id="metody-draw-rect-i-draw-coords">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">draw...Rect(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">draw...Coords(...)</span></code><a class="headerlink" href="#metody-draw-rect-i-draw-coords" title="Link to this heading">#</a></h1>
<p>Wysokopoziomowe metody rysujące, które przygotowują <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> z odpowiednią geometrią, a następnie wywołują <code class="docutils literal notranslate"><span class="pre">drawCoords</span></code> do jej narysowania.</p>
</section>
<section id="void-painter-drawcache">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::drawCache(...)</span></code><a class="headerlink" href="#void-painter-drawcache" title="Link to this heading">#</a></h1>
<p>Specjalna, zoptymalizowana metoda do rysowania dużej liczby wierzchołków na raz. Używa dedykowanego shadera (<code class="docutils literal notranslate"><span class="pre">m_drawNewProgram</span></code>), który pobiera pozycję, współrzędne tekstury i kolor jako osobne atrybuty dla każdego wierzchołka.</p>
</section>
<section id="id431">
<h1>Zależności i powiązania<a class="headerlink" href="#id431" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to klasa niskiego poziomu, która bezpośrednio zależy od API graficznego (OpenGL/GLES/GLEW).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/shaders/shaders.h</span></code>: Zawiera kod źródłowy domyślnych shaderów.</p></li>
<li><p>Współpracuje z <code class="docutils literal notranslate"><span class="pre">Texture</span></code>, <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code>, <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code>, <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>, <code class="docutils literal notranslate"><span class="pre">TextRender</span></code> i innymi komponentami graficznymi.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> do wykonywania wszystkich operacji rysowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="hardwarebuffer-cpp">
<h1>📄 hardwarebuffer.cpp<a class="headerlink" href="#hardwarebuffer-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id432">
<h1>Opis ogólny<a class="headerlink" href="#id432" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">hardwarebuffer.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">HardwareBuffer</span></code>, która jest opakowaniem na bufory VBO (Vertex Buffer Object) w OpenGL.</p>
</section>
<section id="id433">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">HardwareBuffer</span></code><a class="headerlink" href="#id433" title="Link to this heading">#</a></h1>
</section>
<section id="hardwarebuffer-hardwarebuffer-type-type">
<h1><code class="docutils literal notranslate"><span class="pre">HardwareBuffer::HardwareBuffer(Type</span> <span class="pre">type)</span></code><a class="headerlink" href="#hardwarebuffer-hardwarebuffer-type-type" title="Link to this heading">#</a></h1>
<p>Konstruktor.</p>
<ul class="simple">
<li><p><strong>Parametr <code class="docutils literal notranslate"><span class="pre">type</span></code></strong>: Określa, czy ma to być bufor na wierzchołki (<code class="docutils literal notranslate"><span class="pre">VertexBuffer</span></code>) czy indeksy (<code class="docutils literal notranslate"><span class="pre">IndexBuffer</span></code>).</p></li>
<li><p><strong>Działanie</strong>:</p>
<ol class="arabic simple">
<li><p>Zapamiętuje typ bufora.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">glGenBuffers(1,</span> <span class="pre">&amp;m_id)</span></code> w celu wygenerowania nowego, unikalnego ID dla bufora w kontekście OpenGL.</p></li>
<li><p>Sprawdza, czy operacja się powiodła; w przeciwnym razie kończy aplikację błędem krytycznym.</p></li>
</ol>
</li>
</ul>
</section>
<section id="hardwarebuffer-hardwarebuffer">
<h1><code class="docutils literal notranslate"><span class="pre">HardwareBuffer::~HardwareBuffer()</span></code><a class="headerlink" href="#hardwarebuffer-hardwarebuffer" title="Link to this heading">#</a></h1>
<p>Destruktor.</p>
<ul class="simple">
<li><p><strong>Działanie</strong>:</p>
<ol class="arabic simple">
<li><p>Zwalnia zasób OpenGL w sposób bezpieczny wątkowo.</p></li>
<li><p>Zamiast bezpośrednio wywoływać <code class="docutils literal notranslate"><span class="pre">glDeleteBuffers</span></code>, dodaje zadanie do kolejki dyspozytora graficznego (<code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code>). Gwarantuje to, że operacja usunięcia zostanie wykonana w wątku, który ma aktywny kontekst OpenGL, nawet jeśli destruktor jest wywoływany z innego wątku.</p></li>
</ol>
</li>
</ul>
</section>
<section id="id434">
<h1>Zależności i powiązania<a class="headerlink" href="#id434" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/hardwarebuffer.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graphics.h</span></code>: Do sprawdzania błędów OpenGL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/application.h</span></code>, <code class="docutils literal notranslate"><span class="pre">eventdispatcher.h</span></code>, <code class="docutils literal notranslate"><span class="pre">logger.h</span></code>: Do walidacji, planowania zdarzeń i logowania.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code> (w <code class="docutils literal notranslate"><span class="pre">coordsbuffer.h</span></code>) do przechowywania danych geometrycznych w pamięci karty graficznej, co znacznie przyspiesza renderowanie.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="paintershaderprogram-cpp">
<h1>📄 paintershaderprogram.cpp<a class="headerlink" href="#paintershaderprogram-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id435">
<h1>Opis ogólny<a class="headerlink" href="#id435" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">paintershaderprogram.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code>, która jest specjalizacją <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code>. Jest ona dostosowana do współpracy z klasą <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, udostępniając standardowy zestaw uniformów i atrybutów używanych w procesie renderowania 2D.</p>
</section>
<section id="klasa-paintershaderprogram">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code><a class="headerlink" href="#klasa-paintershaderprogram" title="Link to this heading">#</a></h1>
</section>
<section id="paintershaderprogram-paintershaderprogram-const-std-string-name">
<h1><code class="docutils literal notranslate"><span class="pre">PainterShaderProgram::PainterShaderProgram(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code><a class="headerlink" href="#paintershaderprogram-paintershaderprogram-const-std-string-name" title="Link to this heading">#</a></h1>
<p>Konstruktor. Wywołuje konstruktor klasy bazowej i inicjalizuje dodatkowe zmienne, takie jak <code class="docutils literal notranslate"><span class="pre">m_startTime</span></code>, który jest używany do animacji opartych na czasie w shaderach.</p>
</section>
<section id="void-paintershaderprogram-setupuniforms">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PainterShaderProgram::setupUniforms()</span></code><a class="headerlink" href="#void-paintershaderprogram-setupuniforms" title="Link to this heading">#</a></h1>
</section>
<section id="id436">
<h1>Opis semantyczny<a class="headerlink" href="#id436" title="Link to this heading">#</a></h1>
<p>Wirtualna metoda, która po zlinkowaniu programu shadera wyszukuje lokalizacje standardowych uniformów (<code class="docutils literal notranslate"><span class="pre">u_TransformMatrix</span></code>, <code class="docutils literal notranslate"><span class="pre">u_ProjectionMatrix</span></code>, <code class="docutils literal notranslate"><span class="pre">u_Color</span></code>, <code class="docutils literal notranslate"><span class="pre">u_Tex0</span></code> itd.) i przypisuje im domyślne wartości.</p>
</section>
<section id="bool-paintershaderprogram-link">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">PainterShaderProgram::link()</span></code><a class="headerlink" href="#bool-paintershaderprogram-link" title="Link to this heading">#</a></h1>
<p>Przesłania metodę z <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code>.</p>
<ol class="arabic simple">
<li><p>Ustawia <code class="docutils literal notranslate"><span class="pre">m_startTime</span></code>.</p></li>
<li><p>Wiąże standardowe lokalizacje atrybutów (<code class="docutils literal notranslate"><span class="pre">VERTEX_ATTR</span></code>, <code class="docutils literal notranslate"><span class="pre">TEXCOORD_ATTR</span></code>, etc.) z ich nazwami w shaderze.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">ShaderProgram::link()</span></code>.</p></li>
<li><p>Jeśli linkowanie się powiedzie, bindowanie program i wywołuje <code class="docutils literal notranslate"><span class="pre">setupUniforms()</span></code>.</p></li>
</ol>
</section>
<section id="metody-set">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">set...()</span></code><a class="headerlink" href="#metody-set" title="Link to this heading">#</a></h1>
<p>Są to metody do ustawiania wartości uniformów. Każda z nich:</p>
<ol class="arabic simple">
<li><p>Sprawdza, czy nowa wartość różni się od aktualnie przechowywanej, aby uniknąć zbędnych wywołań <code class="docutils literal notranslate"><span class="pre">glUniform...</span></code>.</p></li>
<li><p>Bindowanie program shadera (<code class="docutils literal notranslate"><span class="pre">bind()</span></code>).</p></li>
<li><p>Ustawia nową wartość uniformu w OpenGL.</p></li>
<li><p>Aktualizuje przechowywaną wartość.</p></li>
</ol>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setTransformMatrix</span></code>, <code class="docutils literal notranslate"><span class="pre">setProjectionMatrix</span></code>, <code class="docutils literal notranslate"><span class="pre">setTextureMatrix</span></code>: Ustawiają macierze.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setColor</span></code>: Ustawia główny kolor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setMatrixColor</span></code>: Ustawia macierz kolorów (dla shadera strojów).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setResolution</span></code>: Ustawia rozdzielczość (przydatne do efektów zależnych od pikseli).</p></li>
<li><p>… i inne.</p></li>
</ul>
</section>
<section id="void-paintershaderprogram-updatetime">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PainterShaderProgram::updateTime()</span></code><a class="headerlink" href="#void-paintershaderprogram-updatetime" title="Link to this heading">#</a></h1>
<p>Aktualizuje uniform <code class="docutils literal notranslate"><span class="pre">u_Time</span></code>, przekazując do shadera czas, jaki upłynął od jego utworzenia. Pozwala to na tworzenie animowanych efektów w shaderach.</p>
</section>
<section id="void-paintershaderprogram-addmultitexture-i-void-paintershaderprogram-bindmultitextures">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PainterShaderProgram::addMultiTexture(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PainterShaderProgram::bindMultiTextures()</span></code><a class="headerlink" href="#void-paintershaderprogram-addmultitexture-i-void-paintershaderprogram-bindmultitextures" title="Link to this heading">#</a></h1>
<p>Metody do obsługi dodatkowych tekstur (multi-texturing). <code class="docutils literal notranslate"><span class="pre">addMultiTexture</span></code> ładuje teksturę i dodaje ją do listy. <code class="docutils literal notranslate"><span class="pre">bindMultiTextures</span></code> aktywuje te tekstury na kolejnych jednostkach teksturujących (od <code class="docutils literal notranslate"><span class="pre">GL_TEXTURE1</span></code> wzwyż), aby mogły być używane w shaderze.</p>
</section>
<section id="id437">
<h1>Zależności i powiązania<a class="headerlink" href="#id437" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/paintershaderprogram.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/painter.h</span></code>: Ściśle współpracuje z <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, który ustawia jej uniformy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/texture.h</span></code>, <code class="docutils literal notranslate"><span class="pre">texturemanager.h</span></code>: Do ładowania i zarządzania dodatkowymi teksturami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Do śledzenia czasu dla animacji.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="paintershaderprogram-h">
<h1>📄 paintershaderprogram.h<a class="headerlink" href="#paintershaderprogram-h" title="Link to this heading">#</a></h1>
</section>
<section id="id438">
<h1>Opis ogólny<a class="headerlink" href="#id438" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">paintershaderprogram.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code>, która jest wyspecjalizowaną wersją <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code>, dostosowaną do potrzeb <code class="docutils literal notranslate"><span class="pre">Painter</span></code>. Definiuje ona standardowy zestaw uniformów i atrybutów używanych w shaderach 2D.</p>
</section>
<section id="id439">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code><a class="headerlink" href="#id439" title="Link to this heading">#</a></h1>
</section>
<section id="id440">
<h1>Opis semantyczny<a class="headerlink" href="#id440" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code> i dodaje do niej warstwę abstrakcji specyficzną dla <code class="docutils literal notranslate"><span class="pre">Painter</span></code>. Zamiast odwoływać się do uniformów po nazwach (stringach), udostępnia dedykowane metody <code class="docutils literal notranslate"><span class="pre">set...()</span></code>, które operują na predefiniowanych, zbuforowanych lokalizacjach. Upraszcza to kod <code class="docutils literal notranslate"><span class="pre">Painter</span></code> i potencjalnie zwiększa wydajność.</p>
</section>
<section id="id441">
<h1>Typy wyliczeniowe (Enums)<a class="headerlink" href="#id441" title="Link to this heading">#</a></h1>
<p>Definiuje stałe dla lokalizacji standardowych atrybutów i uniformów, co pozwala na ich efektywne buforowanie.</p>
<ul class="simple">
<li><p><strong>Atrybuty</strong>: <code class="docutils literal notranslate"><span class="pre">VERTEX_ATTR</span></code>, <code class="docutils literal notranslate"><span class="pre">TEXCOORD_ATTR</span></code>, …</p></li>
<li><p><strong>Uniformy</strong>: <code class="docutils literal notranslate"><span class="pre">PROJECTION_MATRIX_UNIFORM</span></code>, <code class="docutils literal notranslate"><span class="pre">TEXTURE_MATRIX_UNIFORM</span></code>, <code class="docutils literal notranslate"><span class="pre">COLOR_UNIFORM</span></code>, <code class="docutils literal notranslate"><span class="pre">TEX0_UNIFORM</span></code>, …</p></li>
</ul>
</section>
<section id="id442">
<h1>Metody publiczne<a class="headerlink" href="#id442" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">PainterShaderProgram(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">link()</span></code></p></td>
<td class="text-left"><p>Przesłania metodę bazową, aby dodatkowo zmapować standardowe atrybuty i uniformy.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setTransformMatrix(...)</span></code></p></td>
<td class="text-left"><p>Ustawia macierz transformacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setProjectionMatrix(...)</span></code></p></td>
<td class="text-left"><p>Ustawia macierz projekcji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setTextureMatrix(...)</span></code></p></td>
<td class="text-left"><p>Ustawia macierz tekstury.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setColor(...)</span></code></p></td>
<td class="text-left"><p>Ustawia główny kolor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setMatrixColor(...)</span></code></p></td>
<td class="text-left"><p>Ustawia macierz kolorów (dla shadera strojów).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setDepth(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wartość głębi.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setResolution(...)</span></code></p></td>
<td class="text-left"><p>Ustawia rozdzielczość renderowania.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setOffset(...)</span></code></p></td>
<td class="text-left"><p>Ustawia przesunięcie (offset).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">updateTime()</span></code></p></td>
<td class="text-left"><p>Aktualizuje uniform czasu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">addMultiTexture(...)</span></code></p></td>
<td class="text-left"><p>Dodaje dodatkową teksturę do shadera.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bindMultiTextures()</span></code></p></td>
<td class="text-left"><p>Bindowanie wszystkie dodatkowe tekstury.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">clearMultiTextures()</span></code></p></td>
<td class="text-left"><p>Czyści listę dodatkowych tekstur.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">enableColorMatrix()</span></code></p></td>
<td class="text-left"><p>Włącza tryb macierzy kolorów (dla shadera strojów).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id443">
<h1>Zmienne prywatne<a class="headerlink" href="#id443" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_startTime</span></code>: Czas utworzenia shadera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_color</span></code>, <code class="docutils literal notranslate"><span class="pre">m_depth</span></code>, <code class="docutils literal notranslate"><span class="pre">m_transformMatrix</span></code>, …: Przechowują aktualne wartości uniformów, aby uniknąć zbędnych wywołań <code class="docutils literal notranslate"><span class="pre">glUniform...</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_multiTextures</span></code>: Wektor dodatkowych tekstur.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_useColorMatrix</span></code>: Flaga wskazująca, czy <code class="docutils literal notranslate"><span class="pre">u_Color</span></code> jest macierzą 4x4.</p></li>
</ul>
</section>
<section id="id444">
<h1>Zależności i powiązania<a class="headerlink" href="#id444" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/shaderprogram.h</span></code>: Klasa bazowa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/coordsbuffer.h</span></code>: Pośrednio, poprzez <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Painter</span></code> jako podstawa dla wszystkich operacji rysowania opartych na shaderach.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="shader-cpp">
<h1>📄 shader.cpp<a class="headerlink" href="#shader-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id445">
<h1>Opis ogólny<a class="headerlink" href="#id445" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">shader.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Shader</span></code>, która jest opakowaniem na pojedynczy obiekt shadera w OpenGL (np. shader wierzchołków lub shader fragmentów).</p>
</section>
<section id="klasa-shader">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Shader</span></code><a class="headerlink" href="#klasa-shader" title="Link to this heading">#</a></h1>
</section>
<section id="shader-shader-shader-shadertype-shadertype">
<h1><code class="docutils literal notranslate"><span class="pre">Shader::Shader(Shader::ShaderType</span> <span class="pre">shaderType)</span></code><a class="headerlink" href="#shader-shader-shader-shadertype-shadertype" title="Link to this heading">#</a></h1>
<p>Konstruktor.</p>
<ul class="simple">
<li><p><strong>Parametr <code class="docutils literal notranslate"><span class="pre">shaderType</span></code></strong>: Określa, czy tworzony jest shader wierzchołków (<code class="docutils literal notranslate"><span class="pre">Vertex</span></code>) czy fragmentów (<code class="docutils literal notranslate"><span class="pre">Fragment</span></code>).</p></li>
<li><p><strong>Działanie</strong>: Wywołuje <code class="docutils literal notranslate"><span class="pre">glCreateShader</span></code> z odpowiednim typem, aby utworzyć obiekt shadera w sterowniku graficznym. W przypadku błędu, kończy aplikację.</p></li>
</ul>
</section>
<section id="shader-shader">
<h1><code class="docutils literal notranslate"><span class="pre">Shader::~Shader()</span></code><a class="headerlink" href="#shader-shader" title="Link to this heading">#</a></h1>
<p>Destruktor. Zwalnia zasób shadera w OpenGL, wywołując <code class="docutils literal notranslate"><span class="pre">glDeleteShader</span></code>.</p>
</section>
<section id="bool-shader-compilesourcecode-const-std-string-sourcecode">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Shader::compileSourceCode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">sourceCode)</span></code><a class="headerlink" href="#bool-shader-compilesourcecode-const-std-string-sourcecode" title="Link to this heading">#</a></h1>
</section>
<section id="id446">
<h1>Opis semantyczny<a class="headerlink" href="#id446" title="Link to this heading">#</a></h1>
<p>Kompiluje kod źródłowy shadera.</p>
</section>
<section id="id447">
<h1>Działanie<a class="headerlink" href="#id447" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Dla OpenGL ES, dodaje na początku kodu dyrektywę <code class="docutils literal notranslate"><span class="pre">precision</span> <span class="pre">highp</span> <span class="pre">float;</span></code>.</p></li>
<li><p>Przekazuje kod źródłowy do sterownika za pomocą <code class="docutils literal notranslate"><span class="pre">glShaderSource</span></code>.</p></li>
<li><p>Kompiluje shader za pomocą <code class="docutils literal notranslate"><span class="pre">glCompileShader</span></code>.</p></li>
<li><p>Sprawdza status kompilacji za pomocą <code class="docutils literal notranslate"><span class="pre">glGetShaderiv</span></code>.</p></li>
<li><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code> w przypadku sukcesu, <code class="docutils literal notranslate"><span class="pre">false</span></code> w przeciwnym razie.</p></li>
</ol>
</section>
<section id="bool-shader-compilesourcefile-const-std-string-sourcefile">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Shader::compileSourceFile(const</span> <span class="pre">std::string&amp;</span> <span class="pre">sourceFile)</span></code><a class="headerlink" href="#bool-shader-compilesourcefile-const-std-string-sourcefile" title="Link to this heading">#</a></h1>
<p>Ładuje kod źródłowy z pliku za pomocą <code class="docutils literal notranslate"><span class="pre">g_resources</span></code>, a następnie wywołuje <code class="docutils literal notranslate"><span class="pre">compileSourceCode</span></code>.</p>
</section>
<section id="std-string-shader-log">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">Shader::log()</span></code><a class="headerlink" href="#std-string-shader-log" title="Link to this heading">#</a></h1>
<p>Pobiera i zwraca logi kompilatora shadera (<code class="docutils literal notranslate"><span class="pre">glGetShaderInfoLog</span></code>), które zawierają informacje o błędach lub ostrzeżeniach.</p>
</section>
<section id="id448">
<h1>Zależności i powiązania<a class="headerlink" href="#id448" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/shader.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graphics.h</span></code>: Do dostępu do funkcji OpenGL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/application.h</span></code>: Do sprawdzania stanu aplikacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Do ładowania shaderów z plików.</p></li>
<li><p>Obiekty <code class="docutils literal notranslate"><span class="pre">Shader</span></code> są tworzone i zarządzane przez <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code> (lub <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code>), który następnie linkuje je w kompletny program shadera.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="shadermanager-h">
<h1>📄 shadermanager.h<a class="headerlink" href="#shadermanager-h" title="Link to this heading">#</a></h1>
</section>
<section id="id449">
<h1>Opis ogólny<a class="headerlink" href="#id449" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">shadermanager.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_shaders</span></code>) odpowiedzialnym za zarządzanie niestandardowymi programami shaderów tworzonymi w skryptach Lua.</p>
</section>
<section id="klasa-shadermanager">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code><a class="headerlink" href="#klasa-shadermanager" title="Link to this heading">#</a></h1>
</section>
<section id="id450">
<h1>Opis semantyczny<a class="headerlink" href="#id450" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code> działa jako repozytorium dla <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code> tworzonych dynamicznie. Przechowuje je w mapie pod unikalnymi nazwami, co pozwala na ich późniejsze pobieranie i używanie w trakcie renderowania.</p>
</section>
<section id="id451">
<h1>Metody publiczne<a class="headerlink" href="#id451" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje menedżera.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Czyści i zwalnia wszystkie załadowane shadery.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">createShader(...)</span></code></p></td>
<td class="text-left"><p>Tworzy, kompiluje i linkuje nowy <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code> z podanego kodu źródłowego (lub plików). Zapisuje go pod daną nazwą.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">createOutfitShader(...)</span></code></p></td>
<td class="text-left"><p>Skrót do <code class="docutils literal notranslate"><span class="pre">createShader</span></code> z włączoną opcją macierzy kolorów, specjalnie dla shaderów strojów.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addTexture(...)</span></code></p></td>
<td class="text-left"><p>Dodaje dodatkową teksturę do istniejącego programu shadera.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">PainterShaderProgramPtr</span> <span class="pre">getShader(...)</span></code></p></td>
<td class="text-left"><p>Wyszukuje i zwraca wskaźnik do programu shadera o podanej nazwie.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id452">
<h1>Zmienne prywatne<a class="headerlink" href="#id452" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_shaders</span></code>: Mapa (<code class="docutils literal notranslate"><span class="pre">std::unordered_map</span></code>) przechowująca wszystkie niestandardowe programy shaderów.</p></li>
</ul>
</section>
<section id="id453">
<h1>Zmienne globalne<a class="headerlink" href="#id453" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_shaders</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code>.</p></li>
</ul>
</section>
<section id="id454">
<h1>Zależności i powiązania<a class="headerlink" href="#id454" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>, <code class="docutils literal notranslate"><span class="pre">paintershaderprogram.h</span></code>: Deklaracje klas shaderów.</p></li>
<li><p>Jest oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindsingleton</span> <span class="pre">g_shaders</span></code>, co udostępnia jej API (<code class="docutils literal notranslate"><span class="pre">createShader</span></code>, <code class="docutils literal notranslate"><span class="pre">addTexture</span></code>) w skryptach Lua.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (w <code class="docutils literal notranslate"><span class="pre">uiwidgetimage.cpp</span></code>) do rysowania obrazów z niestandardowymi shaderami.</p></li>
<li><p>Wszystkie operacje tworzenia i modyfikacji shaderów są delegowane do wątku graficznego za pomocą <code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code>, aby zapewnić bezpieczeństwo wątkowe.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="shadermanager-cpp">
<h1>📄 shadermanager.cpp<a class="headerlink" href="#shadermanager-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id455">
<h1>Opis ogólny<a class="headerlink" href="#id455" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">shadermanager.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code>, która zarządza niestandardowymi programami shaderów.</p>
</section>
<section id="id456">
<h1>Zmienne globalne<a class="headerlink" href="#id456" title="Link to this heading">#</a></h1>
</section>
<section id="g-shaders">
<h1><code class="docutils literal notranslate"><span class="pre">g_shaders</span></code><a class="headerlink" href="#g-shaders" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ShaderManager</span><span class="w"> </span><span class="n">g_shaders</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id457">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code><a class="headerlink" href="#id457" title="Link to this heading">#</a></h1>
</section>
<section id="void-shadermanager-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ShaderManager::init()</span></code><a class="headerlink" href="#void-shadermanager-init" title="Link to this heading">#</a></h1>
<p>Inicjalizuje menedżera. W obecnej implementacji wywołuje <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram::release()</span></code>, aby upewnić się, że żaden shader nie jest aktywny.</p>
</section>
<section id="void-shadermanager-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ShaderManager::terminate()</span></code><a class="headerlink" href="#void-shadermanager-terminate" title="Link to this heading">#</a></h1>
<p>Czyści mapę <code class="docutils literal notranslate"><span class="pre">m_shaders</span></code>, co powoduje zwolnienie wszystkich niestandardowych programów shaderów.</p>
</section>
<section id="void-shadermanager-createshader-const-std-string-name-std-string-vertex-std-string-fragment-bool-colormatrix">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ShaderManager::createShader(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">std::string</span> <span class="pre">vertex,</span> <span class="pre">std::string</span> <span class="pre">fragment,</span> <span class="pre">bool</span> <span class="pre">colorMatrix)</span></code><a class="headerlink" href="#void-shadermanager-createshader-const-std-string-name-std-string-vertex-std-string-fragment-bool-colormatrix" title="Link to this heading">#</a></h1>
</section>
<section id="id458">
<h1>Opis semantyczny<a class="headerlink" href="#id458" title="Link to this heading">#</a></h1>
<p>Tworzy nowy program shadera. Metoda jest asynchroniczna - dodaje zadanie do dyspozytora graficznego.</p>
</section>
<section id="id459">
<h1>Działanie<a class="headerlink" href="#id459" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy podane stringi <code class="docutils literal notranslate"><span class="pre">vertex</span></code> i <code class="docutils literal notranslate"><span class="pre">fragment</span></code> są kodem źródłowym (zawierają znak nowej linii) czy ścieżkami do plików.</p></li>
<li><p>Jeśli są to ścieżki, odczytuje zawartość plików za pomocą <code class="docutils literal notranslate"><span class="pre">g_resources</span></code>.</p></li>
<li><p>Dodaje do <code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code> zadanie (lambda), które:</p>
<ul class="simple">
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram::create</span></code> w celu skompilowania i zlinkowania shadera.</p></li>
<li><p>Jeśli operacja się powiedzie, dodaje nowo utworzony program do mapy <code class="docutils literal notranslate"><span class="pre">m_shaders</span></code>.</p></li>
</ul>
</li>
</ol>
</section>
<section id="void-shadermanager-addtexture-const-std-string-name-const-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ShaderManager::addTexture(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code><a class="headerlink" href="#void-shadermanager-addtexture-const-std-string-name-const-std-string-file" title="Link to this heading">#</a></h1>
<p>Dodaje dodatkową teksturę do istniejącego shadera. Podobnie jak <code class="docutils literal notranslate"><span class="pre">createShader</span></code>, operacja jest wykonywana asynchronicznie w wątku graficznym.</p>
</section>
<section id="paintershaderprogramptr-shadermanager-getshader-const-std-string-name">
<h1><code class="docutils literal notranslate"><span class="pre">PainterShaderProgramPtr</span> <span class="pre">ShaderManager::getShader(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code><a class="headerlink" href="#paintershaderprogramptr-shadermanager-getshader-const-std-string-name" title="Link to this heading">#</a></h1>
<p>Wyszukuje i zwraca program shadera o podanej nazwie. Ta metoda musi być wywoływana z wątku graficznego, co jest zapewnione przez <code class="docutils literal notranslate"><span class="pre">VALIDATE_GRAPHICS_THREAD()</span></code>.</p>
</section>
<section id="id460">
<h1>Zależności i powiązania<a class="headerlink" href="#id460" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/shadermanager.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/paintershaderprogram.h</span></code>: Do tworzenia obiektów shaderów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Do ładowania kodu shaderów z plików.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do zapewnienia, że operacje na OpenGL są wykonywane w wątku graficznym.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="shader-h">
<h1>📄 shader.h<a class="headerlink" href="#shader-h" title="Link to this heading">#</a></h1>
</section>
<section id="id461">
<h1>Opis ogólny<a class="headerlink" href="#id461" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">shader.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Shader</span></code>, która reprezentuje pojedynczy, skompilowany obiekt shadera w OpenGL (np. shader wierzchołków lub fragmentów), ale jeszcze nie zlinkowany w pełny program.</p>
</section>
<section id="id462">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Shader</span></code><a class="headerlink" href="#id462" title="Link to this heading">#</a></h1>
</section>
<section id="id463">
<h1>Opis semantyczny<a class="headerlink" href="#id463" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Shader</span></code> jest niskopoziomowym opakowaniem na ID obiektu shadera w OpenGL. Jego głównym zadaniem jest przyjęcie kodu źródłowego, skompilowanie go i przechowanie wyniku. Obiekty tej klasy są następnie łączone w <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code>.</p>
</section>
<section id="typ-wyliczeniowy-shadertype">
<h1>Typ wyliczeniowy <code class="docutils literal notranslate"><span class="pre">ShaderType</span></code><a class="headerlink" href="#typ-wyliczeniowy-shadertype" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Vertex</span></code>: Oznacza shader wierzchołków (<code class="docutils literal notranslate"><span class="pre">GL_VERTEX_SHADER</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Fragment</span></code>: Oznacza shader fragmentów/pikseli (<code class="docutils literal notranslate"><span class="pre">GL_FRAGMENT_SHADER</span></code>).</p></li>
</ul>
</section>
<section id="id464">
<h1>Metody publiczne<a class="headerlink" href="#id464" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Shader(ShaderType</span> <span class="pre">shaderType)</span></code></p></td>
<td class="text-left"><p>Konstruktor, tworzy obiekt shadera w OpenGL.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">~Shader()</span></code></p></td>
<td class="text-left"><p>Destruktor, zwalnia obiekt shadera.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">compileSourceCode(...)</span></code></p></td>
<td class="text-left"><p>Kompiluje shader z podanego kodu źródłowego.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">compileSourceFile(...)</span></code></p></td>
<td class="text-left"><p>Ładuje kod z pliku i go kompiluje.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">log()</span></code></p></td>
<td class="text-left"><p>Zwraca logi kompilatora shadera.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">getShaderId()</span></code></p></td>
<td class="text-left"><p>Zwraca ID obiektu shadera w OpenGL.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ShaderType</span> <span class="pre">getShaderType()</span></code></p></td>
<td class="text-left"><p>Zwraca typ shadera.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id465">
<h1>Zmienne prywatne<a class="headerlink" href="#id465" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_shaderId</span></code>: ID obiektu shadera w OpenGL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_shaderType</span></code>: Typ shadera.</p></li>
</ul>
</section>
<section id="id466">
<h1>Zależności i powiązania<a class="headerlink" href="#id466" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p>Jest tworzona i używana przez <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code> w procesie budowania kompletnego programu shadera.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="textrender-cpp">
<h1>📄 textrender.cpp<a class="headerlink" href="#textrender-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id467">
<h1>Opis ogólny<a class="headerlink" href="#id467" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">textrender.cpp</span></code> implementuje klasę <code class="docutils literal notranslate"><span class="pre">TextRender</span></code>, która jest systemem do optymalizacji renderowania tekstu. Działa jako globalny cache dla geometrii tekstu, aby uniknąć ponownego obliczania pozycji glifów w każdej klatce dla tekstów, które się nie zmieniają.</p>
</section>
<section id="id468">
<h1>Zmienne globalne<a class="headerlink" href="#id468" title="Link to this heading">#</a></h1>
</section>
<section id="g-text">
<h1><code class="docutils literal notranslate"><span class="pre">g_text</span></code><a class="headerlink" href="#g-text" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">TextRender</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TextRender</span><span class="w"> </span><span class="n">g_text</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-textrender">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">TextRender</span></code><a class="headerlink" href="#klasa-textrender" title="Link to this heading">#</a></h1>
</section>
<section id="id469">
<h1>Opis semantyczny<a class="headerlink" href="#id469" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">TextRender</span></code> przechowuje mapę (<code class="docutils literal notranslate"><span class="pre">m_cache</span></code>), w której kluczem jest hash wygenerowany na podstawie treści tekstu, jego rozmiaru, wyrównania i fontu. Wartością jest obiekt <code class="docutils literal notranslate"><span class="pre">TextRenderCache</span></code>, który przechowuje <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> z gotową geometrią tekstu. Przy pierwszym żądaniu narysowania danego tekstu, geometria jest obliczana i zapisywana w cache. Przy kolejnych żądaniach, używana jest już istniejąca geometria. System posiada również mechanizm czyszczenia nieużywanych wpisów z cache.</p>
</section>
<section id="void-textrender-init-i-void-textrender-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::init()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::terminate()</span></code><a class="headerlink" href="#void-textrender-init-i-void-textrender-terminate" title="Link to this heading">#</a></h1>
<p>Metody inicjalizujące i zwalniające cache.</p>
</section>
<section id="void-textrender-poll">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::poll()</span></code><a class="headerlink" href="#void-textrender-poll" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana okresowo. Jej zadaniem jest czyszczenie cache z wpisów, które nie były używane od pewnego czasu. Implementuje prosty mechanizm LRU (Least Recently Used) oparty na czasie ostatniego użycia (<code class="docutils literal notranslate"><span class="pre">lastUse</span></code>).</p>
</section>
<section id="uint64-t-textrender-addtext">
<h1><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">TextRender::addText(...)</span></code><a class="headerlink" href="#uint64-t-textrender-addtext" title="Link to this heading">#</a></h1>
<p>Generuje unikalny hash dla kombinacji (font, tekst, rozmiar, wyrównanie) i tworzy dla niego wpis w cache, jeśli jeszcze nie istnieje. Zwraca wygenerowany hash.</p>
</section>
<section id="void-textrender-drawtext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::drawText(...)</span></code><a class="headerlink" href="#void-textrender-drawtext" title="Link to this heading">#</a></h1>
<p>Wysokopoziomowa metoda do rysowania tekstu. Najpierw wywołuje <code class="docutils literal notranslate"><span class="pre">addText</span></code>, aby uzyskać/stworzyć wpis w cache, a następnie wywołuje drugą wersję <code class="docutils literal notranslate"><span class="pre">drawText</span></code> z hashem.</p>
</section>
<section id="void-textrender-drawtext-const-point-pos-uint64-t-hash">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::drawText(const</span> <span class="pre">Point&amp;</span> <span class="pre">pos,</span> <span class="pre">uint64_t</span> <span class="pre">hash,</span> <span class="pre">...)</span></code><a class="headerlink" href="#void-textrender-drawtext-const-point-pos-uint64-t-hash" title="Link to this heading">#</a></h1>
<p>Główna metoda rysująca.</p>
<ol class="arabic simple">
<li><p>Znajduje wpis w cache na podstawie hasha.</p></li>
<li><p>Jeśli wpis jest nowy (<code class="docutils literal notranslate"><span class="pre">it→font</span></code> nie jest <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>), wywołuje <code class="docutils literal notranslate"><span class="pre">font→calculateDrawTextCoords</span></code>, aby wygenerować geometrię, keszuje ją w <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> (<code class="docutils literal notranslate"><span class="pre">it→coords.cache()</span></code>) i zwalnia referencje do fontu i tekstu, aby oszczędzać pamięć.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">g_painter→drawText</span></code>, przekazując mu gotowy <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> z geometrią.</p></li>
<li><p>Obsługuje również rysowanie cienia.</p></li>
</ol>
</section>
<section id="void-textrender-drawcoloredtext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::drawColoredText(...)</span></code><a class="headerlink" href="#void-textrender-drawcoloredtext" title="Link to this heading">#</a></h1>
<p>Działa analogicznie do <code class="docutils literal notranslate"><span class="pre">drawText</span></code>, ale wywołuje <code class="docutils literal notranslate"><span class="pre">g_painter→drawText</span></code> w wersji dla tekstu wielokolorowego.</p>
</section>
<section id="id470">
<h1>Zależności i powiązania<a class="headerlink" href="#id470" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/textrender.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/painter.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_painter</span></code> do finalnego rysowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do walidacji wątku.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">DrawQueueItemText</span></code> do renderowania tekstu.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="shaderprogram-cpp">
<h1>📄 shaderprogram.cpp<a class="headerlink" href="#shaderprogram-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id471">
<h1>Opis ogólny<a class="headerlink" href="#id471" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">shaderprogram.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code>, która jest podstawowym obiektem do zarządzania programami shaderów w OpenGL.</p>
</section>
<section id="id472">
<h1>Zmienne globalne<a class="headerlink" href="#id472" title="Link to this heading">#</a></h1>
</section>
<section id="uint-shaderprogram-m-currentprogram">
<h1><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">ShaderProgram::m_currentProgram</span></code><a class="headerlink" href="#uint-shaderprogram-m-currentprogram" title="Link to this heading">#</a></h1>
<p>Statyczna zmienna członkowska, która przechowuje ID aktualnie aktywnego (zbindowanego) programu shadera. Służy do unikania zbędnych wywołań <code class="docutils literal notranslate"><span class="pre">glUseProgram</span></code>, jeśli ten sam program jest już aktywny.</p>
</section>
<section id="id473">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code><a class="headerlink" href="#id473" title="Link to this heading">#</a></h1>
</section>
<section id="shaderprogram-shaderprogram-const-std-string-name">
<h1><code class="docutils literal notranslate"><span class="pre">ShaderProgram::ShaderProgram(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code><a class="headerlink" href="#shaderprogram-shaderprogram-const-std-string-name" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje nazwę, ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_linked</span></code> na <code class="docutils literal notranslate"><span class="pre">false</span></code> i tworzy nowy, pusty obiekt programu shadera w OpenGL za pomocą <code class="docutils literal notranslate"><span class="pre">glCreateProgram()</span></code>.</p>
</section>
<section id="shaderprogram-shaderprogram">
<h1><code class="docutils literal notranslate"><span class="pre">ShaderProgram::~ShaderProgram()</span></code><a class="headerlink" href="#shaderprogram-shaderprogram" title="Link to this heading">#</a></h1>
<p>Destruktor. Zwalnia zasób programu shadera, wywołując <code class="docutils literal notranslate"><span class="pre">glDeleteProgram()</span></code>.</p>
</section>
<section id="paintershaderprogramptr-shaderprogram-create">
<h1><code class="docutils literal notranslate"><span class="pre">PainterShaderProgramPtr</span> <span class="pre">ShaderProgram::create(...)</span></code><a class="headerlink" href="#paintershaderprogramptr-shaderprogram-create" title="Link to this heading">#</a></h1>
<p>Statyczna metoda fabryczna, która tworzy i konfiguruje <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code>. Jest to główny sposób tworzenia shaderów w tym frameworku.</p>
</section>
<section id="id474">
<h1>Działanie<a class="headerlink" href="#id474" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Tworzy nowy obiekt <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code>.</p></li>
<li><p>Dodaje i kompiluje shadery wierzchołków i fragmentów.</p></li>
<li><p>Opcjonalnie włącza tryb macierzy kolorów.</p></li>
<li><p>Linkuje program.</p></li>
<li><p>W przypadku błędów kompilacji lub linkowania, loguje szczegółowe informacje i zwraca <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>.</p></li>
</ol>
</section>
<section id="bool-shaderprogram-addshader">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ShaderProgram::addShader(...)</span></code><a class="headerlink" href="#bool-shaderprogram-addshader" title="Link to this heading">#</a></h1>
<p>Dołącza wcześniej skompilowany obiekt <code class="docutils literal notranslate"><span class="pre">Shader</span></code> do programu za pomocą <code class="docutils literal notranslate"><span class="pre">glAttachShader</span></code>.</p>
</section>
<section id="bool-shaderprogram-addshaderfromsourcecode-i-addshaderfromsourcefile">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ShaderProgram::addShaderFromSourceCode(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">addShaderFromSourceFile(...)</span></code><a class="headerlink" href="#bool-shaderprogram-addshaderfromsourcecode-i-addshaderfromsourcefile" title="Link to this heading">#</a></h1>
<p>Metody pomocnicze, które tworzą obiekt <code class="docutils literal notranslate"><span class="pre">Shader</span></code>, kompilują go z kodu źródłowego lub pliku, a następnie dodają do programu.</p>
</section>
<section id="bool-shaderprogram-link">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ShaderProgram::link()</span></code><a class="headerlink" href="#bool-shaderprogram-link" title="Link to this heading">#</a></h1>
</section>
<section id="id475">
<h1>Opis semantyczny<a class="headerlink" href="#id475" title="Link to this heading">#</a></h1>
<p>Linkuje wszystkie dołączone shadery w jeden wykonywalny program.</p>
</section>
<section id="id476">
<h1>Działanie<a class="headerlink" href="#id476" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">glLinkProgram()</span></code>.</p></li>
<li><p>Sprawdza status linkowania za pomocą <code class="docutils literal notranslate"><span class="pre">glGetProgramiv</span></code>.</p></li>
<li><p>Jeśli wystąpi błąd, pobiera i loguje szczegółowy komunikat błędu z <code class="docutils literal notranslate"><span class="pre">glGetProgramInfoLog</span></code>.</p></li>
<li><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code> w przypadku sukcesu.</p></li>
</ol>
</section>
<section id="bool-shaderprogram-bind">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ShaderProgram::bind()</span></code><a class="headerlink" href="#bool-shaderprogram-bind" title="Link to this heading">#</a></h1>
<p>Aktywuje program shadera w potoku renderowania OpenGL za pomocą <code class="docutils literal notranslate"><span class="pre">glUseProgram</span></code>. Dzięki <code class="docutils literal notranslate"><span class="pre">m_currentProgram</span></code>, faktyczne wywołanie <code class="docutils literal notranslate"><span class="pre">glUseProgram</span></code> następuje tylko wtedy, gdy zmieniany jest program.</p>
</section>
<section id="void-shaderprogram-release">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ShaderProgram::release()</span></code><a class="headerlink" href="#void-shaderprogram-release" title="Link to this heading">#</a></h1>
<p>Deaktywuje jakikolwiek aktywny program shadera (<code class="docutils literal notranslate"><span class="pre">glUseProgram(0)</span></code>).</p>
</section>
<section id="metody-location-i-set-value">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">...Location(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">set...Value(...)</span></code><a class="headerlink" href="#metody-location-i-set-value" title="Link to this heading">#</a></h1>
<p>Implementują interfejs do pracy z atrybutami i uniformami w shaderze, opakowując odpowiednie funkcje OpenGL (<code class="docutils literal notranslate"><span class="pre">glGetAttribLocation</span></code>, <code class="docutils literal notranslate"><span class="pre">glBindAttribLocation</span></code>, <code class="docutils literal notranslate"><span class="pre">glGetUniformLocation</span></code>, <code class="docutils literal notranslate"><span class="pre">glUniform...</span></code>, <code class="docutils literal notranslate"><span class="pre">glVertexAttrib...</span></code>).</p>
</section>
<section id="id477">
<h1>Zależności i powiązania<a class="headerlink" href="#id477" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/shaderprogram.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graphics.h</span></code>: Do sprawdzania błędów i dostępu do informacji o sterowniku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/application.h</span></code>: Do sprawdzania stanu aplikacji.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code>.</p></li>
<li><p>Jest zarządzana przez <code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="texture-cpp">
<h1>📄 texture.cpp<a class="headerlink" href="#texture-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id478">
<h1>Opis ogólny<a class="headerlink" href="#id478" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">texture.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Texture</span></code>, która jest obiektowym opakowaniem na teksturę w OpenGL. Odpowiada za tworzenie, ładowanie danych, ustawianie parametrów i zwalnianie zasobów tekstury w pamięci karty graficznej.</p>
</section>
<section id="id479">
<h1>Zmienne globalne<a class="headerlink" href="#id479" title="Link to this heading">#</a></h1>
</section>
<section id="uint-texture-uniqueid">
<h1><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">Texture::uniqueId</span></code><a class="headerlink" href="#uint-texture-uniqueid" title="Link to this heading">#</a></h1>
<p>Statyczny licznik używany do przypisywania unikalnego ID każdej nowo utworzonej teksturze. Jest to przydatne do szybkiego porównywania tekstur.</p>
</section>
<section id="klasa-texture">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Texture</span></code><a class="headerlink" href="#klasa-texture" title="Link to this heading">#</a></h1>
</section>
<section id="texture-texture">
<h1><code class="docutils literal notranslate"><span class="pre">Texture::Texture(...)</span></code><a class="headerlink" href="#texture-texture" title="Link to this heading">#</a></h1>
<p>Konstruktory.</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">Texture(const</span> <span class="pre">Size&amp;</span> <span class="pre">size,</span> <span class="pre">...)</span></code></strong>: Tworzy pustą teksturę o podanych wymiarach.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">Texture(const</span> <span class="pre">ImagePtr&amp;</span> <span class="pre">image,</span> <span class="pre">...)</span></code></strong>: Tworzy teksturę na podstawie obiektu <code class="docutils literal notranslate"><span class="pre">Image</span></code>.</p></li>
<li><p><strong>Działanie</strong>: Inicjalizują pola, przypisują unikalne ID i zwiększają globalny licznik tekstur w <code class="docutils literal notranslate"><span class="pre">g_stats</span></code>.</p></li>
</ul>
</section>
<section id="id480">
<h1><code class="docutils literal notranslate"><span class="pre">Texture::~Texture()</span></code><a class="headerlink" href="#id480" title="Link to this heading">#</a></h1>
<p>Destruktor. Dodaje zadanie usunięcia tekstury z pamięci GPU do kolejki dyspozytora graficznego (<code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code>), co zapewnia bezpieczeństwo wątkowe. Zmniejsza globalny licznik tekstur.</p>
</section>
<section id="void-texture-replace-const-imageptr-image">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Texture::replace(const</span> <span class="pre">ImagePtr&amp;</span> <span class="pre">image)</span></code><a class="headerlink" href="#void-texture-replace-const-imageptr-image" title="Link to this heading">#</a></h1>
<p>Zastępuje zawartość tekstury nowym obrazem. Stara tekstura w OpenGL jest zwalniana, a nowa zostanie utworzona przy następnym wywołaniu <code class="docutils literal notranslate"><span class="pre">update()</span></code>.</p>
</section>
<section id="void-texture-resize-const-size-size">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Texture::resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code><a class="headerlink" href="#void-texture-resize-const-size-size" title="Link to this heading">#</a></h1>
<p>Zmienia rozmiar istniejącej tekstury, ponownie alokując dla niej pamięć w GPU za pomocą <code class="docutils literal notranslate"><span class="pre">glTexImage2D</span></code> z <code class="docutils literal notranslate"><span class="pre">nullptr</span></code> jako danymi pikseli.</p>
</section>
<section id="void-texture-update">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Texture::update()</span></code><a class="headerlink" href="#void-texture-update" title="Link to this heading">#</a></h1>
</section>
<section id="id481">
<h1>Opis semantyczny<a class="headerlink" href="#id481" title="Link to this heading">#</a></h1>
<p>Kluczowa metoda, która dba o to, aby obiekt tekstury w OpenGL był poprawnie zainicjalizowany i skonfigurowany. Musi być wywoływana przed pierwszym użyciem tekstury.</p>
</section>
<section id="id482">
<h1>Działanie<a class="headerlink" href="#id482" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p><strong>Jeśli tekstura nie istnieje (<code class="docutils literal notranslate"><span class="pre">m_id</span> <span class="pre">==</span> <span class="pre">0</span></code>)</strong>:</p>
<ul class="simple">
<li><p>Generuje nowe ID tekstury (<code class="docutils literal notranslate"><span class="pre">glGenTextures</span></code>).</p></li>
<li><p>Bindowanie teksturę.</p></li>
<li><p>Jeśli <code class="docutils literal notranslate"><span class="pre">m_image</span></code> istnieje, przesyła jego dane pikseli do GPU za pomocą <code class="docutils literal notranslate"><span class="pre">setupPixels</span></code>, generując mipmapy, jeśli to wymagane. Następnie zwalnia <code class="docutils literal notranslate"><span class="pre">m_image</span></code>, aby oszczędzać RAM.</p></li>
<li><p>Jeśli nie ma obrazu, tworzy pustą teksturę.</p></li>
</ul>
</li>
<li><p><strong>Jeśli <code class="docutils literal notranslate"><span class="pre">m_needsUpdate</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code></strong>:</p>
<ul class="simple">
<li><p>Bindowanie teksturę.</p></li>
<li><p>Ustawia parametry zawijania (<code class="docutils literal notranslate"><span class="pre">setupWrap</span></code>).</p></li>
<li><p>Ustawia parametry filtrowania (<code class="docutils literal notranslate"><span class="pre">setupFilters</span></code>).</p></li>
<li><p>Aktualizuje macierz transformacji (<code class="docutils literal notranslate"><span class="pre">setupTranformMatrix</span></code>).</p></li>
<li><p>Resetuje flagę <code class="docutils literal notranslate"><span class="pre">m_needsUpdate</span></code>.</p></li>
</ul>
</li>
</ol>
</section>
<section id="void-texture-setsmooth-bool-smooth-i-void-texture-setrepeat-bool-repeat">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Texture::setSmooth(bool</span> <span class="pre">smooth)</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Texture::setRepeat(bool</span> <span class="pre">repeat)</span></code><a class="headerlink" href="#void-texture-setsmooth-bool-smooth-i-void-texture-setrepeat-bool-repeat" title="Link to this heading">#</a></h1>
<p>Ustawiają flagi, które zostaną zastosowane do parametrów tekstury (<code class="docutils literal notranslate"><span class="pre">GL_TEXTURE_MIN/MAG_FILTER</span></code>, <code class="docutils literal notranslate"><span class="pre">GL_TEXTURE_WRAP_S/T</span></code>) podczas następnego wywołania <code class="docutils literal notranslate"><span class="pre">update()</span></code>.</p>
</section>
<section id="metody-setup">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">setup...()</span></code><a class="headerlink" href="#metody-setup" title="Link to this heading">#</a></h1>
<p>Prywatne metody pomocnicze, które wywołują odpowiednie funkcje OpenGL do konfiguracji tekstury:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setupSize()</span></code>: Sprawdza, czy rozmiar nie przekracza limitów GPU.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setupWrap()</span></code>: Ustawia <code class="docutils literal notranslate"><span class="pre">glTexParameteri</span></code> dla <code class="docutils literal notranslate"><span class="pre">GL_TEXTURE_WRAP_S/T</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setupFilters()</span></code>: Ustawia <code class="docutils literal notranslate"><span class="pre">glTexParameteri</span></code> dla <code class="docutils literal notranslate"><span class="pre">GL_TEXTURE_MIN/MAG_FILTER</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setupTranformMatrix()</span></code>: Oblicza macierz do transformacji współrzędnych tekstury (np. w celu odwrócenia jej w osi Y).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setupPixels()</span></code>: Wywołuje <code class="docutils literal notranslate"><span class="pre">glTexImage2D</span></code> do przesłania danych pikseli.</p></li>
</ul>
</section>
<section id="id483">
<h1>Zależności i powiązania<a class="headerlink" href="#id483" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/texture.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/graphics.h</span></code>: Do operacji OpenGL i sprawdzania limitów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/image.h</span></code>: Używana jako źródło danych pikseli.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code>.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="texture-h">
<h1>📄 texture.h<a class="headerlink" href="#texture-h" title="Link to this heading">#</a></h1>
</section>
<section id="id484">
<h1>Opis ogólny<a class="headerlink" href="#id484" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">texture.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Texture</span></code>, która jest obiektowym interfejsem do zarządzania teksturami w OpenGL.</p>
</section>
<section id="id485">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Texture</span></code><a class="headerlink" href="#id485" title="Link to this heading">#</a></h1>
</section>
<section id="id486">
<h1>Opis semantyczny<a class="headerlink" href="#id486" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Texture</span></code> enkapsuluje ID tekstury w OpenGL oraz jej właściwości, takie jak rozmiar, wygładzanie (filtrowanie), powtarzanie (wrapping) i mipmapy. Dostarcza metody do tworzenia tekstury z obiektu <code class="docutils literal notranslate"><span class="pre">Image</span></code> lub jako pustej tekstury (np. dla bufora ramki). Metoda <code class="docutils literal notranslate"><span class="pre">update()</span></code> jest kluczowa i synchronizuje stan obiektu C++ z rzeczywistym stanem tekstury w pamięci GPU.</p>
</section>
<section id="id487">
<h1>Metody publiczne<a class="headerlink" href="#id487" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Texture(...)</span></code></p></td>
<td class="text-left"><p>Konstruktory.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">~Texture()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">replace(...)</span></code></p></td>
<td class="text-left"><p>Zastępuje zawartość tekstury nowym obrazem.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">resize(...)</span></code></p></td>
<td class="text-left"><p>Zmienia rozmiar tekstury.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">update()</span></code></p></td>
<td class="text-left"><p>Tworzy lub aktualizuje parametry tekstury w OpenGL.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setUpsideDown(...)</span></code></p></td>
<td class="text-left"><p>Ustawia, czy tekstura ma być odwrócona.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setSmooth(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wygładzanie (filtrowanie liniowe/najbliższego sąsiada).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setRepeat(...)</span></code></p></td>
<td class="text-left"><p>Ustawia tryb powtarzania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">bool</span> <span class="pre">buildHardwareMipmaps()</span></code></p></td>
<td class="text-left"><p>Włącza generowanie mipmap przez GPU.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">getId()</span></code></p></td>
<td class="text-left"><p>Zwraca ID tekstury w OpenGL.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">getUniqueId()</span></code></p></td>
<td class="text-left"><p>Zwraca unikalne ID obiektu w aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">Size&amp;</span> <span class="pre">getSize()</span></code></p></td>
<td class="text-left"><p>Zwraca rozmiar tekstury.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">Matrix3&amp;</span> <span class="pre">getTransformMatrix()</span></code></p></td>
<td class="text-left"><p>Zwraca macierz transformacji dla współrzędnych tekstury.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isEmpty()</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy tekstura jest pusta.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">canCache()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli teksturę można umieścić w atlasie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">bool</span> <span class="pre">isAnimatedTexture()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">false</span></code> (przesłaniane przez <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id488">
<h1>Zmienne chronione<a class="headerlink" href="#id488" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_id</span></code>: ID tekstury w OpenGL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_uniqueId</span></code>: Unikalne ID w aplikacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_size</span></code>: Rozmiar tekstury.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_transformMatrix</span></code>: Macierz transformacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_hasMipmaps</span></code>, <code class="docutils literal notranslate"><span class="pre">m_smooth</span></code>, <code class="docutils literal notranslate"><span class="pre">m_upsideDown</span></code>, <code class="docutils literal notranslate"><span class="pre">m_repeat</span></code>, …: Flagi stanu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_image</span></code>: Wskaźnik na <code class="docutils literal notranslate"><span class="pre">Image</span></code>, używany tylko podczas tworzenia tekstury.</p></li>
</ul>
</section>
<section id="id489">
<h1>Zależności i powiązania<a class="headerlink" href="#id489" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Definicje typów, np. <code class="docutils literal notranslate"><span class="pre">ImagePtr</span></code>.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code>.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code>.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code>, <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> i inne komponenty do rysowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="texturemanager-cpp">
<h1>📄 texturemanager.cpp<a class="headerlink" href="#texturemanager-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id490">
<h1>Opis ogólny<a class="headerlink" href="#id490" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">texturemanager.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_textures</span></code>) odpowiedzialnym za zarządzanie teksturami w aplikacji. Działa jako cache, aby zapobiec wielokrotnemu ładowaniu tych samych tekstur z dysku.</p>
</section>
<section id="id491">
<h1>Zmienne globalne<a class="headerlink" href="#id491" title="Link to this heading">#</a></h1>
</section>
<section id="g-textures">
<h1><code class="docutils literal notranslate"><span class="pre">g_textures</span></code><a class="headerlink" href="#g-textures" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TextureManager</span><span class="w"> </span><span class="n">g_textures</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="klasa-texturemanager">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code><a class="headerlink" href="#klasa-texturemanager" title="Link to this heading">#</a></h1>
</section>
<section id="void-texturemanager-init-i-void-texturemanager-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextureManager::init()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextureManager::terminate()</span></code><a class="headerlink" href="#void-texturemanager-init-i-void-texturemanager-terminate" title="Link to this heading">#</a></h1>
<p>Metody do inicjalizacji i zwalniania menedżera. <code class="docutils literal notranslate"><span class="pre">terminate()</span></code> czyści wszystkie zbuforowane tekstury.</p>
</section>
<section id="void-texturemanager-clearcache">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextureManager::clearCache()</span></code><a class="headerlink" href="#void-texturemanager-clearcache" title="Link to this heading">#</a></h1>
<p>Czyści wszystkie zbuforowane tekstury, w tym animowane.</p>
</section>
<section id="void-texturemanager-reload">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextureManager::reload()</span></code><a class="headerlink" href="#void-texturemanager-reload" title="Link to this heading">#</a></h1>
<p>Przeładowuje wszystkie załadowane tekstury z ich oryginalnych plików. Jest to przydatne do „hot-reloading” zasobów.</p>
</section>
<section id="textureptr-texturemanager-gettexture-const-std-string-filename">
<h1><code class="docutils literal notranslate"><span class="pre">TexturePtr</span> <span class="pre">TextureManager::getTexture(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code><a class="headerlink" href="#textureptr-texturemanager-gettexture-const-std-string-filename" title="Link to this heading">#</a></h1>
</section>
<section id="id492">
<h1>Opis semantyczny<a class="headerlink" href="#id492" title="Link to this heading">#</a></h1>
<p>Główna metoda do pobierania tekstury. Działa jak „get-or-load”.</p>
</section>
<section id="id493">
<h1>Działanie<a class="headerlink" href="#id493" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy tekstura o podanej nazwie (<code class="docutils literal notranslate"><span class="pre">fileName</span></code>) jest już w cache (<code class="docutils literal notranslate"><span class="pre">m_textures</span></code>). Jeśli tak, zwraca ją.</p></li>
<li><p>Jeśli nie, rozwiązuje pełną ścieżkę do pliku za pomocą <code class="docutils literal notranslate"><span class="pre">g_resources</span></code>.</p></li>
<li><p>Ponownie sprawdza cache, tym razem z pełną ścieżką.</p></li>
<li><p>Jeśli tekstury wciąż nie ma, próbuje ją załadować z pliku:</p>
<ul class="simple">
<li><p>Odczytuje plik do strumienia w pamięci.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">loadTexture()</span></code>, aby sparsować dane (APNG) i utworzyć obiekt <code class="docutils literal notranslate"><span class="pre">Texture</span></code> lub <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code>.</p></li>
</ul>
</li>
<li><p>Jeśli ładowanie się powiedzie, dodaje nową teksturę do cache pod obiema nazwami (oryginalną i pełną ścieżką) i zwraca ją.</p></li>
<li><p>W przypadku błędu, loguje go i zwraca <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>.</p></li>
</ol>
</section>
<section id="textureptr-texturemanager-loadtexture-std-stringstream-file-const-std-string-source">
<h1><code class="docutils literal notranslate"><span class="pre">TexturePtr</span> <span class="pre">TextureManager::loadTexture(std::stringstream&amp;</span> <span class="pre">file,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">source)</span></code><a class="headerlink" href="#textureptr-texturemanager-loadtexture-std-stringstream-file-const-std-string-source" title="Link to this heading">#</a></h1>
<p>Metoda pomocnicza, która parsuje strumień danych APNG za pomocą <code class="docutils literal notranslate"><span class="pre">load_apng</span></code>.</p>
<ul class="simple">
<li><p>Jeśli plik zawiera jedną klatkę, tworzy <code class="docutils literal notranslate"><span class="pre">Texture</span></code>.</p></li>
<li><p>Jeśli plik zawiera wiele klatek, tworzy <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code>.</p></li>
</ul>
</section>
<section id="id494">
<h1>Zależności i powiązania<a class="headerlink" href="#id494" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/texturemanager.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/animatedtexture.h</span></code>, <code class="docutils literal notranslate"><span class="pre">image.h</span></code>: Do tworzenia obiektów tekstur.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Do odczytywania plików tekstur.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/apngloader.h</span></code>: Do parsowania formatu APNG.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>, <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code> i inne komponenty, które potrzebują wyświetlać obrazy.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="vertexarray-h">
<h1>📄 vertexarray.h<a class="headerlink" href="#vertexarray-h" title="Link to this heading">#</a></h1>
</section>
<section id="id495">
<h1>Opis ogólny<a class="headerlink" href="#id495" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">vertexarray.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code>, która jest prostym, dynamicznym buforem na współrzędne wierzchołków (<code class="docutils literal notranslate"><span class="pre">float</span></code>). Służy do gromadzenia geometrii przed wysłaniem jej do renderowania.</p>
</section>
<section id="klasa-vertexarray">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code><a class="headerlink" href="#klasa-vertexarray" title="Link to this heading">#</a></h1>
</section>
<section id="id496">
<h1>Opis semantyczny<a class="headerlink" href="#id496" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">VertexArray</span></code> to opakowanie na <code class="docutils literal notranslate"><span class="pre">DataBuffer&lt;float&gt;</span></code>, zoptymalizowane do przechowywania par współrzędnych (X, Y). Udostępnia metody do dodawania popularnych prymitywów 2D (trójkąty, prostokąty) i może opcjonalnie przenieść swoje dane do sprzętowego bufora VBO (<code class="docutils literal notranslate"><span class="pre">HardwareBuffer</span></code>) w celu zwiększenia wydajności.</p>
</section>
<section id="id497">
<h1>Metody publiczne<a class="headerlink" href="#id497" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">VertexArray()</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">~VertexArray()</span></code></p></td>
<td class="text-left"><p>Destruktor, zwalnia <code class="docutils literal notranslate"><span class="pre">m_hardwareBuffer</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">VertexArray(VertexArray&amp;</span> <span class="pre">c)</span></code></p></td>
<td class="text-left"><p>Konstruktor kopiujący (kopiuje tylko dane z <code class="docutils literal notranslate"><span class="pre">m_buffer</span></code>, nie <code class="docutils literal notranslate"><span class="pre">m_hardwareBuffer</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addVertex(float</span> <span class="pre">x,</span> <span class="pre">float</span> <span class="pre">y)</span></code></p></td>
<td class="text-left"><p>Dodaje pojedynczy wierzchołek.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addTriangle(...)</span></code></p></td>
<td class="text-left"><p>Dodaje trzy wierzchołki tworzące trójkąt.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addRect(...)</span></code></p></td>
<td class="text-left"><p>Dodaje sześć wierzchołków tworzących dwa trójkąty (prostokąt).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addQuad(...)</span></code></p></td>
<td class="text-left"><p>Dodaje cztery wierzchołki tworzące czworokąt (dla <code class="docutils literal notranslate"><span class="pre">TriangleStrip</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clear()</span></code></p></td>
<td class="text-left"><p>Czyści bufor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">*vertices()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik na surowe dane.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">vertexCount()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę wierzchołków.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">cache()</span></code></p></td>
<td class="text-left"><p>Kopiuje dane z bufora RAM do bufora VBO na karcie graficznej.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isCached()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli dane zostały skopiowane do VBO.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">HardwareBuffer*</span> <span class="pre">getHardwareCache()</span></code></p></td>
<td class="text-left"><p>Zwraca wskaźnik na obiekt <code class="docutils literal notranslate"><span class="pre">HardwareBuffer</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id498">
<h1>Zmienne prywatne<a class="headerlink" href="#id498" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_buffer</span></code>: Bufor <code class="docutils literal notranslate"><span class="pre">DataBuffer&lt;float&gt;</span></code> przechowujący współrzędne.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_hardwareBuffer</span></code>: Wskaźnik na opcjonalny bufor VBO.</p></li>
</ul>
</section>
<section id="id499">
<h1>Zależności i powiązania<a class="headerlink" href="#id499" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/hardwarebuffer.h</span></code>: Do sprzętowego keszowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/databuffer.h</span></code>: Używana jako wewnętrzny kontener.</p></li>
<li><p>Jest podstawowym składnikiem <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code>, który używa dwóch instancji <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code> (jednej na pozycje, drugiej na współrzędne tekstur).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="texturemanager-h">
<h1>📄 texturemanager.h<a class="headerlink" href="#texturemanager-h" title="Link to this heading">#</a></h1>
</section>
<section id="id500">
<h1>Opis ogólny<a class="headerlink" href="#id500" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">texturemanager.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_textures</span></code>) odpowiedzialnym za zarządzanie (ładowanie, cachowanie, zwalnianie) teksturami w aplikacji.</p>
</section>
<section id="id501">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code><a class="headerlink" href="#id501" title="Link to this heading">#</a></h1>
</section>
<section id="id502">
<h1>Opis semantyczny<a class="headerlink" href="#id502" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">TextureManager</span></code> działa jako centralne repozytorium tekstur. Gdy jakaś część kodu prosi o teksturę z pliku, menedżer najpierw sprawdza, czy nie została ona już załadowana. Jeśli tak, zwraca istniejącą instancję. Jeśli nie, ładuje ją z dysku, zapisuje w swojej pamięci podręcznej (cache) i zwraca. Zapobiega to wielokrotnemu ładowaniu tych samych zasobów i marnowaniu pamięci.</p>
</section>
<section id="id503">
<h1>Metody publiczne<a class="headerlink" href="#id503" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje menedżera.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Zwalnia wszystkie załadowane tekstury.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clearCache()</span></code></p></td>
<td class="text-left"><p>Czyści pamięć podręczną tekstur.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">reload()</span></code></p></td>
<td class="text-left"><p>Przeładowuje wszystkie tekstury z plików, umożliwiając „hot-reloading”.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">preload(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code></p></td>
<td class="text-left"><p>Skrót do <code class="docutils literal notranslate"><span class="pre">getTexture</span></code>, który ładuje teksturę do cache, ale nie zwraca jej.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">TexturePtr</span> <span class="pre">getTexture(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code></p></td>
<td class="text-left"><p>Pobiera teksturę. Jeśli nie ma jej w cache, ładuje ją.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">TexturePtr</span> <span class="pre">loadTexture(...)</span></code></p></td>
<td class="text-left"><p>Niskopoziomowa metoda do tworzenia tekstury ze strumienia danych.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id504">
<h1>Zmienne prywatne<a class="headerlink" href="#id504" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_textures</span></code>: Mapa (<code class="docutils literal notranslate"><span class="pre">std::unordered_map</span></code>) przechowująca załadowane tekstury, gdzie kluczem jest nazwa pliku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_animatedTextures</span></code>: Wektor przechowujący wskaźniki do animowanych tekstur, prawdopodobnie w celu ich aktualizacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_liveReloadEvent</span></code>: Wskaźnik na zdarzenie, prawdopodobnie do implementacji „live reload”.</p></li>
</ul>
</section>
<section id="id505">
<h1>Zależności i powiązania<a class="headerlink" href="#id505" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/texture.h</span></code>: Definicja <code class="docutils literal notranslate"><span class="pre">Texture</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/declarations.h</span></code>: Deklaracje <code class="docutils literal notranslate"><span class="pre">ScheduledEventPtr</span></code>.</p></li>
<li><p>Jest to kluczowy menedżer w systemie graficznym, używany przez wszystkie komponenty, które muszą wyświetlać obrazy, takie jak <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> czy <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="textrender-h">
<h1>📄 textrender.h<a class="headerlink" href="#textrender-h" title="Link to this heading">#</a></h1>
</section>
<section id="id506">
<h1>Opis ogólny<a class="headerlink" href="#id506" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">textrender.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">TextRender</span></code>, która jest systemem do optymalizacji renderowania tekstu. Działa jako globalny cache dla geometrii tekstu.</p>
</section>
<section id="struktura-textrendercache">
<h1>Struktura <code class="docutils literal notranslate"><span class="pre">TextRenderCache</span></code><a class="headerlink" href="#struktura-textrendercache" title="Link to this heading">#</a></h1>
<p>Przechowuje wszystkie informacje potrzebne do narysowania tekstu, w tym gotowy <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> z geometrią.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Pole</p></th>
<th class="head text-left"><p>Typ</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">font</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">BitmapFontPtr</span></code></p></td>
<td class="text-left"><p>Font użyty do wygenerowania geometrii (zwalniany po pierwszym użyciu).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td class="text-left"><p>Tekst (zwalniany po pierwszym użyciu).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">size</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Size</span></code></p></td>
<td class="text-left"><p>Rozmiar obszaru, w którym tekst ma być rysowany.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">align</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Fw::AlignmentFlag</span></code></p></td>
<td class="text-left"><p>Wyrównanie tekstu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">texture</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">TexturePtr</span></code></p></td>
<td class="text-left"><p>Tekstura fontu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">coords</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code></p></td>
<td class="text-left"><p>Zbuforowana geometria tekstu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">lastUse</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span></code></p></td>
<td class="text-left"><p>Czas ostatniego użycia (do czyszczenia cache).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id507">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">TextRender</span></code><a class="headerlink" href="#id507" title="Link to this heading">#</a></h1>
</section>
<section id="id508">
<h1>Opis semantyczny<a class="headerlink" href="#id508" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">TextRender</span></code> minimalizuje narzut na CPU związany z obliczaniem pozycji poszczególnych glifów dla często wyświetlanych tekstów. Zamiast przeliczać geometrię w każdej klatce, robi to tylko raz, a następnie przechowuje wynik w cache.</p>
</section>
<section id="id509">
<h1>Stałe<a class="headerlink" href="#id509" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">INDEXES</span></code>: Liczba „kubełków” w hash mapie. Użycie wielu map z osobnymi mutexami ma na celu zmniejszenie rywalizacji o zasoby w środowisku wielowątkowym.</p></li>
</ul>
</section>
<section id="id510">
<h1>Metody publiczne<a class="headerlink" href="#id510" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init()</span></code> / <code class="docutils literal notranslate"><span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje i zwalnia system.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">poll()</span></code></p></td>
<td class="text-left"><p>Czyści cache z nieużywanych wpisów.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addText(...)</span></code></p></td>
<td class="text-left"><p>Generuje hash dla tekstu i tworzy dla niego wpis w cache.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">drawText(...)</span></code></p></td>
<td class="text-left"><p>Rysuje tekst, używając skeszowanej geometrii.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">drawColoredText(...)</span></code></p></td>
<td class="text-left"><p>Rysuje tekst wielokolorowy.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id511">
<h1>Zmienne prywatne<a class="headerlink" href="#id511" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_cache[INDEXES]</span></code>: Tablica map, która przechowuje skeszowane dane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_mutex[INDEXES]</span></code>: Tablica mutexów, po jednym dla każdej mapy w <code class="docutils literal notranslate"><span class="pre">m_cache</span></code>.</p></li>
</ul>
</section>
<section id="id512">
<h1>Zmienne globalne<a class="headerlink" href="#id512" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_text</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">TextRender</span></code>.</p></li>
</ul>
</section>
<section id="id513">
<h1>Zależności i powiązania<a class="headerlink" href="#id513" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/bitmapfont.h</span></code>, <code class="docutils literal notranslate"><span class="pre">coordsbuffer.h</span></code>: Kluczowe struktury danych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Do śledzenia czasu ostatniego użycia.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">DrawQueueItemText</span></code> do renderowania tekstu w zoptymalizowany sposób.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="outfits-h">
<h1>📄 outfits.h<a class="headerlink" href="#outfits-h" title="Link to this heading">#</a></h1>
</section>
<section id="id514">
<h1>Opis ogólny<a class="headerlink" href="#id514" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">outfits.h</span></code> zawiera kod źródłowy shaderów w postaci stałych stringów, które są używane do renderowania strojów postaci z niestandardowymi kolorami.</p>
</section>
<section id="shadery">
<h1>Shadery<a class="headerlink" href="#shadery" title="Link to this heading">#</a></h1>
</section>
<section id="glsladvancedoutfitvertexshader">
<h1><code class="docutils literal notranslate"><span class="pre">glslAdvancedOutfitVertexShader</span></code><a class="headerlink" href="#glsladvancedoutfitvertexshader" title="Link to this heading">#</a></h1>
</section>
<section id="opis">
<h1>Opis<a class="headerlink" href="#opis" title="Link to this heading">#</a></h1>
<p>Shader wierzchołków dla zaawansowanego renderowania strojów.</p>
</section>
<section id="id515">
<h1>Działanie<a class="headerlink" href="#id515" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p><strong>Atrybuty</strong>: Przyjmuje pozycję wierzchołka (<code class="docutils literal notranslate"><span class="pre">a_Vertex</span></code>) i jego współrzędne na teksturze (<code class="docutils literal notranslate"><span class="pre">a_TexCoord</span></code>).</p></li>
<li><p><strong>Uniformy</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">u_ProjectionMatrix</span></code>, <code class="docutils literal notranslate"><span class="pre">u_TransformMatrix</span></code>: Standardowe macierze do transformacji pozycji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">u_TextureMatrix</span></code>: Do transformacji współrzędnych tekstury.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">u_Offset</span></code>, <code class="docutils literal notranslate"><span class="pre">u_Resolution</span></code>: Dodatkowe dane, prawdopodobnie do efektów.</p></li>
</ul>
</li>
<li><p><strong>Varying</strong>:</p>
<ul class="simple">
<li><p>Przekazuje do shadera fragmentów trzy zestawy współrzędnych tekstury:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">v_TexCoord</span></code>: Podstawowe.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">v_TexCoord2</span></code>: Przesunięte o <code class="docutils literal notranslate"><span class="pre">u_Offset</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">v_TexCoord3</span></code>: Współrzędne oparte na rozdzielczości.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Oblicza finalną pozycję wierzchołka na ekranie (<code class="docutils literal notranslate"><span class="pre">gl_Position</span></code>).</p></li>
</ol>
</section>
<section id="glsladvancedoutfitfragmentshader">
<h1><code class="docutils literal notranslate"><span class="pre">glslAdvancedOutfitFragmentShader</span></code><a class="headerlink" href="#glsladvancedoutfitfragmentshader" title="Link to this heading">#</a></h1>
</section>
<section id="id516">
<h1>Opis<a class="headerlink" href="#id516" title="Link to this heading">#</a></h1>
<p>Shader fragmentów (pikseli) dla zaawansowanego renderowania strojów.</p>
</section>
<section id="id517">
<h1>Działanie<a class="headerlink" href="#id517" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Pobiera kolor piksela z głównej tekstury (<code class="docutils literal notranslate"><span class="pre">u_Tex0</span></code>) na podstawie <code class="docutils literal notranslate"><span class="pre">v_TexCoord</span></code>.</p></li>
<li><p>Sprawdza kolor piksela z tej samej tekstury, ale w przesuniętym miejscu (<code class="docutils literal notranslate"><span class="pre">v_TexCoord2</span></code>). Jeśli alfa tego piksela jest większa od progu, mnoży finalny kolor przez żółty (<code class="docutils literal notranslate"><span class="pre">vec4(1.0,</span> <span class="pre">1.0,</span> <span class="pre">0.0,</span> <span class="pre">1.0)</span></code>), tworząc efekt podświetlenia lub konturu.</p></li>
<li><p>Odrzuca piksel (<code class="docutils literal notranslate"><span class="pre">discard</span></code>), jeśli jego alfa jest zbyt niska.</p></li>
</ol>
<blockquote>
<div><p><strong>NOTE</strong>: Kod shaderów w tym pliku wydaje się być eksperymentalny lub nie w pełni zaimplementowany w reszcie kodu. Prawdziwy shader do strojów znajduje się w <code class="docutils literal notranslate"><span class="pre">shadersources.h</span></code>.</p>
</div></blockquote>
</section>
<section id="id518">
<h1>Zależności i powiązania<a class="headerlink" href="#id518" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest dołączany przez <code class="docutils literal notranslate"><span class="pre">shaders.h</span></code>.</p></li>
<li><p>Kod jest przeznaczony do użycia przez <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="newshader-h">
<h1>📄 newshader.h<a class="headerlink" href="#newshader-h" title="Link to this heading">#</a></h1>
</section>
<section id="id519">
<h1>Opis ogólny<a class="headerlink" href="#id519" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">newshader.h</span></code> zawiera kod źródłowy dla nowego, zoptymalizowanego systemu renderowania opartego na <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>. Definiuje shadery wierzchołków i fragmentów do rysowania geometrii wsadowej, tekstu i linii.</p>
</section>
<section id="id520">
<h1>Shadery<a class="headerlink" href="#id520" title="Link to this heading">#</a></h1>
</section>
<section id="newvertexshader">
<h1><code class="docutils literal notranslate"><span class="pre">newVertexShader</span></code><a class="headerlink" href="#newvertexshader" title="Link to this heading">#</a></h1>
</section>
<section id="id521">
<h1>Opis<a class="headerlink" href="#id521" title="Link to this heading">#</a></h1>
<p>Shader wierzchołków dla <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>.</p>
</section>
<section id="id522">
<h1>Działanie<a class="headerlink" href="#id522" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p><strong>Atrybuty</strong>: Przyjmuje pozycję (<code class="docutils literal notranslate"><span class="pre">a_Vertex</span></code>), współrzędne tekstury (<code class="docutils literal notranslate"><span class="pre">a_TexCoord</span></code>) i <strong>kolor (<code class="docutils literal notranslate"><span class="pre">a_Color</span></code>)</strong> dla każdego wierzchołka.</p></li>
<li><p><strong>Varying</strong>: Przekazuje współrzędne tekstury i kolor do shadera fragmentów.</p></li>
<li><p>Oblicza pozycję wierzchołka.</p></li>
</ol>
</section>
<section id="newfragmentshader">
<h1><code class="docutils literal notranslate"><span class="pre">newFragmentShader</span></code><a class="headerlink" href="#newfragmentshader" title="Link to this heading">#</a></h1>
</section>
<section id="id523">
<h1>Opis<a class="headerlink" href="#id523" title="Link to this heading">#</a></h1>
<p>Shader fragmentów dla <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>.</p>
</section>
<section id="id524">
<h1>Działanie<a class="headerlink" href="#id524" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy współrzędna X tekstury jest mniejsza od 0. Jeśli tak, oznacza to, że wierzchołek nie ma tekstury i jego kolorem jest po prostu <code class="docutils literal notranslate"><span class="pre">v_Color</span></code>.</p></li>
<li><p>W przeciwnym razie, pobiera kolor z tekstury atlasu (<code class="docutils literal notranslate"><span class="pre">u_Atlas</span></code>) i mnoży go przez kolor wierzchołka (<code class="docutils literal notranslate"><span class="pre">v_Color</span></code>).</p></li>
</ol>
</section>
<section id="textvertexshader-i-textfragmentshader">
<h1><code class="docutils literal notranslate"><span class="pre">textVertexShader</span></code> i <code class="docutils literal notranslate"><span class="pre">textFragmentShader</span></code><a class="headerlink" href="#textvertexshader-i-textfragmentshader" title="Link to this heading">#</a></h1>
<p>Shadery zoptymalizowane do rysowania tekstu. Wierzchołki są przesuwane o <code class="docutils literal notranslate"><span class="pre">u_Offset</span></code> (pozycja tekstu na ekranie), a kolor jest jednolity dla całego tekstu (<code class="docutils literal notranslate"><span class="pre">u_Color</span></code>).</p>
</section>
<section id="linevertexshader-i-linefragmentshader">
<h1><code class="docutils literal notranslate"><span class="pre">lineVertexShader</span></code> i <code class="docutils literal notranslate"><span class="pre">lineFragmentShader</span></code><a class="headerlink" href="#linevertexshader-i-linefragmentshader" title="Link to this heading">#</a></h1>
<p>Proste shadery do rysowania linii. Shader fragmentów po prostu ustawia jednolity kolor <code class="docutils literal notranslate"><span class="pre">u_Color</span></code>.</p>
</section>
<section id="id525">
<h1>Zależności i powiązania<a class="headerlink" href="#id525" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest dołączany przez <code class="docutils literal notranslate"><span class="pre">shaders.h</span></code>.</p></li>
<li><p>Shadery te są kompilowane i używane przez <code class="docutils literal notranslate"><span class="pre">Painter</span></code> do implementacji <code class="docutils literal notranslate"><span class="pre">drawCache</span></code>, <code class="docutils literal notranslate"><span class="pre">drawText</span></code> i <code class="docutils literal notranslate"><span class="pre">drawLine</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="shaders-h">
<h1>📄 shaders.h<a class="headerlink" href="#shaders-h" title="Link to this heading">#</a></h1>
</section>
<section id="id526">
<h1>Opis ogólny<a class="headerlink" href="#id526" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">shaders.h</span></code> jest plikiem nagłówkowym, który agreguje wszystkie pliki zawierające kod źródłowy shaderów. Służy jako pojedynczy punkt dołączania dla wszystkich predefiniowanych shaderów w systemie.</p>
</section>
<section id="zawartosc">
<h1>Zawartość<a class="headerlink" href="#zawartosc" title="Link to this heading">#</a></h1>
<p>Dołącza następujące pliki:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">newshader.h</span></code>: Zawiera shadery dla nowego, wsadowego systemu renderowania (<code class="docutils literal notranslate"><span class="pre">DrawCache</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shadersources.h</span></code>: Zawiera kod źródłowy dla standardowych shaderów używanych przez <code class="docutils literal notranslate"><span class="pre">Painter</span></code> (rysowanie tekstur, jednolitych kolorów, strojów).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outfits.h</span></code>: Zawiera eksperymentalne/alternatywne shadery do strojów.</p></li>
</ul>
</section>
<section id="id527">
<h1>Zależności i powiązania<a class="headerlink" href="#id527" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest dołączany przez <code class="docutils literal notranslate"><span class="pre">painter.cpp</span></code> w celu uzyskania dostępu do kodu źródłowego shaderów, które są kompilowane podczas inicjalizacji <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="shadersources-h">
<h1>📄 shadersources.h<a class="headerlink" href="#shadersources-h" title="Link to this heading">#</a></h1>
</section>
<section id="id528">
<h1>Opis ogólny<a class="headerlink" href="#id528" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">shadersources.h</span></code> zawiera kod źródłowy w GLSL dla standardowych shaderów używanych przez klasę <code class="docutils literal notranslate"><span class="pre">Painter</span></code>. Są one zdefiniowane jako stałe stringi i kompilowane w trakcie działania programu.</p>
</section>
<section id="id529">
<h1>Shadery<a class="headerlink" href="#id529" title="Link to this heading">#</a></h1>
</section>
<section id="glslmainvertexshader-i-glslmainwithtexcoordsvertexshader">
<h1><code class="docutils literal notranslate"><span class="pre">glslMainVertexShader</span></code> i <code class="docutils literal notranslate"><span class="pre">glslMainWithTexCoordsVertexShader</span></code><a class="headerlink" href="#glslmainvertexshader-i-glslmainwithtexcoordsvertexshader" title="Link to this heading">#</a></h1>
<p>Są to „szablony” dla shaderów wierzchołków. Definiują one funkcję <code class="docutils literal notranslate"><span class="pre">main</span></code>, która wywołuje <code class="docutils literal notranslate"><span class="pre">calculatePosition()</span></code>. Wersja <code class="docutils literal notranslate"><span class="pre">WithTexCoords</span></code> dodatkowo przekazuje współrzędne tekstury do shadera fragmentów.</p>
</section>
<section id="glslpositiononlyvertexshader">
<h1><code class="docutils literal notranslate"><span class="pre">glslPositionOnlyVertexShader</span></code><a class="headerlink" href="#glslpositiononlyvertexshader" title="Link to this heading">#</a></h1>
<p>Jest to implementacja <code class="docutils literal notranslate"><span class="pre">calculatePosition()</span></code>. Oblicza ona finalną pozycję wierzchołka, mnożąc jego pozycję przez macierze transformacji i projekcji. Uwzględnia również głębię (<code class="docutils literal notranslate"><span class="pre">u_Depth</span></code>).</p>
</section>
<section id="glslmainfragmentshader">
<h1><code class="docutils literal notranslate"><span class="pre">glslMainFragmentShader</span></code><a class="headerlink" href="#glslmainfragmentshader" title="Link to this heading">#</a></h1>
<p>Szablon dla shaderów fragmentów. Wywołuje <code class="docutils literal notranslate"><span class="pre">calculatePixel()</span></code> i odrzuca piksele o niskiej wartości alfa, jeśli <code class="docutils literal notranslate"><span class="pre">u_Depth</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>.</p>
</section>
<section id="glsltexturesrcfragmentshader">
<h1><code class="docutils literal notranslate"><span class="pre">glslTextureSrcFragmentShader</span></code><a class="headerlink" href="#glsltexturesrcfragmentshader" title="Link to this heading">#</a></h1>
<p>Implementacja <code class="docutils literal notranslate"><span class="pre">calculatePixel()</span></code>, która pobiera kolor z tekstury (<code class="docutils literal notranslate"><span class="pre">u_Tex0</span></code>) i mnoży go przez jednolity kolor (<code class="docutils literal notranslate"><span class="pre">u_Color</span></code>).</p>
</section>
<section id="glslsolidcolorfragmentshader">
<h1><code class="docutils literal notranslate"><span class="pre">glslSolidColorFragmentShader</span></code><a class="headerlink" href="#glslsolidcolorfragmentshader" title="Link to this heading">#</a></h1>
<p>Implementacja <code class="docutils literal notranslate"><span class="pre">calculatePixel()</span></code>, która zwraca jednolity kolor (<code class="docutils literal notranslate"><span class="pre">u_Color</span></code>).</p>
</section>
<section id="glslsolidcolorontexturefragmentshader">
<h1><code class="docutils literal notranslate"><span class="pre">glslSolidColorOnTextureFragmentShader</span></code><a class="headerlink" href="#glslsolidcolorontexturefragmentshader" title="Link to this heading">#</a></h1>
<p>Implementacja <code class="docutils literal notranslate"><span class="pre">calculatePixel()</span></code>, która rysuje jednolity kolor (<code class="docutils literal notranslate"><span class="pre">u_Color</span></code>) tylko tam, gdzie tekstura (<code class="docutils literal notranslate"><span class="pre">u_Tex0</span></code>) nie jest w pełni przezroczysta.</p>
</section>
<section id="glsloutfitvertexshader-i-glsloutfitfragmentshader">
<h1><code class="docutils literal notranslate"><span class="pre">glslOutfitVertexShader</span></code> i <code class="docutils literal notranslate"><span class="pre">glslOutfitFragmentShader</span></code><a class="headerlink" href="#glsloutfitvertexshader-i-glsloutfitfragmentshader" title="Link to this heading">#</a></h1>
<p>Shadery do renderowania strojów.</p>
<ul class="simple">
<li><p><strong>Shader wierzchołków</strong>: Przekazuje dwie pary współrzędnych tekstury – normalne (<code class="docutils literal notranslate"><span class="pre">v_TexCoord</span></code>) i przesunięte o <code class="docutils literal notranslate"><span class="pre">u_Offset</span></code> (<code class="docutils literal notranslate"><span class="pre">v_TexCoord2</span></code>).</p></li>
<li><p><strong>Shader fragmentów</strong>:</p>
<ol class="arabic simple">
<li><p>Pobiera kolor bazowy z <code class="docutils literal notranslate"><span class="pre">v_TexCoord</span></code>.</p></li>
<li><p>Pobiera kolor „maski” z <code class="docutils literal notranslate"><span class="pre">v_TexCoord2</span></code>.</p></li>
<li><p>Na podstawie koloru maski (sprawdzając, który kanał R, G lub B jest dominujący), mnoży kolor bazowy przez jeden z czterech kolorów przekazanych w macierzy <code class="docutils literal notranslate"><span class="pre">u_Color</span></code>. Pozwala to na dynamiczne kolorowanie różnych części stroju.</p></li>
</ol>
</li>
</ul>
</section>
<section id="id530">
<h1>Zależności i powiązania<a class="headerlink" href="#id530" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest dołączany przez <code class="docutils literal notranslate"><span class="pre">shaders.h</span></code>.</p></li>
<li><p>Kod jest używany w <code class="docutils literal notranslate"><span class="pre">painter.cpp</span></code> do tworzenia domyślnych programów shaderów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="http-cpp">
<h1>📄 http.cpp<a class="headerlink" href="#http-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id531">
<h1>Opis ogólny<a class="headerlink" href="#id531" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">http.cpp</span></code> implementuje klasę <code class="docutils literal notranslate"><span class="pre">Http</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_http</span></code>) odpowiedzialnym za obsługę zapytań HTTP/HTTPS oraz połączeń WebSocket. Działa asynchronicznie, wykorzystując bibliotekę Boost.Asio do operacji sieciowych w osobnym wątku.</p>
</section>
<section id="id532">
<h1>Zmienne globalne<a class="headerlink" href="#id532" title="Link to this heading">#</a></h1>
</section>
<section id="g-http">
<h1><code class="docutils literal notranslate"><span class="pre">g_http</span></code><a class="headerlink" href="#g-http" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">Http</span></code>.</p>
</section>
<section id="klasa-http">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Http</span></code><a class="headerlink" href="#klasa-http" title="Link to this heading">#</a></h1>
</section>
<section id="void-http-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Http::init()</span></code><a class="headerlink" href="#void-http-init" title="Link to this heading">#</a></h1>
<p>Inicjalizuje menedżera. Tworzy i uruchamia osobny wątek, w którym będzie działać <code class="docutils literal notranslate"><span class="pre">boost::asio::io_service</span></code> (<code class="docutils literal notranslate"><span class="pre">m_ios</span></code>), obsługując wszystkie operacje sieciowe.</p>
</section>
<section id="void-http-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Http::terminate()</span></code><a class="headerlink" href="#void-http-terminate" title="Link to this heading">#</a></h1>
<p>Zamyka menedżera. Zatrzymuje <code class="docutils literal notranslate"><span class="pre">io_service</span></code>, anuluje wszystkie bieżące operacje i czeka na zakończenie wątku sieciowego.</p>
</section>
<section id="int-http-get-const-std-string-url-int-timeout">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Http::get(const</span> <span class="pre">std::string&amp;</span> <span class="pre">url,</span> <span class="pre">int</span> <span class="pre">timeout)</span></code><a class="headerlink" href="#int-http-get-const-std-string-url-int-timeout" title="Link to this heading">#</a></h1>
</section>
<section id="id533">
<h1>Opis semantyczny<a class="headerlink" href="#id533" title="Link to this heading">#</a></h1>
<p>Wysyła asynchroniczne zapytanie HTTP GET.</p>
</section>
<section id="id534">
<h1>Działanie<a class="headerlink" href="#id534" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Generuje unikalne ID operacji.</p></li>
<li><p>Dodaje zadanie do <code class="docutils literal notranslate"><span class="pre">m_ios</span></code>, które tworzy obiekt <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HttpSession</span></code> wykonuje zapytanie w wątku sieciowym.</p></li>
<li><p>Wyniki (postęp, błąd, odpowiedź) są przekazywane z powrotem do głównego wątku za pomocą <code class="docutils literal notranslate"><span class="pre">g_dispatcher</span></code> i wywoływane są odpowiednie callbacki w Lua (<code class="docutils literal notranslate"><span class="pre">g_http.onGetProgress</span></code>, <code class="docutils literal notranslate"><span class="pre">g_http.onGet</span></code>).</p></li>
</ol>
</section>
<section id="int-http-post">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Http::post(...)</span></code><a class="headerlink" href="#int-http-post" title="Link to this heading">#</a></h1>
<p>Działa analogicznie do <code class="docutils literal notranslate"><span class="pre">get</span></code>, ale wysyła zapytanie HTTP POST z podanymi danymi (<code class="docutils literal notranslate"><span class="pre">data</span></code>).</p>
</section>
<section id="int-http-download">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Http::download(...)</span></code><a class="headerlink" href="#int-http-download" title="Link to this heading">#</a></h1>
<p>Specjalna wersja <code class="docutils literal notranslate"><span class="pre">get</span></code>, która dodatkowo zapisuje pobrane dane w wewnętrznej mapie <code class="docutils literal notranslate"><span class="pre">m_downloads</span></code>. Pozwala to na dostęp do pobranych plików przez <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code> za pomocą wirtualnej ścieżki <code class="docutils literal notranslate"><span class="pre">/downloads/...</span></code>.</p>
</section>
<section id="int-http-ws">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Http::ws(...)</span></code><a class="headerlink" href="#int-http-ws" title="Link to this heading">#</a></h1>
<p>Inicjuje asynchroniczne połączenie WebSocket. Tworzy obiekt <code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code>, który zarządza cyklem życia połączenia. Callbacki Lua (<code class="docutils literal notranslate"><span class="pre">onWsOpen</span></code>, <code class="docutils literal notranslate"><span class="pre">onWsMessage</span></code>, <code class="docutils literal notranslate"><span class="pre">onWsClose</span></code>, <code class="docutils literal notranslate"><span class="pre">onWsError</span></code>) są wywoływane w odpowiedzi na zdarzenia z gniazda.</p>
</section>
<section id="bool-http-wssend-int-operationid-std-string-message">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Http::wsSend(int</span> <span class="pre">operationId,</span> <span class="pre">std::string</span> <span class="pre">message)</span></code><a class="headerlink" href="#bool-http-wssend-int-operationid-std-string-message" title="Link to this heading">#</a></h1>
<p>Wysyła wiadomość przez istniejące połączenie WebSocket o danym <code class="docutils literal notranslate"><span class="pre">operationId</span></code>.</p>
</section>
<section id="bool-http-cancel-int-id">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Http::cancel(int</span> <span class="pre">id)</span></code><a class="headerlink" href="#bool-http-cancel-int-id" title="Link to this heading">#</a></h1>
<p>Anuluje operację (HTTP lub WebSocket) o podanym ID.</p>
</section>
<section id="id535">
<h1>Zależności i powiązania<a class="headerlink" href="#id535" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/http/http.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/http/session.h</span></code>, <code class="docutils literal notranslate"><span class="pre">websocket.h</span></code>: Implementacje sesji HTTP i WebSocket (niedostępne dla Emscripten).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luainterface.h</span></code>: Do wywoływania callbacków w Lua.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do przekazywania wyników z wątku sieciowego do wątku głównego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/asio</span></code>, <code class="docutils literal notranslate"><span class="pre">boost/beast</span></code>: Podstawowe biblioteki do obsługi sieci.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="websocket-h">
<h1>📄 websocket.h<a class="headerlink" href="#websocket-h" title="Link to this heading">#</a></h1>
</section>
<section id="id536">
<h1>Opis ogólny<a class="headerlink" href="#id536" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">websocket.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code>, która zarządza pojedynczym połączeniem WebSocket. Plik ten (i jego implementacja) jest wyłączony z kompilacji dla Emscripten.</p>
</section>
<section id="typy-wyliczeniowe-i-definicje">
<h1>Typy wyliczeniowe i definicje<a class="headerlink" href="#typy-wyliczeniowe-i-definicje" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">WebsocketCallbackType</span></code>: Definiuje typy zdarzeń dla callbacka (<code class="docutils literal notranslate"><span class="pre">WEBSOCKET_OPEN</span></code>, <code class="docutils literal notranslate"><span class="pre">WEBSOCKET_MESSAGE</span></code>, <code class="docutils literal notranslate"><span class="pre">WEBSOCKET_ERROR</span></code>, <code class="docutils literal notranslate"><span class="pre">WEBSOCKET_CLOSE</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">WebsocketSession_cb</span></code>: Alias dla typu funkcji zwrotnej.</p></li>
</ul>
</section>
<section id="klasa-websocketsession">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code><a class="headerlink" href="#klasa-websocketsession" title="Link to this heading">#</a></h1>
</section>
<section id="id537">
<h1>Opis semantyczny<a class="headerlink" href="#id537" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code> enkapsuluje całą logikę związaną z nawiązywaniem, utrzymywaniem i zamykaniem połączenia WebSocket, włączając w to obsługę protokołu (handshake) i szyfrowania (WSS). Działa w pełni asynchronicznie w oparciu o Boost.Asio.</p>
</section>
<section id="id538">
<h1>Metody publiczne<a class="headerlink" href="#id538" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">WebsocketSession(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">start()</span></code></p></td>
<td class="text-left"><p>Rozpoczyna proces nawiązywania połączenia (rozwiązywanie nazwy DNS, łączenie, handshake).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">send(std::string</span> <span class="pre">data)</span></code></p></td>
<td class="text-left"><p>Dodaje wiadomość do kolejki wysyłania.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">close()</span></code></p></td>
<td class="text-left"><p>Zamyka połączenie.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id539">
<h1>Zmienne prywatne<a class="headerlink" href="#id539" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_service</span></code>: Referencja do <code class="docutils literal notranslate"><span class="pre">io_service</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_url</span></code>, <code class="docutils literal notranslate"><span class="pre">m_agent</span></code>: URL i User-Agent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_resolver</span></code>: Do rozwiązywania nazw DNS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_callback</span></code>: Funkcja zwrotna do powiadamiania o zdarzeniach.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_result</span></code>: Wskaźnik na <code class="docutils literal notranslate"><span class="pre">HttpResult</span></code> do przechowywania stanu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_timer</span></code>: Timer do obsługi timeoutów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_socket</span></code>: Gniazdo WebSocket dla połączeń nieszyfrowanych (WS).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_ssl</span></code>: Gniazdo WebSocket dla połączeń szyfrowanych (WSS).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_context</span></code>: Kontekst SSL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_streambuf</span></code>: Bufor na przychodzące dane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_sendQueue</span></code>: Kolejka wiadomości do wysłania.</p></li>
</ul>
</section>
<section id="metody-prywatne-on">
<h1>Metody prywatne (<code class="docutils literal notranslate"><span class="pre">on_...</span></code>)<a class="headerlink" href="#metody-prywatne-on" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Są to handlery wywoływane przez Boost.Asio po zakończeniu operacji asynchronicznych (np. <code class="docutils literal notranslate"><span class="pre">on_resolve</span></code>, <code class="docutils literal notranslate"><span class="pre">on_connect</span></code>, <code class="docutils literal notranslate"><span class="pre">on_handshake</span></code>, <code class="docutils literal notranslate"><span class="pre">on_read</span></code>, <code class="docutils literal notranslate"><span class="pre">on_send</span></code>). Implementują one logikę maszyny stanów połączenia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onError</span></code>: Centralna funkcja do obsługi błędów.</p></li>
</ul>
</section>
<section id="id540">
<h1>Zależności i powiązania<a class="headerlink" href="#id540" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/http/result.h</span></code>: Definicja <code class="docutils literal notranslate"><span class="pre">HttpResult</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/asio</span></code>, <code class="docutils literal notranslate"><span class="pre">boost/beast</span></code>: Kluczowe biblioteki do obsługi sieci.</p></li>
<li><p>Jest tworzona i zarządzana przez klasę <code class="docutils literal notranslate"><span class="pre">Http</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="http-h">
<h1>📄 http.h<a class="headerlink" href="#http-h" title="Link to this heading">#</a></h1>
</section>
<section id="id541">
<h1>Opis ogólny<a class="headerlink" href="#id541" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">http.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Http</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_http</span></code>) i stanowi główny interfejs do wykonywania operacji sieciowych opartych na protokołach HTTP/HTTPS i WebSocket.</p>
</section>
<section id="id542">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Http</span></code><a class="headerlink" href="#id542" title="Link to this heading">#</a></h1>
</section>
<section id="id543">
<h1>Opis semantyczny<a class="headerlink" href="#id543" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Http</span></code> zarządza pulą operacji sieciowych, które są wykonywane asynchronicznie w dedykowanym wątku. Udostępnia proste API do wysyłania zapytań GET, POST, pobierania plików oraz nawiązywania połączeń WebSocket. Interakcja z resztą aplikacji (głównie ze skryptami Lua) odbywa się poprzez system callbacków.</p>
</section>
<section id="id544">
<h1>Metody publiczne<a class="headerlink" href="#id544" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Http()</span></code></p></td>
<td class="text-left"><p>Konstruktor, inicjalizuje <code class="docutils literal notranslate"><span class="pre">io_context</span></code> i <code class="docutils literal notranslate"><span class="pre">work_guard</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init()</span></code></p></td>
<td class="text-left"><p>Uruchamia wątek sieciowy.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Zatrzymuje wątek sieciowy i anuluje wszystkie operacje.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">get(...)</span></code></p></td>
<td class="text-left"><p>Inicjuje asynchroniczne zapytanie GET.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">post(...)</span></code></p></td>
<td class="text-left"><p>Inicjuje asynchroniczne zapytanie POST.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">download(...)</span></code></p></td>
<td class="text-left"><p>Inicjuje asynchroniczne pobieranie pliku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">ws(...)</span></code></p></td>
<td class="text-left"><p>Inicjuje asynchroniczne połączenie WebSocket.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">wsSend(...)</span></code></p></td>
<td class="text-left"><p>Wysyła dane przez istniejące połączenie WebSocket.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">wsClose(...)</span></code></p></td>
<td class="text-left"><p>Zamyka połączenie WebSocket.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">cancel(int</span> <span class="pre">id)</span></code></p></td>
<td class="text-left"><p>Anuluje operację o podanym ID.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::map&lt;...&gt;&amp;</span> <span class="pre">downloads()</span></code></p></td>
<td class="text-left"><p>Zwraca mapę pobranych plików.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clearDownloads()</span></code></p></td>
<td class="text-left"><p>Czyści mapę pobranych plików.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">HttpResult_ptr</span> <span class="pre">getFile(...)</span></code></p></td>
<td class="text-left"><p>Pobiera dane pobranego pliku na podstawie jego ścieżki.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setUserAgent(...)</span></code></p></td>
<td class="text-left"><p>Ustawia nagłówek User-Agent dla wszystkich zapytań.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id545">
<h1>Zmienne prywatne<a class="headerlink" href="#id545" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_working</span></code>: Flaga kontrolująca działanie wątku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_operationId</span></code>: Licznik do generowania unikalnych ID dla operacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_thread</span></code>: Wątek roboczy dla operacji sieciowych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_ios</span></code>: Kontekst <code class="docutils literal notranslate"><span class="pre">io_context</span></code> z Boost.Asio.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_guard</span></code>: <code class="docutils literal notranslate"><span class="pre">work_guard</span></code> zapobiegający zakończeniu <code class="docutils literal notranslate"><span class="pre">m_ios.run()</span></code>, dopóki nie ma pracy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_operations</span></code>: Mapa przechowująca stan wszystkich aktywnych operacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_websockets</span></code>: Mapa przechowująca aktywne sesje WebSocket.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_downloads</span></code>: Mapa przechowująca pobrane pliki.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_userAgent</span></code>: String User-Agent.</p></li>
</ul>
</section>
<section id="id546">
<h1>Zmienne globalne<a class="headerlink" href="#id546" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_http</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">Http</span></code>.</p></li>
</ul>
</section>
<section id="id547">
<h1>Zależności i powiązania<a class="headerlink" href="#id547" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/http/result.h</span></code>: Definicja <code class="docutils literal notranslate"><span class="pre">HttpResult</span></code>.</p></li>
<li><p>Jest używana w skryptach Lua (poprzez bindowania w <code class="docutils literal notranslate"><span class="pre">luafunctions.cpp</span></code>) do komunikacji z serwerami WWW, np. do pobierania aktualizacji, sprawdzania statusu serwerów itp.</p></li>
<li><p>Współpracuje z <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code> w celu udostępnienia pobranych plików przez wirtualny system plików.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="result-h">
<h1>📄 result.h<a class="headerlink" href="#result-h" title="Link to this heading">#</a></h1>
</section>
<section id="id548">
<h1>Opis ogólny<a class="headerlink" href="#id548" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">result.h</span></code> deklaruje strukturę <code class="docutils literal notranslate"><span class="pre">HttpResult</span></code>, która służy do przechowywania stanu i wyniku pojedynczej operacji HTTP lub WebSocket. Definiuje również aliasy typów dla inteligentnych wskaźników i funkcji zwrotnych.</p>
</section>
<section id="struktura-httpresult">
<h1>Struktura <code class="docutils literal notranslate"><span class="pre">HttpResult</span></code><a class="headerlink" href="#struktura-httpresult" title="Link to this heading">#</a></h1>
</section>
<section id="id549">
<h1>Opis semantyczny<a class="headerlink" href="#id549" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">HttpResult</span></code> jest kontenerem danych przekazywanym między wątkiem sieciowym a wątkiem głównym. Agreguje wszystkie informacje związane z danym zapytaniem, takie jak URL, status, postęp, dane odpowiedzi i ewentualne błędy.</p>
</section>
<section id="id550">
<h1>Pola struktury<a class="headerlink" href="#id550" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Pole</p></th>
<th class="head text-left"><p>Typ</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td class="text-left"><p>Adres URL zapytania.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">operationId</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td class="text-left"><p>Unikalny identyfikator operacji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">status</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td class="text-left"><p>Kod statusu odpowiedzi HTTP (np. 200, 404).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">size</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td class="text-left"><p>Całkowity rozmiar odpowiedzi (z nagłówka Content-Length).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">progress</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td class="text-left"><p>Postęp pobierania w procentach (0-100).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">redirects</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td class="text-left"><p>Licznik przekierowań.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">connected</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td class="text-left"><p>Flaga wskazująca, czy połączenie jest aktywne.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">finished</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td class="text-left"><p>Flaga wskazująca, czy operacja została zakończona.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">canceled</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td class="text-left"><p>Flaga wskazująca, czy operacja została anulowana.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">postData</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td class="text-left"><p>Dane wysłane w zapytaniu POST.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">response</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;uint8_t&gt;</span></code></p></td>
<td class="text-left"><p>Surowe bajty odpowiedzi.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">error</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td class="text-left"><p>Komunikat błędu, jeśli wystąpił.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">session</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::weak_ptr&lt;HttpSession&gt;</span></code></p></td>
<td class="text-left"><p>Słaby wskaźnik do obiektu sesji, aby uniknąć cyklicznych referencji.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="definicje-typow">
<h1>Definicje typów<a class="headerlink" href="#definicje-typow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HttpResult_ptr</span></code>: Alias dla <code class="docutils literal notranslate"><span class="pre">std::shared_ptr&lt;HttpResult&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HttpResult_cb</span></code>: Alias dla <code class="docutils literal notranslate"><span class="pre">std::function&lt;void(HttpResult_ptr)&gt;</span></code>.</p></li>
</ul>
</section>
<section id="id551">
<h1>Zależności i powiązania<a class="headerlink" href="#id551" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to podstawowa struktura danych używana przez <code class="docutils literal notranslate"><span class="pre">Http</span></code>, <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code> i <code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code> do komunikacji i przekazywania wyników.</p></li>
<li><p>Zawiera <code class="docutils literal notranslate"><span class="pre">std::weak_ptr</span></code> do <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code>, aby umożliwić anulowanie operacji z zewnątrz bez tworzenia cyklu referencji.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="session-cpp">
<h1>📄 session.cpp<a class="headerlink" href="#session-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id552">
<h1>Opis ogólny<a class="headerlink" href="#id552" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">session.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code>, która zarządza pojedynczą sesją HTTP/HTTPS. Jest on wyłączony z kompilacji dla platformy Emscripten.</p>
</section>
<section id="klasa-httpsession">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code><a class="headerlink" href="#klasa-httpsession" title="Link to this heading">#</a></h1>
</section>
<section id="void-httpsession-start">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">HttpSession::start()</span></code><a class="headerlink" href="#void-httpsession-start" title="Link to this heading">#</a></h1>
</section>
<section id="id553">
<h1>Opis semantyczny<a class="headerlink" href="#id553" title="Link to this heading">#</a></h1>
<p>Rozpoczyna proces wysyłania zapytania HTTP.</p>
</section>
<section id="id554">
<h1>Działanie<a class="headerlink" href="#id554" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza limit przekierowań.</p></li>
<li><p>Parsuje URL, aby uzyskać protokół, domenę, port i ścieżkę.</p></li>
<li><p>Ustawia timer (<code class="docutils literal notranslate"><span class="pre">m_timer</span></code>) na obsługę timeoutu.</p></li>
<li><p>Konfiguruje obiekt żądania <code class="docutils literal notranslate"><span class="pre">boost::beast::http::request</span></code> (metoda, nagłówki, treść).</p></li>
<li><p>Uruchamia asynchroniczne rozwiązywanie nazwy DNS za pomocą <code class="docutils literal notranslate"><span class="pre">m_resolver.async_resolve</span></code>.</p></li>
</ol>
</section>
<section id="metody-on">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">on_...()</span></code><a class="headerlink" href="#metody-on" title="Link to this heading">#</a></h1>
<p>Są to handlery (funkcje zwrotne) dla operacji asynchronicznych Boost.Asio, które implementują maszynę stanów sesji HTTP:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">on_resolve</span></code></strong>: Wywoływana po rozwiązaniu nazwy DNS. Inicjuje <code class="docutils literal notranslate"><span class="pre">async_connect</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">on_connect</span></code></strong>: Wywoływana po nawiązaniu połączenia TCP.</p>
<ul>
<li><p>Jeśli protokół to HTTPS, inicjalizuje kontekst SSL i wykonuje <code class="docutils literal notranslate"><span class="pre">async_handshake</span></code>.</p></li>
<li><p>Wysyła żądanie HTTP za pomocą <code class="docutils literal notranslate"><span class="pre">boost::beast::http::async_write</span></code>.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">on_request_sent</span></code></strong>: Wywoływana po wysłaniu żądania. Rozpoczyna odczytywanie nagłówków odpowiedzi za pomocą <code class="docutils literal notranslate"><span class="pre">async_read_header</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">on_read_header</span></code></strong>: Wywoływana po odczytaniu nagłówków.</p>
<ul>
<li><p>Sprawdza kod statusu.</p></li>
<li><p>Jeśli jest to przekierowanie (np. 301, 302), tworzy nową <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code> dla nowego URL.</p></li>
<li><p>Jeśli status jest niepoprawny, zgłasza błąd.</p></li>
<li><p>Rozpoczyna odczytywanie treści odpowiedzi za pomocą <code class="docutils literal notranslate"><span class="pre">async_read_some</span></code>.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">on_read</span></code></strong>: Wywoływana wielokrotnie podczas odczytywania treści odpowiedzi.</p>
<ul>
<li><p>Aktualizuje postęp pobierania i wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> progresu.</p></li>
<li><p>Gdy cała treść zostanie odczytana (<code class="docutils literal notranslate"><span class="pre">end_of_stream</span></code>), finalizuje operację, zapisuje odpowiedź w <code class="docutils literal notranslate"><span class="pre">m_result</span></code> i wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> końcowy.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">onTimeout</span></code></strong>: Handler dla timera, który zgłasza błąd timeoutu.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">onError</span></code></strong>: Centralna funkcja do obsługi błędów. Zamyka gniazdo, anuluje timer i wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> z informacją o błędzie.</p></li>
</ul>
</section>
<section id="void-httpsession-close">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">HttpSession::close()</span></code><a class="headerlink" href="#void-httpsession-close" title="Link to this heading">#</a></h1>
<p>Zamyka połączenie, anuluje timer i, w przypadku HTTPS, wykonuje <code class="docutils literal notranslate"><span class="pre">async_shutdown</span></code> dla strumienia SSL.</p>
</section>
<section id="id555">
<h1>Zależności i powiązania<a class="headerlink" href="#id555" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/http/session.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/uri.h</span></code>: Do parsowania URL.</p></li>
<li><p><strong>Boost.Asio</strong> i <strong>Boost.Beast</strong>: Kluczowe biblioteki do obsługi sieci.</p></li>
<li><p>Jest tworzona i zarządzana przez klasę <code class="docutils literal notranslate"><span class="pre">Http</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="session-h">
<h1>📄 session.h<a class="headerlink" href="#session-h" title="Link to this heading">#</a></h1>
</section>
<section id="id556">
<h1>Opis ogólny<a class="headerlink" href="#id556" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">session.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code>, która enkapsuluje logikę pojedynczej sesji HTTP/HTTPS. Plik ten jest wyłączony z kompilacji dla Emscripten.</p>
</section>
<section id="id557">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code><a class="headerlink" href="#id557" title="Link to this heading">#</a></h1>
</section>
<section id="id558">
<h1>Opis semantyczny<a class="headerlink" href="#id558" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">HttpSession</span></code> zarządza całym cyklem życia zapytania HTTP, od rozwiązania nazwy DNS, przez nawiązanie połączenia (w tym SSL/TLS handshake), wysłanie żądania, aż po odczytanie odpowiedzi. Jest zaprojektowana do działania asynchronicznego w ramach <code class="docutils literal notranslate"><span class="pre">boost::asio::io_service</span></code>.</p>
</section>
<section id="id559">
<h1>Metody publiczne<a class="headerlink" href="#id559" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">HttpSession(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">start()</span></code></p></td>
<td class="text-left"><p>Rozpoczyna sesję HTTP.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">cancel()</span></code></p></td>
<td class="text-left"><p>Anuluje bieżącą operację.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id560">
<h1>Zmienne prywatne<a class="headerlink" href="#id560" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_service</span></code>: Referencja do <code class="docutils literal notranslate"><span class="pre">io_service</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_url</span></code>, <code class="docutils literal notranslate"><span class="pre">m_agent</span></code>: URL i User-Agent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_socket</span></code>: Gniazdo TCP.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_resolver</span></code>: Resolver DNS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_callback</span></code>: Funkcja zwrotna do powiadamiania o wyniku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_result</span></code>: Wskaźnik na obiekt <code class="docutils literal notranslate"><span class="pre">HttpResult</span></code> przechowujący stan.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_timer</span></code>: Timer do obsługi timeoutów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_timeout</span></code>: Czas timeoutu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_isJson</span></code>: Flaga wskazująca, czy treść POST jest w formacie JSON.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_ssl</span></code>, <code class="docutils literal notranslate"><span class="pre">m_context</span></code>: Do obsługi HTTPS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_streambuf</span></code>: Bufor na dane przychodzące.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_request</span></code>: Obiekt żądania z Boost.Beast.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_response</span></code>: Parser odpowiedzi z Boost.Beast.</p></li>
</ul>
</section>
<section id="metody-prywatne-on-close-onerror">
<h1>Metody prywatne (<code class="docutils literal notranslate"><span class="pre">on_...</span></code>, <code class="docutils literal notranslate"><span class="pre">close</span></code>, <code class="docutils literal notranslate"><span class="pre">onError</span></code>)<a class="headerlink" href="#metody-prywatne-on-close-onerror" title="Link to this heading">#</a></h1>
<p>Deklaracje handlerów dla operacji asynchronicznych i funkcji pomocniczych.</p>
</section>
<section id="id561">
<h1>Zależności i powiązania<a class="headerlink" href="#id561" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/http/result.h</span></code>: Definicja <code class="docutils literal notranslate"><span class="pre">HttpResult</span></code>.</p></li>
<li><p>Jest tworzona i używana przez klasę <code class="docutils literal notranslate"><span class="pre">Http</span></code> do realizacji zapytań GET i POST.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="websocket-cpp">
<h1>📄 websocket.cpp<a class="headerlink" href="#websocket-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id562">
<h1>Opis ogólny<a class="headerlink" href="#id562" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">websocket.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code>, która zarządza pojedynczym połączeniem WebSocket. Plik ten jest wyłączony z kompilacji dla Emscripten.</p>
</section>
<section id="id563">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code><a class="headerlink" href="#id563" title="Link to this heading">#</a></h1>
</section>
<section id="void-websocketsession-start">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WebsocketSession::start()</span></code><a class="headerlink" href="#void-websocketsession-start" title="Link to this heading">#</a></h1>
</section>
<section id="id564">
<h1>Opis semantyczny<a class="headerlink" href="#id564" title="Link to this heading">#</a></h1>
<p>Rozpoczyna proces nawiązywania połączenia WebSocket.</p>
</section>
<section id="id565">
<h1>Działanie<a class="headerlink" href="#id565" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza limit przekierowań.</p></li>
<li><p>Parsuje URL, aby uzyskać protokół, domenę, port i ścieżkę.</p></li>
<li><p>Ustawia timer na obsługę timeoutu.</p></li>
<li><p>Tworzy odpowiedni obiekt gniazda (<code class="docutils literal notranslate"><span class="pre">m_socket</span></code> dla WS lub <code class="docutils literal notranslate"><span class="pre">m_ssl</span></code> dla WSS).</p></li>
<li><p>Uruchamia asynchroniczne rozwiązywanie nazwy DNS.</p></li>
</ol>
</section>
<section id="void-websocketsession-send-std-string-data">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WebsocketSession::send(std::string</span> <span class="pre">data)</span></code><a class="headerlink" href="#void-websocketsession-send-std-string-data" title="Link to this heading">#</a></h1>
<p>Dodaje wiadomość do kolejki <code class="docutils literal notranslate"><span class="pre">m_sendQueue</span></code>. Jeśli kolejka była pusta i połączenie jest aktywne, natychmiast inicjuje operację wysyłania.</p>
</section>
<section id="id566">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">on_...()</span></code><a class="headerlink" href="#id566" title="Link to this heading">#</a></h1>
<p>Są to handlery dla operacji asynchronicznych, które implementują maszynę stanów połączenia WebSocket:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">on_resolve</span></code></strong>: Wywoływana po rozwiązaniu nazwy DNS. Inicjuje <code class="docutils literal notranslate"><span class="pre">async_connect</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">on_connect</span></code></strong>: Wywoływana po nawiązaniu połączenia TCP. W przypadku WSS, wykonuje handshake SSL. Następnie inicjuje handshake protokołu WebSocket za pomocą <code class="docutils literal notranslate"><span class="pre">async_handshake</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">on_handshake</span></code></strong>: Wywoływana po pomyślnym handshake’u WebSocket. Ustawia stan na <code class="docutils literal notranslate"><span class="pre">connected</span></code>, wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> <code class="docutils literal notranslate"><span class="pre">WEBSOCKET_OPEN</span></code>, rozpoczyna nasłuchiwanie wiadomości (<code class="docutils literal notranslate"><span class="pre">async_read</span></code>) i wysyła wiadomości z kolejki.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">on_send</span></code></strong>: Wywoływana po wysłaniu wiadomości. Usuwa wysłaną wiadomość z kolejki i, jeśli kolejka nie jest pusta, inicjuje wysyłanie następnej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">on_read</span></code></strong>: Wywoływana po otrzymaniu nowej wiadomości. Resetuje timer, wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> <code class="docutils literal notranslate"><span class="pre">WEBSOCKET_MESSAGE</span></code> i ponownie nasłuchuje.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">onTimeout</span></code></strong>: Zgłasza błąd timeoutu.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">onError</span></code></strong>: Obsługuje błędy i wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> <code class="docutils literal notranslate"><span class="pre">WEBSOCKET_ERROR</span></code>.</p></li>
</ul>
</section>
<section id="void-websocketsession-close">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WebsocketSession::close()</span></code><a class="headerlink" href="#void-websocketsession-close" title="Link to this heading">#</a></h1>
<p>Zamyka połączenie, anuluje timer i wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> <code class="docutils literal notranslate"><span class="pre">WEBSOCKET_CLOSE</span></code>.</p>
</section>
<section id="id567">
<h1>Zależności i powiązania<a class="headerlink" href="#id567" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/http/websocket.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/uri.h</span></code>: Do parsowania URL.</p></li>
<li><p><strong>Boost.Asio</strong> i <strong>Boost.Beast</strong>: Kluczowe biblioteki do obsługi sieci i protokołu WebSocket.</p></li>
<li><p>Jest tworzona i zarządzana przez klasę <code class="docutils literal notranslate"><span class="pre">Http</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="mouse-cpp">
<h1>📄 mouse.cpp<a class="headerlink" href="#mouse-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id568">
<h1>Opis ogólny<a class="headerlink" href="#id568" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">mouse.cpp</span></code> implementuje klasę <code class="docutils literal notranslate"><span class="pre">Mouse</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_mouse</span></code>) odpowiedzialnym za zarządzanie kursorami myszy.</p>
</section>
<section id="id569">
<h1>Zmienne globalne<a class="headerlink" href="#id569" title="Link to this heading">#</a></h1>
</section>
<section id="g-mouse">
<h1><code class="docutils literal notranslate"><span class="pre">g_mouse</span></code><a class="headerlink" href="#g-mouse" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">Mouse</span></code>.</p>
</section>
<section id="klasa-mouse">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Mouse</span></code><a class="headerlink" href="#klasa-mouse" title="Link to this heading">#</a></h1>
</section>
<section id="void-mouse-init-i-void-mouse-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::init()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::terminate()</span></code><a class="headerlink" href="#void-mouse-init-i-void-mouse-terminate" title="Link to this heading">#</a></h1>
<p>Metody do inicjalizacji i zwalniania zasobów. <code class="docutils literal notranslate"><span class="pre">terminate()</span></code> czyści listę załadowanych kursorów.</p>
</section>
<section id="void-mouse-loadcursors-std-string-filename">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::loadCursors(std::string</span> <span class="pre">filename)</span></code><a class="headerlink" href="#void-mouse-loadcursors-std-string-filename" title="Link to this heading">#</a></h1>
<p>Ładuje definicje kursorów z pliku OTML. Parsuje plik i dla każdego wpisu w sekcji <code class="docutils literal notranslate"><span class="pre">Cursors</span></code> wywołuje <code class="docutils literal notranslate"><span class="pre">addCursor</span></code>.</p>
</section>
<section id="void-mouse-addcursor-const-std-string-name-const-std-string-file-const-point-hotspot">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::addCursor(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">file,</span> <span class="pre">const</span> <span class="pre">Point&amp;</span> <span class="pre">hotSpot)</span></code><a class="headerlink" href="#void-mouse-addcursor-const-std-string-name-const-std-string-file-const-point-hotspot" title="Link to this heading">#</a></h1>
</section>
<section id="id570">
<h1>Opis semantyczny<a class="headerlink" href="#id570" title="Link to this heading">#</a></h1>
<p>Ładuje obraz kursora z pliku i tworzy z niego natywny kursor systemowy. Jest bezpieczna wątkowo.</p>
</section>
<section id="id571">
<h1>Działanie<a class="headerlink" href="#id571" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Jeśli jest wywołana z wątku innego niż graficzny, deleguje zadanie do <code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code>.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">g_window.loadMouseCursor</span></code>, która wykonuje operacje specyficzne dla platformy.</p></li>
<li><p>Zapisuje zwrócone ID kursora w mapie <code class="docutils literal notranslate"><span class="pre">m_cursors</span></code> pod podaną nazwą.</p></li>
</ol>
</section>
<section id="void-mouse-pushcursor-const-std-string-name">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::pushCursor(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code><a class="headerlink" href="#void-mouse-pushcursor-const-std-string-name" title="Link to this heading">#</a></h1>
</section>
<section id="id572">
<h1>Opis semantyczny<a class="headerlink" href="#id572" title="Link to this heading">#</a></h1>
<p>Ustawia nowy kursor i dodaje go na stos aktywnych kursorów.</p>
</section>
<section id="id573">
<h1>Działanie<a class="headerlink" href="#id573" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Deleguje do wątku graficznego, jeśli to konieczne.</p></li>
<li><p>Znajduje ID kursora w <code class="docutils literal notranslate"><span class="pre">m_cursors</span></code>.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">g_window.setMouseCursor</span></code> z znalezionym ID.</p></li>
<li><p>Dodaje ID na koniec stosu <code class="docutils literal notranslate"><span class="pre">m_cursorStack</span></code>.</p></li>
</ol>
</section>
<section id="void-mouse-popcursor-const-std-string-name">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::popCursor(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code><a class="headerlink" href="#void-mouse-popcursor-const-std-string-name" title="Link to this heading">#</a></h1>
</section>
<section id="id574">
<h1>Opis semantyczny<a class="headerlink" href="#id574" title="Link to this heading">#</a></h1>
<p>Usuwa kursor ze stosu i przywraca poprzedni.</p>
</section>
<section id="id575">
<h1>Działanie<a class="headerlink" href="#id575" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Deleguje do wątku graficznego.</p></li>
<li><p>Jeśli <code class="docutils literal notranslate"><span class="pre">name</span></code> jest puste, usuwa ostatni kursor ze stosu.</p></li>
<li><p>Jeśli <code class="docutils literal notranslate"><span class="pre">name</span></code> jest podane, wyszukuje i usuwa konkretny kursor ze stosu.</p></li>
<li><p>Jeśli stos nie jest pusty, ustawia kursor, który jest teraz na jego szczycie.</p></li>
<li><p>Jeśli stos jest pusty, przywraca domyślny kursor systemowy.</p></li>
</ol>
</section>
<section id="bool-mouse-iscursorchanged">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Mouse::isCursorChanged()</span></code><a class="headerlink" href="#bool-mouse-iscursorchanged" title="Link to this heading">#</a></h1>
<p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli stos kursorów nie jest pusty, co oznacza, że aktualny kursor jest niestandardowy.</p>
</section>
<section id="bool-mouse-ispressed-fw-mousebutton-mousebutton">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Mouse::isPressed(Fw::MouseButton</span> <span class="pre">mouseButton)</span></code><a class="headerlink" href="#bool-mouse-ispressed-fw-mousebutton-mousebutton" title="Link to this heading">#</a></h1>
<p>Sprawdza i zwraca stan wciśnięcia danego przycisku myszy, delegując zapytanie do <code class="docutils literal notranslate"><span class="pre">g_window</span></code>.</p>
</section>
<section id="id576">
<h1>Zależności i powiązania<a class="headerlink" href="#id576" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/input/mouse.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>: Widgety mogą zmieniać kursor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platformwindow.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_window</span></code> do niskopoziomowych operacji na kursorach.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do zapewnienia bezpieczeństwa wątkowego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Do ładowania plików definicji kursorów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="mouse-h">
<h1>📄 mouse.h<a class="headerlink" href="#mouse-h" title="Link to this heading">#</a></h1>
</section>
<section id="id577">
<h1>Opis ogólny<a class="headerlink" href="#id577" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">mouse.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Mouse</span></code>, która jest interfejsem wysokiego poziomu do zarządzania kursorami myszy w aplikacji.</p>
</section>
<section id="id578">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Mouse</span></code><a class="headerlink" href="#id578" title="Link to this heading">#</a></h1>
</section>
<section id="id579">
<h1>Opis semantyczny<a class="headerlink" href="#id579" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Mouse</span></code> zarządza kolekcją niestandardowych kursorów, które mogą być ładowane z plików. Implementuje mechanizm stosu (<code class="docutils literal notranslate"><span class="pre">m_cursorStack</span></code>), który pozwala na tymczasową zmianę kursora (np. gdy kursor znajduje się nad widgetem) i łatwy powrót do poprzedniego stanu.</p>
</section>
<section id="id580">
<h1>Metody publiczne<a class="headerlink" href="#id580" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">init()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje menedżera.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Zwalnia zasoby.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">loadCursors(...)</span></code></p></td>
<td class="text-left"><p>Ładuje definicje kursorów z pliku OTML.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addCursor(...)</span></code></p></td>
<td class="text-left"><p>Dodaje nowy niestandardowy kursor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">pushCursor(...)</span></code></p></td>
<td class="text-left"><p>Ustawia nowy kursor, dodając go na szczyt stosu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">popCursor(...)</span></code></p></td>
<td class="text-left"><p>Usuwa kursor ze stosu i przywraca poprzedni.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isCursorChanged()</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy aktualny kursor jest niestandardowy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isPressed(...)</span></code></p></td>
<td class="text-left"><p>Sprawdza stan wciśnięcia przycisku myszy.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id581">
<h1>Zmienne prywatne<a class="headerlink" href="#id581" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_cursors</span></code>: Mapa przechowująca nazwy kursorów i ich ID specyficzne dla platformy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_cursorStack</span></code>: Stos (<code class="docutils literal notranslate"><span class="pre">std::deque</span></code>) przechowujący ID aktywnych kursorów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_mutex</span></code>: Mutex do ochrony dostępu do <code class="docutils literal notranslate"><span class="pre">m_cursorStack</span></code> z różnych wątków.</p></li>
</ul>
</section>
<section id="id582">
<h1>Zmienne globalne<a class="headerlink" href="#id582" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_mouse</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">Mouse</span></code>.</p></li>
</ul>
</section>
<section id="id583">
<h1>Zależności i powiązania<a class="headerlink" href="#id583" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> do zmiany wyglądu kursora, gdy znajduje się on nad widgetem.</p></li>
<li><p>Współpracuje z <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> w celu faktycznego ustawiania kursora w systemie operacyjnym.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id584">
<h1>📄 declarations.h<a class="headerlink" href="#id584" title="Link to this heading">#</a></h1>
</section>
<section id="id585">
<h1>Opis ogólny<a class="headerlink" href="#id585" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">declarations.h</span></code> w module <code class="docutils literal notranslate"><span class="pre">luaengine</span></code> służy do wczesnych deklaracji (forward declarations) i definicji typów związanych z silnikiem Lua. Jego celem jest unikanie zależności cyklicznych i zmniejszenie liczby dołączanych nagłówków.</p>
</section>
<section id="wczesne-deklaracje">
<h1>Wczesne deklaracje<a class="headerlink" href="#wczesne-deklaracje" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code>: Główna klasa interfejsu Lua.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>: Bazowa klasa dla wszystkich obiektów eksportowanych do Lua.</p></li>
</ul>
</section>
<section id="id586">
<h1>Definicje typów<a class="headerlink" href="#id586" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">LuaCppFunction</span></code></strong>: Alias dla <code class="docutils literal notranslate"><span class="pre">std::function&lt;int(LuaInterface*)&gt;</span></code>. Jest to typ funkcji C++, która może być wywołana z Lua. Przyjmuje wskaźnik do <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code> i zwraca liczbę wartości zwróconych na stos Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">LuaCppFunctionPtr</span></code></strong>: Alias dla <code class="docutils literal notranslate"><span class="pre">std::unique_ptr&lt;LuaCppFunction&gt;</span></code>. Używany wewnętrznie do zarządzania czasem życia funkcji bindowanych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">LuaObjectPtr</span></code></strong>: Alias dla <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;LuaObject&gt;</span></code>. Standardowy sposób przekazywania i przechowywania obiektów C++ w Lua.</p></li>
</ul>
</section>
<section id="id587">
<h1>Zależności i powiązania<a class="headerlink" href="#id587" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Zawiera podstawowe definicje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;memory&gt;</span></code>: Dla <code class="docutils literal notranslate"><span class="pre">std::unique_ptr</span></code>.</p></li>
<li><p>Jest to fundamentalny plik dla całego silnika Lua, dołączany przez <code class="docutils literal notranslate"><span class="pre">luainterface.h</span></code>, <code class="docutils literal notranslate"><span class="pre">luaobject.h</span></code> i inne.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="lbitlib-cpp">
<h1>📄 lbitlib.cpp<a class="headerlink" href="#lbitlib-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id588">
<h1>Opis ogólny<a class="headerlink" href="#id588" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">lbitlib.cpp</span></code> zawiera kod źródłowy biblioteki <code class="docutils literal notranslate"><span class="pre">bit32</span></code> z Lua 5.2.0, przeniesiony (backported) do użytku z Lua 5.1.4 (lub LuaJIT, który jest kompatybilny z 5.1). Biblioteka ta dostarcza operacje bitowe na 32-bitowych liczbach całkowitych bez znaku.</p>
</section>
<section id="id589">
<h1>Zawartość<a class="headerlink" href="#id589" title="Link to this heading">#</a></h1>
<p>Plik składa się z kilku części:</p>
<ol class="arabic simple">
<li><p><strong>Adaptacje i definicje kompatybilności</strong>:</p>
<ul class="simple">
<li><p>Zawiera kod przeniesiony z <code class="docutils literal notranslate"><span class="pre">luaconf.h</span></code> i <code class="docutils literal notranslate"><span class="pre">llimits.h</span></code> z Lua 5.2, który definiuje makra (<code class="docutils literal notranslate"><span class="pre">lua_number2unsigned</span></code>) do bezpiecznej konwersji między <code class="docutils literal notranslate"><span class="pre">lua_Number</span></code> (zwykle <code class="docutils literal notranslate"><span class="pre">double</span></code>) a <code class="docutils literal notranslate"><span class="pre">lua_Unsigned</span></code> (32-bitowy <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code>). Jest to konieczne, ponieważ Lua 5.1 nie ma wbudowanego typu całkowitoliczbowego.</p></li>
<li><p>Definiuje funkcję <code class="docutils literal notranslate"><span class="pre">lua_pushunsigned</span></code> i <code class="docutils literal notranslate"><span class="pre">luaL_checkunsigned</span></code> do obsługi tego typu na stosie Lua.</p></li>
<li><p>Definiuje makro <code class="docutils literal notranslate"><span class="pre">luaL_newlib</span></code> dla kompatybilności z <code class="docutils literal notranslate"><span class="pre">luaL_register</span></code> z Lua 5.1.</p></li>
</ul>
</li>
<li><p><strong>Oryginalny kod <code class="docutils literal notranslate"><span class="pre">lbitlib.c</span></code> z Lua 5.2.0</strong>:</p>
<ul class="simple">
<li><p>Zawiera implementacje wszystkich funkcji z biblioteki <code class="docutils literal notranslate"><span class="pre">bit32</span></code>.</p></li>
</ul>
</li>
</ol>
</section>
<section id="funkcje-biblioteki-bit32">
<h1>Funkcje biblioteki <code class="docutils literal notranslate"><span class="pre">bit32</span></code><a class="headerlink" href="#funkcje-biblioteki-bit32" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Funkcja Lua</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.band(...)</span></code></p></td>
<td class="text-left"><p>Wykonuje bitowe AND na wszystkich argumentach.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.btest(...)</span></code></p></td>
<td class="text-left"><p>Wykonuje bitowe AND i zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli wynik jest różny od zera.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.bor(...)</span></code></p></td>
<td class="text-left"><p>Wykonuje bitowe OR na wszystkich argumentach.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.bxor(...)</span></code></p></td>
<td class="text-left"><p>Wykonuje bitowe XOR na wszystkich argumentach.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.bnot(x)</span></code></p></td>
<td class="text-left"><p>Wykonuje bitową negację.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.lshift(x,</span> <span class="pre">n)</span></code></p></td>
<td class="text-left"><p>Przesunięcie bitowe w lewo.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.rshift(x,</span> <span class="pre">n)</span></code></p></td>
<td class="text-left"><p>Przesunięcie bitowe w prawo (logiczne).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.arshift(x,</span> <span class="pre">n)</span></code></p></td>
<td class="text-left"><p>Przesunięcie bitowe w prawo (arytmetyczne).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.lrotate(x,</span> <span class="pre">n)</span></code></p></td>
<td class="text-left"><p>Rotacja bitowa w lewo.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.rrotate(x,</span> <span class="pre">n)</span></code></p></td>
<td class="text-left"><p>Rotacja bitowa w prawo.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.extract(n,</span> <span class="pre">field,</span> <span class="pre">width)</span></code></p></td>
<td class="text-left"><p>Ekstrahuje <code class="docutils literal notranslate"><span class="pre">width</span></code> bitów z liczby <code class="docutils literal notranslate"><span class="pre">n</span></code>, zaczynając od bitu <code class="docutils literal notranslate"><span class="pre">field</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bit32.replace(n,</span> <span class="pre">v,</span> <span class="pre">field,</span> <span class="pre">width)</span></code></p></td>
<td class="text-left"><p>Zastępuje bity w liczbie <code class="docutils literal notranslate"><span class="pre">n</span></code> bitami z <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="int-luaopen-bit32-lua-state-l">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">luaopen_bit32</span> <span class="pre">(lua_State</span> <span class="pre">*L)</span></code><a class="headerlink" href="#int-luaopen-bit32-lua-state-l" title="Link to this heading">#</a></h1>
<p>Główna funkcja, która rejestruje bibliotekę <code class="docutils literal notranslate"><span class="pre">bit32</span></code> w podanym stanie Lua.</p>
</section>
<section id="id590">
<h1>Zależności i powiązania<a class="headerlink" href="#id590" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lbitlib.h</span></code>: Plik nagłówkowy.</p></li>
<li><p>Nagłówki Lua/LuaJIT (<code class="docutils literal notranslate"><span class="pre">lua.h</span></code>, <code class="docutils literal notranslate"><span class="pre">lualib.h</span></code>, <code class="docutils literal notranslate"><span class="pre">lauxlib.h</span></code>).</p></li>
<li><p>Jest ładowana w <code class="docutils literal notranslate"><span class="pre">LuaInterface::createLuaState</span></code>, aby udostępnić operacje bitowe w skryptach.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="lbitlib-h">
<h1>📄 lbitlib.h<a class="headerlink" href="#lbitlib-h" title="Link to this heading">#</a></h1>
</section>
<section id="id591">
<h1>Opis ogólny<a class="headerlink" href="#id591" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">lbitlib.h</span></code> jest plikiem nagłówkowym dla biblioteki <code class="docutils literal notranslate"><span class="pre">bit32</span></code> z Lua 5.2, która została przeniesiona do użytku w tym projekcie.</p>
</section>
<section id="deklaracje">
<h1>Deklaracje<a class="headerlink" href="#deklaracje" title="Link to this heading">#</a></h1>
</section>
<section id="id592">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">luaopen_bit32</span> <span class="pre">(lua_State</span> <span class="pre">*L)</span></code><a class="headerlink" href="#id592" title="Link to this heading">#</a></h1>
<p>Deklaruje funkcję, która jest punktem wejścia do załadowania biblioteki <code class="docutils literal notranslate"><span class="pre">bit32</span></code> w stanie Lua. Zgodnie z konwencją Lua, funkcje <code class="docutils literal notranslate"><span class="pre">luaopen_*</span></code> są używane do rejestrowania modułów.</p>
</section>
<section id="id593">
<h1>Zależności i powiązania<a class="headerlink" href="#id593" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Wymaga definicji <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">lua_State</span></code>.</p></li>
<li><p>Jest dołączany przez <code class="docutils literal notranslate"><span class="pre">luainterface.cpp</span></code>, aby umożliwić załadowanie biblioteki <code class="docutils literal notranslate"><span class="pre">bit32</span></code> podczas inicjalizacji <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="luabinder-h">
<h1>📄 luabinder.h<a class="headerlink" href="#luabinder-h" title="Link to this heading">#</a></h1>
</section>
<section id="id594">
<h1>Opis ogólny<a class="headerlink" href="#id594" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">luabinder.h</span></code> jest sercem mechanizmu bindowania C++ do Lua. Zawiera on zestaw zaawansowanych szablonów metaprogramowania, które umożliwiają automatyczne generowanie funkcji-opakowań (wrapperów) dla niemal dowolnych funkcji C++, w tym funkcji globalnych, statycznych, metod klas, funkcji <code class="docutils literal notranslate"><span class="pre">std::function</span></code> i lambd.</p>
</section>
<section id="namespace-luabinder">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">luabinder</span></code><a class="headerlink" href="#namespace-luabinder" title="Link to this heading">#</a></h1>
</section>
<section id="id595">
<h1>Opis semantyczny<a class="headerlink" href="#id595" title="Link to this heading">#</a></h1>
<p>Przestrzeń nazw <code class="docutils literal notranslate"><span class="pre">luabinder</span></code> zawiera szablony, które działają jak „fabryka” funkcji typu <code class="docutils literal notranslate"><span class="pre">LuaCppFunction</span></code>. Analizują one sygnaturę funkcji C++ (typ zwracany i typy argumentów), a następnie generują lambdę, która:</p>
<ol class="arabic simple">
<li><p>Pobiera argumenty z stosu Lua i konwertuje je na odpowiednie typy C++.</p></li>
<li><p>Wywołuje oryginalną funkcję C++ z tymi argumentami.</p></li>
<li><p>Pobiera wartość zwracaną przez funkcję C++.</p></li>
<li><p>Konwertuje tę wartość na typ zrozumiały dla Lua i umieszcza ją na stosie.</p></li>
<li><p>Zwraca liczbę wartości umieszczonych na stosie.</p></li>
</ol>
</section>
<section id="glowne-szablony">
<h1>Główne szablony<a class="headerlink" href="#glowne-szablony" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">pack_values_into_tuple</span></code></strong>: Szablon rekurencyjny, który pobiera <code class="docutils literal notranslate"><span class="pre">N</span></code> wartości ze stosu Lua i umieszcza je w <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">expand_fun_arguments</span></code></strong>: Szablon rekurencyjny, który rozpakowuje <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code> z argumentami i wywołuje z nimi docelową funkcję C++.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">call_fun_and_push_result</span></code></strong>: Szablon, który wywołuje funkcję i obsługuje wartość zwracaną (specjalizacje dla <code class="docutils literal notranslate"><span class="pre">void</span></code> i typów nie-<code class="docutils literal notranslate"><span class="pre">void</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">bind_fun_specializer</span></code></strong>: Główny szablon, który łączy powyższe, generując finalną lambdę.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">bind_fun(...)</span></code></strong>: Przeciążone funkcje, które są publicznym API tego namespace. Przyjmują różne typy funkcji (wskaźniki, <code class="docutils literal notranslate"><span class="pre">std::function</span></code>, lambdy) i przekierowują je do odpowiednich specjalizacji.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">make_mem_func(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">make_mem_func_singleton(...)</span></code></strong>: Funkcje pomocnicze, które konwertują wskaźniki na metody klas na obiekty <code class="docutils literal notranslate"><span class="pre">std::function</span></code> (lambdy), które można następnie zbindować.</p></li>
</ul>
</section>
<section id="id596">
<h1>Zależności i powiązania<a class="headerlink" href="#id596" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to plik wewnętrzny, dołączany tylko przez <code class="docutils literal notranslate"><span class="pre">luainterface.h</span></code>.</p></li>
<li><p>Intensywnie korzysta z zaawansowanych cech C++11/14/17, takich jak szablony wariadyczne, <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">std::function</span></code>, <code class="docutils literal notranslate"><span class="pre">std::enable_if</span></code>, <code class="docutils literal notranslate"><span class="pre">decltype</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/traits.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">remove_const_ref</span></code> do normalizacji typów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">luaexception.h</span></code>: Może rzucać wyjątki w przypadku błędów (np. wywołanie metody na obiekcie <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>).</p></li>
<li><p>Jest podstawą dla wszystkich metod <code class="docutils literal notranslate"><span class="pre">bind...</span></code> w <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code>, które automatyzują proces tworzenia bindowań.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="luaexception-h">
<h1>📄 luaexception.h<a class="headerlink" href="#luaexception-h" title="Link to this heading">#</a></h1>
</section>
<section id="id597">
<h1>Opis ogólny<a class="headerlink" href="#id597" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">luaexception.h</span></code> deklaruje hierarchię klas wyjątków specyficznych dla interakcji z silnikiem Lua. Te klasy wyjątków są używane do sygnalizowania błędów, które występują podczas operacji na stosie Lua, rzutowania typów lub wywoływania funkcji.</p>
</section>
<section id="klasa-luaexception">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">LuaException</span></code><a class="headerlink" href="#klasa-luaexception" title="Link to this heading">#</a></h1>
</section>
<section id="id598">
<h1>Opis semantyczny<a class="headerlink" href="#id598" title="Link to this heading">#</a></h1>
<p>Jest to bazowa klasa dla wszystkich wyjątków związanych z Lua. Dziedziczy po <code class="docutils literal notranslate"><span class="pre">stdext::exception</span></code>. Jej głównym zadaniem jest sformatowanie komunikatu o błędzie, opcjonalnie dołączając do niego ślad stosu (traceback) z Lua.</p>
</section>
<section id="id599">
<h1>Metody<a class="headerlink" href="#id599" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LuaException(const</span> <span class="pre">std::string&amp;</span> <span class="pre">error,</span> <span class="pre">int</span> <span class="pre">traceLevel</span> <span class="pre">=</span> <span class="pre">-1)</span></code>: Konstruktor, który generuje komunikat błędu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">const</span> <span class="pre">char*</span> <span class="pre">what()</span> <span class="pre">const</span> <span class="pre">throw()</span></code>: Zwraca sformatowany komunikat błędu.</p></li>
</ul>
</section>
<section id="klasa-luabadnumberofargumentsexception">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">LuaBadNumberOfArgumentsException</span></code><a class="headerlink" href="#klasa-luabadnumberofargumentsexception" title="Link to this heading">#</a></h1>
</section>
<section id="id600">
<h1>Opis semantyczny<a class="headerlink" href="#id600" title="Link to this heading">#</a></h1>
<p>Specjalistyczny wyjątek rzucany, gdy funkcja C++ bindowana do Lua zostanie wywołana z nieprawidłową liczbą argumentów.</p>
</section>
<section id="id601">
<h1>Metody<a class="headerlink" href="#id601" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LuaBadNumberOfArgumentsException(int</span> <span class="pre">expected</span> <span class="pre">=</span> <span class="pre">-1,</span> <span class="pre">int</span> <span class="pre">got</span> <span class="pre">=</span> <span class="pre">-1)</span></code>: Konstruktor, który tworzy odpowiedni komunikat o błędzie.</p></li>
</ul>
</section>
<section id="klasa-luabadvaluecastexception">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">LuaBadValueCastException</span></code><a class="headerlink" href="#klasa-luabadvaluecastexception" title="Link to this heading">#</a></h1>
</section>
<section id="id602">
<h1>Opis semantyczny<a class="headerlink" href="#id602" title="Link to this heading">#</a></h1>
<p>Specjalistyczny wyjątek rzucany, gdy próba rzutowania wartości ze stosu Lua na określony typ C++ (<code class="docutils literal notranslate"><span class="pre">luavalue_cast</span></code>) nie powiedzie się.</p>
</section>
<section id="id603">
<h1>Metody<a class="headerlink" href="#id603" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LuaBadValueCastException(const</span> <span class="pre">std::string&amp;</span> <span class="pre">luaTypeName,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">cppTypeName)</span></code>: Konstruktor, który tworzy komunikat błędu informujący o typach, między którymi rzutowanie zawiodło.</p></li>
</ul>
</section>
<section id="id604">
<h1>Zależności i powiązania<a class="headerlink" href="#id604" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/exception.h</span></code>: Klasa bazowa <code class="docutils literal notranslate"><span class="pre">stdext::exception</span></code>.</p></li>
<li><p>Wyjątki te są rzucane przez <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code> i <code class="docutils literal notranslate"><span class="pre">luabinder</span></code>, a łapane w bezpiecznych punktach wywołań (np. <code class="docutils literal notranslate"><span class="pre">luaCppFunctionCallback</span></code>), aby zapobiec awarii aplikacji i przekazać błąd do logów lub z powrotem do środowiska Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="luaexception-cpp">
<h1>📄 luaexception.cpp<a class="headerlink" href="#luaexception-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id605">
<h1>Opis ogólny<a class="headerlink" href="#id605" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">luaexception.cpp</span></code> zawiera implementację klas wyjątków zdefiniowanych w <code class="docutils literal notranslate"><span class="pre">luaexception.h</span></code>.</p>
</section>
<section id="id606">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">LuaException</span></code><a class="headerlink" href="#id606" title="Link to this heading">#</a></h1>
</section>
<section id="luaexception-luaexception-const-std-string-error-int-tracelevel">
<h1><code class="docutils literal notranslate"><span class="pre">LuaException::LuaException(const</span> <span class="pre">std::string&amp;</span> <span class="pre">error,</span> <span class="pre">int</span> <span class="pre">traceLevel)</span></code><a class="headerlink" href="#luaexception-luaexception-const-std-string-error-int-tracelevel" title="Link to this heading">#</a></h1>
<p>Konstruktor. Jego głównym zadaniem jest wywołanie <code class="docutils literal notranslate"><span class="pre">generateLuaErrorMessage</span></code>, aby przygotować pełny komunikat błędu.</p>
</section>
<section id="void-luaexception-generateluaerrormessage-const-std-string-error-int-tracelevel">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaException::generateLuaErrorMessage(const</span> <span class="pre">std::string&amp;</span> <span class="pre">error,</span> <span class="pre">int</span> <span class="pre">traceLevel)</span></code><a class="headerlink" href="#void-luaexception-generateluaerrormessage-const-std-string-error-int-tracelevel" title="Link to this heading">#</a></h1>
<p>Metoda ta formatuje finalny komunikat błędu, który będzie dostępny przez <code class="docutils literal notranslate"><span class="pre">what()</span></code>.</p>
<ul class="simple">
<li><p>Jeśli <code class="docutils literal notranslate"><span class="pre">traceLevel</span></code> jest podany (większy lub równy 0), wywołuje <code class="docutils literal notranslate"><span class="pre">g_lua.traceback</span></code>, aby dołączyć do komunikatu ślad stosu wywołań Lua.</p></li>
<li><p>W przeciwnym razie, po prostu prefiksuje błąd napisem „LUA ERROR:”.</p></li>
</ul>
</section>
<section id="id607">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">LuaBadNumberOfArgumentsException</span></code><a class="headerlink" href="#id607" title="Link to this heading">#</a></h1>
</section>
<section id="luabadnumberofargumentsexception-luabadnumberofargumentsexception-int-expected-int-got">
<h1><code class="docutils literal notranslate"><span class="pre">LuaBadNumberOfArgumentsException::LuaBadNumberOfArgumentsException(int</span> <span class="pre">expected,</span> <span class="pre">int</span> <span class="pre">got)</span></code><a class="headerlink" href="#luabadnumberofargumentsexception-luabadnumberofargumentsexception-int-expected-int-got" title="Link to this heading">#</a></h1>
<p>Konstruktor. Tworzy specyficzny komunikat błędu informujący o nieprawidłowej liczbie argumentów, a następnie wywołuje <code class="docutils literal notranslate"><span class="pre">generateLuaErrorMessage</span></code> z poziomem śledzenia <code class="docutils literal notranslate"><span class="pre">1</span></code>, aby pokazać, która funkcja w Lua została źle wywołana.</p>
</section>
<section id="id608">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">LuaBadValueCastException</span></code><a class="headerlink" href="#id608" title="Link to this heading">#</a></h1>
</section>
<section id="luabadvaluecastexception-luabadvaluecastexception-const-std-string-luatypename-const-std-string-cpptypename">
<h1><code class="docutils literal notranslate"><span class="pre">LuaBadValueCastException::LuaBadValueCastException(const</span> <span class="pre">std::string&amp;</span> <span class="pre">luaTypeName,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">cppTypeName)</span></code><a class="headerlink" href="#luabadvaluecastexception-luabadvaluecastexception-const-std-string-luatypename-const-std-string-cpptypename" title="Link to this heading">#</a></h1>
<p>Konstruktor. Tworzy komunikat błędu informujący o niemożności rzutowania między danym typem Lua a typem C++, a następnie wywołuje <code class="docutils literal notranslate"><span class="pre">generateLuaErrorMessage</span></code>.</p>
</section>
<section id="id609">
<h1>Zależności i powiązania<a class="headerlink" href="#id609" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaexception.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luainterface.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_lua</span></code> do generowania śladu stosu.</p></li>
<li><p>Implementuje logikę formatowania błędów, która jest kluczowa dla debugowania skryptów Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="luainterface-cpp">
<h1>📄 luainterface.cpp<a class="headerlink" href="#luainterface-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id610">
<h1>Opis ogólny<a class="headerlink" href="#id610" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">luainterface.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code>, która jest centralnym interfejsem do komunikacji z silnikiem Lua. Jest to jedna z najważniejszych klas w całym frameworku.</p>
</section>
<section id="id611">
<h1>Zmienne globalne<a class="headerlink" href="#id611" title="Link to this heading">#</a></h1>
</section>
<section id="g-lua">
<h1><code class="docutils literal notranslate"><span class="pre">g_lua</span></code><a class="headerlink" href="#g-lua" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code>.</p>
</section>
<section id="klasa-luainterface">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code><a class="headerlink" href="#klasa-luainterface" title="Link to this heading">#</a></h1>
</section>
<section id="inicjalizacja-i-zamykanie">
<h1>Inicjalizacja i zamykanie<a class="headerlink" href="#inicjalizacja-i-zamykanie" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">init()</span></code></strong>: Inicjalizuje <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code>.</p>
<ol class="arabic simple">
<li><p>Tworzy nowy stan Lua (<code class="docutils literal notranslate"><span class="pre">createLuaState</span></code>).</p></li>
<li><p>Zapisuje referencję do globalnego środowiska.</p></li>
<li><p>Rejestruje bazową klasę <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code> i jej podstawowe metody.</p></li>
</ol>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">terminate()</span></code></strong>: Zamyka stan Lua, co powoduje zwolnienie wszystkich zasobów i wywołanie garbage collectora.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">createLuaState()</span></code></strong>: Tworzy stan Lua (<code class="docutils literal notranslate"><span class="pre">luaL_newstate</span></code>), ładuje standardowe biblioteki (<code class="docutils literal notranslate"><span class="pre">luaL_openlibs</span></code>), ładuje bibliotekę <code class="docutils literal notranslate"><span class="pre">bit32</span></code>, tworzy specjalną „słabą” tabelę do przechowywania referencji i instaluje niestandardowe loadery (<code class="docutils literal notranslate"><span class="pre">dofile</span></code>, <code class="docutils literal notranslate"><span class="pre">loadfile</span></code>).</p></li>
</ul>
</section>
<section id="rejestracja-i-bindowanie">
<h1>Rejestracja i bindowanie<a class="headerlink" href="#rejestracja-i-bindowanie" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">registerSingletonClass(...)</span></code></strong>, <strong><code class="docutils literal notranslate"><span class="pre">registerClass(...)</span></code></strong>: Implementują logikę tworzenia tabel i metatabel w Lua, które reprezentują klasy C++. <code class="docutils literal notranslate"><span class="pre">registerClass</span></code> dodatkowo ustawia dziedziczenie, linkując metatabelę klasy pochodnej do metatabeli klasy bazowej za pomocą metametody <code class="docutils literal notranslate"><span class="pre">__index</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">register...Function(...)</span></code></strong>, <strong><code class="docutils literal notranslate"><span class="pre">register...Field(...)</span></code></strong>: Metody te pobierają odpowiednie tabele (klasy, metody, fieldmethods) z globalnego środowiska Lua i umieszczają w nich funkcje C++ opakowane w <code class="docutils literal notranslate"><span class="pre">LuaCppFunction</span></code>.</p></li>
</ul>
</section>
<section id="metody-obslugi-metametod-obiektow">
<h1>Metody obsługi metametod obiektów<a class="headerlink" href="#metody-obslugi-metametod-obiektow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luaObjectGetEvent(__index)</span></code></strong>: Handler wywoływany przy próbie odczytu pola z obiektu C++ w Lua. Wyszukuje on kolejno: metodę „get”, pole w tabeli <code class="docutils literal notranslate"><span class="pre">fields</span></code> obiektu, metodę w tabeli metod klasy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luaObjectSetEvent(__newindex)</span></code></strong>: Handler wywoływany przy próbie zapisu pola. Wyszukuje i wywołuje metodę „set” lub zapisuje wartość w tabeli <code class="docutils literal notranslate"><span class="pre">fields</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luaObjectEqualEvent(__eq)</span></code></strong>: Porównuje dwa obiekty C++.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luaObjectCollectEvent(__gc)</span></code></strong>: Handler wywoływany przez garbage collector Lua. Zwalnia <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code> do obiektu, dekrementując jego licznik referencji.</p></li>
</ul>
</section>
<section id="wykonywanie-skryptow">
<h1>Wykonywanie skryptów<a class="headerlink" href="#wykonywanie-skryptow" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">runScript(...)</span></code></strong>, <strong><code class="docutils literal notranslate"><span class="pre">loadScript(...)</span></code></strong>, <strong><code class="docutils literal notranslate"><span class="pre">runBuffer(...)</span></code></strong>: Metody do ładowania i wykonywania skryptów Lua z plików lub buforów w pamięci. <code class="docutils literal notranslate"><span class="pre">loadScript</span></code> używa <code class="docutils literal notranslate"><span class="pre">g_resources</span></code> do znalezienia i odczytania pliku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">safeCall(...)</span></code></strong>: Kluczowa metoda do bezpiecznego wywoływania funkcji Lua. Ustawia <code class="docutils literal notranslate"><span class="pre">luaErrorHandler</span></code> jako funkcję obsługi błędów, a następnie wywołuje <code class="docutils literal notranslate"><span class="pre">lua_pcall</span></code>. W przypadku błędu, łapie go i zwraca jako string lub rzuca wyjątek <code class="docutils literal notranslate"><span class="pre">LuaException</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">signalCall(...)</span></code></strong>: Wysokopoziomowa metoda, która opakowuje <code class="docutils literal notranslate"><span class="pre">safeCall</span></code> i dodatkowo obsługuje wywoływanie tabeli funkcji.</p></li>
</ul>
</section>
<section id="inne">
<h1>Inne<a class="headerlink" href="#inne" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">traceback(...)</span></code></strong>: Generuje ślad stosu wywołań Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">getCurrentSourcePath(...)</span></code></strong>: Zwraca ścieżkę do pliku skryptu, w którym aktualnie wykonywany jest kod.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">newSandboxEnv()</span></code></strong>: Tworzy nowe, odizolowane środowisko Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">lua...</span></code> (funkcje statyczne)</strong>: Implementacje funkcji C, które są bezpośrednio rejestrowane w Lua (np. <code class="docutils literal notranslate"><span class="pre">lua_dofile</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">...Callback</span></code></strong>: Implementacje handlerów dla <code class="docutils literal notranslate"><span class="pre">lua_pcall</span></code> i <code class="docutils literal notranslate"><span class="pre">__gc</span></code>.</p></li>
<li><p><strong>Metody opakowujące API Lua</strong>: Plik zawiera dziesiątki metod (<code class="docutils literal notranslate"><span class="pre">getTop</span></code>, <code class="docutils literal notranslate"><span class="pre">pushNil</span></code>, <code class="docutils literal notranslate"><span class="pre">toString</span></code>, <code class="docutils literal notranslate"><span class="pre">isTable</span></code>, etc.), które są cienkimi, ale bezpieczniejszymi (dzięki <code class="docutils literal notranslate"><span class="pre">VALIDATE</span></code>) opakowaniami na funkcje z biblioteki Lua C API.</p></li>
</ul>
</section>
<section id="id612">
<h1>Zależności i powiązania<a class="headerlink" href="#id612" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to centralna klasa, która łączy C++ z Lua. Zależy od <code class="docutils literal notranslate"><span class="pre">lua.h</span></code>, <code class="docutils literal notranslate"><span class="pre">lualib.h</span></code>, <code class="docutils literal notranslate"><span class="pre">lauxlib.h</span></code>.</p></li>
<li><p>Ściśle współpracuje z <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, <code class="docutils literal notranslate"><span class="pre">luabinder.h</span></code>, <code class="docutils literal notranslate"><span class="pre">luavaluecasts.h</span></code>.</p></li>
<li><p>Używa <code class="docutils literal notranslate"><span class="pre">g_resources</span></code> do ładowania skryptów.</p></li>
<li><p>Używana przez <code class="docutils literal notranslate"><span class="pre">Application</span></code> do inicjalizacji, <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> do ładowania modułów i <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> do wywoływania callbacków.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="luainterface-h">
<h1>📄 luainterface.h<a class="headerlink" href="#luainterface-h" title="Link to this heading">#</a></h1>
</section>
<section id="id613">
<h1>Opis ogólny<a class="headerlink" href="#id613" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">luainterface.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code>, która jest głównym interfejsem do interakcji z silnikiem Lua. Jest to klasa singletonowa (<code class="docutils literal notranslate"><span class="pre">g_lua</span></code>), która enkapsuluje stan Lua (<code class="docutils literal notranslate"><span class="pre">lua_State*</span></code>) i dostarcza bogaty zestaw metod do manipulacji stosem, wywoływania funkcji, bindowania kodu C++ i zarządzania obiektami.</p>
</section>
<section id="id614">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code><a class="headerlink" href="#id614" title="Link to this heading">#</a></h1>
</section>
<section id="id615">
<h1>Opis semantyczny<a class="headerlink" href="#id615" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code> stanowi most między kodem C++ a skryptami Lua. Udostępnia wysokopoziomowe API, które ukrywa złożoność bezpośredniej pracy z Lua C API. Wszystkie operacje, takie jak umieszczanie wartości na stosie, odczytywanie ich, wywoływanie funkcji czy rejestrowanie klas, są opakowane w metody tej klasy.</p>
</section>
<section id="metody-publiczne-wybrane">
<h1>Metody publiczne (wybrane)<a class="headerlink" href="#metody-publiczne-wybrane" title="Link to this heading">#</a></h1>
</section>
<section id="inicjalizacja-i-zarzadzanie">
<h1>Inicjalizacja i zarządzanie<a class="headerlink" href="#inicjalizacja-i-zarzadzanie" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">init()</span></code> / <code class="docutils literal notranslate"><span class="pre">terminate()</span></code>: Uruchamia i zamyka silnik Lua.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">collectGarbage()</span></code>: Wymusza uruchomienie garbage collectora.</p></li>
</ul>
</section>
<section id="id616">
<h1>Rejestracja i bindowanie<a class="headerlink" href="#id616" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">registerSingletonClass(...)</span></code>: Rejestruje globalny obiekt (singleton) w Lua.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">registerClass(...)</span></code>: Rejestruje klasę C++ w Lua, umożliwiając tworzenie jej instancji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind...Function(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">bind...Field(...)</span></code>: Szablonowe metody do bindowania funkcji i pól klas.</p></li>
</ul>
</section>
<section id="id617">
<h1>Wykonywanie skryptów<a class="headerlink" href="#id617" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">safeRunScript(...)</span></code>: Bezpiecznie wykonuje skrypt z pliku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runScript(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">runBuffer(...)</span></code>: Wykonują skrypt z pliku lub bufora.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loadScript(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">loadFunction(...)</span></code>: Ładują skrypt/funkcję na stos bez jej wykonywania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">safeCall(...)</span></code>: Bezpiecznie wywołuje funkcję na stosie, z obsługą błędów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">signalCall(...)</span></code>: Wysokopoziomowa wersja <code class="docutils literal notranslate"><span class="pre">safeCall</span></code> z dodatkowymi funkcjami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callGlobalField&lt;R,</span> <span class="pre">...T&gt;(...)</span></code>: Wygodna metoda do wywoływania globalnej funkcji Lua z C++ i otrzymywania wyniku.</p></li>
</ul>
</section>
<section id="manipulacja-stosem-i-typami">
<h1>Manipulacja stosem i typami<a class="headerlink" href="#manipulacja-stosem-i-typami" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">push...()</span></code> / <code class="docutils literal notranslate"><span class="pre">pop...()</span></code> / <code class="docutils literal notranslate"><span class="pre">to...()</span></code> / <code class="docutils literal notranslate"><span class="pre">is...()</span></code>: Zestaw metod do pracy ze stosem Lua dla różnych typów danych (np. <code class="docutils literal notranslate"><span class="pre">pushInteger</span></code>, <code class="docutils literal notranslate"><span class="pre">isString</span></code>, <code class="docutils literal notranslate"><span class="pre">toObject</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getTop()</span></code>: Zwraca rozmiar stosu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref()</span></code> / <code class="docutils literal notranslate"><span class="pre">unref()</span></code>: Do tworzenia i zwalniania trwałych referencji do wartości Lua.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">polymorphicPush&lt;T&gt;(...)</span></code>: Szablonowa metoda do umieszczania na stosie dowolnego typu, dla którego zdefiniowano <code class="docutils literal notranslate"><span class="pre">push_luavalue</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">castValue&lt;T&gt;(...)</span></code>: Szablonowa metoda do rzutowania wartości ze stosu na typ C++, używając <code class="docutils literal notranslate"><span class="pre">luavalue_cast</span></code>.</p></li>
</ul>
</section>
<section id="id618">
<h1>Zmienne prywatne<a class="headerlink" href="#id618" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">L</span></code>: Wskaźnik na <code class="docutils literal notranslate"><span class="pre">lua_State</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_weakTableRef</span></code>: Referencja do tabeli ze słabymi referencjami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_cppCallbackDepth</span></code>: Licznik zagnieżdżenia wywołań zwrotnych C++.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_totalObjRefs</span></code>, <code class="docutils literal notranslate"><span class="pre">m_totalFuncRefs</span></code>: Liczniki do śledzenia alokacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_globalEnv</span></code>: Referencja do globalnego środowiska Lua.</p></li>
</ul>
</section>
<section id="dolaczane-pliki">
<h1>Dołączane pliki<a class="headerlink" href="#dolaczane-pliki" title="Link to this heading">#</a></h1>
<p>Plik ten na końcu dołącza trzy kluczowe pliki, które są od niego zależne i rozszerzają jego funkcjonalność:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">luaexception.h</span></code>: Definicje wyjątków.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">luabinder.h</span></code>: Maszyneria do bindowania funkcji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">luavaluecasts.h</span></code>: Implementacje <code class="docutils literal notranslate"><span class="pre">push_luavalue</span></code> i <code class="docutils literal notranslate"><span class="pre">luavalue_cast</span></code> dla różnych typów.</p></li>
</ul>
</section>
<section id="id619">
<h1>Zależności i powiązania<a class="headerlink" href="#id619" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to centralny plik dla całego podsystemu Lua.</p></li>
<li><p>Zależny od <code class="docutils literal notranslate"><span class="pre">framework/luaengine/declarations.h</span></code>.</p></li>
<li><p>Używany przez praktycznie każdą część aplikacji, która wchodzi w interakcję z Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="luaobject-cpp">
<h1>📄 luaobject.cpp<a class="headerlink" href="#luaobject-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id620">
<h1>Opis ogólny<a class="headerlink" href="#id620" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">luaobject.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, która jest klasą bazową dla wszystkich obiektów C++, które mają być dostępne w środowisku Lua.</p>
</section>
<section id="klasa-luaobject">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code><a class="headerlink" href="#klasa-luaobject" title="Link to this heading">#</a></h1>
</section>
<section id="luaobject-luaobject">
<h1><code class="docutils literal notranslate"><span class="pre">LuaObject::LuaObject()</span></code><a class="headerlink" href="#luaobject-luaobject" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje <code class="docutils literal notranslate"><span class="pre">m_fieldsTableRef</span></code> na -1, co oznacza, że obiekt nie ma jeszcze przypisanej tabeli pól w Lua.</p>
</section>
<section id="id621">
<h1><code class="docutils literal notranslate"><span class="pre">LuaObject::~LuaObject()</span></code><a class="headerlink" href="#id621" title="Link to this heading">#</a></h1>
<p>Destruktor. Wywołuje <code class="docutils literal notranslate"><span class="pre">releaseLuaFieldsTable()</span></code>, aby zwolnić referencję do tabeli pól w Lua, co pozwala garbage collectorowi na jej usunięcie. Sprawdza również, czy nie jest wywoływany podczas zamykania aplikacji.</p>
</section>
<section id="bool-luaobject-hasluafield-const-std-string-field">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">LuaObject::hasLuaField(const</span> <span class="pre">std::string&amp;</span> <span class="pre">field)</span></code><a class="headerlink" href="#bool-luaobject-hasluafield-const-std-string-field" title="Link to this heading">#</a></h1>
<p>Sprawdza, czy obiekt posiada pole o danej nazwie w swojej tabeli pól Lua.</p>
</section>
<section id="void-luaobject-releaseluafieldstable">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaObject::releaseLuaFieldsTable()</span></code><a class="headerlink" href="#void-luaobject-releaseluafieldstable" title="Link to this heading">#</a></h1>
<p>Zwalnia referencję do tabeli pól (<code class="docutils literal notranslate"><span class="pre">m_fieldsTableRef</span></code>), jeśli istnieje.</p>
</section>
<section id="void-luaobject-luasetfield-const-std-string-key">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaObject::luaSetField(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code><a class="headerlink" href="#void-luaobject-luasetfield-const-std-string-key" title="Link to this heading">#</a></h1>
</section>
<section id="id622">
<h1>Opis semantyczny<a class="headerlink" href="#id622" title="Link to this heading">#</a></h1>
<p>Ustawia pole w tabeli Lua powiązanej z tym obiektem. Wartość do ustawienia musi znajdować się na szczycie stosu Lua.</p>
</section>
<section id="id623">
<h1>Działanie<a class="headerlink" href="#id623" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Jeśli obiekt nie ma jeszcze tabeli pól (<code class="docutils literal notranslate"><span class="pre">m_fieldsTableRef</span> <span class="pre">==</span> <span class="pre">-1</span></code>), tworzy nową tabelę w Lua i zapisuje do niej referencję.</p></li>
<li><p>Pobiera tabelę pól na stos Lua.</p></li>
<li><p>Przenosi wartość ze szczytu stosu na odpowiednie miejsce.</p></li>
<li><p>Ustawia pole w tabeli za pomocą <code class="docutils literal notranslate"><span class="pre">g_lua.setField(key)</span></code>.</p></li>
<li><p>Zdejmuje tabelę pól ze stosu.</p></li>
</ol>
</section>
<section id="void-luaobject-luagetfield-const-std-string-key">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaObject::luaGetField(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code><a class="headerlink" href="#void-luaobject-luagetfield-const-std-string-key" title="Link to this heading">#</a></h1>
<p>Pobiera wartość pola z tabeli Lua obiektu i umieszcza ją na szczycie stosu. Jeśli tabela pól nie istnieje, umieszcza <code class="docutils literal notranslate"><span class="pre">nil</span></code>.</p>
</section>
<section id="void-luaobject-luagetmetatable">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaObject::luaGetMetatable()</span></code><a class="headerlink" href="#void-luaobject-luagetmetatable" title="Link to this heading">#</a></h1>
<p>Pobiera i umieszcza na stosie metatabelę dla klasy tego obiektu. Używa statycznej mapy (<code class="docutils literal notranslate"><span class="pre">metatableMap</span></code>) do cachowania referencji do metatabel dla każdego typu klasy, aby uniknąć wielokrotnego wyszukiwania ich w globalnym środowisku Lua.</p>
</section>
<section id="void-luaobject-luagetfieldstable">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaObject::luaGetFieldsTable()</span></code><a class="headerlink" href="#void-luaobject-luagetfieldstable" title="Link to this heading">#</a></h1>
<p>Umieszcza na stosie tabelę pól tego obiektu, lub <code class="docutils literal notranslate"><span class="pre">nil</span></code>, jeśli ona nie istnieje.</p>
</section>
<section id="int-luaobject-getusecount">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">LuaObject::getUseCount()</span></code><a class="headerlink" href="#int-luaobject-getusecount" title="Link to this heading">#</a></h1>
<p>Zwraca liczbę referencji do obiektu (<code class="docutils literal notranslate"><span class="pre">shared_object::ref_count()</span></code>).</p>
</section>
<section id="std-string-luaobject-getclassname">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">LuaObject::getClassName()</span></code><a class="headerlink" href="#std-string-luaobject-getclassname" title="Link to this heading">#</a></h1>
<p>Zwraca zdemanglowaną nazwę klasy obiektu, która jest używana do znalezienia odpowiedniej metatabeli w Lua.</p>
</section>
<section id="id624">
<h1>Zależności i powiązania<a class="headerlink" href="#id624" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luainterface.h</span></code>: Intensywnie korzysta z <code class="docutils literal notranslate"><span class="pre">g_lua</span></code> do wszystkich operacji na stanie Lua.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/application.h</span></code>: Do sprawdzania stanu aplikacji.</p></li>
<li><p>Jest klasą bazową dla setek innych klas w projekcie, które są eksportowane do Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="luaobject-h">
<h1>📄 luaobject.h<a class="headerlink" href="#luaobject-h" title="Link to this heading">#</a></h1>
</section>
<section id="id625">
<h1>Opis ogólny<a class="headerlink" href="#id625" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">luaobject.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, która jest fundamentalną klasą bazową dla wszystkich obiektów C++, które mają być widoczne i zarządzane przez silnik Lua.</p>
</section>
<section id="id626">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code><a class="headerlink" href="#id626" title="Link to this heading">#</a></h1>
</section>
<section id="id627">
<h1>Opis semantyczny<a class="headerlink" href="#id627" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">LuaObject</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">stdext::shared_object</span></code>, co zapewnia zarządzanie czasem życia obiektu za pomocą licznika referencji. Dodaje funkcjonalność, która pozwala na dynamiczne dołączanie do obiektu C++ pól i metod z poziomu Lua. Każda instancja <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code> może posiadać własną, unikalną tabelę w Lua (<code class="docutils literal notranslate"><span class="pre">m_fieldsTableRef</span></code>), w której przechowywane są te dynamiczne dane.</p>
</section>
<section id="id628">
<h1>Metody publiczne<a class="headerlink" href="#id628" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><strong>Szablonowe metody do interakcji z Lua</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">connectLuaField(...)</span></code></p></td>
<td class="text-left"><p>Łączy funkcję C++ (<code class="docutils literal notranslate"><span class="pre">std::function</span></code>) z polem Lua, tworząc lub rozszerzając tabelę callbacków.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">luaCallLuaField(...)</span></code></p></td>
<td class="text-left"><p>Wywołuje funkcję przechowywaną w polu Lua tego obiektu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">callLuaField(...)</span></code></p></td>
<td class="text-left"><p>Wysokopoziomowe opakowanie na <code class="docutils literal notranslate"><span class="pre">luaCallLuaField</span></code>, które obsługuje konwersję typów zwracanych.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">hasLuaField(...)</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy obiekt ma pole o danej nazwie w swojej tabeli Lua.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setLuaField(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wartość pola w tabeli Lua.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getLuaField(...)</span></code></p></td>
<td class="text-left"><p>Pobiera wartość pola z tabeli Lua.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><strong>Niskopoziomowe metody do interakcji z Lua</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">releaseLuaFieldsTable()</span></code></p></td>
<td class="text-left"><p>Zwalnia referencję do tabeli pól.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">luaSetField(...)</span></code></p></td>
<td class="text-left"><p>Ustawia pole, pobierając wartość ze szczytu stosu Lua.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">luaGetField(...)</span></code></p></td>
<td class="text-left"><p>Pobiera pole i umieszcza jego wartość na stosie Lua.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">luaGetMetatable()</span></code></p></td>
<td class="text-left"><p>Pobiera i umieszcza na stosie metatabelę klasy.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">luaGetFieldsTable()</span></code></p></td>
<td class="text-left"><p>Umieszcza na stosie tabelę pól obiektu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><strong>Metody pomocnicze</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getUseCount()</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę referencji do obiektu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getClassName()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę klasy.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id629">
<h1>Zmienne prywatne<a class="headerlink" href="#id629" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_fieldsTableRef</span></code>: Przechowuje referencję (indeks w rejestrze Lua) do tabeli pól tego obiektu.</p></li>
</ul>
</section>
<section id="funkcje-globalne-connect">
<h1>Funkcje globalne (<code class="docutils literal notranslate"><span class="pre">connect</span></code>)<a class="headerlink" href="#funkcje-globalne-connect" title="Link to this heading">#</a></h1>
<p>Szablonowe funkcje globalne, które są wygodnym opakowaniem na <code class="docutils literal notranslate"><span class="pre">LuaObject::connectLuaField</span></code>, pozwalając na łatwe łączenie zarówno <code class="docutils literal notranslate"><span class="pre">std::function</span></code>, jak i lambd z polami obiektów.</p>
</section>
<section id="id630">
<h1>Zależności i powiązania<a class="headerlink" href="#id630" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/stats.h</span></code>: Potencjalnie do statystyk.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p>Jest klasą bazową dla prawie każdej klasy w projekcie, która jest eksportowana do Lua (np. <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>, <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>, <code class="docutils literal notranslate"><span class="pre">Module</span></code>).</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, jej podstawowe metody (<code class="docutils literal notranslate"><span class="pre">getUseCount</span></code>, <code class="docutils literal notranslate"><span class="pre">getClassName</span></code>, <code class="docutils literal notranslate"><span class="pre">getFieldsTable</span></code>) są dostępne w Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="luavaluecasts-cpp">
<h1>📄 luavaluecasts.cpp<a class="headerlink" href="#luavaluecasts-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id631">
<h1>Opis ogólny<a class="headerlink" href="#id631" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">luavaluecasts.cpp</span></code> zawiera implementacje specjalizacji szablonów <code class="docutils literal notranslate"><span class="pre">push_luavalue</span></code> i <code class="docutils literal notranslate"><span class="pre">luavalue_cast</span></code> dla podstawowych typów danych. Te funkcje są sercem systemu konwersji typów między C++ a Lua.</p>
</section>
<section id="funkcje-push-luavalue">
<h1>Funkcje <code class="docutils literal notranslate"><span class="pre">push_luavalue</span></code><a class="headerlink" href="#funkcje-push-luavalue" title="Link to this heading">#</a></h1>
</section>
<section id="id632">
<h1>Opis semantyczny<a class="headerlink" href="#id632" title="Link to this heading">#</a></h1>
<p>Każda funkcja <code class="docutils literal notranslate"><span class="pre">push_luavalue</span></code> przyjmuje wartość typu C++ i umieszcza jej odpowiednik na szczycie stosu Lua. Zwraca liczbę wartości umieszczonych na stosie (zwykle 1).</p>
</section>
<section id="implementacje">
<h1>Implementacje:<a class="headerlink" href="#implementacje" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bool</span></code>: <code class="docutils literal notranslate"><span class="pre">g_lua.pushBoolean(b)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int</span></code>: <code class="docutils literal notranslate"><span class="pre">g_lua.pushInteger(i)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">double</span></code>: <code class="docutils literal notranslate"><span class="pre">g_lua.pushNumber(d)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char*</span></code>, <code class="docutils literal notranslate"><span class="pre">std::string</span></code>: <code class="docutils literal notranslate"><span class="pre">g_lua.pushString(str)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LuaCppFunction</span></code>: <code class="docutils literal notranslate"><span class="pre">g_lua.pushCppFunction(func)</span></code></p></li>
<li><p><strong>Typy złożone (<code class="docutils literal notranslate"><span class="pre">Color</span></code>, <code class="docutils literal notranslate"><span class="pre">Rect</span></code>, <code class="docutils literal notranslate"><span class="pre">Point</span></code>, <code class="docutils literal notranslate"><span class="pre">Size</span></code>)</strong>: Tworzą nową tabelę w Lua i wypełniają ją odpowiednimi polami (np. <code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span></code> dla <code class="docutils literal notranslate"><span class="pre">Color</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span></code></strong>: Konwertuje węzeł OTML na tabelę Lua, rekurencyjnie przetwarzając jego dzieci.</p></li>
</ul>
</section>
<section id="funkcje-luavalue-cast">
<h1>Funkcje <code class="docutils literal notranslate"><span class="pre">luavalue_cast</span></code><a class="headerlink" href="#funkcje-luavalue-cast" title="Link to this heading">#</a></h1>
</section>
<section id="id633">
<h1>Opis semantyczny<a class="headerlink" href="#id633" title="Link to this heading">#</a></h1>
<p>Każda funkcja <code class="docutils literal notranslate"><span class="pre">luavalue_cast</span></code> próbuje odczytać wartość z podanego indeksu na stosie Lua i skonwertować ją na odpowiedni typ C++. Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code> w przypadku sukcesu.</p>
</section>
<section id="id634">
<h1>Implementacje:<a class="headerlink" href="#id634" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bool</span></code>: <code class="docutils literal notranslate"><span class="pre">g_lua.toBoolean(index)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>: <code class="docutils literal notranslate"><span class="pre">g_lua.toInteger(index)</span></code>, <code class="docutils literal notranslate"><span class="pre">g_lua.toNumber(index)</span></code>. Sprawdzają dodatkowo, czy wartość na stosie jest faktycznie liczbą.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code>: <code class="docutils literal notranslate"><span class="pre">g_lua.toString(index)</span></code></p></li>
<li><p><strong>Typy złożone (<code class="docutils literal notranslate"><span class="pre">Color</span></code>, <code class="docutils literal notranslate"><span class="pre">Rect</span></code>, …)</strong>: Sprawdzają, czy na stosie jest tabela z odpowiednimi polami lub string, który można sparsować. Odczytują wartości z tabeli i przypisują je do obiektu C++.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span></code></strong>: Konwertuje tabelę Lua z powrotem na strukturę węzłów OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">LuaObjectPtr</span></code></strong>: Sprawdza, czy na stosie jest <code class="docutils literal notranslate"><span class="pre">userdata</span></code> i rzutuje je na odpowiedni typ wskaźnika.</p></li>
</ul>
</section>
<section id="id635">
<h1>Zależności i powiązania<a class="headerlink" href="#id635" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luavaluecasts.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luainterface.h</span></code>: Używają metod <code class="docutils literal notranslate"><span class="pre">g_lua</span></code> do interakcji ze stosem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmlnode.h</span></code>: Do konwersji węzłów OTML.</p></li>
<li><p>Są to funkcje niskiego poziomu, używane przez <code class="docutils literal notranslate"><span class="pre">LuaInterface::polymorphicPush</span></code> i <code class="docutils literal notranslate"><span class="pre">LuaInterface::castValue</span></code> do automatycznej konwersji typów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="luavaluecasts-h">
<h1>📄 luavaluecasts.h<a class="headerlink" href="#luavaluecasts-h" title="Link to this heading">#</a></h1>
</section>
<section id="id636">
<h1>Opis ogólny<a class="headerlink" href="#id636" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">luavaluecasts.h</span></code> deklaruje zestaw szablonowych funkcji <code class="docutils literal notranslate"><span class="pre">push_luavalue</span></code> i <code class="docutils literal notranslate"><span class="pre">luavalue_cast</span></code>, które definiują, w jaki sposób różne typy danych C++ są konwertowane do i z wartości Lua. Jest to kluczowy element systemu bindowania, który umożliwia automatyczną konwersję argumentów funkcji i wartości zwracanych.</p>
</section>
<section id="szablony-i-funkcje">
<h1>Szablony i funkcje<a class="headerlink" href="#szablony-i-funkcje" title="Link to this heading">#</a></h1>
</section>
<section id="push-luavalue-t-const-t-v">
<h1><code class="docutils literal notranslate"><span class="pre">push_luavalue&lt;T&gt;(const</span> <span class="pre">T&amp;</span> <span class="pre">v)</span></code><a class="headerlink" href="#push-luavalue-t-const-t-v" title="Link to this heading">#</a></h1>
</section>
<section id="id637">
<h1>Opis<a class="headerlink" href="#id637" title="Link to this heading">#</a></h1>
<p>Szablon funkcji, który przyjmuje wartość typu <code class="docutils literal notranslate"><span class="pre">T</span></code> i umieszcza jej reprezentację na stosie Lua. Dla każdego typu, który ma być przekazywany między C++ a Lua, musi istnieć specjalizacja tej funkcji.</p>
</section>
<section id="luavalue-cast-t-int-index-t-v">
<h1><code class="docutils literal notranslate"><span class="pre">luavalue_cast&lt;T&gt;(int</span> <span class="pre">index,</span> <span class="pre">T&amp;</span> <span class="pre">v)</span></code><a class="headerlink" href="#luavalue-cast-t-int-index-t-v" title="Link to this heading">#</a></h1>
</section>
<section id="id638">
<h1>Opis<a class="headerlink" href="#id638" title="Link to this heading">#</a></h1>
<p>Szablon funkcji, który próbuje odczytać wartość z podanego indeksu <code class="docutils literal notranslate"><span class="pre">index</span></code> na stosie Lua i skonwertować ją do typu <code class="docutils literal notranslate"><span class="pre">T</span></code>. Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli konwersja się powiedzie.</p>
</section>
<section id="zadeklarowane-specjalizacje">
<h1>Zadeklarowane specjalizacje<a class="headerlink" href="#zadeklarowane-specjalizacje" title="Link to this heading">#</a></h1>
<p>Plik deklaruje (a w przypadku typów prostych, również definiuje <code class="docutils literal notranslate"><span class="pre">inline</span></code>) specjalizacje dla:</p>
<ul class="simple">
<li><p><strong>Typów prostych</strong>: <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, liczby całkowite o stałym rozmiarze (<code class="docutils literal notranslate"><span class="pre">int8</span></code>, <code class="docutils literal notranslate"><span class="pre">uint16</span></code>, itp.).</p></li>
<li><p><strong>Stringów</strong>: <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char*</span></code>, <code class="docutils literal notranslate"><span class="pre">std::string</span></code>.</p></li>
<li><p><strong>Funkcji C++</strong>: <code class="docutils literal notranslate"><span class="pre">LuaCppFunction</span></code>, <code class="docutils literal notranslate"><span class="pre">std::function</span></code>.</p></li>
<li><p><strong>Struktur frameworka</strong>: <code class="docutils literal notranslate"><span class="pre">Color</span></code>, <code class="docutils literal notranslate"><span class="pre">Rect</span></code>, <code class="docutils literal notranslate"><span class="pre">Point</span></code>, <code class="docutils literal notranslate"><span class="pre">Size</span></code>.</p></li>
<li><p><strong>Węzłów OTML</strong>: <code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span></code>.</p></li>
<li><p><strong>Typów wyliczeniowych (enum)</strong>.</p></li>
<li><p><strong>Obiektów C++</strong>: <code class="docutils literal notranslate"><span class="pre">LuaObjectPtr</span></code> i wskaźniki do klas pochodnych.</p></li>
<li><p><strong>Kontenerów STL</strong>: <code class="docutils literal notranslate"><span class="pre">std::list</span></code>, <code class="docutils literal notranslate"><span class="pre">std::vector</span></code>, <code class="docutils literal notranslate"><span class="pre">std::set</span></code>, <code class="docutils literal notranslate"><span class="pre">std::deque</span></code>, <code class="docutils literal notranslate"><span class="pre">std::map</span></code>.</p></li>
<li><p><strong>Krotek</strong>: <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code>.</p></li>
</ul>
</section>
<section id="przyklad-dzialania">
<h1>Przykład działania<a class="headerlink" href="#przyklad-dzialania" title="Link to this heading">#</a></h1>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// C++</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">myFunction</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span>

<span class="c1">// Lua</span>
<span class="n">myFunction</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Gdy <code class="docutils literal notranslate"><span class="pre">myFunction</span></code> jest wywoływana z Lua, <code class="docutils literal notranslate"><span class="pre">luabinder</span></code> użyje:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">luavalue_cast(1,</span> <span class="pre">int&amp;)</span></code> do konwersji <code class="docutils literal notranslate"><span class="pre">10</span></code> z Lua na <code class="docutils literal notranslate"><span class="pre">int</span></code> w C++.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">luavalue_cast(2,</span> <span class="pre">std::string&amp;)</span></code> do konwersji <code class="docutils literal notranslate"><span class="pre">&quot;hello&quot;</span></code> z Lua na <code class="docutils literal notranslate"><span class="pre">std::string</span></code> w C++.</p></li>
</ul>
</section>
<section id="id639">
<h1>Zależności i powiązania<a class="headerlink" href="#id639" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to plik wewnętrzny, dołączany tylko przez <code class="docutils literal notranslate"><span class="pre">luainterface.h</span></code>.</p></li>
<li><p>Wymaga definicji <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code>, <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, <code class="docutils literal notranslate"><span class="pre">LuaException</span></code>.</p></li>
<li><p>Jest podstawą całego systemu automatycznej konwersji typów, używanego przez <code class="docutils literal notranslate"><span class="pre">luabinder</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="connection-cpp">
<h1>📄 connection.cpp<a class="headerlink" href="#connection-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id640">
<h1>Opis ogólny<a class="headerlink" href="#id640" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">connection.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Connection</span></code>, która jest niskopoziomowym opakowaniem na asynchroniczne gniazdo TCP (TCP socket) z biblioteki Boost.Asio. Zarządza ona cyklem życia połączenia, operacjami odczytu i zapisu oraz obsługą błędów.</p>
</section>
<section id="id641">
<h1>Zmienne globalne<a class="headerlink" href="#id641" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_ioService</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">boost::asio::io_service</span></code>, która jest sercem pętli zdarzeń dla wszystkich operacji sieciowych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Connection::m_outputStreams</span></code>: Statyczna lista, która działa jak pula buforów wyjściowych. Zużyte bufory są do niej zwracane, co pozwala na ich ponowne wykorzystanie i redukuje alokację pamięci.</p></li>
</ul>
</section>
<section id="klasa-connection">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Connection</span></code><a class="headerlink" href="#klasa-connection" title="Link to this heading">#</a></h1>
</section>
<section id="connection-connection">
<h1><code class="docutils literal notranslate"><span class="pre">Connection::Connection()</span></code><a class="headerlink" href="#connection-connection" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje obiekty Boost.Asio (<code class="docutils literal notranslate"><span class="pre">timer</span></code>, <code class="docutils literal notranslate"><span class="pre">resolver</span></code>, <code class="docutils literal notranslate"><span class="pre">socket</span></code>) powiązane z <code class="docutils literal notranslate"><span class="pre">g_ioService</span></code>.</p>
</section>
<section id="void-connection-poll-i-void-connection-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::poll()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::terminate()</span></code><a class="headerlink" href="#void-connection-poll-i-void-connection-terminate" title="Link to this heading">#</a></h1>
<p>Statyczne metody, które zarządzają globalnym <code class="docutils literal notranslate"><span class="pre">g_ioService</span></code>. <code class="docutils literal notranslate"><span class="pre">poll()</span></code> przetwarza zdarzenia sieciowe, a <code class="docutils literal notranslate"><span class="pre">terminate()</span></code> zatrzymuje <code class="docutils literal notranslate"><span class="pre">io_service</span></code>.</p>
</section>
<section id="void-connection-close">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::close()</span></code><a class="headerlink" href="#void-connection-close" title="Link to this heading">#</a></h1>
<p>Zamyka połączenie. Anuluje wszystkie aktywne operacje asynchroniczne, zamyka gniazdo i resetuje callbacki.</p>
</section>
<section id="void-connection-connect">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::connect(...)</span></code><a class="headerlink" href="#void-connection-connect" title="Link to this heading">#</a></h1>
<p>Rozpoczyna proces nawiązywania połączenia. Wywołuje <code class="docutils literal notranslate"><span class="pre">m_resolver.async_resolve</span></code> w celu przetłumaczenia nazwy hosta na adres IP.</p>
</section>
<section id="void-connection-write-uint8-buffer-size-t-size">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::write(uint8*</span> <span class="pre">buffer,</span> <span class="pre">size_t</span> <span class="pre">size)</span></code><a class="headerlink" href="#void-connection-write-uint8-buffer-size-t-size" title="Link to this heading">#</a></h1>
<p>Dodaje dane do bufora wyjściowego (<code class="docutils literal notranslate"><span class="pre">m_outputStream</span></code>). Aby uniknąć zatorów (congestion), faktyczne wysłanie danych jest opóźniane o 0 milisekund za pomocą <code class="docutils literal notranslate"><span class="pre">m_delayedWriteTimer</span></code>. Oznacza to, że wysłanie nastąpi w następnej iteracji pętli <code class="docutils literal notranslate"><span class="pre">io_service</span></code>, co pozwala na zgrupowanie wielu małych zapisów w jeden większy.</p>
</section>
<section id="metody-read-read-until-read-some">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">read(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">read_until(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">read_some(...)</span></code><a class="headerlink" href="#metody-read-read-until-read-some" title="Link to this heading">#</a></h1>
<p>Inicjują asynchroniczne operacje odczytu danych z gniazda. Ustawiają <code class="docutils literal notranslate"><span class="pre">m_recvCallback</span></code>, który zostanie wywołany po otrzymaniu danych, oraz <code class="docutils literal notranslate"><span class="pre">m_readTimer</span></code> do obsługi timeoutu.</p>
</section>
<section id="id642">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">on...()</span></code><a class="headerlink" href="#id642" title="Link to this heading">#</a></h1>
<p>Są to handlery (funkcje zwrotne) dla operacji asynchronicznych Boost.Asio:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">onResolve</span></code>: Wywoływana po rozwiązaniu nazwy DNS. Inicjuje połączenie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onConnect</span></code>: Wywoływana po nawiązaniu połączenia. Ustawia opcje gniazda (np. <code class="docutils literal notranslate"><span class="pre">no_delay</span></code> - wyłączenie algorytmu Nagle’a) i wywołuje <code class="docutils literal notranslate"><span class="pre">m_connectCallback</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onCanWrite</span></code>: Wywoływana przez <code class="docutils literal notranslate"><span class="pre">m_delayedWriteTimer</span></code>. Inicjuje faktyczne wysłanie danych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onWrite</span></code>: Wywoływana po zakończeniu operacji zapisu. Zwraca bufor do puli.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onRecv</span></code>: Wywoływana po otrzymaniu danych. Przekazuje dane do <code class="docutils literal notranslate"><span class="pre">m_recvCallback</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onTimeout</span></code>: Wywoływana, gdy upłynie czas oczekiwania na operację.</p></li>
</ul>
</section>
<section id="void-connection-handleerror">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::handleError(...)</span></code><a class="headerlink" href="#void-connection-handleerror" title="Link to this heading">#</a></h1>
<p>Centralna funkcja do obsługi błędów sieciowych. Zapisuje błąd, wywołuje <code class="docutils literal notranslate"><span class="pre">m_errorCallback</span></code> i zamyka połączenie.</p>
</section>
<section id="id643">
<h1>Zależności i powiązania<a class="headerlink" href="#id643" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/connection.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/application.h</span></code>, <code class="docutils literal notranslate"><span class="pre">eventdispatcher.h</span></code>: Do walidacji i planowania zdarzeń.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/asio</span></code>: Kluczowa zależność do obsługi sieci.</p></li>
<li><p>Jest używana przez klasę <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> do implementacji protokołu komunikacyjnego z serwerem gry.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="server-h">
<h1>📄 server.h<a class="headerlink" href="#server-h" title="Link to this heading">#</a></h1>
</section>
<section id="id644">
<h1>Opis ogólny<a class="headerlink" href="#id644" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">server.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Server</span></code>, która jest prostym opakowaniem na <code class="docutils literal notranslate"><span class="pre">boost::asio::ip::tcp::acceptor</span></code>. Umożliwia tworzenie serwera TCP, który nasłuchuje na przychodzące połączenia na określonym porcie.</p>
</section>
<section id="klasa-server">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Server</span></code><a class="headerlink" href="#klasa-server" title="Link to this heading">#</a></h1>
</section>
<section id="id645">
<h1>Opis semantyczny<a class="headerlink" href="#id645" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Server</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, co pozwala na tworzenie i zarządzanie serwerami z poziomu skryptów Lua. Jego głównym zadaniem jest akceptowanie nowych połączeń i przekazywanie ich do obsługi (np. w formie obiektu <code class="docutils literal notranslate"><span class="pre">Connection</span></code>).</p>
</section>
<section id="id646">
<h1>Metody publiczne<a class="headerlink" href="#id646" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Server(int</span> <span class="pre">port)</span></code></p></td>
<td class="text-left"><p>Konstruktor, tworzy i bindowanie akceptor do podanego portu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">ServerPtr</span> <span class="pre">create(int</span> <span class="pre">port)</span></code></p></td>
<td class="text-left"><p>Metoda fabryczna, która tworzy <code class="docutils literal notranslate"><span class="pre">Server</span></code> i opakowuje go w <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isOpen()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli serwer nasłuchuje.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">close()</span></code></p></td>
<td class="text-left"><p>Zamyka akceptor, przestając nasłuchiwać.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">acceptNext()</span></code></p></td>
<td class="text-left"><p>Inicjuje asynchroniczną operację oczekiwania na następne połączenie. Po jego nadejściu, wywoływany jest <code class="docutils literal notranslate"><span class="pre">callback</span></code> <code class="docutils literal notranslate"><span class="pre">onAccept</span></code> w Lua.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id647">
<h1>Zmienne prywatne<a class="headerlink" href="#id647" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_isOpen</span></code>: Flaga wskazująca, czy serwer jest aktywny.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_acceptor</span></code>: Obiekt <code class="docutils literal notranslate"><span class="pre">tcp::acceptor</span></code> z Boost.Asio.</p></li>
</ul>
</section>
<section id="id648">
<h1>Zależności i powiązania<a class="headerlink" href="#id648" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Dziedziczy z <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/asio</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">tcp::acceptor</span></code>.</p></li>
<li><p>Jest używana do implementacji serwerów nasłuchujących w Lua, np. do niestandardowych narzędzi lub protokołów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="connection-h">
<h1>📄 connection.h<a class="headerlink" href="#connection-h" title="Link to this heading">#</a></h1>
</section>
<section id="id649">
<h1>Opis ogólny<a class="headerlink" href="#id649" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">connection.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Connection</span></code>, która jest interfejsem do asynchronicznego połączenia TCP. Jest to kluczowy element podsystemu sieciowego.</p>
</section>
<section id="id650">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Connection</span></code><a class="headerlink" href="#id650" title="Link to this heading">#</a></h1>
</section>
<section id="id651">
<h1>Opis semantyczny<a class="headerlink" href="#id651" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Connection</span></code> enkapsuluje <code class="docutils literal notranslate"><span class="pre">boost::asio::ip::tcp::socket</span></code> i zarządza całym cyklem życia połączenia: od nawiązywania, przez wysyłanie i odbieranie danych, aż po zamykanie i obsługę błędów. Działa w pełni asynchronicznie, integrując się z globalną pętlą zdarzeń <code class="docutils literal notranslate"><span class="pre">g_ioService</span></code>. Dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, co umożliwia jej użycie w Lua.</p>
</section>
<section id="id652">
<h1>Stałe<a class="headerlink" href="#id652" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">READ_TIMEOUT</span></code>, <code class="docutils literal notranslate"><span class="pre">WRITE_TIMEOUT</span></code>: Czas (w sekundach) na zakończenie operacji odczytu/zapisu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SEND_BUFFER_SIZE</span></code>, <code class="docutils literal notranslate"><span class="pre">RECV_BUFFER_SIZE</span></code>: Rozmiary buforów.</p></li>
</ul>
</section>
<section id="id653">
<h1>Metody publiczne<a class="headerlink" href="#id653" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><strong>Statyczne</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">void</span> <span class="pre">poll()</span></code></p></td>
<td class="text-left"><p>Przetwarza zdarzenia w globalnym <code class="docutils literal notranslate"><span class="pre">g_ioService</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Zatrzymuje <code class="docutils literal notranslate"><span class="pre">g_ioService</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><strong>Cykl życia</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">connect(...)</span></code></p></td>
<td class="text-left"><p>Rozpoczyna asynchroniczne nawiązywanie połączenia.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">close()</span></code></p></td>
<td class="text-left"><p>Zamyka połączenie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><strong>Operacje I/O</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">write(...)</span></code></p></td>
<td class="text-left"><p>Dodaje dane do kolejki wysyłania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">read(...)</span></code></p></td>
<td class="text-left"><p>Rozpoczyna asynchroniczny odczyt określonej liczby bajtów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">read_until(...)</span></code></p></td>
<td class="text-left"><p>Odczytuje dane aż do napotkania określonego separatora.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">read_some(...)</span></code></p></td>
<td class="text-left"><p>Odczytuje dowolną ilość dostępnych danych (nie więcej niż rozmiar bufora).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><strong>Callbacki i stan</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setErrorCallback(...)</span></code></p></td>
<td class="text-left"><p>Ustawia funkcję zwrotną dla błędów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getIp()</span></code></p></td>
<td class="text-left"><p>Zwraca adres IP zdalnego hosta.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">boost::system::error_code</span> <span class="pre">getError()</span></code></p></td>
<td class="text-left"><p>Zwraca ostatni błąd.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isConnecting()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli trwa nawiązywanie połączenia.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isConnected()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli połączenie jest aktywne.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">getElapsedTicksSinceLastRead()</span></code></p></td>
<td class="text-left"><p>Zwraca czas od ostatniej operacji odczytu (do wykrywania timeoutów na wyższym poziomie).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id654">
<h1>Zmienne chronione<a class="headerlink" href="#id654" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_connectCallback</span></code>, <code class="docutils literal notranslate"><span class="pre">m_errorCallback</span></code>, <code class="docutils literal notranslate"><span class="pre">m_recvCallback</span></code>: Funkcje zwrotne.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_readTimer</span></code>, <code class="docutils literal notranslate"><span class="pre">m_writeTimer</span></code>, …: Obiekty Boost.Asio (timery, resolver, socket).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_outputStream</span></code>, <code class="docutils literal notranslate"><span class="pre">m_inputStream</span></code>: Bufory do zapisu i odczytu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_connected</span></code>, <code class="docutils literal notranslate"><span class="pre">m_connecting</span></code>: Flagi stanu.</p></li>
</ul>
</section>
<section id="id655">
<h1>Zależności i powiązania<a class="headerlink" href="#id655" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/declarations.h</span></code>: Deklaracje typów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Klasa bazowa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/timer.h</span></code>: Do śledzenia aktywności.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> do komunikacji z serwerem gry.</p></li>
<li><p>Jest zwracana przez <code class="docutils literal notranslate"><span class="pre">Server</span></code> po zaakceptowaniu nowego połączenia.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id656">
<h1>📄 declarations.h<a class="headerlink" href="#id656" title="Link to this heading">#</a></h1>
</section>
<section id="id657">
<h1>Opis ogólny<a class="headerlink" href="#id657" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">declarations.h</span></code> w module <code class="docutils literal notranslate"><span class="pre">net</span></code> służy do wczesnych deklaracji (forward declarations) i definicji typów wskaźników dla klas związanych z obsługą sieci. Pomaga to unikać zależności cyklicznych i skraca czas kompilacji.</p>
</section>
<section id="id658">
<h1>Deklaracje<a class="headerlink" href="#id658" title="Link to this heading">#</a></h1>
</section>
<section id="namespace-asio">
<h1><code class="docutils literal notranslate"><span class="pre">namespace</span> <span class="pre">asio</span></code><a class="headerlink" href="#namespace-asio" title="Link to this heading">#</a></h1>
<p>Deklaruje, że <code class="docutils literal notranslate"><span class="pre">asio</span></code> jest aliasem dla <code class="docutils literal notranslate"><span class="pre">boost::asio</span></code>.</p>
</section>
<section id="wczesne-deklaracje-klas">
<h1>Wczesne deklaracje klas<a class="headerlink" href="#wczesne-deklaracje-klas" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">InputMessage</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Connection</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Protocol</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Server</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PacketPlayer</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PacketRecorder</span></code></p></li>
</ul>
</section>
<section id="id659">
<h1>Definicje typów<a class="headerlink" href="#id659" title="Link to this heading">#</a></h1>
<p>Definiuje aliasy dla inteligentnych wskaźników (<code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code>) do klas sieciowych.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">InputMessagePtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutputMessagePtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ConnectionPtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ProtocolPtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ServerPtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PacketPlayerPtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PacketRecorderPtr</span></code></p></li>
</ul>
</section>
<section id="id660">
<h1>Zależności i powiązania<a class="headerlink" href="#id660" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p>Jest dołączany przez większość plików nagłówkowych w module <code class="docutils literal notranslate"><span class="pre">net</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="inputmessage-h">
<h1>📄 inputmessage.h<a class="headerlink" href="#inputmessage-h" title="Link to this heading">#</a></h1>
</section>
<section id="id661">
<h1>Opis ogólny<a class="headerlink" href="#id661" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">inputmessage.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">InputMessage</span></code>, która jest narzędziem do parsowania przychodzących pakietów sieciowych.</p>
</section>
<section id="klasa-inputmessage">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">InputMessage</span></code><a class="headerlink" href="#klasa-inputmessage" title="Link to this heading">#</a></h1>
</section>
<section id="id662">
<h1>Opis semantyczny<a class="headerlink" href="#id662" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">InputMessage</span></code> działa jak bufor z wskaźnikiem odczytu. Przechowuje surowe dane pakietu i udostępnia metody do sekwencyjnego odczytywania z niego różnych typów danych (np. <code class="docutils literal notranslate"><span class="pre">getU8</span></code>, <code class="docutils literal notranslate"><span class="pre">getU16</span></code>, <code class="docutils literal notranslate"><span class="pre">getString</span></code>). Zarządza również pozycją nagłówka, co pozwala na oddzielenie metadanych pakietu (rozmiar, suma kontrolna) od jego właściwej zawartości (ciała).</p>
</section>
<section id="id663">
<h1>Stałe<a class="headerlink" href="#id663" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BUFFER_MAXSIZE</span></code>: Maksymalny rozmiar bufora.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MAX_HEADER_SIZE</span></code>: Maksymalny rozmiar nagłówka (rezerwowane miejsce na początku bufora).</p></li>
</ul>
</section>
<section id="id664">
<h1>Metody publiczne<a class="headerlink" href="#id664" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setBuffer(...)</span></code></p></td>
<td class="text-left"><p>Kopiuje dane z <code class="docutils literal notranslate"><span class="pre">std::string</span></code> do wewnętrznego bufora.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getBuffer()</span></code></p></td>
<td class="text-left"><p>Zwraca cały pakiet (nagłówek + ciało) jako <code class="docutils literal notranslate"><span class="pre">std::string</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getBodyBuffer()</span></code></p></td>
<td class="text-left"><p>Zwraca tylko ciało pakietu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">skipBytes(uint32</span> <span class="pre">bytes)</span></code></p></td>
<td class="text-left"><p>Przesuwa wskaźnik odczytu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getU8()</span></code>, <code class="docutils literal notranslate"><span class="pre">getU16()</span></code>, <code class="docutils literal notranslate"><span class="pre">getU32()</span></code>, <code class="docutils literal notranslate"><span class="pre">getU64()</span></code></p></td>
<td class="text-left"><p>Odczytują liczby całkowite bez znaku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getString()</span></code></p></td>
<td class="text-left"><p>Odczytuje string (poprzedzony długością U16).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getDouble()</span></code></p></td>
<td class="text-left"><p>Odczytuje liczbę zmiennoprzecinkową w niestandardowym formacie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">peekU8()</span></code>, …</p></td>
<td class="text-left"><p>Odczytują wartość bez przesuwania wskaźnika.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">decryptRsa(...)</span></code></p></td>
<td class="text-left"><p>Deszyfruje fragment bufora za pomocą RSA.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getHeaderSize()</span></code>, <code class="docutils literal notranslate"><span class="pre">getMessageSize()</span></code>, <code class="docutils literal notranslate"><span class="pre">getUnreadSize()</span></code></p></td>
<td class="text-left"><p>Zwracają informacje o rozmiarach.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">eof()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli wszystkie dane zostały odczytane.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="metody-chronione-uzywane-przez-protocol">
<h1>Metody chronione (używane przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>)<a class="headerlink" href="#metody-chronione-uzywane-przez-protocol" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">reset()</span></code>: Resetuje stan wiadomości.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fillBuffer(...)</span></code>: Dopisuje dane do bufora.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setHeaderSize(...)</span></code>: Ustawia rozmiar nagłówka.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">readChecksum()</span></code>: Odczytuje i weryfikuje sumę kontrolną.</p></li>
</ul>
</section>
<section id="id665">
<h1>Zmienne prywatne<a class="headerlink" href="#id665" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_headerPos</span></code>: Pozycja startowa nagłówka.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_readPos</span></code>: Aktualna pozycja odczytu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_messageSize</span></code>: Całkowity rozmiar wiadomości (bez nagłówka).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_buffer</span></code>: Bufor na dane.</p></li>
</ul>
</section>
<section id="id666">
<h1>Zależności i powiązania<a class="headerlink" href="#id666" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Dziedziczy z <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, jest dostępna w Lua.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> do parsowania danych otrzymanych z <code class="docutils literal notranslate"><span class="pre">Connection</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="outputmessage-cpp">
<h1>📄 outputmessage.cpp<a class="headerlink" href="#outputmessage-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id667">
<h1>Opis ogólny<a class="headerlink" href="#id667" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">outputmessage.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code>, która służy do budowania wychodzących pakietów sieciowych.</p>
</section>
<section id="klasa-outputmessage">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code><a class="headerlink" href="#klasa-outputmessage" title="Link to this heading">#</a></h1>
</section>
<section id="outputmessage-outputmessage">
<h1><code class="docutils literal notranslate"><span class="pre">OutputMessage::OutputMessage()</span></code><a class="headerlink" href="#outputmessage-outputmessage" title="Link to this heading">#</a></h1>
<p>Konstruktor, wywołuje <code class="docutils literal notranslate"><span class="pre">reset()</span></code>.</p>
</section>
<section id="void-outputmessage-reset">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputMessage::reset()</span></code><a class="headerlink" href="#void-outputmessage-reset" title="Link to this heading">#</a></h1>
<p>Resetuje stan wiadomości, ustawiając wskaźnik zapisu (<code class="docutils literal notranslate"><span class="pre">m_writePos</span></code>) i pozycję nagłówka (<code class="docutils literal notranslate"><span class="pre">m_headerPos</span></code>) na początek obszaru na ciało wiadomości.</p>
</section>
<section id="void-outputmessage-setbuffer-const-std-string-buffer">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputMessage::setBuffer(const</span> <span class="pre">std::string&amp;</span> <span class="pre">buffer)</span></code><a class="headerlink" href="#void-outputmessage-setbuffer-const-std-string-buffer" title="Link to this heading">#</a></h1>
<p>Kopiuje dane z <code class="docutils literal notranslate"><span class="pre">std::string</span></code> do bufora wiadomości.</p>
</section>
<section id="metody-add">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">add...()</span></code><a class="headerlink" href="#metody-add" title="Link to this heading">#</a></h1>
<p>Służą do dodawania różnych typów danych na koniec wiadomości.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">addU8</span></code>, <code class="docutils literal notranslate"><span class="pre">addU16</span></code>, <code class="docutils literal notranslate"><span class="pre">addU32</span></code>, <code class="docutils literal notranslate"><span class="pre">addU64</span></code>: Dodają liczby całkowite, konwertując je do porządku Little Endian.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">addString</span></code>: Dodaje <code class="docutils literal notranslate"><span class="pre">std::string</span></code>, poprzedzając go 2-bajtową długością.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">addRawString</span></code>: Dodaje <code class="docutils literal notranslate"><span class="pre">std::string</span></code> bez informacji o długości.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">addPaddingBytes</span></code>: Dodaje określoną liczbę bajtów wypełniających.</p></li>
<li><p>Każda z tych metod wywołuje <code class="docutils literal notranslate"><span class="pre">checkWrite</span></code> w celu sprawdzenia, czy jest wystarczająco miejsca w buforze.</p></li>
</ul>
</section>
<section id="void-outputmessage-encryptrsa">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputMessage::encryptRsa()</span></code><a class="headerlink" href="#void-outputmessage-encryptrsa" title="Link to this heading">#</a></h1>
<p>Szyfruje ostatnie <code class="docutils literal notranslate"><span class="pre">N</span></code> bajtów bufora za pomocą klucza publicznego RSA, gdzie <code class="docutils literal notranslate"><span class="pre">N</span></code> to rozmiar klucza.</p>
</section>
<section id="metody-write">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">write...()</span></code><a class="headerlink" href="#metody-write" title="Link to this heading">#</a></h1>
<p>Metody te operują na zarezerwowanym miejscu na nagłówek (przed ciałem wiadomości):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">writeChecksum()</span></code>: Oblicza sumę kontrolną Adler-32 dla ciała wiadomości i zapisuje ją w nagłówku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">writeSequence()</span></code>: Zapisuje numer sekwencyjny pakietu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">writeMessageSize()</span></code>: Zapisuje całkowity rozmiar ciała wiadomości w nagłówku.</p></li>
</ul>
</section>
<section id="void-outputmessage-checkwrite-int-bytes">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputMessage::checkWrite(int</span> <span class="pre">bytes)</span></code><a class="headerlink" href="#void-outputmessage-checkwrite-int-bytes" title="Link to this heading">#</a></h1>
<p>Sprawdza, czy dodanie <code class="docutils literal notranslate"><span class="pre">bytes</span></code> bajtów nie przekroczy maksymalnego rozmiaru bufora. Jeśli tak, rzuca wyjątek.</p>
</section>
<section id="id668">
<h1>Zależności i powiązania<a class="headerlink" href="#id668" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/outputmessage.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/crypt.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_crypt</span></code> do szyfrowania RSA i <code class="docutils literal notranslate"><span class="pre">stdext::adler32</span></code> do sum kontrolnych.</p></li>
<li><p>Jest tworzona przez kod logiki gry, wypełniana danymi, a następnie przekazywana do <code class="docutils literal notranslate"><span class="pre">Protocol::send()</span></code> w celu wysłania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="outputmessage-h">
<h1>📄 outputmessage.h<a class="headerlink" href="#outputmessage-h" title="Link to this heading">#</a></h1>
</section>
<section id="id669">
<h1>Opis ogólny<a class="headerlink" href="#id669" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">outputmessage.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code>, która jest narzędziem do konstruowania wychodzących pakietów sieciowych.</p>
</section>
<section id="id670">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code><a class="headerlink" href="#id670" title="Link to this heading">#</a></h1>
</section>
<section id="id671">
<h1>Opis semantyczny<a class="headerlink" href="#id671" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code> działa jak bufor z wskaźnikiem zapisu. Udostępnia metody do dodawania różnych typów danych (<code class="docutils literal notranslate"><span class="pre">addU8</span></code>, <code class="docutils literal notranslate"><span class="pre">addString</span></code>, itp.), które są dołączane na końcu bufora. Posiada również zarezerwowane miejsce na początku bufora na nagłówek, który jest wypełniany tuż przed wysłaniem (np. rozmiarem wiadomości, sumą kontrolną).</p>
</section>
<section id="id672">
<h1>Stałe<a class="headerlink" href="#id672" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BUFFER_MAXSIZE</span></code>: Maksymalny rozmiar bufora.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MAX_STRING_LENGTH</span></code>: Maksymalna długość stringa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MAX_HEADER_SIZE</span></code>: Rozmiar zarezerwowanego miejsca na nagłówek.</p></li>
</ul>
</section>
<section id="id673">
<h1>Metody publiczne<a class="headerlink" href="#id673" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">reset()</span></code></p></td>
<td class="text-left"><p>Resetuje wiadomość do stanu początkowego.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setBuffer(...)</span></code></p></td>
<td class="text-left"><p>Ustawia zawartość ciała wiadomości.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getBuffer()</span></code></p></td>
<td class="text-left"><p>Zwraca gotowy pakiet (nagłówek + ciało) jako <code class="docutils literal notranslate"><span class="pre">std::string</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">addU8()</span></code>, …, <code class="docutils literal notranslate"><span class="pre">addString()</span></code></p></td>
<td class="text-left"><p>Dodają dane do ciała wiadomości.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">encryptRsa()</span></code></p></td>
<td class="text-left"><p>Szyfruje część wiadomości za pomocą RSA.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getWritePos()</span></code></p></td>
<td class="text-left"><p>Zwraca aktualną pozycję zapisu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getMessageSize()</span></code></p></td>
<td class="text-left"><p>Zwraca aktualny rozmiar ciała wiadomości.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setWritePos(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">setMessageSize(...)</span></code></p></td>
<td class="text-left"><p>Ustawiają pozycję zapisu i rozmiar.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id674">
<h1>Metody chronione (używane przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>)<a class="headerlink" href="#id674" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">getHeaderBuffer()</span></code>: Zwraca wskaźnik na początek gotowego pakietu (początek nagłówka).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">writeChecksum()</span></code>, <code class="docutils literal notranslate"><span class="pre">writeSequence()</span></code>, <code class="docutils literal notranslate"><span class="pre">writeMessageSize()</span></code>: Wypełniają nagłórek odpowiednimi metadanymi.</p></li>
</ul>
</section>
<section id="id675">
<h1>Zmienne prywatne<a class="headerlink" href="#id675" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_headerPos</span></code>: Aktualna pozycja początku nagłówka.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_writePos</span></code>: Aktualna pozycja zapisu w ciele wiadomości.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_messageSize</span></code>: Rozmiar całego pakietu (nagłówek + ciało).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_buffer</span></code>: Bufor na dane.</p></li>
</ul>
</section>
<section id="id676">
<h1>Zależności i powiązania<a class="headerlink" href="#id676" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Dziedziczy z <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, jest dostępna w Lua do tworzenia pakietów.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> do przygotowania pakietów do wysłania przez <code class="docutils literal notranslate"><span class="pre">Connection</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="packet-player-cpp">
<h1>📄 packet_player.cpp<a class="headerlink" href="#packet-player-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id677">
<h1>Opis ogólny<a class="headerlink" href="#id677" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">packet_player.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">PacketPlayer</span></code>, która umożliwia odtwarzanie wcześniej nagranych sesji sieciowych. Jest to narzędzie do debugowania i testowania.</p>
</section>
<section id="klasa-packetplayer">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">PacketPlayer</span></code><a class="headerlink" href="#klasa-packetplayer" title="Link to this heading">#</a></h1>
</section>
<section id="packetplayer-packetplayer-const-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">PacketPlayer::PacketPlayer(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code><a class="headerlink" href="#packetplayer-packetplayer-const-std-string-file" title="Link to this heading">#</a></h1>
<p>Konstruktor.</p>
<ul class="simple">
<li><p><strong>Działanie</strong>:</p>
<ol class="arabic simple">
<li><p>Otwiera plik nagrania z katalogu <code class="docutils literal notranslate"><span class="pre">records/</span></code>.</p></li>
<li><p>Czyta plik linia po linii.</p></li>
<li><p>Każda linia zawiera typ pakietu (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code> dla przychodzącego, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> dla wychodzącego), sygnaturę czasową i dane pakietu w formacie heksadecymalnym.</p></li>
<li><p>Dekoduje dane heksadecymalne do postaci binarnej i zapisuje pakiety w odpowiednich kolejkach (<code class="docutils literal notranslate"><span class="pre">m_input</span></code> lub <code class="docutils literal notranslate"><span class="pre">m_output</span></code>).</p></li>
</ol>
</li>
</ul>
</section>
<section id="packetplayer-packetplayer">
<h1><code class="docutils literal notranslate"><span class="pre">PacketPlayer::~PacketPlayer()</span></code><a class="headerlink" href="#packetplayer-packetplayer" title="Link to this heading">#</a></h1>
<p>Destruktor. Anuluje zaplanowane zdarzenie (<code class="docutils literal notranslate"><span class="pre">m_event</span></code>), jeśli istnieje.</p>
</section>
<section id="void-packetplayer-start">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketPlayer::start(...)</span></code><a class="headerlink" href="#void-packetplayer-start" title="Link to this heading">#</a></h1>
<p>Rozpoczyna odtwarzanie.</p>
<ul class="simple">
<li><p><strong>Działanie</strong>:</p>
<ol class="arabic simple">
<li><p>Zapisuje czas startu (<code class="docutils literal notranslate"><span class="pre">m_start</span></code>).</p></li>
<li><p>Zapisuje callbacki do obsługi „otrzymanych” pakietów i zdarzenia rozłączenia.</p></li>
<li><p>Planuje pierwsze wywołanie metody <code class="docutils literal notranslate"><span class="pre">process()</span></code> za 50ms.</p></li>
</ol>
</li>
</ul>
</section>
<section id="void-packetplayer-stop">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketPlayer::stop()</span></code><a class="headerlink" href="#void-packetplayer-stop" title="Link to this heading">#</a></h1>
<p>Zatrzymuje odtwarzanie, anulując zdarzenie.</p>
</section>
<section id="void-packetplayer-onoutputpacket-const-outputmessageptr-packet">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketPlayer::onOutputPacket(const</span> <span class="pre">OutputMessagePtr&amp;</span> <span class="pre">packet)</span></code><a class="headerlink" href="#void-packetplayer-onoutputpacket-const-outputmessageptr-packet" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>, gdy próbuje on wysłać pakiet. W trybie odtwarzania, pakiety wychodzące są analizowane (np. w celu wykrycia wylogowania), ale nie są nigdzie wysyłane.</p>
</section>
<section id="void-packetplayer-process">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketPlayer::process()</span></code><a class="headerlink" href="#void-packetplayer-process" title="Link to this heading">#</a></h1>
</section>
<section id="id678">
<h1>Opis semantyczny<a class="headerlink" href="#id678" title="Link to this heading">#</a></h1>
<p>Główna metoda pętli odtwarzacza.</p>
</section>
<section id="id679">
<h1>Działanie<a class="headerlink" href="#id679" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Iteruje po kolejce pakietów przychodzących (<code class="docutils literal notranslate"><span class="pre">m_input</span></code>).</p></li>
<li><p>Sprawdza sygnaturę czasową każdego pakietu. Jeśli czas odtworzenia pakietu (<code class="docutils literal notranslate"><span class="pre">packet.first</span> <span class="pre">+</span> <span class="pre">m_start</span></code>) już minął, wywołuje <code class="docutils literal notranslate"><span class="pre">m_recvCallback</span></code> z danymi pakietu i usuwa go z kolejki.</p></li>
<li><p>Jeśli kolejka nie jest pusta, planuje swoje następne wywołanie z opóźnieniem równym różnicy czasu do następnego pakietu.</p></li>
<li><p>Jeśli kolejka jest pusta, wywołuje <code class="docutils literal notranslate"><span class="pre">m_disconnectCallback</span></code>, symulując koniec sesji.</p></li>
</ol>
</section>
<section id="id680">
<h1>Zależności i powiązania<a class="headerlink" href="#id680" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/packet_player.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>, <code class="docutils literal notranslate"><span class="pre">eventdispatcher.h</span></code>: Do zarządzania czasem i planowania zdarzeń.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/algorithm/hex.hpp</span></code>: Do dekodowania danych z formatu heksadecymalnego.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> w trybie odtwarzania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="packet-player-h">
<h1>📄 packet_player.h<a class="headerlink" href="#packet-player-h" title="Link to this heading">#</a></h1>
</section>
<section id="id681">
<h1>Opis ogólny<a class="headerlink" href="#id681" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">packet_player.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">PacketPlayer</span></code>, która służy do odtwarzania nagranych sesji sieciowych z plików.</p>
</section>
<section id="id682">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">PacketPlayer</span></code><a class="headerlink" href="#id682" title="Link to this heading">#</a></h1>
</section>
<section id="id683">
<h1>Opis semantyczny<a class="headerlink" href="#id683" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">PacketPlayer</span></code> odczytuje plik z zarejestrowanymi pakietami i ich sygnaturami czasowymi. Po uruchomieniu, symuluje przychodzące pakiety sieciowe, wywołując <code class="docutils literal notranslate"><span class="pre">callback</span></code> w odpowiednich odstępach czasu, zgodnie z nagraniem. Pozwala to na debugowanie i testowanie logiki klienta bez potrzeby łączenia się z serwerem. Dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p>
</section>
<section id="id684">
<h1>Metody publiczne<a class="headerlink" href="#id684" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">PacketPlayer(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></p></td>
<td class="text-left"><p>Konstruktor, ładuje nagranie z pliku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">~PacketPlayer()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">start(...)</span></code></p></td>
<td class="text-left"><p>Rozpoczyna odtwarzanie sesji. Przyjmuje callbacki na otrzymanie pakietu i na rozłączenie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">stop()</span></code></p></td>
<td class="text-left"><p>Zatrzymuje odtwarzanie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">onOutputPacket(...)</span></code></p></td>
<td class="text-left"><p>Przechwytuje pakiety, które normalnie byłyby wysłane, w celu symulacji (np. wykrycia wylogowania).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id685">
<h1>Zmienne prywatne<a class="headerlink" href="#id685" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_start</span></code>: Czas rozpoczęcia odtwarzania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_event</span></code>: Wskaźnik na zaplanowane zdarzenie do przetwarzania pakietów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_input</span></code>, <code class="docutils literal notranslate"><span class="pre">m_output</span></code>: Kolejki (<code class="docutils literal notranslate"><span class="pre">std::deque</span></code>) przechowujące pary (czas, dane pakietu) dla pakietów przychodzących i wychodzących.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_recvCallback</span></code>: <code class="docutils literal notranslate"><span class="pre">Callback</span></code> wywoływany z danymi „otrzymanego” pakietu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_disconnectCallback</span></code>: <code class="docutils literal notranslate"><span class="pre">Callback</span></code> wywoływany na koniec sesji.</p></li>
</ul>
</section>
<section id="id686">
<h1>Zależności i powiązania<a class="headerlink" href="#id686" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do planowania zdarzeń.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/outputmessage.h</span></code>: Do analizy pakietów wychodzących.</p></li>
<li><p>Jest tworzona i używana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> w trybie odtwarzania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="protocol-h">
<h1>📄 protocol.h<a class="headerlink" href="#protocol-h" title="Link to this heading">#</a></h1>
</section>
<section id="id687">
<h1>Opis ogólny<a class="headerlink" href="#id687" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">protocol.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>, która jest klasą bazową do implementacji protokołów komunikacji sieciowej.</p>
</section>
<section id="klasa-protocol">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Protocol</span></code><a class="headerlink" href="#klasa-protocol" title="Link to this heading">#</a></h1>
</section>
<section id="id688">
<h1>Opis semantyczny<a class="headerlink" href="#id688" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Protocol</span></code> jest abstrakcją wysokiego poziomu, która zarządza połączeniem (<code class="docutils literal notranslate"><span class="pre">Connection</span></code>) i implementuje logikę specyficzną dla danego protokołu, taką jak szyfrowanie XTEA, obsługa sum kontrolnych, kompresja i sekwencjonowanie pakietów. Przetwarza surowe dane z <code class="docutils literal notranslate"><span class="pre">Connection</span></code> na obiekty <code class="docutils literal notranslate"><span class="pre">InputMessage</span></code> i przygotowuje <code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code> do wysłania. Dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>, co pozwala na tworzenie implementacji protokołów w Lua.</p>
</section>
<section id="id689">
<h1>Metody publiczne<a class="headerlink" href="#id689" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">connect(...)</span></code></p></td>
<td class="text-left"><p>Nawiązuje połączenie z serwerem.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">disconnect()</span></code></p></td>
<td class="text-left"><p>Zamyka połączenie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setRecorder(...)</span></code> / <code class="docutils literal notranslate"><span class="pre">playRecord(...)</span></code></p></td>
<td class="text-left"><p>Włącza tryb nagrywania lub odtwarzania sesji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isConnected()</span></code> / <code class="docutils literal notranslate"><span class="pre">isConnecting()</span></code></p></td>
<td class="text-left"><p>Zwracają stan połączenia.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ConnectionPtr</span> <span class="pre">getConnection()</span></code></p></td>
<td class="text-left"><p>Zwraca obiekt <code class="docutils literal notranslate"><span class="pre">Connection</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><strong>Konfiguracja protokołu</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">generateXteaKey()</span></code>, <code class="docutils literal notranslate"><span class="pre">setXteaKey(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">enableXteaEncryption()</span></code></p></td>
<td class="text-left"><p>Zarządzają szyfrowaniem XTEA.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">enableChecksum()</span></code>, <code class="docutils literal notranslate"><span class="pre">enabledSequencedPackets()</span></code>, <code class="docutils literal notranslate"><span class="pre">enableBigPackets()</span></code>, <code class="docutils literal notranslate"><span class="pre">enableCompression()</span></code></p></td>
<td class="text-left"><p>Włączają różne cechy protokołu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><strong>Operacje I/O</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">send(...)</span></code></p></td>
<td class="text-left"><p>Wysyła <code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code>, opcjonalnie szyfrując i dodając nagłówki.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">recv()</span></code></p></td>
<td class="text-left"><p>Inicjuje proces odbierania następnego pakietu.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id690">
<h1>Metody chronione<a class="headerlink" href="#id690" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">onConnect()</span></code>: Wirtualna metoda wywoływana po nawiązaniu połączenia. Domyślnie wywołuje <code class="docutils literal notranslate"><span class="pre">onConnect</span></code> w Lua.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onRecv(...)</span></code>: Wirtualna metoda wywoływana po otrzymaniu i zdeserializowaniu pełnego pakietu. Domyślnie wywołuje <code class="docutils literal notranslate"><span class="pre">onRecv</span></code> w Lua.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onError(...)</span></code>: Wirtualna metoda wywoływana w przypadku błędu sieciowego.</p></li>
</ul>
</section>
<section id="zmienne">
<h1>Zmienne<a class="headerlink" href="#zmienne" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_xteaKey</span></code>: Klucz XTEA.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_packetNumber</span></code>: Licznik dla pakietów sekwencyjnych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_player</span></code>, <code class="docutils literal notranslate"><span class="pre">m_recorder</span></code>: Wskaźniki na obiekty do odtwarzania/nagrywania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_checksumEnabled</span></code>, <code class="docutils literal notranslate"><span class="pre">m_xteaEncryptionEnabled</span></code>, …: Flagi konfiguracji protokołu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_connection</span></code>: Wskaźnik na obiekt <code class="docutils literal notranslate"><span class="pre">Connection</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_inputMessage</span></code>: Bufor na przychodzące dane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_zstream</span></code>: Strumień ZLIB do dekompresji.</p></li>
</ul>
</section>
<section id="id691">
<h1>Zależności i powiązania<a class="headerlink" href="#id691" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/declarations.h</span></code>, <code class="docutils literal notranslate"><span class="pre">inputmessage.h</span></code>, <code class="docutils literal notranslate"><span class="pre">outputmessage.h</span></code>, <code class="docutils literal notranslate"><span class="pre">connection.h</span></code>: Podstawowe klasy sieciowe.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Klasa bazowa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/proxy/proxy.h</span></code>: Do integracji z systemem proxy.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, jest kluczowym elementem do implementacji logiki sieciowej w Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="packet-recorder-cpp">
<h1>📄 packet_recorder.cpp<a class="headerlink" href="#packet-recorder-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id692">
<h1>Opis ogólny<a class="headerlink" href="#id692" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">packet_recorder.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">PacketRecorder</span></code>, która służy do nagrywania sesji sieciowej do pliku tekstowego.</p>
</section>
<section id="klasa-packetrecorder">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">PacketRecorder</span></code><a class="headerlink" href="#klasa-packetrecorder" title="Link to this heading">#</a></h1>
</section>
<section id="packetrecorder-packetrecorder-const-std-string-file">
<h1><code class="docutils literal notranslate"><span class="pre">PacketRecorder::PacketRecorder(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code><a class="headerlink" href="#packetrecorder-packetrecorder-const-std-string-file" title="Link to this heading">#</a></h1>
<p>Konstruktor.</p>
<ul class="simple">
<li><p><strong>Działanie</strong>:</p>
<ol class="arabic simple">
<li><p>Zapisuje czas startu nagrywania (<code class="docutils literal notranslate"><span class="pre">m_start</span></code>).</p></li>
<li><p>Tworzy katalog <code class="docutils literal notranslate"><span class="pre">records/</span></code>, jeśli nie istnieje.</p></li>
<li><p>Otwiera plik o podanej nazwie w tym katalogu do zapisu.</p></li>
</ol>
</li>
</ul>
</section>
<section id="void-packetrecorder-addinputpacket-const-inputmessageptr-packet">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketRecorder::addInputPacket(const</span> <span class="pre">InputMessagePtr&amp;</span> <span class="pre">packet)</span></code><a class="headerlink" href="#void-packetrecorder-addinputpacket-const-inputmessageptr-packet" title="Link to this heading">#</a></h1>
<p>Nagrywa pakiet przychodzący.</p>
<ul class="simple">
<li><p><strong>Działanie</strong>:</p>
<ol class="arabic simple">
<li><p>Zapisuje do pliku znacznik <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>.</p></li>
<li><p>Zapisuje różnicę czasu od startu nagrywania.</p></li>
<li><p>Zapisuje zawartość ciała pakietu w formacie heksadecymalnym.</p></li>
<li><p>Dodaje znak nowej linii.</p></li>
</ol>
</li>
</ul>
</section>
<section id="void-packetrecorder-addoutputpacket-const-outputmessageptr-packet">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketRecorder::addOutputPacket(const</span> <span class="pre">OutputMessagePtr&amp;</span> <span class="pre">packet)</span></code><a class="headerlink" href="#void-packetrecorder-addoutputpacket-const-outputmessageptr-packet" title="Link to this heading">#</a></h1>
<p>Nagrywa pakiet wychodzący.</p>
<ul class="simple">
<li><p><strong>Działanie</strong>:</p>
<ol class="arabic simple">
<li><p>Ignoruje pierwszy pakiet wychodzący (który zazwyczaj zawiera login i hasło), aby nie zapisywać wrażliwych danych.</p></li>
<li><p>Zapisuje do pliku znacznik <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>.</p></li>
<li><p>Zapisuje różnicę czasu.</p></li>
<li><p>Zapisuje całą zawartość pakietu (wraz z nagłówkiem) w formacie heksadecymalnym.</p></li>
<li><p>Dodaje znak nowej linii.</p></li>
</ol>
</li>
</ul>
</section>
<section id="id693">
<h1>Zależności i powiązania<a class="headerlink" href="#id693" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/packet_recorder.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>, <code class="docutils literal notranslate"><span class="pre">resourcemanager.h</span></code>: Do zarządzania czasem i plikami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/algorithm/hex.hpp</span></code>: Do konwersji danych binarnych na format heksadecymalny.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>, gdy włączony jest tryb nagrywania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="protocol-cpp">
<h1>📄 protocol.cpp<a class="headerlink" href="#protocol-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id694">
<h1>Opis ogólny<a class="headerlink" href="#id694" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">protocol.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>, która stanowi bazę dla protokołów komunikacyjnych. Implementuje ona logikę niskiego poziomu, taką jak szyfrowanie, sumy kontrolne i kompresję, delegując obsługę samych pakietów do skryptów Lua.</p>
</section>
<section id="id695">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Protocol</span></code><a class="headerlink" href="#id695" title="Link to this heading">#</a></h1>
</section>
<section id="protocol-protocol">
<h1><code class="docutils literal notranslate"><span class="pre">Protocol::Protocol()</span></code><a class="headerlink" href="#protocol-protocol" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje domyślne flagi protokołu na <code class="docutils literal notranslate"><span class="pre">false</span></code> i przygotowuje strumień ZLIB do dekompresji.</p>
</section>
<section id="void-protocol-connect-const-std-string-host-uint16-port">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::connect(const</span> <span class="pre">std::string&amp;</span> <span class="pre">host,</span> <span class="pre">uint16</span> <span class="pre">port)</span></code><a class="headerlink" href="#void-protocol-connect-const-std-string-host-uint16-port" title="Link to this heading">#</a></h1>
<p>Rozpoczyna połączenie. Jeśli <code class="docutils literal notranslate"><span class="pre">host</span></code> to „proxy” lub inny specjalny adres, używa <code class="docutils literal notranslate"><span class="pre">g_proxy</span></code>. W przeciwnym razie tworzy nowy <code class="docutils literal notranslate"><span class="pre">Connection</span></code>.</p>
</section>
<section id="void-protocol-disconnect">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::disconnect()</span></code><a class="headerlink" href="#void-protocol-disconnect" title="Link to this heading">#</a></h1>
<p>Zamyka połączenie, zwalniając <code class="docutils literal notranslate"><span class="pre">Connection</span></code> lub sesję proxy.</p>
</section>
<section id="void-protocol-send-const-outputmessageptr-outputmessage-bool-rawpacket">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::send(const</span> <span class="pre">OutputMessagePtr&amp;</span> <span class="pre">outputMessage,</span> <span class="pre">bool</span> <span class="pre">rawPacket)</span></code><a class="headerlink" href="#void-protocol-send-const-outputmessageptr-outputmessage-bool-rawpacket" title="Link to this heading">#</a></h1>
</section>
<section id="id696">
<h1>Opis semantyczny<a class="headerlink" href="#id696" title="Link to this heading">#</a></h1>
<p>Przygotowuje i wysyła pakiet.</p>
</section>
<section id="id697">
<h1>Działanie<a class="headerlink" href="#id697" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Jeśli włączone jest nagrywanie, zapisuje pakiet.</p></li>
<li><p>Jeśli <code class="docutils literal notranslate"><span class="pre">rawPacket</span></code> jest <code class="docutils literal notranslate"><span class="pre">false</span></code>:</p>
<ul class="simple">
<li><p>Szyfruje pakiet za pomocą XTEA, jeśli włączone.</p></li>
<li><p>Dodaje sumę kontrolną lub numer sekwencyjny.</p></li>
<li><p>Dodaje rozmiar pakietu na początku.</p></li>
</ul>
</li>
<li><p>Wysyła gotowy pakiet przez <code class="docutils literal notranslate"><span class="pre">Connection</span></code> lub <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>.</p></li>
<li><p>Resetuje <code class="docutils literal notranslate"><span class="pre">outputMessage</span></code>, aby mógł być ponownie użyty.</p></li>
</ol>
</section>
<section id="void-protocol-recv">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::recv()</span></code><a class="headerlink" href="#void-protocol-recv" title="Link to this heading">#</a></h1>
<p>Rozpoczyna proces odbierania nowego pakietu, instruując <code class="docutils literal notranslate"><span class="pre">Connection</span></code>, aby najpierw odczytał nagłówek o odpowiedniej długości.</p>
</section>
<section id="void-protocol-internalrecvheader-i-internalrecvdata">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::internalRecvHeader(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">internalRecvData(...)</span></code><a class="headerlink" href="#void-protocol-internalrecvheader-i-internalrecvdata" title="Link to this heading">#</a></h1>
<p>Handlery wywoływane przez <code class="docutils literal notranslate"><span class="pre">Connection</span></code>. <code class="docutils literal notranslate"><span class="pre">internalRecvHeader</span></code> odczytuje rozmiar ciała pakietu, a <code class="docutils literal notranslate"><span class="pre">internalRecvData</span></code> odczytuje resztę danych. <code class="docutils literal notranslate"><span class="pre">internalRecvData</span></code> następnie wykonuje deszyfrowanie, weryfikację sumy kontrolnej i dekompresję, a na końcu wywołuje <code class="docutils literal notranslate"><span class="pre">onRecv</span></code> z gotowym <code class="docutils literal notranslate"><span class="pre">InputMessage</span></code>.</p>
</section>
<section id="void-protocol-generatexteakey-i-setxteakey">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::generateXteaKey()</span></code> i <code class="docutils literal notranslate"><span class="pre">setXteaKey(...)</span></code><a class="headerlink" href="#void-protocol-generatexteakey-i-setxteakey" title="Link to this heading">#</a></h1>
<p>Metody do zarządzania kluczem szyfrowania XTEA.</p>
</section>
<section id="bool-protocol-xteadecrypt-i-void-protocol-xteaencrypt">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Protocol::xteaDecrypt(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::xteaEncrypt(...)</span></code><a class="headerlink" href="#bool-protocol-xteadecrypt-i-void-protocol-xteaencrypt" title="Link to this heading">#</a></h1>
<p>Implementacje algorytmu XTEA do szyfrowania i deszyfrowania buforów wiadomości.</p>
</section>
<section id="void-protocol-onconnect-onrecv-onerror">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::onConnect()</span></code>, <code class="docutils literal notranslate"><span class="pre">onRecv(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">onError(...)</span></code><a class="headerlink" href="#void-protocol-onconnect-onrecv-onerror" title="Link to this heading">#</a></h1>
<p>Metody wirtualne, które domyślnie wywołują odpowiednie funkcje w Lua (<code class="docutils literal notranslate"><span class="pre">onConnect</span></code>, <code class="docutils literal notranslate"><span class="pre">onRecv</span></code>, <code class="docutils literal notranslate"><span class="pre">onError</span></code>), przekazując im kontrolę nad logiką protokołu.</p>
</section>
<section id="id698">
<h1>Zależności i powiązania<a class="headerlink" href="#id698" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/protocol.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/connection.h</span></code>, <code class="docutils literal notranslate"><span class="pre">packet_player.h</span></code>, <code class="docutils literal notranslate"><span class="pre">packet_recorder.h</span></code>: Komponenty sieciowe.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/proxy/proxy.h</span></code>: Do integracji z proxy.</p></li>
<li><p><strong>ZLIB</strong>: Do kompresji/dekompresji.</p></li>
<li><p>Jest to kluczowa klasa, która jest dziedziczona (w Lua) w celu zaimplementowania konkretnego protokołu gry.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="server-cpp">
<h1>📄 server.cpp<a class="headerlink" href="#server-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id699">
<h1>Opis ogólny<a class="headerlink" href="#id699" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">server.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">Server</span></code>, która umożliwia tworzenie prostych serwerów TCP nasłuchujących na przychodzące połączenia.</p>
</section>
<section id="id700">
<h1>Zmienne globalne<a class="headerlink" href="#id700" title="Link to this heading">#</a></h1>
</section>
<section id="g-ioservice">
<h1><code class="docutils literal notranslate"><span class="pre">g_ioService</span></code><a class="headerlink" href="#g-ioservice" title="Link to this heading">#</a></h1>
<p>Globalny <code class="docutils literal notranslate"><span class="pre">io_service</span></code> z Boost.Asio, używany również przez <code class="docutils literal notranslate"><span class="pre">Connection</span></code>, na którym działa akceptor serwera.</p>
</section>
<section id="id701">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Server</span></code><a class="headerlink" href="#id701" title="Link to this heading">#</a></h1>
</section>
<section id="server-server-int-port">
<h1><code class="docutils literal notranslate"><span class="pre">Server::Server(int</span> <span class="pre">port)</span></code><a class="headerlink" href="#server-server-int-port" title="Link to this heading">#</a></h1>
<p>Konstruktor. Tworzy i otwiera obiekt <code class="docutils literal notranslate"><span class="pre">boost::asio::ip::tcp::acceptor</span></code>, bindowanie go do wszystkich interfejsów (<code class="docutils literal notranslate"><span class="pre">tcp::v4()</span></code>) na podanym porcie.</p>
</section>
<section id="serverptr-server-create-int-port">
<h1><code class="docutils literal notranslate"><span class="pre">ServerPtr</span> <span class="pre">Server::create(int</span> <span class="pre">port)</span></code><a class="headerlink" href="#serverptr-server-create-int-port" title="Link to this heading">#</a></h1>
<p>Statyczna metoda fabryczna. Tworzy obiekt <code class="docutils literal notranslate"><span class="pre">Server</span></code>, opakowując go w <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code>. Obsługuje wyjątki, które mogą wystąpić, jeśli port jest już zajęty.</p>
</section>
<section id="void-server-close">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Server::close()</span></code><a class="headerlink" href="#void-server-close" title="Link to this heading">#</a></h1>
<p>Zamyka serwer. Anuluje wszystkie oczekujące operacje akceptowania i zamyka akceptor.</p>
</section>
<section id="void-server-acceptnext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Server::acceptNext()</span></code><a class="headerlink" href="#void-server-acceptnext" title="Link to this heading">#</a></h1>
</section>
<section id="id702">
<h1>Opis semantyczny<a class="headerlink" href="#id702" title="Link to this heading">#</a></h1>
<p>Rozpoczyna asynchroniczne oczekiwanie na nowe połączenie.</p>
</section>
<section id="id703">
<h1>Działanie<a class="headerlink" href="#id703" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Tworzy nowy, pusty obiekt <code class="docutils literal notranslate"><span class="pre">Connection</span></code>.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">m_acceptor.async_accept</span></code>, przekazując jej gniazdo nowego <code class="docutils literal notranslate"><span class="pre">Connection</span></code> oraz <code class="docutils literal notranslate"><span class="pre">callback</span></code> (lambdę).</p></li>
<li><p>Gdy nowe połączenie zostanie nawiązane, <code class="docutils literal notranslate"><span class="pre">callback</span></code> jest wywoływany.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Callback</span></code> ustawia stan <code class="docutils literal notranslate"><span class="pre">Connection</span></code> na <code class="docutils literal notranslate"><span class="pre">connected</span></code> i wywołuje funkcję <code class="docutils literal notranslate"><span class="pre">onAccept</span></code> w skrypcie Lua, przekazując jej nowy obiekt <code class="docutils literal notranslate"><span class="pre">Connection</span></code> oraz ewentualny kod błędu.</p></li>
</ol>
</section>
<section id="id704">
<h1>Zależności i powiązania<a class="headerlink" href="#id704" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/server.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/connection.h</span></code>: Tworzy obiekty <code class="docutils literal notranslate"><span class="pre">Connection</span></code> dla nowych połączeń.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/asio</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">tcp::acceptor</span></code>.</p></li>
<li><p>Jest przeznaczona do użytku w Lua, co pozwala na tworzenie np. prostych serwerów pomocniczych, serwerów proxy lub narzędzi deweloperskich.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="inputmessage-cpp">
<h1>📄 inputmessage.cpp<a class="headerlink" href="#inputmessage-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id705">
<h1>Opis ogólny<a class="headerlink" href="#id705" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">inputmessage.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">InputMessage</span></code>, która jest narzędziem do parsowania przychodzących pakietów sieciowych.</p>
</section>
<section id="id706">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">InputMessage</span></code><a class="headerlink" href="#id706" title="Link to this heading">#</a></h1>
</section>
<section id="inputmessage-inputmessage">
<h1><code class="docutils literal notranslate"><span class="pre">InputMessage::InputMessage()</span></code><a class="headerlink" href="#inputmessage-inputmessage" title="Link to this heading">#</a></h1>
<p>Konstruktor, wywołuje <code class="docutils literal notranslate"><span class="pre">reset()</span></code>.</p>
</section>
<section id="void-inputmessage-reset">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InputMessage::reset()</span></code><a class="headerlink" href="#void-inputmessage-reset" title="Link to this heading">#</a></h1>
<p>Resetuje stan wiadomości do wartości początkowych, ustawiając pozycję odczytu i nagłówka na <code class="docutils literal notranslate"><span class="pre">MAX_HEADER_SIZE</span></code>.</p>
</section>
<section id="void-inputmessage-setbuffer-const-std-string-buffer">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InputMessage::setBuffer(const</span> <span class="pre">std::string&amp;</span> <span class="pre">buffer)</span></code><a class="headerlink" href="#void-inputmessage-setbuffer-const-std-string-buffer" title="Link to this heading">#</a></h1>
<p>Ustawia zawartość ciała wiadomości, kopiując dane z <code class="docutils literal notranslate"><span class="pre">std::string</span></code> do wewnętrznego bufora.</p>
</section>
<section id="metody-get">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">get...()</span></code><a class="headerlink" href="#metody-get" title="Link to this heading">#</a></h1>
<p>Odczytują dane z bufora, zaczynając od bieżącej pozycji <code class="docutils literal notranslate"><span class="pre">m_readPos</span></code>.</p>
<ul class="simple">
<li><p>Każda metoda najpierw wywołuje <code class="docutils literal notranslate"><span class="pre">checkRead</span></code>, aby upewnić się, że jest wystarczająco dużo danych do odczytania.</p></li>
<li><p>Następnie odczytuje dane z bufora, konwertując je z porządku Little Endian, jeśli to konieczne.</p></li>
<li><p>Na koniec przesuwa wskaźnik <code class="docutils literal notranslate"><span class="pre">m_readPos</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getString</span></code> najpierw odczytuje 2-bajtową długość, a potem sam string.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getDouble</span></code> odczytuje niestandardowy format liczby zmiennoprzecinkowej.</p></li>
</ul>
</section>
<section id="bool-inputmessage-decryptrsa-int-size">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">InputMessage::decryptRsa(int</span> <span class="pre">size)</span></code><a class="headerlink" href="#bool-inputmessage-decryptrsa-int-size" title="Link to this heading">#</a></h1>
<p>Deszyfruje <code class="docutils literal notranslate"><span class="pre">size</span></code> bajtów z bieżącej pozycji za pomocą klucza prywatnego RSA. Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli pierwszy zdeszyfrowany bajt to 0.</p>
</section>
<section id="void-inputmessage-fillbuffer">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InputMessage::fillBuffer(...)</span></code><a class="headerlink" href="#void-inputmessage-fillbuffer" title="Link to this heading">#</a></h1>
<p>Dopisuje surowe dane do bufora w bieżącej pozycji odczytu (używane przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> podczas odbierania danych z gniazda).</p>
</section>
<section id="void-inputmessage-setheadersize-uint32-size">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InputMessage::setHeaderSize(uint32</span> <span class="pre">size)</span></code><a class="headerlink" href="#void-inputmessage-setheadersize-uint32-size" title="Link to this heading">#</a></h1>
<p>Ustawia pozycję początku nagłówka (<code class="docutils literal notranslate"><span class="pre">m_headerPos</span></code>), co efektywnie określa jego rozmiar.</p>
</section>
<section id="bool-inputmessage-readchecksum">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">InputMessage::readChecksum()</span></code><a class="headerlink" href="#bool-inputmessage-readchecksum" title="Link to this heading">#</a></h1>
<p>Odczytuje 4-bajtową sumę kontrolną z bufora, oblicza sumę kontrolną Adler-32 dla reszty danych i porównuje je.</p>
</section>
<section id="void-inputmessage-checkread-int-bytes">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InputMessage::checkRead(int</span> <span class="pre">bytes)</span></code><a class="headerlink" href="#void-inputmessage-checkread-int-bytes" title="Link to this heading">#</a></h1>
<p>Prywatna metoda, która rzuca wyjątek, jeśli próba odczytu <code class="docutils literal notranslate"><span class="pre">bytes</span></code> bajtów wykroczyłaby poza granice wiadomości.</p>
</section>
<section id="id707">
<h1>Zależności i powiązania<a class="headerlink" href="#id707" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/inputmessage.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/crypt.h</span></code>: Do deszyfracji RSA.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client/map.h</span></code>: Potencjalna zależność, być może z starszej wersji.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> do reprezentowania i parsowania przychodzących pakietów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="packet-recorder-h">
<h1>📄 packet_recorder.h<a class="headerlink" href="#packet-recorder-h" title="Link to this heading">#</a></h1>
</section>
<section id="id708">
<h1>Opis ogólny<a class="headerlink" href="#id708" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">packet_recorder.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">PacketRecorder</span></code>, która służy do nagrywania sesji sieciowej do pliku tekstowego w celu późniejszej analizy lub odtworzenia.</p>
</section>
<section id="id709">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">PacketRecorder</span></code><a class="headerlink" href="#id709" title="Link to this heading">#</a></h1>
</section>
<section id="id710">
<h1>Opis semantyczny<a class="headerlink" href="#id710" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">PacketRecorder</span></code> przechwytuje pakiety przychodzące (<code class="docutils literal notranslate"><span class="pre">InputMessage</span></code>) i wychodzące (<code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code>) i zapisuje je w czytelnym formacie do pliku. Każdy wpis zawiera znacznik kierunku (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code> lub <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>), sygnaturę czasową i zawartość pakietu w postaci heksadecymalnej. Dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p>
</section>
<section id="id711">
<h1>Metody publiczne<a class="headerlink" href="#id711" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">PacketRecorder(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></p></td>
<td class="text-left"><p>Konstruktor, otwiera plik do zapisu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">~PacketRecorder()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addInputPacket(...)</span></code></p></td>
<td class="text-left"><p>Zapisuje pakiet przychodzący do pliku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addOutputPacket(...)</span></code></p></td>
<td class="text-left"><p>Zapisuje pakiet wychodzący do pliku.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id712">
<h1>Zmienne prywatne<a class="headerlink" href="#id712" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_start</span></code>: Czas rozpoczęcia nagrywania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_stream</span></code>: Strumień pliku do zapisu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_firstOutput</span></code>: Flaga używana do pominięcia pierwszego pakietu wychodzącego (zwykle zawierającego hasło).</p></li>
</ul>
</section>
<section id="id713">
<h1>Zależności i powiązania<a class="headerlink" href="#id713" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/net/inputmessage.h</span></code>, <code class="docutils literal notranslate"><span class="pre">outputmessage.h</span></code>: Przyjmuje obiekty tych typów do nagrania.</p></li>
<li><p>Jest tworzona i używana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>, gdy włączony jest tryb nagrywania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id714">
<h1>📄 declarations.h<a class="headerlink" href="#id714" title="Link to this heading">#</a></h1>
</section>
<section id="id715">
<h1>Opis ogólny<a class="headerlink" href="#id715" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">declarations.h</span></code> w module <code class="docutils literal notranslate"><span class="pre">otml</span></code> służy do wczesnych deklaracji (forward declarations) i definicji typów dla klas związanych z parserem OTML.</p>
</section>
<section id="id716">
<h1>Wczesne deklaracje<a class="headerlink" href="#id716" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OTMLEmitter</span></code></p></li>
</ul>
</section>
<section id="id717">
<h1>Definicje typów<a class="headerlink" href="#id717" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;OTMLNode&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OTMLDocumentPtr</span></code>: <code class="docutils literal notranslate"><span class="pre">stdext::shared_object_ptr&lt;OTMLDocument&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OTMLNodeList</span></code>: <code class="docutils literal notranslate"><span class="pre">std::vector&lt;OTMLNodePtr&gt;</span></code></p></li>
</ul>
</section>
<section id="id718">
<h1>Zależności i powiązania<a class="headerlink" href="#id718" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p>Jest dołączany przez wszystkie pliki nagłówkowe w module <code class="docutils literal notranslate"><span class="pre">otml</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otmlparser-h">
<h1>📄 otmlparser.h<a class="headerlink" href="#otmlparser-h" title="Link to this heading">#</a></h1>
</section>
<section id="id719">
<h1>Opis ogólny<a class="headerlink" href="#id719" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otmlparser.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code>, która jest odpowiedzialna za parsowanie dokumentów w formacie OTML (OTClient Markup Language).</p>
</section>
<section id="klasa-otmlparser">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code><a class="headerlink" href="#klasa-otmlparser" title="Link to this heading">#</a></h1>
</section>
<section id="id720">
<h1>Opis semantyczny<a class="headerlink" href="#id720" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code> odczytuje dane linia po linii ze strumienia wejściowego, analizuje wcięcia (które definiują hierarchię), a następnie parsuje tagi i wartości, budując drzewo obiektów <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code>.</p>
</section>
<section id="id721">
<h1>Metody publiczne<a class="headerlink" href="#id721" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OTMLParser(OTMLDocumentPtr</span> <span class="pre">doc,</span> <span class="pre">std::istream&amp;</span> <span class="pre">in)</span></code>: Konstruktor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">parse()</span></code>: Główna metoda rozpoczynająca proces parsowania.</p></li>
</ul>
</section>
<section id="metody-prywatne">
<h1>Metody prywatne<a class="headerlink" href="#metody-prywatne" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getNextLine()</span></code>: Odczytuje następną linię ze strumienia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getLineDepth(...)</span></code>: Oblicza poziom zagnieżdżenia na podstawie liczby spacji na początku linii.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">parseLine(...)</span></code>: Przetwarza pojedynczą linię (sprawdza wcięcia, komentarze, puste linie).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">parseNode(...)</span></code>: Parsuje tag i wartość z linii i tworzy nowy <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code>.</p></li>
</ul>
</section>
<section id="id722">
<h1>Zmienne prywatne<a class="headerlink" href="#id722" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">currentDepth</span></code>, <code class="docutils literal notranslate"><span class="pre">currentLine</span></code>: Śledzą pozycję w pliku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doc</span></code>: Wskaźnik na dokument, który jest budowany.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">currentParent</span></code>: Wskaźnik na bieżący węzeł-rodzica.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parentMap</span></code>: Mapa do śledzenia hierarchii.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">previousNode</span></code>: Wskaźnik na ostatnio dodany węzeł.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in</span></code>: Referencja do strumienia wejściowego.</p></li>
</ul>
</section>
<section id="id723">
<h1>Zależności i powiązania<a class="headerlink" href="#id723" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/declarations.h</span></code>: Definicje typów.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">OTMLDocument::parse</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otml-h">
<h1>📄 otml.h<a class="headerlink" href="#otml-h" title="Link to this heading">#</a></h1>
</section>
<section id="id724">
<h1>Opis ogólny<a class="headerlink" href="#id724" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otml.h</span></code> jest głównym plikiem nagłówkowym dla modułu OTML. Jego jedynym zadaniem jest dołączenie dwóch najważniejszych plików tego modułu: <code class="docutils literal notranslate"><span class="pre">otmldocument.h</span></code> i <code class="docutils literal notranslate"><span class="pre">otmlnode.h</span></code>.</p>
</section>
<section id="id725">
<h1>Zawartość<a class="headerlink" href="#id725" title="Link to this heading">#</a></h1>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&quot;otmldocument.h&quot;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&quot;otmlnode.h&quot;</span>
</pre></div>
</div>
</section>
<section id="id726">
<h1>Zależności i powiązania<a class="headerlink" href="#id726" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Ułatwia dołączanie podstawowych funkcjonalności OTML w innych częściach projektu, które potrzebują zarówno <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code>, jak i <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otmldocument-cpp">
<h1>📄 otmldocument.cpp<a class="headerlink" href="#otmldocument-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id727">
<h1>Opis ogólny<a class="headerlink" href="#id727" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otmldocument.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code>, która reprezentuje cały dokument OTML i jest korzeniem drzewa węzłów.</p>
</section>
<section id="klasa-otmldocument">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code><a class="headerlink" href="#klasa-otmldocument" title="Link to this heading">#</a></h1>
</section>
<section id="otmldocumentptr-otmldocument-create">
<h1><code class="docutils literal notranslate"><span class="pre">OTMLDocumentPtr</span> <span class="pre">OTMLDocument::create()</span></code><a class="headerlink" href="#otmldocumentptr-otmldocument-create" title="Link to this heading">#</a></h1>
<p>Statyczna metoda fabryczna. Tworzy nowy, pusty dokument z domyślnym tagiem „doc”.</p>
</section>
<section id="otmldocumentptr-otmldocument-parse-const-std-string-filename">
<h1><code class="docutils literal notranslate"><span class="pre">OTMLDocumentPtr</span> <span class="pre">OTMLDocument::parse(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code><a class="headerlink" href="#otmldocumentptr-otmldocument-parse-const-std-string-filename" title="Link to this heading">#</a></h1>
<p>Statyczna metoda, która ładuje i parsuje dokument OTML z pliku. Używa <code class="docutils literal notranslate"><span class="pre">g_resources</span></code> do odczytania pliku do strumienia, a następnie wywołuje <code class="docutils literal notranslate"><span class="pre">parse(std::istream&amp;,</span> <span class="pre">...)</span></code>.</p>
</section>
<section id="otmldocumentptr-otmldocument-parsestring-const-std-string-data-const-std-string-source">
<h1><code class="docutils literal notranslate"><span class="pre">OTMLDocumentPtr</span> <span class="pre">OTMLDocument::parseString(const</span> <span class="pre">std::string&amp;</span> <span class="pre">data,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">source)</span></code><a class="headerlink" href="#otmldocumentptr-otmldocument-parsestring-const-std-string-data-const-std-string-source" title="Link to this heading">#</a></h1>
<p>Parsuje dokument z <code class="docutils literal notranslate"><span class="pre">std::string</span></code>.</p>
</section>
<section id="otmldocumentptr-otmldocument-parse-std-istream-in-const-std-string-source">
<h1><code class="docutils literal notranslate"><span class="pre">OTMLDocumentPtr</span> <span class="pre">OTMLDocument::parse(std::istream&amp;</span> <span class="pre">in,</span> <span class="pre">const</span> <span class="pre">std::::string&amp;</span> <span class="pre">source)</span></code><a class="headerlink" href="#otmldocumentptr-otmldocument-parse-std-istream-in-const-std-string-source" title="Link to this heading">#</a></h1>
<p>Główna metoda parsująca.</p>
<ol class="arabic simple">
<li><p>Tworzy nowy <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code>.</p></li>
<li><p>Tworzy <code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code> dla tego dokumentu i strumienia.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">parser.parse()</span></code> w celu zbudowania drzewa węzłów.</p></li>
<li><p>Zwraca gotowy dokument.</p></li>
</ol>
</section>
<section id="std-string-otmldocument-emit">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">OTMLDocument::emit()</span></code><a class="headerlink" href="#std-string-otmldocument-emit" title="Link to this heading">#</a></h1>
<p>Konwertuje całe drzewo węzłów OTML z powrotem na format tekstowy, używając <code class="docutils literal notranslate"><span class="pre">OTMLEmitter</span></code>.</p>
</section>
<section id="bool-otmldocument-save-const-std-string-filename">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">OTMLDocument::save(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code><a class="headerlink" href="#bool-otmldocument-save-const-std-string-filename" title="Link to this heading">#</a></h1>
<p>Zapisuje wyemitowany dokument do pliku za pomocą <code class="docutils literal notranslate"><span class="pre">g_resources</span></code>.</p>
</section>
<section id="id728">
<h1>Zależności i powiązania<a class="headerlink" href="#id728" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmldocument.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmlparser.h</span></code>, <code class="docutils literal notranslate"><span class="pre">otmlemitter.h</span></code>: Używa parsera i emittera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Do operacji na plikach.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otmldocument-h">
<h1>📄 otmldocument.h<a class="headerlink" href="#otmldocument-h" title="Link to this heading">#</a></h1>
</section>
<section id="id729">
<h1>Opis ogólny<a class="headerlink" href="#id729" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otmldocument.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code>, która jest specjalizacją <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code> i reprezentuje korzeń dokumentu OTML.</p>
</section>
<section id="id730">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code><a class="headerlink" href="#id730" title="Link to this heading">#</a></h1>
</section>
<section id="id731">
<h1>Opis semantyczny<a class="headerlink" href="#id731" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code>, więc jest jednocześnie węzłem (korzeniem) i całym dokumentem. Dodaje funkcjonalność związaną z plikami: parsowanie z pliku/stringu i zapisywanie do pliku. Przechowuje również informację o źródle (<code class="docutils literal notranslate"><span class="pre">source</span></code>), z którego został załadowany.</p>
</section>
<section id="metody-publiczne-statyczne">
<h1>Metody publiczne (statyczne)<a class="headerlink" href="#metody-publiczne-statyczne" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">OTMLDocumentPtr</span> <span class="pre">create()</span></code></p></td>
<td class="text-left"><p>Tworzy pusty dokument.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">OTMLDocumentPtr</span> <span class="pre">parse(...)</span></code></p></td>
<td class="text-left"><p>Parsuje dokument z pliku, stringu lub strumienia.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="metody-publiczne-instancji">
<h1>Metody publiczne (instancji)<a class="headerlink" href="#metody-publiczne-instancji" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">emit()</span></code></p></td>
<td class="text-left"><p>Konwertuje dokument na string w formacie OTML.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">save(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code></p></td>
<td class="text-left"><p>Zapisuje dokument do pliku.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id732">
<h1>Zależności i powiązania<a class="headerlink" href="#id732" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmlnode.h</span></code>: Klasa bazowa.</p></li>
<li><p>Jest używana jako punkt wejścia do tworzenia i ładowania struktur OTML w całej aplikacji (np. w <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>, <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code>).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otmlemitter-cpp">
<h1>📄 otmlemitter.cpp<a class="headerlink" href="#otmlemitter-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id733">
<h1>Opis ogólny<a class="headerlink" href="#id733" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otmlemitter.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">OTMLEmitter</span></code>, która jest odpowiedzialna za konwersję drzewa <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code> z powrotem do formatu tekstowego OTML.</p>
</section>
<section id="klasa-otmlemitter">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OTMLEmitter</span></code><a class="headerlink" href="#klasa-otmlemitter" title="Link to this heading">#</a></h1>
</section>
<section id="std-string-otmlemitter-emitnode-const-otmlnodeptr-node-int-currentdepth">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">OTMLEmitter::emitNode(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node,</span> <span class="pre">int</span> <span class="pre">currentDepth)</span></code><a class="headerlink" href="#std-string-otmlemitter-emitnode-const-otmlnodeptr-node-int-currentdepth" title="Link to this heading">#</a></h1>
</section>
<section id="id734">
<h1>Opis semantyczny<a class="headerlink" href="#id734" title="Link to this heading">#</a></h1>
<p>Rekurencyjna, statyczna metoda, która generuje tekstową reprezentację pojedynczego węzła i wszystkich jego dzieci.</p>
</section>
<section id="id735">
<h1>Działanie<a class="headerlink" href="#id735" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Dodaje wcięcie (2 spacje na poziom) odpowiednie dla <code class="docutils literal notranslate"><span class="pre">currentDepth</span></code>.</p></li>
<li><p>Zapisuje tag węzła. Jeśli węzeł ma wartość lub jest unikalny, dodaje <code class="docutils literal notranslate"><span class="pre">:</span></code>. Jeśli nie ma tagu, zapisuje <code class="docutils literal notranslate"><span class="pre">-</span></code>.</p></li>
<li><p>Zapisuje wartość węzła:</p>
<ul class="simple">
<li><p>Jeśli wartość to <code class="docutils literal notranslate"><span class="pre">null</span></code> (<code class="docutils literal notranslate"><span class="pre">m_null</span></code>), zapisuje <code class="docutils literal notranslate"><span class="pre">~</span></code>.</p></li>
<li><p>Jeśli wartość zawiera znaki nowej linii, formatuje ją jako blok wieloliniowy, używając <code class="docutils literal notranslate"><span class="pre">|</span></code>, <code class="docutils literal notranslate"><span class="pre">|-</span></code> lub <code class="docutils literal notranslate"><span class="pre">|+</span></code> w zależności od tego, jak mają być traktowane końcowe znaki nowej linii.</p></li>
<li><p>W przeciwnym razie, zapisuje wartość w tej samej linii.</p></li>
</ul>
</li>
<li><p>Rekurencyjnie wywołuje <code class="docutils literal notranslate"><span class="pre">emitNode</span></code> dla wszystkich dzieci, zwiększając <code class="docutils literal notranslate"><span class="pre">currentDepth</span></code>.</p></li>
</ol>
</section>
<section id="id736">
<h1>Zależności i powiązania<a class="headerlink" href="#id736" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmlemitter.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmldocument.h</span></code>: Używana przez <code class="docutils literal notranslate"><span class="pre">OTMLDocument::emit()</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otmlexception-cpp">
<h1>📄 otmlexception.cpp<a class="headerlink" href="#otmlexception-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id737">
<h1>Opis ogólny<a class="headerlink" href="#id737" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otmlexception.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">OTMLException</span></code>, która jest używana do sygnalizowania błędów podczas parsowania lub przetwarzania dokumentów OTML.</p>
</section>
<section id="klasa-otmlexception">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OTMLException</span></code><a class="headerlink" href="#klasa-otmlexception" title="Link to this heading">#</a></h1>
</section>
<section id="id738">
<h1>Konstruktory<a class="headerlink" href="#id738" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">OTMLException(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">error)</span></code></strong>: Tworzy wyjątek związany z konkretnym węzłem. Komunikat błędu będzie zawierał informację o źródle (<code class="docutils literal notranslate"><span class="pre">source</span></code>) tego węzła.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">OTMLException(const</span> <span class="pre">OTMLDocumentPtr&amp;</span> <span class="pre">doc,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">error,</span> <span class="pre">int</span> <span class="pre">line)</span></code></strong>: Tworzy wyjątek związany z całym dokumentem, opcjonalnie podając numer linii, w której wystąpił błąd parsowania.</p></li>
</ul>
</section>
<section id="id739">
<h1>Działanie<a class="headerlink" href="#id739" title="Link to this heading">#</a></h1>
<p>Oba konstruktory budują szczegółowy komunikat błędu w <code class="docutils literal notranslate"><span class="pre">std::stringstream</span></code>, który jest następnie zapisywany w <code class="docutils literal notranslate"><span class="pre">m_what</span></code> i dostępny przez metodę <code class="docutils literal notranslate"><span class="pre">what()</span></code>.</p>
</section>
<section id="id740">
<h1>Zależności i powiązania<a class="headerlink" href="#id740" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmlexception.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmldocument.h</span></code>: Do dostępu do źródła dokumentu.</p></li>
<li><p>Jest rzucana przez <code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code> w przypadku błędów składniowych i przez <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code> w przypadku błędów logicznych (np. brak wymaganego dziecka).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otmlexception-h">
<h1>📄 otmlexception.h<a class="headerlink" href="#otmlexception-h" title="Link to this heading">#</a></h1>
</section>
<section id="id741">
<h1>Opis ogólny<a class="headerlink" href="#id741" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otmlexception.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">OTMLException</span></code>, która jest typem wyjątku używanym do sygnalizowania błędów związanych z OTML.</p>
</section>
<section id="id742">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OTMLException</span></code><a class="headerlink" href="#id742" title="Link to this heading">#</a></h1>
</section>
<section id="id743">
<h1>Opis semantyczny<a class="headerlink" href="#id743" title="Link to this heading">#</a></h1>
<p>Dziedziczy po <code class="docutils literal notranslate"><span class="pre">stdext::exception</span></code>. Jest tworzona z informacją o kontekście błędu (węzeł lub dokument oraz numer linii), co pozwala na generowanie precyzyjnych komunikatów o błędach, ułatwiających debugowanie plików OTML.</p>
</section>
<section id="id744">
<h1>Metody publiczne<a class="headerlink" href="#id744" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OTMLException(...)</span></code></p></td>
<td class="text-left"><p>Konstruktory.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">~OTMLException()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">const</span> <span class="pre">char*</span> <span class="pre">what()</span> <span class="pre">const</span> <span class="pre">throw()</span></code></p></td>
<td class="text-left"><p>Zwraca sformatowany komunikat błędu.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id745">
<h1>Zmienne chronione<a class="headerlink" href="#id745" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_what</span></code>: <code class="docutils literal notranslate"><span class="pre">std::string</span></code> przechowująca komunikat błędu.</p></li>
</ul>
</section>
<section id="id746">
<h1>Zależności i powiązania<a class="headerlink" href="#id746" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/exception.h</span></code>: Klasa bazowa.</p></li>
<li><p>Jest rzucana przez <code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code> i <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otmlemitter-h">
<h1>📄 otmlemitter.h<a class="headerlink" href="#otmlemitter-h" title="Link to this heading">#</a></h1>
</section>
<section id="id747">
<h1>Opis ogólny<a class="headerlink" href="#id747" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otmlemitter.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">OTMLEmitter</span></code>, która jest odpowiedzialna za proces „emitowania”, czyli konwersji drzewa węzłów OTML z powrotem do jego tekstowej reprezentacji.</p>
</section>
<section id="id748">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OTMLEmitter</span></code><a class="headerlink" href="#id748" title="Link to this heading">#</a></h1>
</section>
<section id="id749">
<h1>Opis semantyczny<a class="headerlink" href="#id749" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">OTMLEmitter</span></code> zawiera jedną statyczną metodę, która rekurencyjnie przechodzi przez drzewo <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code> i buduje sformatowany <code class="docutils literal notranslate"><span class="pre">std::string</span></code> zgodny ze składnią OTML, uwzględniając wcięcia, tagi, wartości (w tym wieloliniowe) i hierarchię.</p>
</section>
<section id="id750">
<h1>Metody publiczne (statyczne)<a class="headerlink" href="#id750" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">std::string</span> <span class="pre">emitNode(...)</span></code></p></td>
<td class="text-left"><p>Generuje tekstową reprezentację podanego węzła i wszystkich jego dzieci.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id751">
<h1>Zależności i powiązania<a class="headerlink" href="#id751" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/declarations.h</span></code>: Podstawowe deklaracje.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">OTMLDocument::emit()</span></code> i <code class="docutils literal notranslate"><span class="pre">OTMLNode::emit()</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otmlparser-cpp">
<h1>📄 otmlparser.cpp<a class="headerlink" href="#otmlparser-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id752">
<h1>Opis ogólny<a class="headerlink" href="#id752" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otmlparser.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code>, która jest sercem mechanizmu parsowania języka OTML.</p>
</section>
<section id="id753">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code><a class="headerlink" href="#id753" title="Link to this heading">#</a></h1>
</section>
<section id="otmlparser-otmlparser">
<h1><code class="docutils literal notranslate"><span class="pre">OTMLParser::OTMLParser(...)</span></code><a class="headerlink" href="#otmlparser-otmlparser" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje stan parsera, ustawiając bieżący węzeł-rodzica na korzeń dokumentu.</p>
</section>
<section id="void-otmlparser-parse">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLParser::parse()</span></code><a class="headerlink" href="#void-otmlparser-parse" title="Link to this heading">#</a></h1>
<p>Główna metoda, która w pętli odczytuje kolejne linie ze strumienia (<code class="docutils literal notranslate"><span class="pre">getNextLine()</span></code>) i przekazuje je do <code class="docutils literal notranslate"><span class="pre">parseLine()</span></code>, aż do końca pliku.</p>
</section>
<section id="int-otmlparser-getlinedepth">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">OTMLParser::getLineDepth(...)</span></code><a class="headerlink" href="#int-otmlparser-getlinedepth" title="Link to this heading">#</a></h1>
<p>Oblicza poziom wcięcia linii, licząc spacje na jej początku. Wymusza, aby wcięcie było wielokrotnością dwóch spacji i zabrania używania tabulatorów.</p>
</section>
<section id="void-otmlparser-parseline-std-string-line">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLParser::parseLine(std::string</span> <span class="pre">line)</span></code><a class="headerlink" href="#void-otmlparser-parseline-std-string-line" title="Link to this heading">#</a></h1>
<p>Przetwarza pojedynczą linię.</p>
<ol class="arabic simple">
<li><p>Oblicza jej głębokość.</p></li>
<li><p>Usuwa białe znaki z początku i końca.</p></li>
<li><p>Ignoruje puste linie i komentarze (<code class="docutils literal notranslate"><span class="pre">//</span></code>).</p></li>
<li><p>Na podstawie różnicy między bieżącą głębokością a głębokością linii, aktualizuje <code class="docutils literal notranslate"><span class="pre">currentParent</span></code>, wchodząc w głąb hierarchii lub wracając na wyższy poziom.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">parseNode</span></code> w celu sparsowania właściwej zawartości linii.</p></li>
</ol>
</section>
<section id="void-otmlparser-parsenode-const-std-string-data">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLParser::parseNode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">data)</span></code><a class="headerlink" href="#void-otmlparser-parsenode-const-std-string-data" title="Link to this heading">#</a></h1>
<p>Parsuje tag i wartość z podanego ciągu znaków.</p>
<ol class="arabic simple">
<li><p>Dzieli ciąg na tag i wartość na podstawie separatora <code class="docutils literal notranslate"><span class="pre">:</span></code>.</p></li>
<li><p>Obsługuje specjalny przypadek <code class="docutils literal notranslate"><span class="pre">-</span></code> dla węzłów bez tagu.</p></li>
<li><p>Obsługuje wartości wieloliniowe (rozpoczynające się od <code class="docutils literal notranslate"><span class="pre">|</span></code>, <code class="docutils literal notranslate"><span class="pre">|-</span></code>, <code class="docutils literal notranslate"><span class="pre">|+</span></code>), odczytując kolejne linie, dopóki wcięcie się zgadza.</p></li>
<li><p>Obsługuje listy w nawiasach kwadratowych (<code class="docutils literal notranslate"><span class="pre">[...]</span></code>), dzieląc je na osobne wartości.</p></li>
<li><p>Tworzy nowy obiekt <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code>, ustawia jego właściwości (tag, wartość, źródło) i dodaje go do <code class="docutils literal notranslate"><span class="pre">currentParent</span></code>.</p></li>
</ol>
</section>
<section id="id754">
<h1>Zależności i powiązania<a class="headerlink" href="#id754" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmlparser.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmldocument.h</span></code>, <code class="docutils literal notranslate"><span class="pre">otmlexception.h</span></code>: Do tworzenia i obsługi błędów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/tokenizer.hpp</span></code>: Do parsowania list w nawiasach kwadratowych.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otmlnode-h">
<h1>📄 otmlnode.h<a class="headerlink" href="#otmlnode-h" title="Link to this heading">#</a></h1>
</section>
<section id="id755">
<h1>Opis ogólny<a class="headerlink" href="#id755" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otmlnode.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code>, która jest podstawowym budulcem drzewa dokumentu OTML. Reprezentuje pojedynczy węzeł, który może mieć tag, wartość i listę dzieci.</p>
</section>
<section id="klasa-otmlnode">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code><a class="headerlink" href="#klasa-otmlnode" title="Link to this heading">#</a></h1>
</section>
<section id="id756">
<h1>Opis semantyczny<a class="headerlink" href="#id756" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code> to uniwersalny kontener na dane w strukturze drzewiastej. Jest używany do reprezentowania zarówno stylów UI, jak i samych widgetów w plikach <code class="docutils literal notranslate"><span class="pre">.otui</span></code>, a także modułów w <code class="docutils literal notranslate"><span class="pre">.otmod</span></code> i konfiguracji w plikach <code class="docutils literal notranslate"><span class="pre">.otml</span></code>.</p>
</section>
<section id="id757">
<h1>Metody publiczne<a class="headerlink" href="#id757" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">OTMLNodePtr</span> <span class="pre">create(...)</span></code></p></td>
<td class="text-left"><p>Metody fabryczne do tworzenia nowych węzłów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">tag()</span></code>, <code class="docutils literal notranslate"><span class="pre">size()</span></code>, <code class="docutils literal notranslate"><span class="pre">source()</span></code>, <code class="docutils literal notranslate"><span class="pre">rawValue()</span></code></p></td>
<td class="text-left"><p>Gettery dla podstawowych właściwości.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">isUnique()</span></code>, <code class="docutils literal notranslate"><span class="pre">isNull()</span></code>, <code class="docutils literal notranslate"><span class="pre">hasTag()</span></code>, <code class="docutils literal notranslate"><span class="pre">hasValue()</span></code>, <code class="docutils literal notranslate"><span class="pre">hasChildren()</span></code></p></td>
<td class="text-left"><p>Metody sprawdzające stan węzła.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setTag(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">setValue(...)</span></code>, …</p></td>
<td class="text-left"><p>Settery dla właściwości.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">get(const</span> <span class="pre">std::string&amp;</span> <span class="pre">childTag)</span></code></p></td>
<td class="text-left"><p>Zwraca pierwszy węzeł-dziecko o danym tagu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">at(const</span> <span class="pre">std::string&amp;</span> <span class="pre">childTag)</span></code></p></td>
<td class="text-left"><p>To samo co <code class="docutils literal notranslate"><span class="pre">get</span></code>, ale rzuca wyjątek, jeśli dziecko nie istnieje.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">addChild(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">removeChild(...)</span></code></p></td>
<td class="text-left"><p>Dodaje/usuwa dziecko. <code class="docutils literal notranslate"><span class="pre">addChild</span></code> obsługuje logikę łączenia (merge) dla unikalnych węzłów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">copy(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">merge(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">clear()</span></code>, <code class="docutils literal notranslate"><span class="pre">clone()</span></code></p></td>
<td class="text-left"><p>Metody do manipulacji strukturą węzła.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">children()</span></code></p></td>
<td class="text-left"><p>Zwraca listę wszystkich dzieci.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><strong>Szablonowe metody <code class="docutils literal notranslate"><span class="pre">value...</span></code></strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">value&lt;T&gt;()</span></code></p></td>
<td class="text-left"><p>Zwraca wartość węzła, rzutowaną na typ <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">valueAt&lt;T&gt;(...)</span></code></p></td>
<td class="text-left"><p>Zwraca wartość dziecka o danym tagu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">valueAtIndex&lt;T&gt;(...)</span></code></p></td>
<td class="text-left"><p>Zwraca wartość dziecka o danym indeksie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><strong>Szablonowe metody <code class="docutils literal notranslate"><span class="pre">write...</span></code></strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">write&lt;T&gt;(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wartość węzła.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">writeAt&lt;T&gt;(...)</span></code></p></td>
<td class="text-left"><p>Tworzy i dodaje unikalne dziecko z daną wartością.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">writeIn&lt;T&gt;(...)</span></code></p></td>
<td class="text-left"><p>Tworzy i dodaje nie-unikalne dziecko z daną wartością.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">emit()</span></code></p></td>
<td class="text-left"><p>Konwertuje węzeł i jego dzieci na string.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id758">
<h1>Zmienne chronione<a class="headerlink" href="#id758" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_children</span></code>: Mapa przechowująca dzieci pogrupowane według tagów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_tag</span></code>, <code class="docutils literal notranslate"><span class="pre">m_value</span></code>, <code class="docutils literal notranslate"><span class="pre">m_source</span></code>: Podstawowe właściwości.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_unique</span></code>, <code class="docutils literal notranslate"><span class="pre">m_null</span></code>: Flagi stanu.</p></li>
</ul>
</section>
<section id="id759">
<h1>Zależności i powiązania<a class="headerlink" href="#id759" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/declarations.h</span></code>: Definicje typów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmlexception.h</span></code>: Do rzucania wyjątków.</p></li>
<li><p>Jest to podstawowa klasa modułu OTML, używana przez <code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code>, <code class="docutils literal notranslate"><span class="pre">OTMLEmitter</span></code> i <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="otmlnode-cpp">
<h1>📄 otmlnode.cpp<a class="headerlink" href="#otmlnode-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id760">
<h1>Opis ogólny<a class="headerlink" href="#id760" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">otmlnode.cpp</span></code> zawiera implementację metod klasy <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code>.</p>
</section>
<section id="id761">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code><a class="headerlink" href="#id761" title="Link to this heading">#</a></h1>
</section>
<section id="otmlnodeptr-otmlnode-create">
<h1><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span> <span class="pre">OTMLNode::create(...)</span></code><a class="headerlink" href="#otmlnodeptr-otmlnode-create" title="Link to this heading">#</a></h1>
<p>Metody fabryczne, które tworzą nowy <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code> i ustawiają jego początkowe właściwości.</p>
</section>
<section id="bool-otmlnode-haschildren">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">OTMLNode::hasChildren()</span></code><a class="headerlink" href="#bool-otmlnode-haschildren" title="Link to this heading">#</a></h1>
<p>Sprawdza, czy węzeł ma jakiekolwiek dzieci, które nie są <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
</section>
<section id="otmlnodeptr-otmlnode-get-const-std-string-childtag">
<h1><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span> <span class="pre">OTMLNode::get(const</span> <span class="pre">std::string&amp;</span> <span class="pre">childTag)</span></code><a class="headerlink" href="#otmlnodeptr-otmlnode-get-const-std-string-childtag" title="Link to this heading">#</a></h1>
<p>Wyszukuje w mapie <code class="docutils literal notranslate"><span class="pre">m_children</span></code> pierwsze dziecko o podanym tagu, które nie jest <code class="docutils literal notranslate"><span class="pre">null</span></code>, i je zwraca.</p>
</section>
<section id="void-otmlnode-addchild-const-otmlnodeptr-newchild">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLNode::addChild(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">newChild)</span></code><a class="headerlink" href="#void-otmlnode-addchild-const-otmlnodeptr-newchild" title="Link to this heading">#</a></h1>
<p>Dodaje nowe dziecko. Implementuje kluczową logikę:</p>
<ul class="simple">
<li><p>Jeśli nowe dziecko ma tag i jest unikalne (<code class="docutils literal notranslate"><span class="pre">isUnique()</span></code>), a dziecko o takim samym tagu już istnieje, to nowe dziecko jest łączone (<code class="docutils literal notranslate"><span class="pre">merge</span></code>) ze starym, effectively nadpisując/dodając właściwości.</p></li>
<li><p>W przeciwnym razie, jest po prostu dodawane do listy dzieci o danym tagu.</p></li>
<li><p>Każdemu dziecku nadawany jest unikalny, rosnący indeks, aby zachować kolejność wstawiania.</p></li>
</ul>
</section>
<section id="bool-otmlnode-removechild">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">OTMLNode::removeChild(...)</span></code><a class="headerlink" href="#bool-otmlnode-removechild" title="Link to this heading">#</a></h1>
<p>Usuwa podane dziecko z listy.</p>
</section>
<section id="void-otmlnode-copy-const-otmlnodeptr-node">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLNode::copy(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node)</span></code><a class="headerlink" href="#void-otmlnode-copy-const-otmlnodeptr-node" title="Link to this heading">#</a></h1>
<p>Głęboko kopiuje wszystkie właściwości i dzieci z innego węzła, zastępując własną zawartość.</p>
</section>
<section id="void-otmlnode-merge-const-otmlnodeptr-node">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLNode::merge(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node)</span></code><a class="headerlink" href="#void-otmlnode-merge-const-otmlnodeptr-node" title="Link to this heading">#</a></h1>
<p>Łączy zawartość innego węzła z bieżącym. W przeciwieństwie do <code class="docutils literal notranslate"><span class="pre">copy</span></code>, nie czyści istniejących dzieci, lecz dodaje nowe (lub łączy, jeśli są unikalne).</p>
</section>
<section id="otmlnodelist-otmlnode-children">
<h1><code class="docutils literal notranslate"><span class="pre">OTMLNodeList</span> <span class="pre">OTMLNode::children()</span></code><a class="headerlink" href="#otmlnodelist-otmlnode-children" title="Link to this heading">#</a></h1>
<p>Zwraca listę wszystkich nie-nullowych dzieci, posortowaną według ich indeksu wstawienia.</p>
</section>
<section id="otmlnodeptr-otmlnode-clone">
<h1><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span> <span class="pre">OTMLNode::clone()</span></code><a class="headerlink" href="#otmlnodeptr-otmlnode-clone" title="Link to this heading">#</a></h1>
<p>Tworzy i zwraca głęboką kopię węzła i wszystkich jego dzieci.</p>
</section>
<section id="id762">
<h1>Zależności i powiązania<a class="headerlink" href="#id762" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmlnode.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otmlemitter.h</span></code>: Używany w metodzie <code class="docutils literal notranslate"><span class="pre">emit()</span></code>.</p></li>
<li><p>Jest to implementacja centralnej struktury danych dla systemu OTML.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="androidplatform-cpp">
<h1>📄 androidplatform.cpp<a class="headerlink" href="#androidplatform-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id763">
<h1>Opis ogólny<a class="headerlink" href="#id763" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">androidplatform.cpp</span></code> zawiera implementację metod klasy <code class="docutils literal notranslate"><span class="pre">Platform</span></code> specyficznych dla systemu Android. Jest kompilowany tylko wtedy, gdy zdefiniowano makro <code class="docutils literal notranslate"><span class="pre">ANDROID</span></code>.</p>
</section>
<section id="klasa-platform-implementacja-dla-androida">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Platform</span></code> (implementacja dla Androida)<a class="headerlink" href="#klasa-platform-implementacja-dla-androida" title="Link to this heading">#</a></h1>
<p>Wiele metod jest pustymi implementacjami lub zwraca domyślne wartości, ponieważ ich funkcjonalność nie jest dostępna lub nie ma sensu na platformie Android w taki sam sposób, jak na desktopie.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Implementacja na Androidzie</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">processArgs(...)</span></code></p></td>
<td class="text-left"><p>Pusta (argumenty są obsługiwane inaczej).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">spawnProcess(...)</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getProcessId()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">getpid()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">isProcessRunning(...)</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">killProcess(...)</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getTempPath()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">/tmp/</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getCurrentDir()</span></code></p></td>
<td class="text-left"><p>Zwraca wynik <code class="docutils literal notranslate"><span class="pre">getcwd()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">copyFile(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">fileExists(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">removeFile(...)</span></code></p></td>
<td class="text-left"><p>Puste/zwracają <code class="docutils literal notranslate"><span class="pre">true</span></code>/<code class="docutils literal notranslate"><span class="pre">false</span></code>. Operacje na plikach są obsługiwane przez <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getFileModificationTime(...)</span></code></p></td>
<td class="text-left"><p>Zwraca 0.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">openUrl(std::string</span> <span class="pre">url,</span> <span class="pre">...)</span></code></p></td>
<td class="text-left"><p>Deleguje zadanie do <code class="docutils literal notranslate"><span class="pre">AndroidWindow::openUrl</span></code> poprzez <code class="docutils literal notranslate"><span class="pre">g_graphicsDispatcher</span></code>, aby zapewnić wykonanie w odpowiednim wątku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">openDir(...)</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getCPUName()</span></code></p></td>
<td class="text-left"><p>Zwraca pusty string.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getTotalSystemMemory()</span></code></p></td>
<td class="text-left"><p>Zwraca 0.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getMemoryUsage()</span></code></p></td>
<td class="text-left"><p>Zwraca 0.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getOSName()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">&quot;android&quot;</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">traceback(...)</span></code></p></td>
<td class="text-left"><p>Zwraca pusty string (brak <code class="docutils literal notranslate"><span class="pre">backtrace</span></code> w standardzie).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getMacAddresses()</span></code></p></td>
<td class="text-left"><p>Zwraca pusty wektor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getUserName()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">&quot;android&quot;</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getDlls()</span></code>, <code class="docutils literal notranslate"><span class="pre">getProcesses()</span></code>, <code class="docutils literal notranslate"><span class="pre">getWindows()</span></code></p></td>
<td class="text-left"><p>Zwracają puste wektory.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id764">
<h1>Zależności i powiązania<a class="headerlink" href="#id764" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platform.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/androidwindow.h</span></code>: Do otwierania URL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do bezpiecznego wątkowo wywoływania metod z <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="androidwindow-cpp">
<h1>📄 androidwindow.cpp<a class="headerlink" href="#androidwindow-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id765">
<h1>Opis ogólny<a class="headerlink" href="#id765" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">androidwindow.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code>, która jest specyficzną dla platformy Android implementacją <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>. Zarządza ona cyklem życia okna, obsługą wejścia (dotyk, klawiatura) oraz kontekstem graficznym EGL/OpenGL ES.</p>
</section>
<section id="id766">
<h1>Zmienne globalne<a class="headerlink" href="#id766" title="Link to this heading">#</a></h1>
</section>
<section id="g-androidwindow">
<h1><code class="docutils literal notranslate"><span class="pre">g_androidWindow</span></code><a class="headerlink" href="#g-androidwindow" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code>.</p>
</section>
<section id="klasa-androidwindow">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code><a class="headerlink" href="#klasa-androidwindow" title="Link to this heading">#</a></h1>
</section>
<section id="androidwindow-androidwindow">
<h1><code class="docutils literal notranslate"><span class="pre">AndroidWindow::AndroidWindow()</span></code><a class="headerlink" href="#androidwindow-androidwindow" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje mapę klawiszy (<code class="docutils literal notranslate"><span class="pre">m_keyMap</span></code>), tłumacząc kody klawiszy Android (<code class="docutils literal notranslate"><span class="pre">AKEYCODE_*</span></code>) na wewnętrzne kody <code class="docutils literal notranslate"><span class="pre">Fw::Key</span></code>.</p>
</section>
<section id="void-androidwindow-internalinitgl-i-internaldestroygl">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::internalInitGL()</span></code> i <code class="docutils literal notranslate"><span class="pre">internalDestroyGL()</span></code><a class="headerlink" href="#void-androidwindow-internalinitgl-i-internaldestroygl" title="Link to this heading">#</a></h1>
<p>Metody do zarządzania kontekstem graficznym EGL.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">internalInitGL</span></code>: Pobiera domyślny wyświetlacz EGL, wybiera konfigurację, tworzy powierzchnię renderowania (<code class="docutils literal notranslate"><span class="pre">EGLSurface</span></code>) na podstawie natywnego okna Android i tworzy kontekst OpenGL ES 2.0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">internalDestroyGL</span></code>: Zwalnia powierzchnię i kontekst EGL.</p></li>
</ul>
</section>
<section id="void-androidwindow-init-struct-android-app-app">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::init(struct</span> <span class="pre">android_app*</span> <span class="pre">app)</span></code><a class="headerlink" href="#void-androidwindow-init-struct-android-app-app" title="Link to this heading">#</a></h1>
<p>Główna metoda inicjalizująca. Zapisuje wskaźnik na <code class="docutils literal notranslate"><span class="pre">android_app</span></code> i ustawia <code class="docutils literal notranslate"><span class="pre">callbacki</span></code> dla zdarzeń cyklu życia aplikacji i zdarzeń wejściowych.</p>
</section>
<section id="void-androidwindow-poll">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::poll()</span></code><a class="headerlink" href="#void-androidwindow-poll" title="Link to this heading">#</a></h1>
<p>Przetwarza zdarzenia systemowe z kolejki Androida za pomocą <code class="docutils literal notranslate"><span class="pre">ALooper_pollAll</span></code>.</p>
</section>
<section id="void-androidwindow-swapbuffers">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::swapBuffers()</span></code><a class="headerlink" href="#void-androidwindow-swapbuffers" title="Link to this heading">#</a></h1>
<p>Zamienia bufory ekranu za pomocą <code class="docutils literal notranslate"><span class="pre">eglSwapBuffers</span></code>.</p>
</section>
<section id="void-androidwindow-handlecmd-int32-t-cmd">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::handleCmd(int32_t</span> <span class="pre">cmd)</span></code><a class="headerlink" href="#void-androidwindow-handlecmd-int32-t-cmd" title="Link to this heading">#</a></h1>
<p>Handler dla zdarzeń cyklu życia aplikacji Android (np. <code class="docutils literal notranslate"><span class="pre">APP_CMD_INIT_WINDOW</span></code>, <code class="docutils literal notranslate"><span class="pre">APP_CMD_GAINED_FOCUS</span></code>). W odpowiedzi na te zdarzenia, tworzy lub niszczy kontekst GL i aktualizuje stan widoczności.</p>
</section>
<section id="int-androidwindow-handleinput-ainputevent-event">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">AndroidWindow::handleInput(AInputEvent*</span> <span class="pre">event)</span></code><a class="headerlink" href="#int-androidwindow-handleinput-ainputevent-event" title="Link to this heading">#</a></h1>
<p>Handler dla zdarzeń wejściowych.</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">AINPUT_EVENT_TYPE_MOTION</span></code> (dotyk)</strong>:</p>
<ul>
<li><p>Tłumaczy zdarzenia dotyku (<code class="docutils literal notranslate"><span class="pre">ACTION_DOWN</span></code>, <code class="docutils literal notranslate"><span class="pre">ACTION_UP</span></code>, <code class="docutils literal notranslate"><span class="pre">ACTION_MOVE</span></code>) na zdarzenia myszy (<code class="docutils literal notranslate"><span class="pre">MousePress</span></code>, <code class="docutils literal notranslate"><span class="pre">MouseRelease</span></code>, <code class="docutils literal notranslate"><span class="pre">MouseMove</span></code>).</p></li>
<li><p>Implementuje logikę do symulacji kliknięcia lewym i prawym przyciskiem myszy oraz przeciągania na ekranie dotykowym.</p></li>
<li><p>Obsługuje wielodotyk, mapując drugi i trzeci palec na <code class="docutils literal notranslate"><span class="pre">Fw::MouseTouch2</span></code> i <code class="docutils literal notranslate"><span class="pre">Fw::MouseTouch3</span></code>.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">AINPUT_EVENT_TYPE_KEY</span></code> (klawiatura)</strong>:</p>
<ul>
<li><p>Tłumaczy kod klawisza Android na kod <code class="docutils literal notranslate"><span class="pre">Fw::Key</span></code>.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">processKeyDown</span></code> lub <code class="docutils literal notranslate"><span class="pre">processKeyUp</span></code>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="void-androidwindow-showtexteditor">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::showTextEditor(...)</span></code><a class="headerlink" href="#void-androidwindow-showtexteditor" title="Link to this heading">#</a></h1>
<p>Wywołuje metodę Javy (<code class="docutils literal notranslate"><span class="pre">showTextEdit</span></code>) za pomocą JNI, aby wyświetlić natywną klawiaturę i pole edycji tekstu Androida.</p>
</section>
<section id="void-androidwindow-openurl-std-string-url">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::openUrl(std::string</span> <span class="pre">url)</span></code><a class="headerlink" href="#void-androidwindow-openurl-std-string-url" title="Link to this heading">#</a></h1>
<p>Otwiera URL za pomocą intencji Androida, wywołując metodę Javy przez JNI.</p>
</section>
<section id="funkcja-jniexport-committext">
<h1>Funkcja <code class="docutils literal notranslate"><span class="pre">JNIEXPORT</span> <span class="pre">...</span> <span class="pre">commitText(...)</span></code><a class="headerlink" href="#funkcja-jniexport-committext" title="Link to this heading">#</a></h1>
<p>Funkcja C wywoływana z kodu Javy, która przekazuje tekst wpisany na klawiaturze Androida z powrotem do aplikacji.</p>
</section>
<section id="id767">
<h1>Zależności i powiązania<a class="headerlink" href="#id767" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Nagłówki NDK Androida (<code class="docutils literal notranslate"><span class="pre">android_native_app_glue.h</span></code>, <code class="docutils literal notranslate"><span class="pre">jni.h</span></code>).</p></li>
<li><p>Nagłówki EGL i GLES.</p></li>
<li><p>Współpracuje z <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> poprzez <code class="docutils literal notranslate"><span class="pre">callbacki</span></code> <code class="docutils literal notranslate"><span class="pre">m_onInputEvent</span></code>, <code class="docutils literal notranslate"><span class="pre">m_onResize</span></code>, <code class="docutils literal notranslate"><span class="pre">m_onClose</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="androidwindow-h">
<h1>📄 androidwindow.h<a class="headerlink" href="#androidwindow-h" title="Link to this heading">#</a></h1>
</section>
<section id="id768">
<h1>Opis ogólny<a class="headerlink" href="#id768" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">androidwindow.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code>, która jest implementacją <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> dla systemu Android.</p>
</section>
<section id="id769">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code><a class="headerlink" href="#id769" title="Link to this heading">#</a></h1>
</section>
<section id="id770">
<h1>Opis semantyczny<a class="headerlink" href="#id770" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code> integruje aplikację z natywnym cyklem życia i systemem zdarzeń Androida za pomocą struktury <code class="docutils literal notranslate"><span class="pre">android_app</span></code> z NDK. Zarządza kontekstem graficznym EGL/GLES i tłumaczy natywne zdarzenia wejściowe (dotyk, klawisze sprzętowe) na wewnętrzny format <code class="docutils literal notranslate"><span class="pre">InputEvent</span></code>.</p>
</section>
<section id="id771">
<h1>Metody publiczne<a class="headerlink" href="#id771" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><strong>Zarządzanie cyklem życia</strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">init(struct</span> <span class="pre">android_app*</span> <span class="pre">app)</span></code></p></td>
<td class="text-left"><p>Inicjalizuje okno, łącząc je ze strukturą <code class="docutils literal notranslate"><span class="pre">android_app</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">handleCmd(int32_t</span> <span class="pre">cmd)</span></code></p></td>
<td class="text-left"><p>Obsługuje komendy cyklu życia aplikacji od systemu Android.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">handleInput(AInputEvent*</span> <span class="pre">event)</span></code></p></td>
<td class="text-left"><p>Przetwarza natywne zdarzenia wejściowe.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><strong>Interfejs <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code></strong></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">poll()</span></code></p></td>
<td class="text-left"><p>Przetwarza zdarzenia z kolejki systemowej.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">swapBuffers()</span></code></p></td>
<td class="text-left"><p>Zamienia bufory EGL.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getDisplaySize()</span></code></p></td>
<td class="text-left"><p>Zwraca rozmiar okna.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">showTextEditor(...)</span></code></p></td>
<td class="text-left"><p>Wyświetla natywną klawiaturę Androida.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">openUrl(...)</span></code></p></td>
<td class="text-left"><p>Otwiera URL.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>Implementacje innych metod <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>, często puste, ponieważ pojęcia takie jak „minimalizacja” czy „zmiana tytułu okna” nie mają bezpośredniego odpowiednika na Androidzie.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id772">
<h1>Zmienne prywatne<a class="headerlink" href="#id772" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_egl...</span></code>: Uchwyty do zasobów EGL (Display, Context, Surface, Config).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_multiInputEvent[3]</span></code>: Bufory na zdarzenia wielodotykowe.</p></li>
</ul>
</section>
<section id="id773">
<h1>Zmienne globalne<a class="headerlink" href="#id773" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_androidWindow</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code>.</p></li>
</ul>
</section>
<section id="id774">
<h1>Zależności i powiązania<a class="headerlink" href="#id774" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">platformwindow.h</span></code>: Klasa bazowa.</p></li>
<li><p>Wymaga <code class="docutils literal notranslate"><span class="pre">android_native_app_glue.h</span></code> i nagłówków JNI/EGL/GLES, które są częścią Android NDK.</p></li>
<li><p>W <code class="docutils literal notranslate"><span class="pre">platformwindow.cpp</span></code> wskaźnik <code class="docutils literal notranslate"><span class="pre">g_window</span></code> jest przypisywany do <code class="docutils literal notranslate"><span class="pre">g_androidWindow</span></code>, gdy kompilacja odbywa się dla Androida.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="crashhandler-h">
<h1>📄 crashhandler.h<a class="headerlink" href="#crashhandler-h" title="Link to this heading">#</a></h1>
</section>
<section id="id775">
<h1>Opis ogólny<a class="headerlink" href="#id775" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">crashhandler.h</span></code> deklaruje funkcje do instalacji i deinstalacji globalnego mechanizmu obsługi awarii (crash handler).</p>
</section>
<section id="id776">
<h1>Funkcje<a class="headerlink" href="#id776" title="Link to this heading">#</a></h1>
</section>
<section id="void-installcrashhandler">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">installCrashHandler()</span></code><a class="headerlink" href="#void-installcrashhandler" title="Link to this heading">#</a></h1>
<p>Rejestruje handlery dla sygnałów lub wyjątków systemowych (w zależności od platformy), które są wywoływane w przypadku krytycznego błędu aplikacji (np. naruszenie ochrony pamięci).</p>
</section>
<section id="void-uninstallcrashhandler">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">uninstallCrashHandler()</span></code><a class="headerlink" href="#void-uninstallcrashhandler" title="Link to this heading">#</a></h1>
<p>Odinstalowuje wcześniej zarejestrowane handlery.</p>
</section>
<section id="dyrektywa-preprocesora">
<h1>Dyrektywa preprocesora<a class="headerlink" href="#dyrektywa-preprocesora" title="Link to this heading">#</a></h1>
<p>Cała zawartość pliku jest objęta dyrektywą <code class="docutils literal notranslate"><span class="pre">#ifdef</span> <span class="pre">CRASH_HANDLER</span></code>, co oznacza, że funkcje te są dostępne tylko wtedy, gdy opcja <code class="docutils literal notranslate"><span class="pre">CRASH_HANDLER</span></code> jest włączona w CMake.</p>
</section>
<section id="id777">
<h1>Zależności i powiązania<a class="headerlink" href="#id777" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Funkcje te są implementowane w plikach specyficznych dla platformy: <code class="docutils literal notranslate"><span class="pre">unixcrashhandler.cpp</span></code> i <code class="docutils literal notranslate"><span class="pre">win32crashhandler.cpp</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">installCrashHandler</span></code> jest zazwyczaj wywoływana na samym początku działania aplikacji.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="platform-cpp">
<h1>📄 platform.cpp<a class="headerlink" href="#platform-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id778">
<h1>Opis ogólny<a class="headerlink" href="#id778" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">platform.cpp</span></code> ma za zadanie jedynie zdefiniować globalną instancję klasy <code class="docutils literal notranslate"><span class="pre">Platform</span></code>.</p>
</section>
<section id="id779">
<h1>Zmienne globalne<a class="headerlink" href="#id779" title="Link to this heading">#</a></h1>
</section>
<section id="g-platform">
<h1><code class="docutils literal notranslate"><span class="pre">g_platform</span></code><a class="headerlink" href="#g-platform" title="Link to this heading">#</a></h1>
<p>Globalna, jedyna instancja klasy <code class="docutils literal notranslate"><span class="pre">Platform</span></code>, która dostarcza interfejs do funkcji specyficznych dla systemu operacyjnego.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Platform</span><span class="w"> </span><span class="n">g_platform</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id780">
<h1>Zależności i powiązania<a class="headerlink" href="#id780" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platform.h</span></code>: Plik nagłówkowy, który deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Platform</span></code>.</p></li>
<li><p>Właściwa implementacja metod tej klasy znajduje się w plikach <code class="docutils literal notranslate"><span class="pre">win32platform.cpp</span></code>, <code class="docutils literal notranslate"><span class="pre">unixplatform.cpp</span></code> i <code class="docutils literal notranslate"><span class="pre">androidplatform.cpp</span></code>, z których tylko jeden jest kompilowany w zależności od docelowej platformy.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="platformwindow-cpp">
<h1>📄 platformwindow.cpp<a class="headerlink" href="#platformwindow-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id781">
<h1>Opis ogólny<a class="headerlink" href="#id781" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">platformwindow.cpp</span></code> jest kluczowym plikiem, który zarządza implementacją okna specyficzną dla danej platformy. Jego głównym zadaniem jest dołączenie odpowiedniego pliku nagłówkowego (np. <code class="docutils literal notranslate"><span class="pre">win32window.h</span></code> lub <code class="docutils literal notranslate"><span class="pre">x11window.h</span></code>) i zdefiniowanie globalnego wskaźnika <code class="docutils literal notranslate"><span class="pre">g_window</span></code>, który będzie wskazywał na właściwą, platformową instancję okna.</p>
</section>
<section id="id782">
<h1>Zmienne globalne<a class="headerlink" href="#id782" title="Link to this heading">#</a></h1>
</section>
<section id="g-window">
<h1><code class="docutils literal notranslate"><span class="pre">g_window</span></code><a class="headerlink" href="#g-window" title="Link to this heading">#</a></h1>
<p>Globalna referencja do obiektu okna. Jest to centralny punkt dostępu do wszystkich operacji związanych z oknem w całym frameworku. W zależności od platformy, wskazuje na instancję <code class="docutils literal notranslate"><span class="pre">WIN32Window</span></code>, <code class="docutils literal notranslate"><span class="pre">X11Window</span></code>, <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code> lub <code class="docutils literal notranslate"><span class="pre">SDLWindow</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># ifdef ANDROID</span>
<span class="n">PlatformWindow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g_window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_androidWindow</span><span class="p">;</span>
<span class="cp"># else</span>
<span class="n">PlatformWindow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g_window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">window</span><span class="p">;</span><span class="w"> </span><span class="c1">// gdzie &#39;window&#39; to globalna instancja np. WIN32Window</span>
<span class="cp"># endif</span>
</pre></div>
</div>
</section>
<section id="klasa-platformwindow">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code><a class="headerlink" href="#klasa-platformwindow" title="Link to this heading">#</a></h1>
</section>
<section id="int-platformwindow-loadmousecursor">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">PlatformWindow::loadMouseCursor(...)</span></code><a class="headerlink" href="#int-platformwindow-loadmousecursor" title="Link to this heading">#</a></h1>
<p>Ładuje obraz kursora, sprawdza jego poprawność (rozmiar 32x32, 4 kanały kolorów) i deleguje właściwe tworzenie kursora do metody wirtualnej <code class="docutils literal notranslate"><span class="pre">internalLoadMouseCursor</span></code>, która jest zaimplementowana w klasach pochodnych.</p>
</section>
<section id="void-platformwindow-updateunmaximizedcoords">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PlatformWindow::updateUnmaximizedCoords()</span></code><a class="headerlink" href="#void-platformwindow-updateunmaximizedcoords" title="Link to this heading">#</a></h1>
<p>Zapisuje aktualną pozycję i rozmiar okna, ale tylko wtedy, gdy okno nie jest zmaksymalizowane ani w trybie pełnoekranowym. Służy do przywracania poprzedniego stanu okna.</p>
</section>
<section id="void-platformwindow-processkeydown-fw-key-keycode">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PlatformWindow::processKeyDown(Fw::Key</span> <span class="pre">keyCode)</span></code><a class="headerlink" href="#void-platformwindow-processkeydown-fw-key-keycode" title="Link to this heading">#</a></h1>
<p>Obsługuje zdarzenie wciśnięcia klawisza.</p>
<ul class="simple">
<li><p>Aktualizuje stan modyfikatorów (Ctrl, Alt, Shift).</p></li>
<li><p>Sprawdza, czy klawisz nie jest już wciśnięty (obsługa auto-powtarzania).</p></li>
<li><p>Ustawia stan klawisza na wciśnięty (<code class="docutils literal notranslate"><span class="pre">m_keysState</span></code>).</p></li>
<li><p>Wysyła zdarzenia <code class="docutils literal notranslate"><span class="pre">KeyDownInputEvent</span></code> i <code class="docutils literal notranslate"><span class="pre">KeyPressInputEvent</span></code> do zarejestrowanego <code class="docutils literal notranslate"><span class="pre">callbacka</span></code>.</p></li>
</ul>
</section>
<section id="void-platformwindow-processkeyup-fw-key-keycode">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PlatformWindow::processKeyUp(Fw::Key</span> <span class="pre">keyCode)</span></code><a class="headerlink" href="#void-platformwindow-processkeyup-fw-key-keycode" title="Link to this heading">#</a></h1>
<p>Obsługuje zdarzenie zwolnienia klawisza.</p>
<ul class="simple">
<li><p>Aktualizuje stan modyfikatorów.</p></li>
<li><p>Ustawia stan klawisza na zwolniony.</p></li>
<li><p>Wysyła zdarzenie <code class="docutils literal notranslate"><span class="pre">KeyUpInputEvent</span></code>.</p></li>
</ul>
</section>
<section id="void-platformwindow-releaseallkeys">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PlatformWindow::releaseAllKeys()</span></code><a class="headerlink" href="#void-platformwindow-releaseallkeys" title="Link to this heading">#</a></h1>
<p>Resetuje stan wszystkich wciśniętych klawiszy i przycisków myszy. Wywoływana np. gdy okno traci fokus.</p>
</section>
<section id="void-platformwindow-firekeyspress">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PlatformWindow::fireKeysPress()</span></code><a class="headerlink" href="#void-platformwindow-firekeyspress" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana cyklicznie. Sprawdza, które klawisze są wciśnięte i od odpowiednio długiego czasu, a następnie generuje zdarzenia <code class="docutils literal notranslate"><span class="pre">KeyPressInputEvent</span></code> (auto-powtarzanie).</p>
</section>
<section id="id783">
<h1>Zależności i powiązania<a class="headerlink" href="#id783" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Włącza jeden z plików nagłówkowych specyficznych dla platformy (<code class="docutils literal notranslate"><span class="pre">win32window.h</span></code>, <code class="docutils literal notranslate"><span class="pre">x11window.h</span></code>, etc.).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_dispatcher</span></code> do bezpiecznego wątkowo przetwarzania zdarzeń.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/image.h</span></code>: Do ładowania obrazów kursorów.</p></li>
<li><p>Jest to implementacja części wspólnej dla wszystkich platform, podczas gdy specyfika jest w klasach pochodnych.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="platform-h">
<h1>📄 platform.h<a class="headerlink" href="#platform-h" title="Link to this heading">#</a></h1>
</section>
<section id="id784">
<h1>Opis ogólny<a class="headerlink" href="#id784" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">platform.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">Platform</span></code>, która jest interfejsem do funkcji specyficznych dla systemu operacyjnego. Zapewnia abstrakcję nad różnicami między platformami (Windows, Linux, macOS, Android).</p>
</section>
<section id="klasa-platform">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Platform</span></code><a class="headerlink" href="#klasa-platform" title="Link to this heading">#</a></h1>
</section>
<section id="id785">
<h1>Opis semantyczny<a class="headerlink" href="#id785" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Platform</span></code> dostarcza zestaw statycznych metod do interakcji z systemem operacyjnym. Implementacja tych metod znajduje się w plikach specyficznych dla platformy (np. <code class="docutils literal notranslate"><span class="pre">win32platform.cpp</span></code>, <code class="docutils literal notranslate"><span class="pre">unixplatform.cpp</span></code>).</p>
</section>
<section id="id786">
<h1>Metody publiczne<a class="headerlink" href="#id786" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">processArgs(...)</span></code></p></td>
<td class="text-left"><p>Przetwarza argumenty wiersza poleceń, konwertując je do UTF-8.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">spawnProcess(...)</span></code></p></td>
<td class="text-left"><p>Uruchamia nowy proces.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getProcessId()</span></code></p></td>
<td class="text-left"><p>Zwraca ID bieżącego procesu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isProcessRunning(...)</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy proces o danej nazwie jest uruchomiony.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">killProcess(...)</span></code></p></td>
<td class="text-left"><p>Zamyka proces o danej nazwie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getTempPath()</span></code></p></td>
<td class="text-left"><p>Zwraca ścieżkę do katalogu tymczasowego.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getCurrentDir()</span></code></p></td>
<td class="text-left"><p>Zwraca bieżący katalog roboczy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">copyFile(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">fileExists(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">removeFile(...)</span></code></p></td>
<td class="text-left"><p>Podstawowe operacje na plikach.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">getFileModificationTime(...)</span></code></p></td>
<td class="text-left"><p>Zwraca czas ostatniej modyfikacji pliku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">openUrl(...)</span></code></p></td>
<td class="text-left"><p>Otwiera URL w domyślnej przeglądarce.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">openDir(...)</span></code></p></td>
<td class="text-left"><p>Otwiera katalog w menedżerze plików.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getCPUName()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę procesora.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">double</span> <span class="pre">getTotalSystemMemory()</span></code></p></td>
<td class="text-left"><p>Zwraca całkowitą ilość pamięci RAM.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">double</span> <span class="pre">getMemoryUsage()</span></code></p></td>
<td class="text-left"><p>Zwraca użycie pamięci przez bieżący proces.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getOSName()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę systemu operacyjnego.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">traceback(...)</span></code></p></td>
<td class="text-left"><p>Generuje ślad stosu wywołań C++.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::string&gt;</span> <span class="pre">getMacAddresses()</span></code></p></td>
<td class="text-left"><p>Zwraca listę adresów MAC.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getUserName()</span></code></p></td>
<td class="text-left"><p>Zwraca nazwę zalogowanego użytkownika.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::string&gt;</span> <span class="pre">getDlls()</span></code></p></td>
<td class="text-left"><p>(Windows) Zwraca listę załadowanych bibliotek DLL.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::string&gt;</span> <span class="pre">getProcesses()</span></code></p></td>
<td class="text-left"><p>Zwraca listę uruchomionych procesów.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::string&gt;</span> <span class="pre">getWindows()</span></code></p></td>
<td class="text-left"><p>(Windows) Zwraca listę tytułów otwartych okien.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id787">
<h1>Zmienne globalne<a class="headerlink" href="#id787" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_platform</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">Platform</span></code>.</p></li>
</ul>
</section>
<section id="id788">
<h1>Zależności i powiązania<a class="headerlink" href="#id788" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Używana w całym projekcie do operacji, które wymagają interakcji z systemem operacyjnym.</p></li>
<li><p>Jej implementacja jest dostarczana przez pliki <code class="docutils literal notranslate"><span class="pre">*.cpp</span></code> specyficzne dla platformy.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="platformwindow-h">
<h1>📄 platformwindow.h<a class="headerlink" href="#platformwindow-h" title="Link to this heading">#</a></h1>
</section>
<section id="id789">
<h1>Opis ogólny<a class="headerlink" href="#id789" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">platformwindow.h</span></code> deklaruje abstrakcyjną klasę bazową <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>, która definiuje wspólny interfejs do zarządzania oknem aplikacji na różnych systemach operacyjnych.</p>
</section>
<section id="id790">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code><a class="headerlink" href="#id790" title="Link to this heading">#</a></h1>
</section>
<section id="id791">
<h1>Opis semantyczny<a class="headerlink" href="#id791" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> jest klasą abstrakcyjną, która ukrywa szczegóły implementacyjne związane z tworzeniem okna, obsługą zdarzeń i zarządzaniem kontekstem graficznym. Każda platforma (Windows, Linux, Android) dostarcza własną, konkretną implementację tej klasy.</p>
</section>
<section id="metody-czysto-wirtualne-do-implementacji-przez-klasy-pochodne">
<h1>Metody czysto wirtualne (do implementacji przez klasy pochodne)<a class="headerlink" href="#metody-czysto-wirtualne-do-implementacji-przez-klasy-pochodne" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">init()</span></code>, <code class="docutils literal notranslate"><span class="pre">terminate()</span></code>: Cykl życia okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">move()</span></code>, <code class="docutils literal notranslate"><span class="pre">resize()</span></code>, <code class="docutils literal notranslate"><span class="pre">show()</span></code>, <code class="docutils literal notranslate"><span class="pre">hide()</span></code>, <code class="docutils literal notranslate"><span class="pre">minimize()</span></code>, <code class="docutils literal notranslate"><span class="pre">maximize()</span></code>: Zarządzanie stanem okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">poll()</span></code>: Przetwarzanie zdarzeń systemowych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">swapBuffers()</span></code>: Zamiana buforów graficznych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set...()</span></code>: Metody do ustawiania właściwości okna (tytuł, ikona, VSync, etc.).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get...()</span></code>: Metody do pobierania informacji (rozmiar ekranu, tekst ze schowka).</p></li>
</ul>
</section>
<section id="metody-z-implementacja">
<h1>Metody z implementacją<a class="headerlink" href="#metody-z-implementacja" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">loadMouseCursor(...)</span></code>: Ładuje kursor z pliku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">processKeyDown()</span></code>, <code class="docutils literal notranslate"><span class="pre">processKeyUp()</span></code>, <code class="docutils literal notranslate"><span class="pre">releaseAllKeys()</span></code>, <code class="docutils literal notranslate"><span class="pre">fireKeysPress()</span></code>: Implementują logikę obsługi stanu klawiatury, która jest wspólna dla wszystkich platform.</p></li>
<li><p>Gettery dla stanu okna (<code class="docutils literal notranslate"><span class="pre">getSize</span></code>, <code class="docutils literal notranslate"><span class="pre">getPosition</span></code>, <code class="docutils literal notranslate"><span class="pre">isVisible</span></code>, <code class="docutils literal notranslate"><span class="pre">isKeyPressed</span></code>, etc.).</p></li>
</ul>
</section>
<section id="id792">
<h1>Zmienne chronione<a class="headerlink" href="#id792" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_keyMap</span></code>: Mapa tłumacząca kody klawiszy specyficzne dla platformy na wewnętrzne kody <code class="docutils literal notranslate"><span class="pre">Fw::Key</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_keysState</span></code>, <code class="docutils literal notranslate"><span class="pre">m_lastKeysPress</span></code>: Mapy do śledzenia stanu klawiszy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_size</span></code>, <code class="docutils literal notranslate"><span class="pre">m_position</span></code>, <code class="docutils literal notranslate"><span class="pre">m_minimumSize</span></code>: Właściwości geometryczne okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_inputEvent</span></code>: Obiekt do przechowywania danych o bieżącym zdarzeniu wejściowym.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_visible</span></code>, <code class="docutils literal notranslate"><span class="pre">m_focused</span></code>, <code class="docutils literal notranslate"><span class="pre">m_fullscreen</span></code>, <code class="docutils literal notranslate"><span class="pre">m_maximized</span></code>: Flagi stanu okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_onClose</span></code>, <code class="docutils literal notranslate"><span class="pre">m_onResize</span></code>, <code class="docutils literal notranslate"><span class="pre">m_onInputEvent</span></code>: Callbacki do powiadamiania <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> o zdarzeniach.</p></li>
</ul>
</section>
<section id="id793">
<h1>Zmienne globalne<a class="headerlink" href="#id793" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_window</span></code>: Globalna referencja do aktywnej instancji <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>.</p></li>
</ul>
</section>
<section id="id794">
<h1>Zależności i powiązania<a class="headerlink" href="#id794" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/inputevent.h</span></code>: Struktura <code class="docutils literal notranslate"><span class="pre">InputEvent</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/declarations.h</span></code>: Deklaracje typów graficznych.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">WIN32Window</span></code>, <code class="docutils literal notranslate"><span class="pre">X11Window</span></code>, <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code>, <code class="docutils literal notranslate"><span class="pre">SDLWindow</span></code>.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> do wszystkich operacji na oknie.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="sdlwindow-cpp">
<h1>📄 sdlwindow.cpp<a class="headerlink" href="#sdlwindow-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id795">
<h1>Opis ogólny<a class="headerlink" href="#id795" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">sdlwindow.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">SDLWindow</span></code>, która jest wersją <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> dla platformy Emscripten (WebAssembly), opartą na bibliotece SDL.</p>
<blockquote>
<div><p><strong>NOTE:</strong> Implementacja jest w większości pusta. Sugeruje to, że obsługa okna i zdarzeń w Emscripten jest realizowana w inny sposób, prawdopodobnie poprzez główną pętlę Emscripten i bezpośrednie wywołania JavaScript, a ta klasa jest jedynie „zaślepką” (placeholderem), aby kod się kompilował.</p>
</div></blockquote>
</section>
<section id="klasa-sdlwindow">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SDLWindow</span></code><a class="headerlink" href="#klasa-sdlwindow" title="Link to this heading">#</a></h1>
<p>Wszystkie metody implementujące interfejs <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> są puste. Oznacza to, że operacje takie jak <code class="docutils literal notranslate"><span class="pre">resize</span></code>, <code class="docutils literal notranslate"><span class="pre">move</span></code>, <code class="docutils literal notranslate"><span class="pre">setTitle</span></code>, <code class="docutils literal notranslate"><span class="pre">poll</span></code> czy <code class="docutils literal notranslate"><span class="pre">swapBuffers</span></code> nie mają tutaj żadnego efektu i muszą być obsługiwane przez zewnętrzny kod (prawdopodobnie w głównej pętli <code class="docutils literal notranslate"><span class="pre">emscripten_set_main_loop</span></code>).</p>
</section>
<section id="sdlwindow-sdlwindow">
<h1><code class="docutils literal notranslate"><span class="pre">SDLWindow::SDLWindow()</span></code><a class="headerlink" href="#sdlwindow-sdlwindow" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje domyślne rozmiary i stan.</p>
</section>
<section id="std-string-sdlwindow-getplatformtype">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">SDLWindow::getPlatformType()</span></code><a class="headerlink" href="#std-string-sdlwindow-getplatformtype" title="Link to this heading">#</a></h1>
<p>Zwraca <code class="docutils literal notranslate"><span class="pre">&quot;WASM&quot;</span></code>.</p>
</section>
<section id="id796">
<h1>Zależności i powiązania<a class="headerlink" href="#id796" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/sdlwindow.h</span></code>: Plik nagłówkowy.</p></li>
<li><p>W <code class="docutils literal notranslate"><span class="pre">platformwindow.cpp</span></code> (niezałączony, ale można się domyślać), <code class="docutils literal notranslate"><span class="pre">g_window</span></code> jest ustawiane na instancję <code class="docutils literal notranslate"><span class="pre">SDLWindow</span></code> gdy kompilacja odbywa się dla Emscripten.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="sdlwindow-h">
<h1>📄 sdlwindow.h<a class="headerlink" href="#sdlwindow-h" title="Link to this heading">#</a></h1>
</section>
<section id="id797">
<h1>Opis ogólny<a class="headerlink" href="#id797" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">sdlwindow.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">SDLWindow</span></code>, która jest implementacją <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> dla platformy Emscripten (WebAssembly), opartą na bibliotece SDL.</p>
</section>
<section id="id798">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SDLWindow</span></code><a class="headerlink" href="#id798" title="Link to this heading">#</a></h1>
</section>
<section id="id799">
<h1>Opis semantyczny<a class="headerlink" href="#id799" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">SDLWindow</span></code> jest klasą-zaślepką, która spełnia kontrakt interfejsu <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>, ale większość jej metod jest pusta. Logika okna dla Emscripten jest zazwyczaj obsługiwana przez główną pętlę zdefiniowaną w <code class="docutils literal notranslate"><span class="pre">emscripten.h</span></code> i interakcje z API przeglądarki, a nie przez tradycyjny model okienkowy.</p>
</section>
<section id="id800">
<h1>Metody publiczne<a class="headerlink" href="#id800" title="Link to this heading">#</a></h1>
<p>Deklaruje wszystkie metody wirtualne z <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> z pustymi implementacjami.</p>
</section>
<section id="id801">
<h1>Zmienne prywatne<a class="headerlink" href="#id801" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_egl...</span></code>: Pola związane z EGL, odziedziczone po logice Androida, ale prawdopodobnie nieużywane w kontekście Emscripten/SDL.</p></li>
</ul>
</section>
<section id="id802">
<h1>Zależności i powiązania<a class="headerlink" href="#id802" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">platformwindow.h</span></code>: Klasa bazowa.</p></li>
<li><p>Jest to implementacja <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> używana, gdy zdefiniowano <code class="docutils literal notranslate"><span class="pre">__EMSCRIPTEN__</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="unixcrashhandler-cpp">
<h1>📄 unixcrashhandler.cpp<a class="headerlink" href="#unixcrashhandler-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id803">
<h1>Opis ogólny<a class="headerlink" href="#id803" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">unixcrashhandler.cpp</span></code> zawiera implementację mechanizmu obsługi awarii (crash handler) dla systemów uniksowych (Linux, macOS). Jest kompilowany tylko wtedy, gdy zdefiniowano <code class="docutils literal notranslate"><span class="pre">CRASH_HANDLER</span></code> i platforma nie jest Windows ani Emscripten.</p>
</section>
<section id="id804">
<h1>Funkcje<a class="headerlink" href="#id804" title="Link to this heading">#</a></h1>
</section>
<section id="void-crashhandler-int-signum-siginfo-t-info-void-secret">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">crashHandler(int</span> <span class="pre">signum,</span> <span class="pre">siginfo_t*</span> <span class="pre">info,</span> <span class="pre">void*</span> <span class="pre">secret)</span></code><a class="headerlink" href="#void-crashhandler-int-signum-siginfo-t-info-void-secret" title="Link to this heading">#</a></h1>
</section>
<section id="id805">
<h1>Opis semantyczny<a class="headerlink" href="#id805" title="Link to this heading">#</a></h1>
<p>Jest to funkcja obsługi sygnału, która jest wywoływana przez system operacyjny w momencie wystąpienia krytycznego błędu (np. błąd segmentacji). Jej zadaniem jest zebranie jak największej ilości informacji o stanie programu w momencie awarii i zapisanie ich do logu.</p>
</section>
<section id="id806">
<h1>Działanie<a class="headerlink" href="#id806" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Loguje komunikat „Application crashed”.</p></li>
<li><p>Tworzy strumień <code class="docutils literal notranslate"><span class="pre">stringstream</span></code> do budowy raportu.</p></li>
<li><p>Zapisuje podstawowe informacje o aplikacji (nazwa, wersja, data kompilacji itp.).</p></li>
<li><p>Pobiera kontekst procesora (<code class="docutils literal notranslate"><span class="pre">ucontext_t</span></code>) i zapisuje wartości rejestrów (np. <code class="docutils literal notranslate"><span class="pre">rip</span></code>, <code class="docutils literal notranslate"><span class="pre">rax</span></code> dla x64; <code class="docutils literal notranslate"><span class="pre">eip</span></code>, <code class="docutils literal notranslate"><span class="pre">eax</span></code> dla x86).</p></li>
<li><p>Generuje ślad stosu wywołań (backtrace) za pomocą <code class="docutils literal notranslate"><span class="pre">backtrace()</span></code> i <code class="docutils literal notranslate"><span class="pre">backtrace_symbols()</span></code>.</p></li>
<li><p>Opcjonalnie (jeśli zdefiniowano <code class="docutils literal notranslate"><span class="pre">DEMANGLE_BACKTRACE_SYMBOLS</span></code>), próbuje zdemanglować nazwy funkcji C++ w śladzie stosu.</p></li>
<li><p>Zapisuje cały raport do pliku <code class="docutils literal notranslate"><span class="pre">crash_report.log</span></code> i do głównego logu aplikacji.</p></li>
<li><p>Przywraca domyślną obsługę sygnałów, aby umożliwić systemowi operacyjnemu dokończenie procesu zamykania aplikacji.</p></li>
</ol>
</section>
<section id="id807">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">installCrashHandler()</span></code><a class="headerlink" href="#id807" title="Link to this heading">#</a></h1>
<p>Rejestruje funkcję <code class="docutils literal notranslate"><span class="pre">crashHandler</span></code> jako handler dla sygnałów:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SIGILL</span></code>: Nielegalna instrukcja.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SIGSEGV</span></code>: Naruszenie ochrony pamięci.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SIGFPE</span></code>: Błąd operacji zmiennoprzecinkowej.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SIGABRT</span></code>: Sygnał przerwania (np. z <code class="docutils literal notranslate"><span class="pre">assert</span></code>).</p></li>
</ul>
</section>
<section id="id808">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">uninstallCrashHandler()</span></code><a class="headerlink" href="#id808" title="Link to this heading">#</a></h1>
<p>Pusta funkcja, deinstalacja nie jest zaimplementowana.</p>
</section>
<section id="id809">
<h1>Zależności i powiązania<a class="headerlink" href="#id809" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/crashhandler.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>, <code class="docutils literal notranslate"><span class="pre">framework/core/application.h</span></code>: Do pobierania informacji o aplikacji.</p></li>
<li><p>Nagłówki systemowe: <code class="docutils literal notranslate"><span class="pre">execinfo.h</span></code>, <code class="docutils literal notranslate"><span class="pre">ucontext.h</span></code>, <code class="docutils literal notranslate"><span class="pre">signal.h</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="unixplatform-cpp">
<h1>📄 unixplatform.cpp<a class="headerlink" href="#unixplatform-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id810">
<h1>Opis ogólny<a class="headerlink" href="#id810" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">unixplatform.cpp</span></code> zawiera implementację metod klasy <code class="docutils literal notranslate"><span class="pre">Platform</span></code> specyficznych dla systemów uniksowych (Linux, macOS). Jest kompilowany, gdy platforma nie jest ani Windows, ani Emscripten.</p>
</section>
<section id="klasa-platform-implementacja-dla-uniksa">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Platform</span></code> (implementacja dla Uniksa)<a class="headerlink" href="#klasa-platform-implementacja-dla-uniksa" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Implementacja na Uniksie</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">spawnProcess(...)</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">fork()</span></code> i <code class="docutils literal notranslate"><span class="pre">execv()</span></code> do uruchomienia nowego procesu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getProcessId()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">getpid()</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">isProcessRunning(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">killProcess(...)</span></code></p></td>
<td class="text-left"><p>Puste implementacje.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getTempPath()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">/tmp/</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getCurrentDir()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">getcwd()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">copyFile(...)</span></code></p></td>
<td class="text-left"><p>Wywołuje systemową komendę <code class="docutils literal notranslate"><span class="pre">cp</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">fileExists(...)</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">stat()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">removeFile(...)</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">unlink()</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getFileModificationTime(...)</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">stat()</span></code> do odczytania <code class="docutils literal notranslate"><span class="pre">st_mtime</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">openUrl(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">openDir(...)</span></code></p></td>
<td class="text-left"><p>Wywołuje systemową komendę <code class="docutils literal notranslate"><span class="pre">xdg-open</span></code>. Może to zrobić natychmiast lub w <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getCPUName()</span></code></p></td>
<td class="text-left"><p>Parsuje plik <code class="docutils literal notranslate"><span class="pre">/proc/cpuinfo</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getTotalSystemMemory()</span></code></p></td>
<td class="text-left"><p>Parsuje plik <code class="docutils literal notranslate"><span class="pre">/proc/meminfo</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getMemoryUsage()</span></code></p></td>
<td class="text-left"><p>Pusta implementacja.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getOSName()</span></code></p></td>
<td class="text-left"><p>Parsuje plik <code class="docutils literal notranslate"><span class="pre">/etc/issue</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">traceback(...)</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">backtrace()</span></code> i <code class="docutils literal notranslate"><span class="pre">backtrace_symbols()</span></code> do generowania śladu stosu, z opcjonalnym demanglowaniem nazw funkcji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getMacAddresses()</span></code></p></td>
<td class="text-left"><p>Pusta implementacja.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getUserName()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">getlogin_r()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getDlls()</span></code>, <code class="docutils literal notranslate"><span class="pre">getProcesses()</span></code>, <code class="docutils literal notranslate"><span class="pre">getWindows()</span></code></p></td>
<td class="text-left"><p>Puste implementacje (brak bezpośrednich odpowiedników).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id811">
<h1>Zależności i powiązania<a class="headerlink" href="#id811" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platform.h</span></code>: Plik nagłówkowy.</p></li>
<li><p>Nagłówki systemowe POSIX (<code class="docutils literal notranslate"><span class="pre">unistd.h</span></code>, <code class="docutils literal notranslate"><span class="pre">sys/stat.h</span></code>, <code class="docutils literal notranslate"><span class="pre">execinfo.h</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do asynchronicznego otwierania URL/katalogów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="win32crashhandler-cpp">
<h1>📄 win32crashhandler.cpp<a class="headerlink" href="#win32crashhandler-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id812">
<h1>Opis ogólny<a class="headerlink" href="#id812" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">win32crashhandler.cpp</span></code> zawiera implementację mechanizmu obsługi awarii (crash handler) dla systemu Windows. Jest kompilowany, gdy zdefiniowano <code class="docutils literal notranslate"><span class="pre">WIN32</span></code> i <code class="docutils literal notranslate"><span class="pre">CRASH_HANDLER</span></code>.</p>
</section>
<section id="id813">
<h1>Funkcje<a class="headerlink" href="#id813" title="Link to this heading">#</a></h1>
</section>
<section id="const-char-getexceptionname-dword-exceptioncode">
<h1><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*getExceptionName(DWORD</span> <span class="pre">exceptionCode)</span></code><a class="headerlink" href="#const-char-getexceptionname-dword-exceptioncode" title="Link to this heading">#</a></h1>
<p>Funkcja pomocnicza, która tłumaczy kod wyjątku Windows (np. <code class="docutils literal notranslate"><span class="pre">EXCEPTION_ACCESS_VIOLATION</span></code>) на czytelną nazwę.</p>
</section>
<section id="void-stacktrace-lpexception-pointers-e-std-stringstream-ss">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Stacktrace(LPEXCEPTION_POINTERS</span> <span class="pre">e,</span> <span class="pre">std::stringstream&amp;</span> <span class="pre">ss)</span></code><a class="headerlink" href="#void-stacktrace-lpexception-pointers-e-std-stringstream-ss" title="Link to this heading">#</a></h1>
<p>Generuje ślad stosu wywołań. Używa funkcji z biblioteki <code class="docutils literal notranslate"><span class="pre">DbgHelp.dll</span></code> (<code class="docutils literal notranslate"><span class="pre">StackWalk</span></code>, <code class="docutils literal notranslate"><span class="pre">SymGetModuleBase</span></code>, <code class="docutils literal notranslate"><span class="pre">SymGetSymFromAddr</span></code>), aby przejść przez stos i odczytać nazwy funkcji i modułów.</p>
</section>
<section id="long-callback-exceptionhandler-pexception-pointers-e">
<h1><code class="docutils literal notranslate"><span class="pre">LONG</span> <span class="pre">CALLBACK</span> <span class="pre">ExceptionHandler(PEXCEPTION_POINTERS</span> <span class="pre">e)</span></code><a class="headerlink" href="#long-callback-exceptionhandler-pexception-pointers-e" title="Link to this heading">#</a></h1>
<p>Starsza wersja handlera. Generuje raport tekstowy podobny do wersji uniksowej, zapisuje go do pliku i wyświetla <code class="docutils literal notranslate"><span class="pre">MessageBox</span></code> z informacją o awarii.</p>
</section>
<section id="long-winapi-unhandledexceptionfilter2-pexception-pointers-exception">
<h1><code class="docutils literal notranslate"><span class="pre">LONG</span> <span class="pre">WINAPI</span> <span class="pre">UnhandledExceptionFilter2(PEXCEPTION_POINTERS</span> <span class="pre">exception)</span></code><a class="headerlink" href="#long-winapi-unhandledexceptionfilter2-pexception-pointers-exception" title="Link to this heading">#</a></h1>
<p>Nowsza, główna funkcja obsługi wyjątków.</p>
<ul class="simple">
<li><p><strong>Działanie</strong>:</p>
<ol class="arabic simple">
<li><p>Tworzy i zapisuje <strong>minidump</strong> awarii do plików (<code class="docutils literal notranslate"><span class="pre">exception.dmp</span></code>, <code class="docutils literal notranslate"><span class="pre">exception_full.dmp</span></code>). Minidump to plik, który można otworzyć w debuggerze (np. Visual Studio, WinDbg) w celu pośmiertnej analizy stanu programu.</p></li>
<li><p>Jeśli <code class="docutils literal notranslate"><span class="pre">quiet_crash</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code> (ustawiane przez <code class="docutils literal notranslate"><span class="pre">uninstallCrashHandler</span></code>), cicho zamyka aplikację.</p></li>
<li><p>W przeciwnym razie, wywołuje <code class="docutils literal notranslate"><span class="pre">ExceptionHandler</span></code> w celu wygenerowania raportu tekstowego i wyświetlenia komunikatu.</p></li>
</ol>
</li>
</ul>
</section>
<section id="id814">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">installCrashHandler()</span></code><a class="headerlink" href="#id814" title="Link to this heading">#</a></h1>
<p>Rejestruje <code class="docutils literal notranslate"><span class="pre">UnhandledExceptionFilter2</span></code> jako globalny handler nieobsłużonych wyjątków za pomocą <code class="docutils literal notranslate"><span class="pre">SetUnhandledExceptionFilter</span></code>.</p>
</section>
<section id="id815">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">uninstallCrashHandler()</span></code><a class="headerlink" href="#id815" title="Link to this heading">#</a></h1>
<p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">quiet_crash</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code>. Jest to używane np. podczas aktualizacji, aby cicho zamknąć starą wersję klienta bez wyświetlania okna błędu.</p>
</section>
<section id="id816">
<h1>Zależności i powiązania<a class="headerlink" href="#id816" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/crashhandler.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>, <code class="docutils literal notranslate"><span class="pre">core/application.h</span></code>, <code class="docutils literal notranslate"><span class="pre">core/resourcemanager.h</span></code>.</p></li>
<li><p>Nagłówki Windows (<code class="docutils literal notranslate"><span class="pre">windows.h</span></code>, <code class="docutils literal notranslate"><span class="pre">imagehlp.h</span></code>, <code class="docutils literal notranslate"><span class="pre">DbgHelp.h</span></code>).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="win32platform-cpp">
<h1>📄 win32platform.cpp<a class="headerlink" href="#win32platform-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id817">
<h1>Opis ogólny<a class="headerlink" href="#id817" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">win32platform.cpp</span></code> zawiera implementację metod klasy <code class="docutils literal notranslate"><span class="pre">Platform</span></code> specyficznych dla systemu Windows.</p>
</section>
<section id="klasa-platform-implementacja-dla-windows">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Platform</span></code> (implementacja dla Windows)<a class="headerlink" href="#klasa-platform-implementacja-dla-windows" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Implementacja na Windows</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">processArgs(...)</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">CommandLineToArgvW</span></code> do poprawnego sparsowania argumentów wiersza poleceń (z obsługą Unicode).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">spawnProcess(...)</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">ShellExecuteW</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getProcessId()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">GetCurrentProcessId()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">isProcessRunning(...)</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">FindWindowA</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">killProcess(...)</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">FindWindowA</span></code>, <code class="docutils literal notranslate"><span class="pre">GetProcessId</span></code> i <code class="docutils literal notranslate"><span class="pre">TerminateProcess</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getTempPath()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">GetTempPathW</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getCurrentDir()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">GetCurrentDirectoryW</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">copyFile(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">fileExists(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">removeFile(...)</span></code></p></td>
<td class="text-left"><p>Używają odpowiedników z WinAPI (<code class="docutils literal notranslate"><span class="pre">CopyFileW</span></code>, <code class="docutils literal notranslate"><span class="pre">GetFileAttributesW</span></code>, <code class="docutils literal notranslate"><span class="pre">DeleteFileW</span></code>).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getFileModificationTime(...)</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">GetFileAttributesExW</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">openUrl(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">openDir(...)</span></code></p></td>
<td class="text-left"><p>Używają <code class="docutils literal notranslate"><span class="pre">ShellExecuteW</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getCPUName()</span></code></p></td>
<td class="text-left"><p>Odczytuje wartość z rejestru systemowego.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getTotalSystemMemory()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">GlobalMemoryStatusEx</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getMemoryUsage()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">GetProcessMemoryInfo</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getOSName()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">VerifyVersionInfo</span></code> i <code class="docutils literal notranslate"><span class="pre">GetProductInfo</span></code> do uzyskania szczegółowej nazwy wersji Windows.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">traceback(...)</span></code></p></td>
<td class="text-left"><p>Prosta implementacja, zwraca tylko informację o miejscu wywołania.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getMacAddresses()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">GetAdaptersInfo</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getUserName()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">GetUserNameA</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getDlls()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">EnumProcessModules</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getProcesses()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">CreateToolhelp32Snapshot</span></code> do iteracji po procesach.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getWindows()</span></code></p></td>
<td class="text-left"><p>Używa <code class="docutils literal notranslate"><span class="pre">EnumWindows</span></code> do iteracji po otwartych oknach.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id818">
<h1>Zależności i powiązania<a class="headerlink" href="#id818" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platform.h</span></code>: Plik nagłówkowy.</p></li>
<li><p>Nagłówki WinAPI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/algorithm/string.hpp</span></code>: Do operacji na stringach.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="win32window-cpp">
<h1>📄 win32window.cpp<a class="headerlink" href="#win32window-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id819">
<h1>Opis ogólny<a class="headerlink" href="#id819" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">win32window.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">WIN32Window</span></code>, która jest specyficzną dla Windows implementacją <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>. Zarządza ona natywnym oknem WinAPI, obsługą zdarzeń i kontekstem graficznym (WGL dla OpenGL lub EGL dla OpenGL ES/DirectX).</p>
</section>
<section id="klasa-win32window">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">WIN32Window</span></code><a class="headerlink" href="#klasa-win32window" title="Link to this heading">#</a></h1>
</section>
<section id="win32window-win32window">
<h1><code class="docutils literal notranslate"><span class="pre">WIN32Window::WIN32Window()</span></code><a class="headerlink" href="#win32window-win32window" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje mapę klawiszy (<code class="docutils literal notranslate"><span class="pre">m_keyMap</span></code>), tłumacząc wirtualne kody klawiszy Windows (<code class="docutils literal notranslate"><span class="pre">VK_*</span></code>) na wewnętrzne kody <code class="docutils literal notranslate"><span class="pre">Fw::Key</span></code>.</p>
</section>
<section id="void-win32window-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WIN32Window::init()</span></code><a class="headerlink" href="#void-win32window-init" title="Link to this heading">#</a></h1>
<p>Inicjalizuje okno, wywołując kolejno:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">internalSetupTimerAccuracy()</span></code>: Zwiększa precyzję systemowego timera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">internalCreateWindow()</span></code>: Rejestruje klasę okna i tworzy okno za pomocą <code class="docutils literal notranslate"><span class="pre">CreateWindowExA</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">internalCreateGLContext()</span></code>: Tworzy kontekst graficzny (WGL lub EGL).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">internalRestoreGLContext()</span></code>: Aktywuje kontekst.</p></li>
</ol>
</section>
<section id="void-win32window-internalcreateglcontext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WIN32Window::internalCreateGLContext()</span></code><a class="headerlink" href="#void-win32window-internalcreateglcontext" title="Link to this heading">#</a></h1>
<p>Implementacja tworzenia kontekstu graficznego:</p>
<ul class="simple">
<li><p><strong>Dla OpenGL ES (<code class="docutils literal notranslate"><span class="pre">OPENGL_ES</span></code>)</strong>: Używa EGL (ANGLE), próbując kolejno backendów D3D11, D3D9 i WARP, aby zapewnić maksymalną kompatybilność.</p></li>
<li><p><strong>Dla standardowego OpenGL</strong>: Używa WGL. Tworzy <code class="docutils literal notranslate"><span class="pre">PIXELFORMATDESCRIPTOR</span></code>, wybiera format pikseli i tworzy kontekst za pomocą <code class="docutils literal notranslate"><span class="pre">wglCreateContext</span></code>.</p></li>
</ul>
</section>
<section id="lresult-win32window-windowproc">
<h1><code class="docutils literal notranslate"><span class="pre">LRESULT</span> <span class="pre">WIN32Window::windowProc(...)</span></code><a class="headerlink" href="#lresult-win32window-windowproc" title="Link to this heading">#</a></h1>
<p>Główna funkcja obsługi zdarzeń okna (Window Procedure). Odbiera komunikaty od systemu Windows.</p>
<ul class="simple">
<li><p>Przekazuje zdarzenia do <code class="docutils literal notranslate"><span class="pre">dispatcherWindowProc</span></code> w celu obsługi w głównym wątku aplikacji.</p></li>
<li><p>Bezpośrednio obsługuje niektóre komunikaty, które muszą być przetworzone synchronicznie (np. <code class="docutils literal notranslate"><span class="pre">WM_SETCURSOR</span></code>, <code class="docutils literal notranslate"><span class="pre">WM_GETMINMAXINFO</span></code>).</p></li>
</ul>
</section>
<section id="lresult-win32window-dispatcherwindowproc">
<h1><code class="docutils literal notranslate"><span class="pre">LRESULT</span> <span class="pre">WIN32Window::dispatcherWindowProc(...)</span></code><a class="headerlink" href="#lresult-win32window-dispatcherwindowproc" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana przez <code class="docutils literal notranslate"><span class="pre">g_dispatcher</span></code> w głównym wątku. Tłumaczy komunikaty Windows (<code class="docutils literal notranslate"><span class="pre">WM_KEYDOWN</span></code>, <code class="docutils literal notranslate"><span class="pre">WM_LBUTTONDOWN</span></code>, <code class="docutils literal notranslate"><span class="pre">WM_MOUSEMOVE</span></code> itp.) na wewnętrzne <code class="docutils literal notranslate"><span class="pre">InputEvent</span></code> i przekazuje je do <code class="docutils literal notranslate"><span class="pre">m_onInputEvent</span></code> (czyli do <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>).</p>
</section>
<section id="void-win32window-poll">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WIN32Window::poll()</span></code><a class="headerlink" href="#void-win32window-poll" title="Link to this heading">#</a></h1>
<p>Przetwarza kolejkę komunikatów Windows za pomocą <code class="docutils literal notranslate"><span class="pre">PeekMessage</span></code>, <code class="docutils literal notranslate"><span class="pre">TranslateMessage</span></code> i <code class="docutils literal notranslate"><span class="pre">DispatchMessage</span></code>.</p>
</section>
<section id="void-win32window-swapbuffers">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WIN32Window::swapBuffers()</span></code><a class="headerlink" href="#void-win32window-swapbuffers" title="Link to this heading">#</a></h1>
<p>Zamienia bufory ekranu za pomocą <code class="docutils literal notranslate"><span class="pre">SwapBuffers</span></code> (dla WGL) lub <code class="docutils literal notranslate"><span class="pre">eglSwapBuffers</span></code> (dla EGL).</p>
</section>
<section id="void-win32window-setverticalsync-bool-enable">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WIN32Window::setVerticalSync(bool</span> <span class="pre">enable)</span></code><a class="headerlink" href="#void-win32window-setverticalsync-bool-enable" title="Link to this heading">#</a></h1>
<p>Włącza/wyłącza synchronizację pionową, używając rozszerzeń WGL (<code class="docutils literal notranslate"><span class="pre">WGL_EXT_swap_control</span></code>).</p>
</section>
<section id="id820">
<h1>Inne metody<a class="headerlink" href="#id820" title="Link to this heading">#</a></h1>
<p>Implementują interfejs <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>, opakowując odpowiednie funkcje WinAPI (np. <code class="docutils literal notranslate"><span class="pre">SetWindowTextW</span></code> dla <code class="docutils literal notranslate"><span class="pre">setTitle</span></code>, <code class="docutils literal notranslate"><span class="pre">ShellExecuteW</span></code> dla <code class="docutils literal notranslate"><span class="pre">openUrl</span></code>).</p>
</section>
<section id="id821">
<h1>Zależności i powiązania<a class="headerlink" href="#id821" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Nagłówki WinAPI.</p></li>
<li><p>Nagłówki OpenGL/EGL/WGL.</p></li>
<li><p>Współpracuje z <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> i <code class="docutils literal notranslate"><span class="pre">Mouse</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="win32window-h">
<h1>📄 win32window.h<a class="headerlink" href="#win32window-h" title="Link to this heading">#</a></h1>
</section>
<section id="id822">
<h1>Opis ogólny<a class="headerlink" href="#id822" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">win32window.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">WIN32Window</span></code>, która jest implementacją <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> dla systemu Windows.</p>
</section>
<section id="id823">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">WIN32Window</span></code><a class="headerlink" href="#id823" title="Link to this heading">#</a></h1>
</section>
<section id="id824">
<h1>Opis semantyczny<a class="headerlink" href="#id824" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">WIN32Window</span></code> enkapsuluje uchwyty i logikę związaną z natywnym oknem WinAPI. Zarządza jego cyklem życia, obsługą komunikatów systemowych i tworzeniem kontekstu graficznego (WGL dla OpenGL lub EGL dla OpenGL ES przez ANGLE).</p>
</section>
<section id="metody-prywatne-i-chronione">
<h1>Metody prywatne i chronione<a class="headerlink" href="#metody-prywatne-i-chronione" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">internal...()</span></code>: Grupa metod do wewnętrznego zarządzania oknem i kontekstem GL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">windowProc(...)</span></code>: Główna funkcja obsługi komunikatów Windows.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dispatcherWindowProc(...)</span></code>: Handler komunikatów wykonywany w głównym wątku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">retranslateVirtualKey(...)</span></code>: Tłumaczy kody klawiszy WinAPI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getClientRect()</span></code>, <code class="docutils literal notranslate"><span class="pre">getWindowRect()</span></code>, <code class="docutils literal notranslate"><span class="pre">adjustWindowRect()</span></code>: Metody pomocnicze do geometrii okna.</p></li>
</ul>
</section>
<section id="id825">
<h1>Zmienne prywatne<a class="headerlink" href="#id825" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_window</span></code>: Uchwyt <code class="docutils literal notranslate"><span class="pre">HWND</span></code> do okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_instance</span></code>: Uchwyt <code class="docutils literal notranslate"><span class="pre">HINSTANCE</span></code> do modułu aplikacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_deviceContext</span></code>: Uchwyt <code class="docutils literal notranslate"><span class="pre">HDC</span></code> do kontekstu urządzenia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_cursors</span></code>: Wektor uchwytów <code class="docutils literal notranslate"><span class="pre">HCURSOR</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_cursor</span></code>, <code class="docutils literal notranslate"><span class="pre">m_defaultCursor</span></code>: Aktywny i domyślny kursor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_hidden</span></code>: Flaga ukrycia okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_egl...</span></code> / <code class="docutils literal notranslate"><span class="pre">m_wglContext</span></code>: Uchwyty do zasobów EGL lub WGL.</p></li>
</ul>
</section>
<section id="id826">
<h1>Zależności i powiązania<a class="headerlink" href="#id826" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">platformwindow.h</span></code>: Klasa bazowa.</p></li>
<li><p>Nagłówki WinAPI i OpenGL/EGL.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="x11window-h">
<h1>📄 x11window.h<a class="headerlink" href="#x11window-h" title="Link to this heading">#</a></h1>
</section>
<section id="id827">
<h1>Opis ogólny<a class="headerlink" href="#id827" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">x11window.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">X11Window</span></code>, która jest implementacją <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> dla systemów uniksowych używających serwera X11 (głównie Linux).</p>
</section>
<section id="klasa-x11window">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">X11Window</span></code><a class="headerlink" href="#klasa-x11window" title="Link to this heading">#</a></h1>
</section>
<section id="id828">
<h1>Opis semantyczny<a class="headerlink" href="#id828" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">X11Window</span></code> zarządza natywnym oknem X11, obsługą jego zdarzeń oraz tworzeniem kontekstu graficznego (GLX dla OpenGL lub EGL dla OpenGL ES).</p>
</section>
<section id="id829">
<h1>Metody prywatne i chronione<a class="headerlink" href="#id829" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">internal...()</span></code>: Grupa metod do wewnętrznego zarządzania oknem i kontekstem GL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getExtensionProcAddress(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">isExtensionSupported(...)</span></code>: Do obsługi rozszerzeń GLX/EGL.</p></li>
</ul>
</section>
<section id="id830">
<h1>Zmienne prywatne<a class="headerlink" href="#id830" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_display</span></code>: Wskaźnik na <code class="docutils literal notranslate"><span class="pre">Display</span></code> (połączenie z serwerem X11).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_visual</span></code>: Informacje o wizualu (głębia kolorów itp.).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_window</span></code>: ID okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_rootWindow</span></code>: ID okna głównego.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_colormap</span></code>: Mapa kolorów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_cursors</span></code>: Wektor kursorów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_cursor</span></code>, <code class="docutils literal notranslate"><span class="pre">m_hiddenCursor</span></code>: Aktywny i ukryty kursor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_xim</span></code>, <code class="docutils literal notranslate"><span class="pre">m_xic</span></code>: Do obsługi metod wprowadzania tekstu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_wmDelete</span></code>: Atom do obsługi zdarzenia zamknięcia okna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_glxContext</span></code> / <code class="docutils literal notranslate"><span class="pre">m_egl...</span></code>: Uchwyty do zasobów GLX lub EGL.</p></li>
</ul>
</section>
<section id="id831">
<h1>Zależności i powiązania<a class="headerlink" href="#id831" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">platformwindow.h</span></code>: Klasa bazowa.</p></li>
<li><p>Nagłówki X11, GLX, EGL.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="x11window-cpp">
<h1>📄 x11window.cpp<a class="headerlink" href="#x11window-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id832">
<h1>Opis ogólny<a class="headerlink" href="#id832" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">x11window.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">X11Window</span></code> dla systemów uniksowych z X11.</p>
</section>
<section id="id833">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">X11Window</span></code><a class="headerlink" href="#id833" title="Link to this heading">#</a></h1>
</section>
<section id="x11window-x11window">
<h1><code class="docutils literal notranslate"><span class="pre">X11Window::X11Window()</span></code><a class="headerlink" href="#x11window-x11window" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje mapę klawiszy, tłumacząc <code class="docutils literal notranslate"><span class="pre">KeySym</span></code> z X11 na <code class="docutils literal notranslate"><span class="pre">Fw::Key</span></code>.</p>
</section>
<section id="void-x11window-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::init()</span></code><a class="headerlink" href="#void-x11window-init" title="Link to this heading">#</a></h1>
<p>Inicjalizuje okno, wywołując kolejno:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">internalOpenDisplay()</span></code>: Otwiera połączenie z serwerem X11.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">internalCheckGL()</span></code>: Sprawdza dostępność GLX/EGL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">internalChooseGLVisual()</span></code>: Wybiera odpowiedni format wizualny.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">internalCreateGLContext()</span></code>: Tworzy kontekst graficzny.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">internalCreateWindow()</span></code>: Tworzy okno X11.</p></li>
</ol>
</section>
<section id="void-x11window-internalcreatewindow">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::internalCreateWindow()</span></code><a class="headerlink" href="#void-x11window-internalcreatewindow" title="Link to this heading">#</a></h1>
<p>Tworzy okno za pomocą <code class="docutils literal notranslate"><span class="pre">XCreateWindow</span></code>, ustawia atrybuty, w tym maskę zdarzeń, i przygotowuje obsługę zamknięcia okna przez menedżera okien. Inicjalizuje również XIM/XIC do obsługi wprowadzania tekstu.</p>
</section>
<section id="void-x11window-poll">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::poll()</span></code><a class="headerlink" href="#void-x11window-poll" title="Link to this heading">#</a></h1>
<p>Przetwarza kolejkę zdarzeń X11 za pomocą <code class="docutils literal notranslate"><span class="pre">XPending</span></code> i <code class="docutils literal notranslate"><span class="pre">XNextEvent</span></code>. Tłumaczy zdarzenia X11 (<code class="docutils literal notranslate"><span class="pre">KeyPress</span></code>, <code class="docutils literal notranslate"><span class="pre">ButtonPress</span></code>, <code class="docutils literal notranslate"><span class="pre">MotionNotify</span></code>, <code class="docutils literal notranslate"><span class="pre">ConfigureNotify</span></code> itp.) na wewnętrzne <code class="docutils literal notranslate"><span class="pre">InputEvent</span></code> i wywołuje odpowiednie <code class="docutils literal notranslate"><span class="pre">callbacki</span></code> w <code class="docutils literal notranslate"><span class="pre">g_dispatcher</span></code>. Obsługuje również logikę auto-powtarzania klawiszy i wprowadzania tekstu.</p>
</section>
<section id="void-x11window-swapbuffers">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::swapBuffers()</span></code><a class="headerlink" href="#void-x11window-swapbuffers" title="Link to this heading">#</a></h1>
<p>Zamienia bufory ekranu za pomocą <code class="docutils literal notranslate"><span class="pre">glXSwapBuffers</span></code> (dla GLX) lub <code class="docutils literal notranslate"><span class="pre">eglSwapBuffers</span></code> (dla EGL).</p>
</section>
<section id="void-x11window-setfullscreen-bool-fullscreen">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::setFullscreen(bool</span> <span class="pre">fullscreen)</span></code><a class="headerlink" href="#void-x11window-setfullscreen-bool-fullscreen" title="Link to this heading">#</a></h1>
<p>Zmienia stan okna na pełnoekranowy, wysyłając odpowiedni komunikat <code class="docutils literal notranslate"><span class="pre">_NET_WM_STATE</span></code> do menedżera okien.</p>
</section>
<section id="void-x11window-setclipboardtext-i-getclipboardtext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::setClipboardText(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">getClipboardText()</span></code><a class="headerlink" href="#void-x11window-setclipboardtext-i-getclipboardtext" title="Link to this heading">#</a></h1>
<p>Implementują obsługę schowka za pomocą mechanizmu selekcji X11.</p>
</section>
<section id="id834">
<h1>Inne metody<a class="headerlink" href="#id834" title="Link to this heading">#</a></h1>
<p>Implementują interfejs <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>, opakowując odpowiednie funkcje X11 (np. <code class="docutils literal notranslate"><span class="pre">XStoreName</span></code> dla <code class="docutils literal notranslate"><span class="pre">setTitle</span></code>, <code class="docutils literal notranslate"><span class="pre">XMoveWindow</span></code> dla <code class="docutils literal notranslate"><span class="pre">move</span></code>).</p>
</section>
<section id="id835">
<h1>Zależności i powiązania<a class="headerlink" href="#id835" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Nagłówki X11, GLX, EGL.</p></li>
<li><p>Współpracuje z <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="proxy-cpp">
<h1>📄 proxy.cpp<a class="headerlink" href="#proxy-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id836">
<h1>Opis ogólny<a class="headerlink" href="#id836" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">proxy.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code>, która zarządza systemem proxy do komunikacji z serwerem gry.</p>
</section>
<section id="id837">
<h1>Zmienne globalne<a class="headerlink" href="#id837" title="Link to this heading">#</a></h1>
</section>
<section id="g-proxy">
<h1><code class="docutils literal notranslate"><span class="pre">g_proxy</span></code><a class="headerlink" href="#g-proxy" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code>.</p>
</section>
<section id="klasa-proxymanager">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code><a class="headerlink" href="#klasa-proxymanager" title="Link to this heading">#</a></h1>
</section>
<section id="void-proxymanager-init-i-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::init()</span></code> i <code class="docutils literal notranslate"><span class="pre">terminate()</span></code><a class="headerlink" href="#void-proxymanager-init-i-terminate" title="Link to this heading">#</a></h1>
<p>Uruchamiają i zatrzymują dedykowany wątek sieciowy, w którym działa <code class="docutils literal notranslate"><span class="pre">io_context</span></code> dla operacji proxy.</p>
</section>
<section id="void-proxymanager-clear">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::clear()</span></code><a class="headerlink" href="#void-proxymanager-clear" title="Link to this heading">#</a></h1>
<p>Zamyka wszystkie aktywne sesje i połączenia z serwerami proxy.</p>
</section>
<section id="bool-proxymanager-isactive">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ProxyManager::isActive()</span></code><a class="headerlink" href="#bool-proxymanager-isactive" title="Link to this heading">#</a></h1>
<p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli skonfigurowano co najmniej jeden serwer proxy.</p>
</section>
<section id="void-proxymanager-addproxy">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::addProxy(...)</span></code><a class="headerlink" href="#void-proxymanager-addproxy" title="Link to this heading">#</a></h1>
<p>Dodaje nowy serwer proxy do puli. Tworzy obiekt <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> i uruchamia go.</p>
</section>
<section id="void-proxymanager-removeproxy">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::removeProxy(...)</span></code><a class="headerlink" href="#void-proxymanager-removeproxy" title="Link to this heading">#</a></h1>
<p>Usuwa serwer proxy z puli.</p>
</section>
<section id="uint32-t-proxymanager-addsession">
<h1><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">ProxyManager::addSession(...)</span></code><a class="headerlink" href="#uint32-t-proxymanager-addsession" title="Link to this heading">#</a></h1>
<p>Tworzy nową sesję proxy dla połączenia z serwerem gry. Tworzy obiekt <code class="docutils literal notranslate"><span class="pre">Session</span></code> i zwraca jego unikalne ID.</p>
</section>
<section id="void-proxymanager-removesession">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::removeSession(...)</span></code><a class="headerlink" href="#void-proxymanager-removesession" title="Link to this heading">#</a></h1>
<p>Zamyka sesję o danym ID.</p>
</section>
<section id="void-proxymanager-send">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::send(...)</span></code><a class="headerlink" href="#void-proxymanager-send" title="Link to this heading">#</a></h1>
<p>Wysyła pakiet w ramach danej sesji. Znajduje odpowiedni obiekt <code class="docutils literal notranslate"><span class="pre">Session</span></code> i przekazuje mu pakiet.</p>
</section>
<section id="int-proxymanager-getping">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">ProxyManager::getPing()</span></code><a class="headerlink" href="#int-proxymanager-getping" title="Link to this heading">#</a></h1>
<p>Zwraca najlepszy (najniższy) ping spośród wszystkich aktywnych i połączonych serwerów proxy.</p>
</section>
<section id="id838">
<h1>Zależności i powiązania<a class="headerlink" href="#id838" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/proxy/proxy.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/proxy/proxy_client.h</span></code>: Definicje klas <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> i <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> do tunelowania połączenia przez serwery proxy.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="proxy-h">
<h1>📄 proxy.h<a class="headerlink" href="#proxy-h" title="Link to this heading">#</a></h1>
</section>
<section id="id839">
<h1>Opis ogólny<a class="headerlink" href="#id839" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">proxy.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_proxy</span></code>) odpowiedzialnym za zarządzanie całym systemem połączeń proxy. Stanowi on główny punkt wejścia do konfiguracji i wykorzystania tunelowania ruchu sieciowego.</p>
</section>
<section id="id840">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code><a class="headerlink" href="#id840" title="Link to this heading">#</a></h1>
</section>
<section id="id841">
<h1>Opis semantyczny<a class="headerlink" href="#id841" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code> zarządza pulą dostępnych serwerów proxy (obiekty <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>) oraz pulą aktywnych sesji klienta (obiekty <code class="docutils literal notranslate"><span class="pre">Session</span></code>). Jego zadaniem jest koordynacja między sesjami a serwerami proxy, dynamiczne wybieranie najlepszych serwerów do tunelowania ruchu oraz dostarczanie interfejsu do zarządzania tym procesem z poziomu aplikacji i skryptów Lua. Działa w dedykowanym wątku sieciowym, aby nie blokować głównego wątku aplikacji.</p>
</section>
<section id="id842">
<h1>Metody publiczne<a class="headerlink" href="#id842" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">init()</span></code> / <code class="docutils literal notranslate"><span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Uruchamia i zatrzymuje wątek sieciowy <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">clear()</span></code></p></td>
<td class="text-left"><p>Zamyka wszystkie aktywne sesje i połączenia z serwerami proxy.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setMaxActiveProxies(int</span> <span class="pre">value)</span></code></p></td>
<td class="text-left"><p>Ustawia, przez ile najlepszych (pod względem pingu) serwerów proxy ma być jednocześnie tunelowany ruch dla każdej sesji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">isActive()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli co najmniej jeden serwer proxy jest skonfigurowany.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">addProxy(...)</span></code> / <code class="docutils literal notranslate"><span class="pre">removeProxy(...)</span></code></p></td>
<td class="text-left"><p>Dodaje lub usuwa serwer proxy z puli dostępnych serwerów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">addSession(...)</span></code></p></td>
<td class="text-left"><p>Tworzy nową sesję proxy dla połączenia z serwerem gry. Zwraca unikalne ID sesji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">removeSession(uint32_t</span> <span class="pre">sessionId)</span></code></p></td>
<td class="text-left"><p>Zamyka i usuwa sesję o podanym ID.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">send(uint32_t</span> <span class="pre">sessionId,</span> <span class="pre">ProxyPacketPtr</span> <span class="pre">packet)</span></code></p></td>
<td class="text-left"><p>Wysyła pakiet w ramach określonej sesji. <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code> przekazuje go do odpowiedniego obiektu <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::map&lt;...&gt;</span> <span class="pre">getProxies()</span></code></p></td>
<td class="text-left"><p>Zwraca mapę dostępnych serwerów proxy wraz z ich pingiem.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::map&lt;...&gt;</span> <span class="pre">getProxiesDebugInfo()</span></code></p></td>
<td class="text-left"><p>Zwraca szczegółowe informacje diagnostyczne o każdym proxy.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getPing()</span></code></p></td>
<td class="text-left"><p>Zwraca najniższy ping spośród wszystkich aktywnych serwerów proxy.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id843">
<h1>Zmienne prywatne<a class="headerlink" href="#id843" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_io</span></code>: Kontekst <code class="docutils literal notranslate"><span class="pre">io_context</span></code> z Boost.Asio, na którym działają wszystkie operacje sieciowe proxy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_guard</span></code>: Obiekt <code class="docutils literal notranslate"><span class="pre">work_guard</span></code>, który zapobiega zakończeniu działania <code class="docutils literal notranslate"><span class="pre">m_io</span></code>, dopóki <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code> jest aktywny.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_working</span></code>: Flaga kontrolująca działanie wątku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_thread</span></code>: Dedykowany wątek dla operacji sieciowych proxy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_maxActiveProxies</span></code>: Maksymalna liczba proxy używanych przez jedną sesję.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_proxies</span></code>: Lista wskaźników na dostępne obiekty <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_sessions</span></code>: Lista wskaźników na aktywne obiekty <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p></li>
</ul>
</section>
<section id="id844">
<h1>Zmienne globalne<a class="headerlink" href="#id844" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_proxy</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code>.</p></li>
</ul>
</section>
<section id="id845">
<h1>Zależności i powiązania<a class="headerlink" href="#id845" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/proxy/proxy_client.h</span></code>: Definicje klas <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> i <code class="docutils literal notranslate"><span class="pre">Session</span></code>, którymi zarządza.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> do tworzenia tunelowanych połączeń.</p></li>
<li><p>Jej API jest dostępne w Lua (przez <code class="docutils literal notranslate"><span class="pre">luafunctions.cpp</span></code>), co pozwala na dynamiczną konfigurację proxy ze skryptów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="proxy-client-h">
<h1>📄 proxy_client.h<a class="headerlink" href="#proxy-client-h" title="Link to this heading">#</a></h1>
</section>
<section id="id846">
<h1>Opis ogólny<a class="headerlink" href="#id846" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">proxy_client.h</span></code> deklaruje dwie kluczowe klasy dla systemu proxy: <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> i <code class="docutils literal notranslate"><span class="pre">Session</span></code>. Te klasy implementują logikę klienta, który łączy się z serwerami proxy i tuneluje przez nie ruch sieciowy.</p>
</section>
<section id="id847">
<h1>Definicje typów<a class="headerlink" href="#id847" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ProxyPacket</span></code>: Alias dla <code class="docutils literal notranslate"><span class="pre">std::vector&lt;uint8_t&gt;</span></code>, reprezentuje pojedynczy pakiet.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ProxyPacketPtr</span></code>: Alias dla <code class="docutils literal notranslate"><span class="pre">std::shared_ptr&lt;ProxyPacket&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Session</span></code>, <code class="docutils literal notranslate"><span class="pre">SessionPtr</span></code>: Wczesna deklaracja i alias dla wskaźnika na <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p></li>
</ul>
</section>
<section id="klasa-proxy">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Proxy</span></code><a class="headerlink" href="#klasa-proxy" title="Link to this heading">#</a></h1>
</section>
<section id="id848">
<h1>Opis semantyczny<a class="headerlink" href="#id848" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Proxy</span></code> reprezentuje pojedyncze, trwałe połączenie z jednym serwerem proxy. Jego zadaniem jest utrzymanie połączenia, monitorowanie jego jakości (ping), przesyłanie pakietów dla wielu sesji oraz raportowanie swojego stanu do <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code>.</p>
</section>
<section id="stale-i-typy-wyliczeniowe">
<h1>Stałe i typy wyliczeniowe<a class="headerlink" href="#stale-i-typy-wyliczeniowe" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CHECK_INTERVAL</span></code>: Interwał (w ms) sprawdzania stanu połączenia i wysyłania pingów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BUFFER_SIZE</span></code>: Rozmiar bufora odczytu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ProxyState</span></code>: Definiuje stany, w jakich może znajdować się połączenie z proxy (np. <code class="docutils literal notranslate"><span class="pre">STATE_NOT_CONNECTED</span></code>, <code class="docutils literal notranslate"><span class="pre">STATE_CONNECTING</span></code>, <code class="docutils literal notranslate"><span class="pre">STATE_CONNECTED</span></code>).</p></li>
</ul>
</section>
<section id="id849">
<h1>Metody publiczne<a class="headerlink" href="#id849" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Proxy(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">start()</span></code></p></td>
<td class="text-left"><p>Inicjuje cykl życia obiektu, dodając go do globalnej puli i uruchamiając pętlę <code class="docutils literal notranslate"><span class="pre">check</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Zamyka połączenie i usuwa obiekt z globalnej puli.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">getPing()</span></code></p></td>
<td class="text-left"><p>Zwraca opóźnienie do serwera proxy, uwzględniając priorytet.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">getRealPing()</span></code></p></td>
<td class="text-left"><p>Zwraca rzeczywiste opóźnienie (bez priorytetu).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isConnected()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli połączenie jest w stanie <code class="docutils literal notranslate"><span class="pre">STATE_CONNECTED</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getDebugInfo()</span></code></p></td>
<td class="text-left"><p>Zwraca informacje diagnostyczne.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isActive()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli przez to proxy przechodzi ruch co najmniej jednej sesji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addSession(...)</span></code></p></td>
<td class="text-left"><p>Wysyła do serwera proxy polecenie utworzenia nowej sesji tunelowania.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">removeSession(...)</span></code></p></td>
<td class="text-left"><p>Wysyła polecenie zamknięcia sesji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">send(...)</span></code></p></td>
<td class="text-left"><p>Dodaje pakiet do kolejki wysyłania do serwera proxy.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="klasa-session">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Session</span></code><a class="headerlink" href="#klasa-session" title="Link to this heading">#</a></h1>
</section>
<section id="id850">
<h1>Opis semantyczny<a class="headerlink" href="#id850" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Session</span></code> reprezentuje pojedynczą sesję klienta z serwerem gry, która jest tunelowana przez jeden lub więcej serwerów proxy. Może działać w dwóch trybach: jako serwer (akceptując lokalne połączenie od klienta gry) lub jako klient (gdy jest tworzona bezpośrednio przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>). Odpowiada za dynamiczne wybieranie najlepszych <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> do wysyłania pakietów oraz za re-asemblację pakietów przychodzących, które mogą docierać z różnych <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> i w różnej kolejności.</p>
</section>
<section id="id851">
<h1>Stałe<a class="headerlink" href="#id851" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CHECK_INTERVAL</span></code>: Interwał (w ms) sprawdzania stanu sesji i wyboru proxy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BUFFER_SIZE</span></code>: Rozmiar bufora.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TIMEOUT</span></code>: Czas (w ms) braku aktywności, po którym sesja jest zamykana.</p></li>
</ul>
</section>
<section id="id852">
<h1>Metody publiczne<a class="headerlink" href="#id852" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Session(...)</span></code></p></td>
<td class="text-left"><p>Konstruktory dla trybu serwera i klienta.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">getId()</span></code></p></td>
<td class="text-left"><p>Zwraca unikalne ID sesji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">start(...)</span></code></p></td>
<td class="text-left"><p>Uruchamia sesję, rozpoczynając pętlę <code class="docutils literal notranslate"><span class="pre">check</span></code> i (w trybie serwera) nasłuchiwanie na pakiety od klienta.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">terminate(...)</span></code></p></td>
<td class="text-left"><p>Zamyka sesję, informując powiązane <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> i klienta.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">onPacket(...)</span></code></p></td>
<td class="text-left"><p>Handler dla pakietów przychodzących <strong>od klienta gry</strong>. Opakowuje je w protokół proxy i wysyła.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">onProxyPacket(...)</span></code></p></td>
<td class="text-left"><p>Handler dla pakietów przychodzących <strong>od serwerów proxy</strong>. Odpakowuje je, sprawdza kolejność i przekazuje do klienta gry.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id853">
<h1>Zależności i powiązania<a class="headerlink" href="#id853" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Boost.Asio</strong>: Fundamentalna zależność do wszystkich operacji sieciowych.</p></li>
<li><p>Klasy <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> i <code class="docutils literal notranslate"><span class="pre">Session</span></code> są ze sobą ściśle powiązane. <code class="docutils literal notranslate"><span class="pre">Session</span></code> utrzymuje zbiór <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>, przez które wysyła dane. <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> jest świadome sesji, które obsługuje.</p></li>
<li><p>Obie klasy są zarządzane przez <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code>.</p></li>
<li><p>W projekcie istnieją globalne, dostępne w wątku <code class="docutils literal notranslate"><span class="pre">io_context</span></code> kontenery <code class="docutils literal notranslate"><span class="pre">g_sessions</span></code> i <code class="docutils literal notranslate"><span class="pre">g_proxies</span></code> do wzajemnej komunikacji.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="proxy-client-cpp">
<h1>📄 proxy_client.cpp<a class="headerlink" href="#proxy-client-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id854">
<h1>Opis ogólny<a class="headerlink" href="#id854" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">proxy_client.cpp</span></code> zawiera implementację logiki dla klas <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> i <code class="docutils literal notranslate"><span class="pre">Session</span></code>, które razem tworzą system klienta proxy. Kod jest w pełni asynchroniczny i oparty na Boost.Asio.</p>
</section>
<section id="id855">
<h1>Zmienne globalne<a class="headerlink" href="#id855" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_sessions</span></code>: Globalna mapa (<code class="docutils literal notranslate"><span class="pre">std::map</span></code>) przechowująca słabe wskaźniki (<code class="docutils literal notranslate"><span class="pre">std::weak_ptr</span></code>) do aktywnych sesji, indeksowane po ich ID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g_proxies</span></code>: Globalny zbiór (<code class="docutils literal notranslate"><span class="pre">std::set</span></code>) przechowujący wskaźniki do aktywnych obiektów <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UID</span></code>: Unikalny identyfikator tej instancji klienta, używany w pakietach ping.</p></li>
</ul>
</section>
<section id="klasa-proxy-implementacja">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> (implementacja)<a class="headerlink" href="#klasa-proxy-implementacja" title="Link to this heading">#</a></h1>
</section>
<section id="void-proxy-check">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::check(...)</span></code><a class="headerlink" href="#void-proxy-check" title="Link to this heading">#</a></h1>
<p>Główna metoda cyklu życia <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>. Działa jak maszyna stanów, wywoływana cyklicznie przez <code class="docutils literal notranslate"><span class="pre">m_timer</span></code>.</p>
<ul class="simple">
<li><p>W stanie <code class="docutils literal notranslate"><span class="pre">STATE_NOT_CONNECTED</span></code>, inicjuje <code class="docutils literal notranslate"><span class="pre">connect()</span></code>.</p></li>
<li><p>W stanie <code class="docutils literal notranslate"><span class="pre">STATE_CONNECTING</span></code>, sprawdza timeout dla połączenia.</p></li>
<li><p>W stanie <code class="docutils literal notranslate"><span class="pre">STATE_CONNECTED</span></code>, wysyła pakiety ping, jeśli nie oczekuje na odpowiedź.</p></li>
<li><p>W stanie <code class="docutils literal notranslate"><span class="pre">STATE_CONNECTING_WAIT_FOR_PING</span></code>, czeka na pierwszą odpowiedź ping.</p></li>
</ul>
</section>
<section id="void-proxy-connect">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::connect()</span></code><a class="headerlink" href="#void-proxy-connect" title="Link to this heading">#</a></h1>
<p>Asynchronicznie rozwiązuje nazwę hosta, a następnie łączy się z serwerem proxy. Po pomyślnym połączeniu, ustawia opcje gniazda (<code class="docutils literal notranslate"><span class="pre">no_delay</span></code>, rozmiary buforów), rozpoczyna odczyt nagłówków i wysyła pierwszy ping.</p>
</section>
<section id="void-proxy-disconnect">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::disconnect()</span></code><a class="headerlink" href="#void-proxy-disconnect" title="Link to this heading">#</a></h1>
<p>Zamyka gniazdo i resetuje stan do <code class="docutils literal notranslate"><span class="pre">STATE_NOT_CONNECTED</span></code>.</p>
</section>
<section id="void-proxy-ping">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::ping()</span></code><a class="headerlink" href="#void-proxy-ping" title="Link to this heading">#</a></h1>
<p>Wysyła pakiet kontrolny „ping” do serwera proxy. Pakiet zawiera unikalne ID klienta (<code class="docutils literal notranslate"><span class="pre">UID</span></code>) i ostatni zmierzony ping.</p>
</section>
<section id="void-proxy-onping-uint32-t-packetid">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::onPing(uint32_t</span> <span class="pre">packetId)</span></code><a class="headerlink" href="#void-proxy-onping-uint32-t-packetid" title="Link to this heading">#</a></h1>
<p>Handler odpowiedzi na ping. Oblicza nowy ping na podstawie czasu wysłania i odebrania pakietu. Jeśli to był pierwszy ping, zmienia stan na <code class="docutils literal notranslate"><span class="pre">STATE_CONNECTED</span></code>.</p>
</section>
<section id="void-proxy-readheader-i-onheader">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::readHeader()</span></code> i <code class="docutils literal notranslate"><span class="pre">onHeader(...)</span></code><a class="headerlink" href="#void-proxy-readheader-i-onheader" title="Link to this heading">#</a></h1>
<p>Implementują dwuetapowy odczyt pakietu: najpierw odczytywany jest 2-bajtowy nagłówek z rozmiarem, a następnie reszta pakietu.</p>
</section>
<section id="void-proxy-onpacket">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::onPacket(...)</span></code><a class="headerlink" href="#void-proxy-onpacket" title="Link to this heading">#</a></h1>
<p>Przetwarza przychodzący pakiet. Na podstawie <code class="docutils literal notranslate"><span class="pre">sessionId</span></code> decyduje, czy jest to pakiet danych dla sesji, czy pakiet kontrolny (ping, zamknięcie sesji). Znajduje odpowiednią sesję w <code class="docutils literal notranslate"><span class="pre">g_sessions</span></code> i przekazuje jej dane.</p>
</section>
<section id="void-proxy-send">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::send(...)</span></code><a class="headerlink" href="#void-proxy-send" title="Link to this heading">#</a></h1>
<p>Implementuje kolejkę wysyłania. Dodaje pakiet do <code class="docutils literal notranslate"><span class="pre">m_sendQueue</span></code> i rozpoczyna operację <code class="docutils literal notranslate"><span class="pre">async_write</span></code>, jeśli kolejka była pusta.</p>
</section>
<section id="klasa-session-implementacja">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">Session</span></code> (implementacja)<a class="headerlink" href="#klasa-session-implementacja" title="Link to this heading">#</a></h1>
</section>
<section id="void-session-start-int-maxconnections">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::start(int</span> <span class="pre">maxConnections)</span></code><a class="headerlink" href="#void-session-start-int-maxconnections" title="Link to this heading">#</a></h1>
<p>Dodaje sesję do globalnej mapy <code class="docutils literal notranslate"><span class="pre">g_sessions</span></code>, uruchamia pętlę <code class="docutils literal notranslate"><span class="pre">check</span></code> i, w trybie serwera, rozpoczyna odczyt danych od klienta gry.</p>
</section>
<section id="void-session-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::terminate(...)</span></code><a class="headerlink" href="#void-session-terminate" title="Link to this heading">#</a></h1>
<p>Zamyka sesję, informuje wszystkie powiązane <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> o zamknięciu, zamyka gniazdo (jeśli jest) i wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> rozłączenia.</p>
</section>
<section id="void-session-check">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::check(...)</span></code><a class="headerlink" href="#void-session-check" title="Link to this heading">#</a></h1>
<p>Metoda cykliczna. Sprawdza timeout braku aktywności i wywołuje <code class="docutils literal notranslate"><span class="pre">selectProxies</span></code> w celu optymalizacji routingu.</p>
</section>
<section id="void-session-selectproxies">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::selectProxies()</span></code><a class="headerlink" href="#void-session-selectproxies" title="Link to this heading">#</a></h1>
<p>Inteligentny algorytm wyboru proxy.</p>
<ol class="arabic simple">
<li><p>Iteruje po wszystkich globalnie dostępnych, połączonych <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>.</p></li>
<li><p>Znajduje najlepsze <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>, które nie jest jeszcze używane przez tę sesję.</p></li>
<li><p>Jeśli liczba aktywnych proxy dla tej sesji jest mniejsza niż <code class="docutils literal notranslate"><span class="pre">m_maxConnections</span></code>, dodaje najlepsze znalezione <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>.</p></li>
<li><p>Jeśli liczba jest równa <code class="docutils literal notranslate"><span class="pre">m_maxConnections</span></code>, a znalezione <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> jest znacznie lepsze niż najgorsze z aktualnie używanych, zastępuje najgorsze nowym.</p></li>
<li><p>Po dodaniu nowego <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>, wysyła do niego wszystkie pakiety z kolejki <code class="docutils literal notranslate"><span class="pre">m_proxySendQueue</span></code> (pakiety, które mogły zostać utracone przez poprzednie <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>).</p></li>
</ol>
</section>
<section id="void-session-onproxypacket">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::onProxyPacket(...)</span></code><a class="headerlink" href="#void-session-onproxypacket" title="Link to this heading">#</a></h1>
<p>Handler dla pakietów przychodzących od proxy.</p>
<ul class="simple">
<li><p>Sprawdza numer sekwencyjny (<code class="docutils literal notranslate"><span class="pre">packetId</span></code>). Odrzuca stare pakiety.</p></li>
<li><p>Usuwa z <code class="docutils literal notranslate"><span class="pre">m_proxySendQueue</span></code> pakiety wychodzące, których otrzymanie potwierdził serwer proxy (<code class="docutils literal notranslate"><span class="pre">lastRecivedPacketId</span></code>).</p></li>
<li><p>Dodaje przychodzący pakiet do kolejki <code class="docutils literal notranslate"><span class="pre">m_sendQueue</span></code> (która tutaj działa jako bufor odbiorczy do re-asemblacji).</p></li>
<li><p>Jeśli pakiet jest tym, na który czeka (<code class="docutils literal notranslate"><span class="pre">packetId</span> <span class="pre">==</span> <span class="pre">m_inputPacketId</span></code>), przetwarza go (i wszystkie następne w kolejce), wywołując <code class="docutils literal notranslate"><span class="pre">m_recvCallback</span></code> lub wysyłając do klienta gry.</p></li>
</ul>
</section>
<section id="void-session-onpacket">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::onPacket(...)</span></code><a class="headerlink" href="#void-session-onpacket" title="Link to this heading">#</a></h1>
<p>Handler dla pakietów przychodzących od klienta gry.</p>
<ol class="arabic simple">
<li><p>Generuje nowy numer sekwencyjny (<code class="docutils literal notranslate"><span class="pre">m_outputPacketId</span></code>).</p></li>
<li><p>Opakowuje pakiet w nagłówek protokołu proxy.</p></li>
<li><p>Dodaje opakowany pakiet do <code class="docutils literal notranslate"><span class="pre">m_proxySendQueue</span></code> (bufor do retransmisji).</p></li>
<li><p>Wysyła pakiet do wszystkich aktywnych <code class="docutils literal notranslate"><span class="pre">Proxy</span></code>.</p></li>
</ol>
</section>
<hr class="docutils" />
<section id="combinedsoundsource-cpp">
<h1>📄 combinedsoundsource.cpp<a class="headerlink" href="#combinedsoundsource-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id856">
<h1>Opis ogólny<a class="headerlink" href="#id856" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">combinedsoundsource.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code>, która jest specjalnym rodzajem źródła dźwięku.</p>
</section>
<section id="klasa-combinedsoundsource">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code><a class="headerlink" href="#klasa-combinedsoundsource" title="Link to this heading">#</a></h1>
</section>
<section id="id857">
<h1>Opis semantyczny<a class="headerlink" href="#id857" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code> działa jak kontener na wiele innych obiektów <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code>. Wszystkie operacje wykonane na <code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code> (np. <code class="docutils literal notranslate"><span class="pre">play()</span></code>, <code class="docutils literal notranslate"><span class="pre">stop()</span></code>, <code class="docutils literal notranslate"><span class="pre">setGain()</span></code>) są delegowane i wykonywane na każdym z podrzędnych źródeł dźwięku, które przechowuje. Jest to użyteczne do tworzenia złożonych efektów dźwiękowych lub do implementacji obejść (workarounds), jak w przypadku problemu z dźwiękiem stereo na Linuksie (gdzie dźwięk stereo jest symulowany przez dwa źródła mono).</p>
</section>
<section id="combinedsoundsource-combinedsoundsource">
<h1><code class="docutils literal notranslate"><span class="pre">CombinedSoundSource::CombinedSoundSource()</span></code><a class="headerlink" href="#combinedsoundsource-combinedsoundsource" title="Link to this heading">#</a></h1>
<p>Konstruktor. Wywołuje konstruktor klasy bazowej <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code> z ID 0, ponieważ sam nie reprezentuje rzeczywistego źródła w OpenAL.</p>
</section>
<section id="void-combinedsoundsource-addsource-const-soundsourceptr-source">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CombinedSoundSource::addSource(const</span> <span class="pre">SoundSourcePtr&amp;</span> <span class="pre">source)</span></code><a class="headerlink" href="#void-combinedsoundsource-addsource-const-soundsourceptr-source" title="Link to this heading">#</a></h1>
<p>Dodaje nowe podrzędne źródło dźwięku do wewnętrznego wektora <code class="docutils literal notranslate"><span class="pre">m_sources</span></code>.</p>
</section>
<section id="metody-operacyjne-play-stop-setlooping-setgain-etc">
<h1>Metody operacyjne (<code class="docutils literal notranslate"><span class="pre">play</span></code>, <code class="docutils literal notranslate"><span class="pre">stop</span></code>, <code class="docutils literal notranslate"><span class="pre">setLooping</span></code>, <code class="docutils literal notranslate"><span class="pre">setGain</span></code>, etc.)<a class="headerlink" href="#metody-operacyjne-play-stop-setlooping-setgain-etc" title="Link to this heading">#</a></h1>
<p>Każda z tych metod jest prostą pętlą, która iteruje po wektorze <code class="docutils literal notranslate"><span class="pre">m_sources</span></code> i wywołuje odpowiednią metodę na każdym z podrzędnych obiektów <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">CombinedSoundSource::play</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">SoundSourcePtr</span><span class="o">&amp;</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m_sources</span><span class="p">)</span>
<span class="w">        </span><span class="n">source</span><span class="err">→</span><span class="n">play</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">CombinedSoundSource::setGain</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">gain</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">SoundSourcePtr</span><span class="o">&amp;</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m_sources</span><span class="p">)</span>
<span class="w">        </span><span class="n">source</span><span class="err">→</span><span class="n">setGain</span><span class="p">(</span><span class="n">gain</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ... i tak dalej</span>
</pre></div>
</div>
</section>
<section id="metody-sprawdzajace-stan-isbuffering-isplaying">
<h1>Metody sprawdzające stan (<code class="docutils literal notranslate"><span class="pre">isBuffering</span></code>, <code class="docutils literal notranslate"><span class="pre">isPlaying</span></code>)<a class="headerlink" href="#metody-sprawdzajace-stan-isbuffering-isplaying" title="Link to this heading">#</a></h1>
<p>Zwracają <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli <strong>którekolwiek</strong> z podrzędnych źródeł spełnia dany warunek.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="nf">CombinedSoundSource::isPlaying</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">SoundSourcePtr</span><span class="o">&amp;</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m_sources</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">source</span><span class="err">→</span><span class="n">isPlaying</span><span class="p">())</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="void-combinedsoundsource-update">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CombinedSoundSource::update()</span></code><a class="headerlink" href="#void-combinedsoundsource-update" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana w pętli <code class="docutils literal notranslate"><span class="pre">SoundManager::poll()</span></code>. Wywołuje <code class="docutils literal notranslate"><span class="pre">update()</span></code> na wszystkich podrzędnych źródłach, co jest potrzebne np. do obsługi płynnego wyciszania/zgłaśniania (fading).</p>
</section>
<section id="id858">
<h1>Zależności i powiązania<a class="headerlink" href="#id858" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/combinedsoundsource.h</span></code>: Plik nagłówkowy.</p></li>
<li><p>Używana w <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code> jako obejście problemu z dźwiękiem stereo na Linuksie.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="combinedsoundsource-h">
<h1>📄 combinedsoundsource.h<a class="headerlink" href="#combinedsoundsource-h" title="Link to this heading">#</a></h1>
</section>
<section id="id859">
<h1>Opis ogólny<a class="headerlink" href="#id859" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">combinedsoundsource.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code>, która jest kompozytem wielu źródeł dźwięku, zachowującym się jak jedno.</p>
</section>
<section id="id860">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code><a class="headerlink" href="#id860" title="Link to this heading">#</a></h1>
</section>
<section id="id861">
<h1>Opis semantyczny<a class="headerlink" href="#id861" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code> implementuje wzorzec projektowy „Kompozyt”. Pozwala traktować grupę obiektów <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code> w ten sam sposób, co pojedynczy obiekt. Wszystkie operacje są delegowane do wewnętrznej kolekcji źródeł. Dziedziczy po <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code>, aby zachować zgodność interfejsu.</p>
</section>
<section id="id862">
<h1>Metody publiczne<a class="headerlink" href="#id862" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">CombinedSoundSource()</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">addSource(...)</span></code></p></td>
<td class="text-left"><p>Dodaje podrzędne źródło dźwięku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;...&gt;</span> <span class="pre">getSources()</span></code></p></td>
<td class="text-left"><p>Zwraca listę podrzędnych źródeł.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">play()</span></code>, <code class="docutils literal notranslate"><span class="pre">stop()</span></code>, <code class="docutils literal notranslate"><span class="pre">setLooping()</span></code>, <code class="docutils literal notranslate"><span class="pre">setGain()</span></code>, <code class="docutils literal notranslate"><span class="pre">setPosition()</span></code>, etc.</p></td>
<td class="text-left"><p>Metody delegujące operacje do wszystkich podrzędnych źródeł.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">isBuffering()</span></code>, <code class="docutils literal notranslate"><span class="pre">isPlaying()</span></code></p></td>
<td class="text-left"><p>Sprawdzają stan, zwracając <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli co najmniej jedno podrzędne źródło jest w danym stanie.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id863">
<h1>Metody chronione<a class="headerlink" href="#id863" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">update()</span></code>: Przesłania metodę z <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code> i wywołuje <code class="docutils literal notranslate"><span class="pre">update()</span></code> na wszystkich dzieciach.</p></li>
</ul>
</section>
<section id="id864">
<h1>Zmienne prywatne<a class="headerlink" href="#id864" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_sources</span></code>: Wektor (<code class="docutils literal notranslate"><span class="pre">std::vector</span></code>) przechowujący wskaźniki na podrzędne obiekty <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code>.</p></li>
</ul>
</section>
<section id="id865">
<h1>Zależności i powiązania<a class="headerlink" href="#id865" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundsource.h</span></code>: Klasa bazowa i typ przechowywanych obiektów.</p></li>
<li><p>Jest tworzona i używana przez <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="oggsoundfile-cpp">
<h1>📄 oggsoundfile.cpp<a class="headerlink" href="#oggsoundfile-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id866">
<h1>Opis ogólny<a class="headerlink" href="#id866" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">oggsoundfile.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">OggSoundFile</span></code>, która jest odpowiedzialna za odczytywanie i dekodowanie plików dźwiękowych w formacie Ogg Vorbis.</p>
</section>
<section id="klasa-oggsoundfile">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OggSoundFile</span></code><a class="headerlink" href="#klasa-oggsoundfile" title="Link to this heading">#</a></h1>
</section>
<section id="oggsoundfile-oggsoundfile-const-filestreamptr-filestream">
<h1><code class="docutils literal notranslate"><span class="pre">OggSoundFile::OggSoundFile(const</span> <span class="pre">FileStreamPtr&amp;</span> <span class="pre">fileStream)</span></code><a class="headerlink" href="#oggsoundfile-oggsoundfile-const-filestreamptr-filestream" title="Link to this heading">#</a></h1>
<p>Konstruktor. Wywołuje konstruktor klasy bazowej <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code>.</p>
</section>
<section id="oggsoundfile-oggsoundfile">
<h1><code class="docutils literal notranslate"><span class="pre">OggSoundFile::~OggSoundFile()</span></code><a class="headerlink" href="#oggsoundfile-oggsoundfile" title="Link to this heading">#</a></h1>
<p>Destruktor. Zwalnia zasoby związane z biblioteką Vorbis, wywołując <code class="docutils literal notranslate"><span class="pre">ov_clear()</span></code>.</p>
</section>
<section id="bool-oggsoundfile-prepareogg">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">OggSoundFile::prepareOgg()</span></code><a class="headerlink" href="#bool-oggsoundfile-prepareogg" title="Link to this heading">#</a></h1>
</section>
<section id="id867">
<h1>Opis semantyczny<a class="headerlink" href="#id867" title="Link to this heading">#</a></h1>
<p>Inicjalizuje proces dekodowania pliku Ogg Vorbis.</p>
</section>
<section id="id868">
<h1>Działanie<a class="headerlink" href="#id868" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Tworzy strukturę <code class="docutils literal notranslate"><span class="pre">ov_callbacks</span></code> z wskaźnikami na statyczne metody <code class="docutils literal notranslate"><span class="pre">cb_...</span></code>, które będą używane przez bibliotekę Vorbis do odczytu danych ze strumienia <code class="docutils literal notranslate"><span class="pre">FileStream</span></code>.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">ov_open_callbacks</span></code>, przekazując <code class="docutils literal notranslate"><span class="pre">FileStream</span></code> jako źródło danych.</p></li>
<li><p>Pobiera informacje o pliku (liczba kanałów, częstotliwość próbkowania) za pomocą <code class="docutils literal notranslate"><span class="pre">ov_info</span></code>.</p></li>
<li><p>Zapisuje te informacje w polach klasy bazowej (<code class="docutils literal notranslate"><span class="pre">m_channels</span></code>, <code class="docutils literal notranslate"><span class="pre">m_rate</span></code>).</p></li>
<li><p>Oblicza całkowity rozmiar zdekompresowanych danych za pomocą <code class="docutils literal notranslate"><span class="pre">ov_pcm_total</span></code>.</p></li>
</ol>
</section>
<section id="int-oggsoundfile-read-void-buffer-int-buffersize">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">OggSoundFile::read(void</span> <span class="pre">*buffer,</span> <span class="pre">int</span> <span class="pre">bufferSize)</span></code><a class="headerlink" href="#int-oggsoundfile-read-void-buffer-int-buffersize" title="Link to this heading">#</a></h1>
<p>Odczytuje i dekoduje fragment pliku dźwiękowego do podanego bufora. Wywołuje <code class="docutils literal notranslate"><span class="pre">ov_read</span></code>, która wykonuje całą pracę związaną z dekodowaniem.</p>
</section>
<section id="void-oggsoundfile-reset">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OggSoundFile::reset()</span></code><a class="headerlink" href="#void-oggsoundfile-reset" title="Link to this heading">#</a></h1>
<p>Przewija strumień dźwiękowy na początek za pomocą <code class="docutils literal notranslate"><span class="pre">ov_pcm_seek()</span></code>.</p>
</section>
<section id="statyczne-metody-cb">
<h1>Statyczne metody <code class="docutils literal notranslate"><span class="pre">cb_...</span></code><a class="headerlink" href="#statyczne-metody-cb" title="Link to this heading">#</a></h1>
<p>Są to funkcje zwrotne (callbacks) C, które opakowują metody obiektu <code class="docutils literal notranslate"><span class="pre">FileStream</span></code>, tłumacząc interfejs wymagany przez <code class="docutils literal notranslate"><span class="pre">libvorbisfile</span></code> na interfejs <code class="docutils literal notranslate"><span class="pre">FileStream</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cb_read</span></code>: opakowuje <code class="docutils literal notranslate"><span class="pre">file→read()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cb_seek</span></code>: opakowuje <code class="docutils literal notranslate"><span class="pre">file→seek()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cb_close</span></code>: opakowuje <code class="docutils literal notranslate"><span class="pre">file→close()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cb_tell</span></code>: opakowuje <code class="docutils literal notranslate"><span class="pre">file→tell()</span></code></p></li>
</ul>
</section>
<section id="id869">
<h1>Zależności i powiązania<a class="headerlink" href="#id869" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/oggsoundfile.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><strong>libvorbisfile</strong>: Kluczowa zależność do dekodowania plików Ogg Vorbis.</p></li>
<li><p>Jest tworzona przez <code class="docutils literal notranslate"><span class="pre">SoundFile::loadSoundFile</span></code>, gdy wykryty zostanie plik w formacie Ogg.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id870">
<h1>📄 declarations.h<a class="headerlink" href="#id870" title="Link to this heading">#</a></h1>
</section>
<section id="id871">
<h1>Opis ogólny<a class="headerlink" href="#id871" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">declarations.h</span></code> w module <code class="docutils literal notranslate"><span class="pre">sound</span></code> służy do wczesnych deklaracji klas i definicji typów wskaźników związanych z systemem dźwięku. Jest on kompilowany tylko wtedy, gdy zdefiniowano flagę <code class="docutils literal notranslate"><span class="pre">FW_SOUND</span></code>.</p>
</section>
<section id="id872">
<h1>Wczesne deklaracje<a class="headerlink" href="#id872" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SoundManager</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SoundSource</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SoundFile</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SoundChannel</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OggSoundFile</span></code></p></li>
</ul>
</section>
<section id="id873">
<h1>Definicje typów<a class="headerlink" href="#id873" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SoundSourcePtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SoundFilePtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SoundBufferPtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SoundChannelPtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StreamSoundSourcePtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CombinedSoundSourcePtr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OggSoundFilePtr</span></code></p></li>
</ul>
</section>
<section id="dolaczanie-naglowkow-openal">
<h1>Dołączanie nagłówków OpenAL<a class="headerlink" href="#dolaczanie-naglowkow-openal" title="Link to this heading">#</a></h1>
<p>Plik dołącza nagłówki biblioteki OpenAL (<code class="docutils literal notranslate"><span class="pre">al.h</span></code>, <code class="docutils literal notranslate"><span class="pre">alc.h</span></code>), która jest podstawą całego systemu dźwięku.</p>
</section>
<section id="id874">
<h1>Zależności i powiązania<a class="headerlink" href="#id874" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p>Jest dołączany przez wszystkie pliki nagłówkowe w module <code class="docutils literal notranslate"><span class="pre">sound</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="oggsoundfile-h">
<h1>📄 oggsoundfile.h<a class="headerlink" href="#oggsoundfile-h" title="Link to this heading">#</a></h1>
</section>
<section id="id875">
<h1>Opis ogólny<a class="headerlink" href="#id875" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">oggsoundfile.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">OggSoundFile</span></code>, która jest konkretną implementacją <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code> do obsługi plików w formacie Ogg Vorbis.</p>
</section>
<section id="id876">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">OggSoundFile</span></code><a class="headerlink" href="#id876" title="Link to this heading">#</a></h1>
</section>
<section id="id877">
<h1>Opis semantyczny<a class="headerlink" href="#id877" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">OggSoundFile</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code> i implementuje jej wirtualne metody, używając biblioteki <code class="docutils literal notranslate"><span class="pre">libvorbisfile</span></code> do dekodowania danych. Enkapsuluje ona strukturę <code class="docutils literal notranslate"><span class="pre">OggVorbis_File</span></code> i dostarcza <code class="docutils literal notranslate"><span class="pre">callbacki</span></code> C, które pozwalają bibliotece Vorbis na odczyt danych ze strumienia <code class="docutils literal notranslate"><span class="pre">FileStream</span></code>.</p>
</section>
<section id="id878">
<h1>Metody publiczne<a class="headerlink" href="#id878" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OggSoundFile(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">~OggSoundFile()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">prepareOgg()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje dekoder Vorbis i odczytuje metadane pliku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">read(...)</span></code></p></td>
<td class="text-left"><p>Odczytuje i dekoduje fragment danych.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">reset()</span></code></p></td>
<td class="text-left"><p>Przewija strumień na początek.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="metody-prywatne-statyczne">
<h1>Metody prywatne (statyczne)<a class="headerlink" href="#metody-prywatne-statyczne" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cb_read</span></code>, <code class="docutils literal notranslate"><span class="pre">cb_seek</span></code>, <code class="docutils literal notranslate"><span class="pre">cb_close</span></code>, <code class="docutils literal notranslate"><span class="pre">cb_tell</span></code>: Statyczne funkcje zwrotne dla <code class="docutils literal notranslate"><span class="pre">libvorbisfile</span></code>.</p></li>
</ul>
</section>
<section id="id879">
<h1>Zmienne prywatne<a class="headerlink" href="#id879" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_vorbisFile</span></code>: Uchwyt do struktur <code class="docutils literal notranslate"><span class="pre">libvorbisfile</span></code>.</p></li>
</ul>
</section>
<section id="id880">
<h1>Zależności i powiązania<a class="headerlink" href="#id880" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundfile.h</span></code>: Klasa bazowa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vorbis/vorbisfile.h</span></code>: Nagłówek biblioteki Vorbis.</p></li>
<li><p>Jest tworzona przez <code class="docutils literal notranslate"><span class="pre">SoundFile::loadSoundFile</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="soundbuffer-cpp">
<h1>📄 soundbuffer.cpp<a class="headerlink" href="#soundbuffer-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id881">
<h1>Opis ogólny<a class="headerlink" href="#id881" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">soundbuffer.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code>, która jest opakowaniem na bufor audio w OpenAL.</p>
</section>
<section id="klasa-soundbuffer">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code><a class="headerlink" href="#klasa-soundbuffer" title="Link to this heading">#</a></h1>
</section>
<section id="id882">
<h1>Opis semantyczny<a class="headerlink" href="#id882" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code> reprezentuje blok danych audio (próbek dźwiękowych) załadowany do pamięci, gotowy do odtworzenia przez OpenAL. Każdy <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code> ma unikalne ID w OpenAL. Jest używany do przechowywania krótkich, często odtwarzanych dźwięków, które opłaca się trzymać w pamięci.</p>
</section>
<section id="soundbuffer-soundbuffer">
<h1><code class="docutils literal notranslate"><span class="pre">SoundBuffer::SoundBuffer()</span></code><a class="headerlink" href="#soundbuffer-soundbuffer" title="Link to this heading">#</a></h1>
<p>Konstruktor. Generuje nowy bufor OpenAL za pomocą <code class="docutils literal notranslate"><span class="pre">alGenBuffers()</span></code> i zapisuje jego ID.</p>
</section>
<section id="id883">
<h1><code class="docutils literal notranslate"><span class="pre">SoundBuffer::~SoundBuffer()</span></code><a class="headerlink" href="#id883" title="Link to this heading">#</a></h1>
<p>Destruktor. Zwalnia bufor OpenAL za pomocą <code class="docutils literal notranslate"><span class="pre">alDeleteBuffers()</span></code>.</p>
</section>
<section id="bool-soundbuffer-fillbuffer-const-soundfileptr-soundfile">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">SoundBuffer::fillBuffer(const</span> <span class="pre">SoundFilePtr&amp;</span> <span class="pre">soundFile)</span></code><a class="headerlink" href="#bool-soundbuffer-fillbuffer-const-soundfileptr-soundfile" title="Link to this heading">#</a></h1>
<p>Wypełnia bufor danymi z obiektu <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code>.</p>
<ol class="arabic simple">
<li><p>Pobiera format, rozmiar i częstotliwość próbkowania z <code class="docutils literal notranslate"><span class="pre">soundFile</span></code>.</p></li>
<li><p>Odczytuje całą zawartość pliku dźwiękowego do tymczasowego bufora w RAM.</p></li>
<li><p>Wywołuje drugą wersję <code class="docutils literal notranslate"><span class="pre">fillBuffer</span></code> w celu przesłania danych do OpenAL.</p></li>
</ol>
</section>
<section id="bool-soundbuffer-fillbuffer-alenum-sampleformat-const-databuffer-char-data-int-size-int-rate">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">SoundBuffer::fillBuffer(ALenum</span> <span class="pre">sampleFormat,</span> <span class="pre">const</span> <span class="pre">DataBuffer&lt;char&gt;&amp;</span> <span class="pre">data,</span> <span class="pre">int</span> <span class="pre">size,</span> <span class="pre">int</span> <span class="pre">rate)</span></code><a class="headerlink" href="#bool-soundbuffer-fillbuffer-alenum-sampleformat-const-databuffer-char-data-int-size-int-rate" title="Link to this heading">#</a></h1>
<p>Przesyła surowe dane próbek dźwiękowych do bufora OpenAL za pomocą <code class="docutils literal notranslate"><span class="pre">alBufferData()</span></code>.</p>
</section>
<section id="id884">
<h1>Zależności i powiązania<a class="headerlink" href="#id884" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundbuffer.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundfile.h</span></code>: Do pobierania danych z plików.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>, który przechowuje je w cache.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code> jako źródło danych do odtwarzania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="soundbuffer-h">
<h1>📄 soundbuffer.h<a class="headerlink" href="#soundbuffer-h" title="Link to this heading">#</a></h1>
</section>
<section id="id885">
<h1>Opis ogólny<a class="headerlink" href="#id885" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">soundbuffer.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code>, która jest opakowaniem na bufor audio OpenAL.</p>
</section>
<section id="id886">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code><a class="headerlink" href="#id886" title="Link to this heading">#</a></h1>
</section>
<section id="id887">
<h1>Opis semantyczny<a class="headerlink" href="#id887" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code> enkapsuluje ID bufora OpenAL i dostarcza metody do wypełniania go danymi dźwiękowymi. Jest to obiekt przechowujący dane audio, który może być następnie przypisany do jednego lub wielu <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code> w celu odtwarzania.</p>
</section>
<section id="id888">
<h1>Metody publiczne<a class="headerlink" href="#id888" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">SoundBuffer()</span></code> / <code class="docutils literal notranslate"><span class="pre">~SoundBuffer()</span></code></p></td>
<td class="text-left"><p>Konstruktor i destruktor zarządzające zasobem OpenAL.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">fillBuffer(const</span> <span class="pre">SoundFilePtr&amp;</span> <span class="pre">soundFile)</span></code></p></td>
<td class="text-left"><p>Wypełnia bufor danymi z pliku dźwiękowego.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">fillBuffer(...)</span></code></p></td>
<td class="text-left"><p>Wypełnia bufor surowymi danymi z pamięci.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">getBufferId()</span></code></p></td>
<td class="text-left"><p>Zwraca ID bufora w OpenAL.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id889">
<h1>Zmienne prywatne<a class="headerlink" href="#id889" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_bufferId</span></code>: ID (uchwyt) bufora w OpenAL.</p></li>
</ul>
</section>
<section id="id890">
<h1>Zależności i powiązania<a class="headerlink" href="#id890" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/declarations.h</span></code>: Definicje typów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/databuffer.h</span></code>: Do pracy z buforami danych.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="soundfile-cpp">
<h1>📄 soundfile.cpp<a class="headerlink" href="#soundfile-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id891">
<h1>Opis ogólny<a class="headerlink" href="#id891" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">soundfile.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code>, która jest abstrakcyjną klasą bazową do odczytu różnych formatów plików dźwiękowych.</p>
</section>
<section id="klasa-soundfile">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code><a class="headerlink" href="#klasa-soundfile" title="Link to this heading">#</a></h1>
</section>
<section id="soundfile-soundfile-const-filestreamptr-filestream">
<h1><code class="docutils literal notranslate"><span class="pre">SoundFile::SoundFile(const</span> <span class="pre">FileStreamPtr&amp;</span> <span class="pre">fileStream)</span></code><a class="headerlink" href="#soundfile-soundfile-const-filestreamptr-filestream" title="Link to this heading">#</a></h1>
<p>Konstruktor. Zapisuje wskaźnik do strumienia pliku.</p>
</section>
<section id="soundfileptr-soundfile-loadsoundfile-const-std-string-filename">
<h1><code class="docutils literal notranslate"><span class="pre">SoundFilePtr</span> <span class="pre">SoundFile::loadSoundFile(const</span> <span class="pre">std::string&amp;</span> <span class="pre">filename)</span></code><a class="headerlink" href="#soundfileptr-soundfile-loadsoundfile-const-std-string-filename" title="Link to this heading">#</a></h1>
</section>
<section id="id892">
<h1>Opis semantyczny<a class="headerlink" href="#id892" title="Link to this heading">#</a></h1>
<p>Statyczna metoda fabryczna, która próbuje załadować plik dźwiękowy. Automatycznie wykrywa format pliku i tworzy odpowiednią podklasę <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code>.</p>
</section>
<section id="id893">
<h1>Działanie<a class="headerlink" href="#id893" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Otwiera plik za pomocą <code class="docutils literal notranslate"><span class="pre">g_resources.openFile()</span></code>.</p></li>
<li><p>Odczytuje pierwsze 4 bajty („magiczne bajty”), aby zidentyfikować format.</p></li>
<li><p>Jeśli plik to Ogg Vorbis (zaczyna się od „OggS”), tworzy instancję <code class="docutils literal notranslate"><span class="pre">OggSoundFile</span></code> i wywołuje jej metodę <code class="docutils literal notranslate"><span class="pre">prepareOgg()</span></code>.</p></li>
<li><p>W przypadku nieznanego formatu rzuca wyjątek.</p></li>
</ol>
</section>
<section id="alenum-soundfile-getsampleformat">
<h1><code class="docutils literal notranslate"><span class="pre">ALenum</span> <span class="pre">SoundFile::getSampleFormat()</span></code><a class="headerlink" href="#alenum-soundfile-getsampleformat" title="Link to this heading">#</a></h1>
<p>Konwertuje wewnętrzne informacje o liczbie kanałów i bitach na sekundę na format zrozumiały dla OpenAL (np. <code class="docutils literal notranslate"><span class="pre">AL_FORMAT_STEREO16</span></code>).</p>
</section>
<section id="id894">
<h1>Zależności i powiązania<a class="headerlink" href="#id894" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundfile.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/oggsoundfile.h</span></code>: Implementacja dla formatu Ogg.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/resourcemanager.h</span></code>: Do otwierania plików.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code> i <code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code> jako źródło danych audio.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="soundchannel-cpp">
<h1>📄 soundchannel.cpp<a class="headerlink" href="#soundchannel-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id895">
<h1>Opis ogólny<a class="headerlink" href="#id895" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">soundchannel.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">SoundChannel</span></code>, która reprezentuje kanał dźwiękowy, umożliwiający odtwarzanie dźwięków w sposób zorganizowany i kontrolowany.</p>
</section>
<section id="klasa-soundchannel">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SoundChannel</span></code><a class="headerlink" href="#klasa-soundchannel" title="Link to this heading">#</a></h1>
</section>
<section id="soundsourceptr-soundchannel-play">
<h1><code class="docutils literal notranslate"><span class="pre">SoundSourcePtr</span> <span class="pre">SoundChannel::play(...)</span></code><a class="headerlink" href="#soundsourceptr-soundchannel-play" title="Link to this heading">#</a></h1>
<p>Odtwarza nowy dźwięk na tym kanale. Jeśli inny dźwięk jest już odtwarzany, zostaje on zatrzymany. Wywołuje <code class="docutils literal notranslate"><span class="pre">g_sounds.play</span></code>, aby utworzyć i uruchomić nowe źródło dźwięku.</p>
</section>
<section id="void-soundchannel-stop-float-fadetime">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundChannel::stop(float</span> <span class="pre">fadetime)</span></code><a class="headerlink" href="#void-soundchannel-stop-float-fadetime" title="Link to this heading">#</a></h1>
<p>Zatrzymuje bieżący dźwięk i czyści kolejkę. Opcjonalnie może to zrobić z efektem wyciszania (<code class="docutils literal notranslate"><span class="pre">fadetime</span></code>).</p>
</section>
<section id="void-soundchannel-enqueue">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundChannel::enqueue(...)</span></code><a class="headerlink" href="#void-soundchannel-enqueue" title="Link to this heading">#</a></h1>
<p>Dodaje plik dźwiękowy do kolejki odtwarzania. Gdy bieżący dźwięk się skończy, <code class="docutils literal notranslate"><span class="pre">update()</span></code> automatycznie odtworzy następny z kolejki. Kolejka jest tasowana, aby zapewnić losową kolejność odtwarzania.</p>
</section>
<section id="void-soundchannel-update">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundChannel::update()</span></code><a class="headerlink" href="#void-soundchannel-update" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana cyklicznie przez <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>.</p>
<ul class="simple">
<li><p>Sprawdza, czy bieżące źródło dźwięku zakończyło odtwarzanie. Jeśli tak, zwalnia je.</p></li>
<li><p>Jeśli nie ma bieżącego źródła, a kolejka nie jest pusta, pobiera następny utwór z kolejki i go odtwarza.</p></li>
</ul>
</section>
<section id="void-soundchannel-setenabled-bool-enable">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundChannel::setEnabled(bool</span> <span class="pre">enable)</span></code><a class="headerlink" href="#void-soundchannel-setenabled-bool-enable" title="Link to this heading">#</a></h1>
<p>Włącza lub wyłącza kanał. Wyłączenie kanału natychmiast zatrzymuje odtwarzany dźwięk i zapobiega odtwarzaniu nowych.</p>
</section>
<section id="void-soundchannel-setgain-float-gain">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundChannel::setGain(float</span> <span class="pre">gain)</span></code><a class="headerlink" href="#void-soundchannel-setgain-float-gain" title="Link to this heading">#</a></h1>
<p>Ustawia ogólną głośność dla kanału. Głośność ta jest mnożona przez głośność poszczególnych dźwięków odtwarzanych na tym kanale.</p>
</section>
<section id="id896">
<h1>Zależności i powiązania<a class="headerlink" href="#id896" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundchannel.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/streamsoundsource.h</span></code>: Używane do efektów wyciszania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundmanager.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">g_sounds</span></code> do tworzenia źródeł dźwięku.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="soundchannel-h">
<h1>📄 soundchannel.h<a class="headerlink" href="#soundchannel-h" title="Link to this heading">#</a></h1>
</section>
<section id="id897">
<h1>Opis ogólny<a class="headerlink" href="#id897" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">soundchannel.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">SoundChannel</span></code>, która reprezentuje logiczny kanał audio.</p>
</section>
<section id="id898">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SoundChannel</span></code><a class="headerlink" href="#id898" title="Link to this heading">#</a></h1>
</section>
<section id="id899">
<h1>Opis semantyczny<a class="headerlink" href="#id899" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">SoundChannel</span></code> pozwala na grupowanie i zarządzanie odtwarzaniem dźwięków. Każdy kanał może odtwarzać tylko jeden dźwięk naraz, ale posiada kolejkę, która pozwala na automatyczne odtwarzanie kolejnych utworów. Umożliwia globalną kontrolę nad grupą dźwięków, np. ustawienie głośności dla całej muzyki w grze.</p>
</section>
<section id="id900">
<h1>Metody publiczne<a class="headerlink" href="#id900" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">SoundChannel(int</span> <span class="pre">id)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">SoundSourcePtr</span> <span class="pre">play(...)</span></code></p></td>
<td class="text-left"><p>Odtwarza dźwięk na tym kanale, przerywając poprzedni.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">stop(...)</span></code></p></td>
<td class="text-left"><p>Zatrzymuje odtwarzanie i czyści kolejkę.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">enqueue(...)</span></code></p></td>
<td class="text-left"><p>Dodaje dźwięk do kolejki odtwarzania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">enable()</span></code> / <code class="docutils literal notranslate"><span class="pre">disable()</span></code></p></td>
<td class="text-left"><p>Włącza/wyłącza kanał.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setGain(float</span> <span class="pre">gain)</span></code></p></td>
<td class="text-left"><p>Ustawia głośność kanału.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">getGain()</span></code></p></td>
<td class="text-left"><p>Zwraca głośność kanału.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isEnabled()</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy kanał jest włączony.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">getId()</span></code></p></td>
<td class="text-left"><p>Zwraca ID kanału.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id901">
<h1>Metody chronione<a class="headerlink" href="#id901" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">update()</span></code>: Metoda cykliczna do zarządzania kolejką.</p></li>
</ul>
</section>
<section id="id902">
<h1>Zmienne prywatne<a class="headerlink" href="#id902" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_queue</span></code>: Kolejka (<code class="docutils literal notranslate"><span class="pre">std::deque</span></code>) utworów do odtworzenia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_currentSource</span></code>: Wskaźnik na aktualnie odtwarzane źródło dźwięku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_enabled</span></code>: Flaga włączenia kanału.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_id</span></code>: ID kanału.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_gain</span></code>: Głośność kanału.</p></li>
</ul>
</section>
<section id="id903">
<h1>Zależności i powiązania<a class="headerlink" href="#id903" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundsource.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">SoundSourcePtr</span></code>.</p></li>
<li><p>Jest oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, co udostępnia jej API w Lua.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="soundfile-h">
<h1>📄 soundfile.h<a class="headerlink" href="#soundfile-h" title="Link to this heading">#</a></h1>
</section>
<section id="id904">
<h1>Opis ogólny<a class="headerlink" href="#id904" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">soundfile.h</span></code> deklaruje abstrakcyjną klasę bazową <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code>, która definiuje wspólny interfejs do odczytu danych z różnych formatów plików dźwiękowych.</p>
</section>
<section id="id905">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code><a class="headerlink" href="#id905" title="Link to this heading">#</a></h1>
</section>
<section id="id906">
<h1>Opis semantyczny<a class="headerlink" href="#id906" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">SoundFile</span></code> jest abstrakcją nad plikiem dźwiękowym. Ukrywa szczegóły konkretnego formatu (np. Ogg, WAV), dostarczając ujednolicony sposób na odczytywanie zdekompresowanych próbek audio.</p>
</section>
<section id="id907">
<h1>Metody publiczne<a class="headerlink" href="#id907" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">SoundFile(...)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">SoundFilePtr</span> <span class="pre">loadSoundFile(...)</span></code></p></td>
<td class="text-left"><p>Statyczna metoda fabryczna, która wykrywa format pliku i tworzy odpowiednią podklasę.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">int</span> <span class="pre">read(...)</span> <span class="pre">=</span> <span class="pre">0</span></code></p></td>
<td class="text-left"><p>Czysto wirtualna metoda do odczytu zdekompresowanych danych.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">reset()</span> <span class="pre">=</span> <span class="pre">0</span></code></p></td>
<td class="text-left"><p>Czysto wirtualna metoda do przewinięcia strumienia na początek.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">eof()</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy osiągnięto koniec pliku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ALenum</span> <span class="pre">getSampleFormat()</span></code></p></td>
<td class="text-left"><p>Konwertuje format (kanały, bity) na format OpenAL.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">getChannels()</span></code>, <code class="docutils literal notranslate"><span class="pre">getRate()</span></code>, <code class="docutils literal notranslate"><span class="pre">getBpp()</span></code>, <code class="docutils literal notranslate"><span class="pre">getSize()</span></code>, <code class="docutils literal notranslate"><span class="pre">getName()</span></code></p></td>
<td class="text-left"><p>Gettery dla metadanych pliku.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id908">
<h1>Zmienne chronione<a class="headerlink" href="#id908" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_file</span></code>: Wskaźnik na <code class="docutils literal notranslate"><span class="pre">FileStream</span></code>, z którego odczytywane są dane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_channels</span></code>, <code class="docutils literal notranslate"><span class="pre">m_rate</span></code>, <code class="docutils literal notranslate"><span class="pre">m_bps</span></code>, <code class="docutils literal notranslate"><span class="pre">m_size</span></code>: Metadane dźwięku.</p></li>
</ul>
</section>
<section id="id909">
<h1>Zależności i powiązania<a class="headerlink" href="#id909" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/declarations.h</span></code>: Deklaracje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/filestream.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">FileStream</span></code> jako źródła danych.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">OggSoundFile</span></code> i potencjalnie innych klas dla różnych formatów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="soundmanager-cpp">
<h1>📄 soundmanager.cpp<a class="headerlink" href="#soundmanager-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id910">
<h1>Opis ogólny<a class="headerlink" href="#id910" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">soundmanager.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_sounds</span></code>) i centralnym punktem zarządzania całym podsystemem dźwięku.</p>
</section>
<section id="id911">
<h1>Zmienne globalne<a class="headerlink" href="#id911" title="Link to this heading">#</a></h1>
</section>
<section id="g-sounds">
<h1><code class="docutils literal notranslate"><span class="pre">g_sounds</span></code><a class="headerlink" href="#g-sounds" title="Link to this heading">#</a></h1>
<p>Globalna instancja <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>.</p>
</section>
<section id="klasa-soundmanager">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code><a class="headerlink" href="#klasa-soundmanager" title="Link to this heading">#</a></h1>
</section>
<section id="void-soundmanager-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::init()</span></code><a class="headerlink" href="#void-soundmanager-init" title="Link to this heading">#</a></h1>
<p>Inicjalizuje system dźwięku.</p>
<ol class="arabic simple">
<li><p>Otwiera domyślne urządzenie audio za pomocą <code class="docutils literal notranslate"><span class="pre">alcOpenDevice</span></code>.</p></li>
<li><p>Tworzy kontekst OpenAL za pomocą <code class="docutils literal notranslate"><span class="pre">alcCreateContext</span></code>.</p></li>
<li><p>Ustawia ten kontekst jako aktywny za pomocą <code class="docutils literal notranslate"><span class="pre">alcMakeContextCurrent</span></code>.</p></li>
</ol>
</section>
<section id="void-soundmanager-terminate">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::terminate()</span></code><a class="headerlink" href="#void-soundmanager-terminate" title="Link to this heading">#</a></h1>
<p>Zamyka system dźwięku. Zwalnia wszystkie zasoby (źródła, bufory, kanały), niszczy kontekst i zamyka urządzenie audio.</p>
</section>
<section id="void-soundmanager-poll">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::poll()</span></code><a class="headerlink" href="#void-soundmanager-poll" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana cyklicznie w głównej pętli aplikacji.</p>
<ul class="simple">
<li><p>Aktualizuje wszystkie aktywne źródła dźwięku (<code class="docutils literal notranslate"><span class="pre">m_sources</span></code>).</p></li>
<li><p>Aktualizuje wszystkie kanały dźwiękowe (<code class="docutils literal notranslate"><span class="pre">m_channels</span></code>), co pozwala na zarządzanie kolejkami odtwarzania.</p></li>
<li><p>Przetwarza asynchronicznie ładowane pliki dźwiękowe.</p></li>
</ul>
</section>
<section id="void-soundmanager-setaudioenabled-bool-enable">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::setAudioEnabled(bool</span> <span class="pre">enable)</span></code><a class="headerlink" href="#void-soundmanager-setaudioenabled-bool-enable" title="Link to this heading">#</a></h1>
<p>Globalnie włącza lub wyłącza dźwięk. Wyłączenie powoduje zatrzymanie wszystkich odtwarzanych dźwięków.</p>
</section>
<section id="void-soundmanager-preload-std-string-filename">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::preload(std::string</span> <span class="pre">filename)</span></code><a class="headerlink" href="#void-soundmanager-preload-std-string-filename" title="Link to this heading">#</a></h1>
<p>Ładuje plik dźwiękowy do pamięci i tworzy z niego <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code>. Jest to optymalizacja dla krótkich, często używanych dźwięków. Bufor jest przechowywany w cache (<code class="docutils literal notranslate"><span class="pre">m_buffers</span></code>).</p>
</section>
<section id="soundsourceptr-soundmanager-play">
<h1><code class="docutils literal notranslate"><span class="pre">SoundSourcePtr</span> <span class="pre">SoundManager::play(...)</span></code><a class="headerlink" href="#soundsourceptr-soundmanager-play" title="Link to this heading">#</a></h1>
<p>Główna metoda do odtwarzania dźwięku.</p>
<ol class="arabic simple">
<li><p>Tworzy odpowiednie źródło dźwięku (<code class="docutils literal notranslate"><span class="pre">SoundSource</span></code> dla skeszowanych plików lub <code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code> dla strumieniowanych).</p></li>
<li><p>Ustawia jego parametry (głośność, fadetime).</p></li>
<li><p>Rozpoczyna odtwarzanie i dodaje źródło do listy aktywnych źródeł.</p></li>
</ol>
</section>
<section id="soundchannelptr-soundmanager-getchannel-int-channel">
<h1><code class="docutils literal notranslate"><span class="pre">SoundChannelPtr</span> <span class="pre">SoundManager::getChannel(int</span> <span class="pre">channel)</span></code><a class="headerlink" href="#soundchannelptr-soundmanager-getchannel-int-channel" title="Link to this heading">#</a></h1>
<p>Zwraca obiekt kanału o danym ID. Jeśli kanał nie istnieje, jest tworzony.</p>
</section>
<section id="soundsourceptr-soundmanager-createsoundsource">
<h1><code class="docutils literal notranslate"><span class="pre">SoundSourcePtr</span> <span class="pre">SoundManager::createSoundSource(...)</span></code><a class="headerlink" href="#soundsourceptr-soundmanager-createsoundsource" title="Link to this heading">#</a></h1>
<p>Metoda pomocnicza, która decyduje, czy utworzyć <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code> (z bufora) czy <code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code> (strumieniowanie z pliku). Dla Linuksa implementuje obejście problemu z dźwiękiem stereo, tworząc <code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code> z dwoma źródłami mono.</p>
</section>
<section id="void-soundmanager-ensurecontext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::ensureContext()</span></code><a class="headerlink" href="#void-soundmanager-ensurecontext" title="Link to this heading">#</a></h1>
<p>Upewnia się, że kontekst OpenAL jest aktywny w bieżącym wątku.</p>
</section>
<section id="id912">
<h1>Zależności i powiązania<a class="headerlink" href="#id912" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>OpenAL</strong>: Podstawowa biblioteka do obsługi dźwięku.</p></li>
<li><p>Współpracuje ze wszystkimi klasami z modułu <code class="docutils literal notranslate"><span class="pre">sound</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/asyncdispatcher.h</span></code>: Używany do asynchronicznego ładowania plików dźwiękowych.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="soundmanager-h">
<h1>📄 soundmanager.h<a class="headerlink" href="#soundmanager-h" title="Link to this heading">#</a></h1>
</section>
<section id="id913">
<h1>Opis ogólny<a class="headerlink" href="#id913" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">soundmanager.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_sounds</span></code>) zarządzającym całym systemem dźwięku w aplikacji.</p>
</section>
<section id="id914">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code><a class="headerlink" href="#id914" title="Link to this heading">#</a></h1>
</section>
<section id="id915">
<h1>Opis semantyczny<a class="headerlink" href="#id915" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">SoundManager</span></code> jest centralnym interfejsem do odtwarzania dźwięków. Odpowiada za inicjalizację i zamykanie OpenAL, zarządzanie źródłami dźwięku (<code class="docutils literal notranslate"><span class="pre">SoundSource</span></code>), buforami (<code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code>) i kanałami (<code class="docutils literal notranslate"><span class="pre">SoundChannel</span></code>). Posiada mechanizm cachowania dla małych plików dźwiękowych i strumieniowania dla większych.</p>
</section>
<section id="id916">
<h1>Stałe<a class="headerlink" href="#id916" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MAX_CACHE_SIZE</span></code>: Maksymalny rozmiar pliku (w bajtach), który będzie cachowany w pamięci.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">POLL_DELAY</span></code>: Minimalny interwał (w ms) między wywołaniami <code class="docutils literal notranslate"><span class="pre">poll()</span></code>.</p></li>
</ul>
</section>
<section id="id917">
<h1>Metody publiczne<a class="headerlink" href="#id917" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">init()</span></code> / <code class="docutils literal notranslate"><span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Inicjalizują i zamykają system dźwięku.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">poll()</span></code></p></td>
<td class="text-left"><p>Aktualizuje stan wszystkich aktywnych źródeł i kanałów.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setAudioEnabled(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">enableAudio()</span></code>, <code class="docutils literal notranslate"><span class="pre">disableAudio()</span></code></p></td>
<td class="text-left"><p>Globalnie włączają/wyłączają dźwięk.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">stopAll()</span></code></p></td>
<td class="text-left"><p>Zatrzymuje wszystkie odtwarzane dźwięki.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">preload(...)</span></code></p></td>
<td class="text-left"><p>Ładuje dźwięk do pamięci podręcznej.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">SoundSourcePtr</span> <span class="pre">play(...)</span></code></p></td>
<td class="text-left"><p>Odtwarza dźwięk z pliku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">SoundChannelPtr</span> <span class="pre">getChannel(...)</span></code></p></td>
<td class="text-left"><p>Pobiera lub tworzy kanał dźwiękowy.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">resolveSoundFile(...)</span></code></p></td>
<td class="text-left"><p>Rozwiązuje ścieżkę do pliku dźwiękowego.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ensureContext()</span></code></p></td>
<td class="text-left"><p>Upewnia się, że kontekst OpenAL jest aktywny.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id918">
<h1>Zmienne prywatne<a class="headerlink" href="#id918" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_device</span></code>, <code class="docutils literal notranslate"><span class="pre">m_context</span></code>: Uchwyty do urządzenia i kontekstu OpenAL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_streamFiles</span></code>: Mapa do zarządzania asynchronicznym ładowaniem plików strumieniowanych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_buffers</span></code>: Cache dla <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_sources</span></code>: Lista aktywnych źródeł dźwięku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_audioEnabled</span></code>: Globalna flaga włączenia dźwięku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_channels</span></code>: Mapa kanałów dźwiękowych.</p></li>
</ul>
</section>
<section id="id919">
<h1>Zmienne globalne<a class="headerlink" href="#id919" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_sounds</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>.</p></li>
</ul>
</section>
<section id="id920">
<h1>Zależności i powiązania<a class="headerlink" href="#id920" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/declarations.h</span></code>, <code class="docutils literal notranslate"><span class="pre">soundchannel.h</span></code>.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindsingleton</span> <span class="pre">g_sounds</span></code>, udostępnia swoje API w Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="soundsource-cpp">
<h1>📄 soundsource.cpp<a class="headerlink" href="#soundsource-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id921">
<h1>Opis ogólny<a class="headerlink" href="#id921" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">soundsource.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code>, która jest opakowaniem na źródło dźwięku w OpenAL.</p>
</section>
<section id="klasa-soundsource">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code><a class="headerlink" href="#klasa-soundsource" title="Link to this heading">#</a></h1>
</section>
<section id="soundsource-soundsource">
<h1><code class="docutils literal notranslate"><span class="pre">SoundSource::SoundSource()</span></code><a class="headerlink" href="#soundsource-soundsource" title="Link to this heading">#</a></h1>
<p>Konstruktor. Generuje nowe źródło w OpenAL za pomocą <code class="docutils literal notranslate"><span class="pre">alGenSources()</span></code> i ustawia domyślne parametry, takie jak dystans referencyjny.</p>
</section>
<section id="id922">
<h1><code class="docutils literal notranslate"><span class="pre">SoundSource::~SoundSource()</span></code><a class="headerlink" href="#id922" title="Link to this heading">#</a></h1>
<p>Destruktor. Zatrzymuje odtwarzanie i zwalnia zasób źródła w OpenAL za pomocą <code class="docutils literal notranslate"><span class="pre">alDeleteSources()</span></code>.</p>
</section>
<section id="void-soundsource-play">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundSource::play()</span></code><a class="headerlink" href="#void-soundsource-play" title="Link to this heading">#</a></h1>
<p>Rozpoczyna odtwarzanie dźwięku za pomocą <code class="docutils literal notranslate"><span class="pre">alSourcePlay()</span></code>.</p>
</section>
<section id="void-soundsource-stop">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundSource::stop()</span></code><a class="headerlink" href="#void-soundsource-stop" title="Link to this heading">#</a></h1>
<p>Zatrzymuje odtwarzanie (<code class="docutils literal notranslate"><span class="pre">alSourceStop()</span></code>) i odłącza bufor od źródła.</p>
</section>
<section id="bool-soundsource-isbuffering">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">SoundSource::isBuffering()</span></code><a class="headerlink" href="#bool-soundsource-isbuffering" title="Link to this heading">#</a></h1>
<p>Sprawdza, czy źródło jest w stanie innym niż <code class="docutils literal notranslate"><span class="pre">AL_STOPPED</span></code> (czyli <code class="docutils literal notranslate"><span class="pre">AL_PLAYING</span></code> lub <code class="docutils literal notranslate"><span class="pre">AL_PAUSED</span></code>).</p>
</section>
<section id="id923">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">set...()</span></code><a class="headerlink" href="#id923" title="Link to this heading">#</a></h1>
<p>Są to opakowania na funkcje <code class="docutils literal notranslate"><span class="pre">alSource...()</span></code>, które ustawiają różne właściwości źródła dźwięku:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setBuffer</span></code>: Przypisuje <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code> do źródła.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setLooping</span></code>: Ustawia zapętlanie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setRelative</span></code>: Ustawia, czy pozycja źródła jest względna do słuchacza.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setGain</span></code>: Ustawia głośność.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setPitch</span></code>: Ustawia wysokość dźwięku.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setPosition</span></code>, <code class="docutils literal notranslate"><span class="pre">setVelocity</span></code>: Ustawiają właściwości 3D dźwięku.</p></li>
</ul>
</section>
<section id="void-soundsource-setfading">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundSource::setFading(...)</span></code><a class="headerlink" href="#void-soundsource-setfading" title="Link to this heading">#</a></h1>
<p>Inicjuje proces płynnego zgłaśniania (<code class="docutils literal notranslate"><span class="pre">FadingOn</span></code>) lub wyciszania (<code class="docutils literal notranslate"><span class="pre">FadingOff</span></code>) dźwięku w określonym czasie. Zapisuje stan i czas rozpoczęcia.</p>
</section>
<section id="void-soundsource-update">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundSource::update()</span></code><a class="headerlink" href="#void-soundsource-update" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana cyklicznie przez <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>. Implementuje logikę „fadingu”, aktualizując głośność źródła w każdej klatce na podstawie upływającego czasu.</p>
</section>
<section id="id924">
<h1>Zależności i powiązania<a class="headerlink" href="#id924" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundsource.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundbuffer.h</span></code>: Używa <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code> jako źródła danych.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/clock.h</span></code>: Do obsługi czasu w mechanizmie „fading”.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="streamsoundsource-cpp">
<h1>📄 streamsoundsource.cpp<a class="headerlink" href="#streamsoundsource-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id925">
<h1>Opis ogólny<a class="headerlink" href="#id925" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">streamsoundsource.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code>, która jest specjalizacją <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code> do odtwarzania dźwięków strumieniowo z plików.</p>
</section>
<section id="klasa-streamsoundsource">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code><a class="headerlink" href="#klasa-streamsoundsource" title="Link to this heading">#</a></h1>
</section>
<section id="id926">
<h1>Opis semantyczny<a class="headerlink" href="#id926" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code> jest przeznaczona do odtwarzania długich plików dźwiękowych (np. muzyki), które nie są w całości ładowane do pamięci. Zamiast tego, używa mechanizmu kolejkowania małych buforów w OpenAL. Dane są odczytywane z pliku i dekodowane w locie, a następnie umieszczane w buforach, które są dodawane do kolejki odtwarzania źródła.</p>
</section>
<section id="streamsoundsource-streamsoundsource">
<h1><code class="docutils literal notranslate"><span class="pre">StreamSoundSource::StreamSoundSource()</span></code><a class="headerlink" href="#streamsoundsource-streamsoundsource" title="Link to this heading">#</a></h1>
<p>Konstruktor. Tworzy <code class="docutils literal notranslate"><span class="pre">STREAM_FRAGMENTS</span></code> (zwykle 4) małych obiektów <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code>, które będą używane do kolejkowania.</p>
</section>
<section id="void-streamsoundsource-setsoundfile">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">StreamSoundSource::setSoundFile(...)</span></code><a class="headerlink" href="#void-streamsoundsource-setsoundfile" title="Link to this heading">#</a></h1>
<p>Ustawia plik dźwiękowy, z którego będą strumieniowane dane. Jeśli źródło czekało na plik, rozpoczyna odtwarzanie.</p>
</section>
<section id="void-streamsoundsource-play">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">StreamSoundSource::play()</span></code><a class="headerlink" href="#void-streamsoundsource-play" title="Link to this heading">#</a></h1>
<p>Rozpoczyna odtwarzanie. Jeśli plik dźwiękowy nie został jeszcze załadowany (bo ładowanie odbywa się asynchronicznie), ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_waitingFile</span></code>. W przeciwnym razie, wywołuje <code class="docutils literal notranslate"><span class="pre">queueBuffers()</span></code> i <code class="docutils literal notranslate"><span class="pre">SoundSource::play()</span></code>.</p>
</section>
<section id="void-streamsoundsource-stop">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">StreamSoundSource::stop()</span></code><a class="headerlink" href="#void-streamsoundsource-stop" title="Link to this heading">#</a></h1>
<p>Zatrzymuje odtwarzanie i czyści kolejkę buforów za pomocą <code class="docutils literal notranslate"><span class="pre">unqueueBuffers()</span></code>.</p>
</section>
<section id="void-streamsoundsource-update">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">StreamSoundSource::update()</span></code><a class="headerlink" href="#void-streamsoundsource-update" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana cyklicznie.</p>
<ol class="arabic simple">
<li><p>Sprawdza, ile buforów zostało już przetworzonych (odtworzonych) przez OpenAL.</p></li>
<li><p>Odkolejkowuje przetworzone bufory.</p></li>
<li><p>Wypełnia je nowymi danymi z pliku i ponownie dodaje do kolejki.</p></li>
<li><p>Obsługuje zapętlanie i sprawdza, czy odtwarzanie nie zostało przerwane przez „buffer underrun” (gdy OpenAL skończy odtwarzać, a nie ma nowych buforów w kolejce).</p></li>
</ol>
</section>
<section id="bool-streamsoundsource-fillbufferandqueue-uint-buffer">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">StreamSoundSource::fillBufferAndQueue(uint</span> <span class="pre">buffer)</span></code><a class="headerlink" href="#bool-streamsoundsource-fillbufferandqueue-uint-buffer" title="Link to this heading">#</a></h1>
<p>Kluczowa metoda.</p>
<ol class="arabic simple">
<li><p>Odczytuje fragment danych z <code class="docutils literal notranslate"><span class="pre">m_soundFile</span></code>.</p></li>
<li><p>Obsługuje zapętlanie, resetując plik po dojściu do końca.</p></li>
<li><p>Opcjonalnie wykonuje „down-mix” z stereo do mono, jeśli <code class="docutils literal notranslate"><span class="pre">m_downMix</span></code> jest ustawione.</p></li>
<li><p>Wypełnia podany bufor OpenAL nowymi danymi.</p></li>
<li><p>Dodaje bufor do kolejki odtwarzania źródła.</p></li>
</ol>
</section>
<section id="id927">
<h1>Zależności i powiązania<a class="headerlink" href="#id927" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/streamsoundsource.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundbuffer.h</span></code>, <code class="docutils literal notranslate"><span class="pre">soundfile.h</span></code>: Używa tych klas do zarządzania buforami i odczytu plików.</p></li>
<li><p>Jest tworzona przez <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code> dla plików, które nie są cachowane.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="streamsoundsource-h">
<h1>📄 streamsoundsource.h<a class="headerlink" href="#streamsoundsource-h" title="Link to this heading">#</a></h1>
</section>
<section id="id928">
<h1>Opis ogólny<a class="headerlink" href="#id928" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">streamsoundsource.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code>, która jest implementacją <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code> do strumieniowego odtwarzania dźwięku.</p>
</section>
<section id="id929">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code><a class="headerlink" href="#id929" title="Link to this heading">#</a></h1>
</section>
<section id="id930">
<h1>Opis semantyczny<a class="headerlink" href="#id930" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code> pozwala na odtwarzanie długich plików dźwiękowych bez potrzeby ładowania ich w całości do pamięci. Działa poprzez dzielenie dźwięku na małe fragmenty, które są dynamicznie ładowane do kolejki buforów OpenAL w trakcie odtwarzania.</p>
</section>
<section id="id931">
<h1>Stałe<a class="headerlink" href="#id931" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">STREAM_BUFFER_SIZE</span></code>: Całkowity rozmiar bufora cyklicznego w pamięci.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STREAM_FRAGMENTS</span></code>: Liczba fragmentów (buforów OpenAL), na które jest podzielony bufor cykliczny.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STREAM_FRAGMENT_SIZE</span></code>: Rozmiar pojedynczego fragmentu.</p></li>
</ul>
</section>
<section id="typ-wyliczeniowy-downmix">
<h1>Typ wyliczeniowy <code class="docutils literal notranslate"><span class="pre">DownMix</span></code><a class="headerlink" href="#typ-wyliczeniowy-downmix" title="Link to this heading">#</a></h1>
<p>Określa, czy i jak konwertować dźwięk stereo na mono (tylko lewy kanał, tylko prawy, lub brak konwersji).</p>
</section>
<section id="id932">
<h1>Metody publiczne<a class="headerlink" href="#id932" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">StreamSoundSource()</span></code></p></td>
<td class="text-left"><p>Konstruktor, tworzy bufory.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">~StreamSoundSource()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">play()</span></code></p></td>
<td class="text-left"><p>Rozpoczyna strumieniowanie i odtwarzanie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">stop()</span></code></p></td>
<td class="text-left"><p>Zatrzymuje odtwarzanie i czyści kolejkę buforów.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isPlaying()</span></code></p></td>
<td class="text-left"><p>Zwraca, czy źródło jest w stanie odtwarzania.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setSoundFile(...)</span></code></p></td>
<td class="text-left"><p>Ustawia plik dźwiękowy do strumieniowania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">downMix(...)</span></code></p></td>
<td class="text-left"><p>Ustawia tryb konwersji na mono.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">update()</span></code></p></td>
<td class="text-left"><p>Aktualizuje kolejkę buforów (metoda cykliczna).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id933">
<h1>Zmienne prywatne<a class="headerlink" href="#id933" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_soundFile</span></code>: Wskaźnik na plik dźwiękowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_buffers</span></code>: Tablica buforów OpenAL używanych w kolejce.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_downMix</span></code>: Tryb konwersji na mono.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_looping</span></code>, <code class="docutils literal notranslate"><span class="pre">m_playing</span></code>, <code class="docutils literal notranslate"><span class="pre">m_eof</span></code>, <code class="docutils literal notranslate"><span class="pre">m_waitingFile</span></code>: Flagi stanu.</p></li>
</ul>
</section>
<section id="id934">
<h1>Zależności i powiązania<a class="headerlink" href="#id934" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/soundsource.h</span></code>: Klasa bazowa.</p></li>
<li><p>Jest tworzona przez <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code> do odtwarzania dużych plików dźwiękowych.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="soundsource-h">
<h1>📄 soundsource.h<a class="headerlink" href="#soundsource-h" title="Link to this heading">#</a></h1>
</section>
<section id="id935">
<h1>Opis ogólny<a class="headerlink" href="#id935" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">soundsource.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code>, która jest abstrakcyjnym opakowaniem na źródło dźwięku w OpenAL.</p>
</section>
<section id="id936">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code><a class="headerlink" href="#id936" title="Link to this heading">#</a></h1>
</section>
<section id="id937">
<h1>Opis semantyczny<a class="headerlink" href="#id937" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">SoundSource</span></code> reprezentuje punkt w przestrzeni, z którego wydobywa się dźwięk. Enkapsuluje ona ID źródła OpenAL i dostarcza interfejs do kontrolowania jego właściwości, takich jak głośność, wysokość dźwięku, pozycja, zapętlanie i stan odtwarzania. Dziedziczy po <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p>
</section>
<section id="typ-wyliczeniowy-fadestate">
<h1>Typ wyliczeniowy <code class="docutils literal notranslate"><span class="pre">FadeState</span></code><a class="headerlink" href="#typ-wyliczeniowy-fadestate" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NoFading</span></code>: Brak efektu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FadingOn</span></code>: Dźwięk jest w trakcie zgłaśniania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FadingOff</span></code>: Dźwięk jest w trakcie wyciszania.</p></li>
</ul>
</section>
<section id="id938">
<h1>Metody publiczne<a class="headerlink" href="#id938" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">SoundSource()</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">~SoundSource()</span></code></p></td>
<td class="text-left"><p>Destruktor.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">play()</span></code></p></td>
<td class="text-left"><p>Rozpoczyna odtwarzanie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">stop()</span></code></p></td>
<td class="text-left"><p>Zatrzymuje odtwarzanie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">bool</span> <span class="pre">isBuffering()</span></code></p></td>
<td class="text-left"><p>Sprawdza stan źródła w OpenAL.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">bool</span> <span class="pre">isPlaying()</span></code></p></td>
<td class="text-left"><p>Domyślnie to samo co <code class="docutils literal notranslate"><span class="pre">isBuffering</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setName(...)</span></code></p></td>
<td class="text-left"><p>Ustawia nazwę (do identyfikacji).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setLooping(...)</span></code></p></td>
<td class="text-left"><p>Włącza/wyłącza zapętlanie.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setRelative(...)</span></code></p></td>
<td class="text-left"><p>Ustawia, czy pozycja jest względna do słuchacza.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setReferenceDistance(...)</span></code></p></td>
<td class="text-left"><p>Ustawia dystans referencyjny dla tłumienia dźwięku 3D.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setGain(...)</span></code></p></td>
<td class="text-left"><p>Ustawia głośność.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setPitch(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wysokość dźwięku.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setPosition(...)</span></code> / <code class="docutils literal notranslate"><span class="pre">setVelocity(...)</span></code></p></td>
<td class="text-left"><p>Ustawiają właściwości 3D.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">setFading(...)</span></code></p></td>
<td class="text-left"><p>Inicjuje efekt płynnego zgłaśniania/wyciszania.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id939">
<h1>Metody chronione<a class="headerlink" href="#id939" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setBuffer(...)</span></code>: Przypisuje <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code> do źródła.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">update()</span></code>: Metoda cykliczna do obsługi np. „fadingu”.</p></li>
</ul>
</section>
<section id="id940">
<h1>Zmienne<a class="headerlink" href="#id940" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_sourceId</span></code>: ID źródła w OpenAL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_name</span></code>: Nazwa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_buffer</span></code>: Wskaźnik na <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code> (dla źródeł nie-strumieniowych).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_fade...</span></code>: Zmienne do obsługi „fadingu”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_gain</span></code>: Aktualna głośność.</p></li>
</ul>
</section>
<section id="id941">
<h1>Zależności i powiązania<a class="headerlink" href="#id941" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/sound/declarations.h</span></code>, <code class="docutils literal notranslate"><span class="pre">soundbuffer.h</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Klasa bazowa.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code> i <code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code>.</p></li>
<li><p>Jest tworzona i zarządzana przez <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="any-h">
<h1>📄 any.h<a class="headerlink" href="#any-h" title="Link to this heading">#</a></h1>
</section>
<section id="id942">
<h1>Opis ogólny<a class="headerlink" href="#id942" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">any.h</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">stdext::any</span></code>, która jest prostą, własną wersją <code class="docutils literal notranslate"><span class="pre">std::any</span></code> (dostępnego od C++17) lub <code class="docutils literal notranslate"><span class="pre">boost::any</span></code>. Pozwala na przechowywanie wartości dowolnego typu w sposób bezpieczny typowo.</p>
</section>
<section id="klasa-any">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">any</span></code><a class="headerlink" href="#klasa-any" title="Link to this heading">#</a></h1>
</section>
<section id="id943">
<h1>Opis semantyczny<a class="headerlink" href="#id943" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">any</span></code> działa jak polimorficzny kontener. Wewnątrz przechowuje wskaźnik na obiekt-opakowanie (<code class="docutils literal notranslate"><span class="pre">placeholder</span></code>), który jest tworzony na stercie. Obiekt-opakowanie jest szablonem (<code class="docutils literal notranslate"><span class="pre">holder&lt;T&gt;</span></code>), który przechowuje rzeczywistą wartość i informacje o jej typie (<code class="docutils literal notranslate"><span class="pre">type_info</span></code>).</p>
</section>
<section id="struktury-wewnetrzne">
<h1>Struktury wewnętrzne<a class="headerlink" href="#struktury-wewnetrzne" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">placeholder</span></code></strong>: Abstrakcyjna klasa bazowa dla opakowań. Definiuje wirtualny interfejs do pobierania <code class="docutils literal notranslate"><span class="pre">type_info</span></code> i klonowania.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">holder&lt;T&gt;</span></code></strong>: Szablonowa klasa pochodna, która faktycznie przechowuje wartość typu <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p></li>
</ul>
</section>
<section id="id944">
<h1>Metody publiczne<a class="headerlink" href="#id944" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">any()</span></code></p></td>
<td class="text-left"><p>Konstruktor domyślny (pusty).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">any(const</span> <span class="pre">any&amp;</span> <span class="pre">other)</span></code></p></td>
<td class="text-left"><p>Konstruktor kopiujący (głęboka kopia).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">template&lt;typename</span> <span class="pre">T&gt;</span> <span class="pre">any(const</span> <span class="pre">T&amp;</span> <span class="pre">value)</span></code></p></td>
<td class="text-left"><p>Konstruktor szablonowy, tworzy <code class="docutils literal notranslate"><span class="pre">holder&lt;T&gt;</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">~any()</span></code></p></td>
<td class="text-left"><p>Destruktor, zwalnia <code class="docutils literal notranslate"><span class="pre">placeholder</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">any&amp;</span> <span class="pre">swap(any&amp;</span> <span class="pre">rhs)</span></code></p></td>
<td class="text-left"><p>Zamienia zawartość dwóch obiektów <code class="docutils literal notranslate"><span class="pre">any</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">operator=</span></code></p></td>
<td class="text-left"><p>Operatory przypisania.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">empty()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli <code class="docutils literal notranslate"><span class="pre">any</span></code> nie przechowuje wartości.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">template&lt;typename</span> <span class="pre">T&gt;</span> <span class="pre">const</span> <span class="pre">T&amp;</span> <span class="pre">cast()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Rzutuje i zwraca przechowywaną wartość. Rzuca <code class="docutils literal notranslate"><span class="pre">VALIDATE</span></code> error, jeśli typ jest nieprawidłowy.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::type_info</span> <span class="pre">&amp;</span> <span class="pre">type()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">type_info</span></code> przechowywanej wartości.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="funkcja-any-cast">
<h1>Funkcja <code class="docutils literal notranslate"><span class="pre">any_cast</span></code><a class="headerlink" href="#funkcja-any-cast" title="Link to this heading">#</a></h1>
<p>Funkcja pomocnicza, która wykonuje bezpieczne rzutowanie. Sprawdza, czy typ przechowywany w <code class="docutils literal notranslate"><span class="pre">any</span></code> zgadza się z typem docelowym.</p>
</section>
<section id="id945">
<h1>Zależności i powiązania<a class="headerlink" href="#id945" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algorithm&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;typeinfo&gt;</span></code>: Standardowe nagłówki C++.</p></li>
<li><p>Jest używana w <code class="docutils literal notranslate"><span class="pre">dynamic_storage</span></code> do przechowywania wartości różnych typów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="cast-h">
<h1>📄 cast.h<a class="headerlink" href="#cast-h" title="Link to this heading">#</a></h1>
</section>
<section id="id946">
<h1>Opis ogólny<a class="headerlink" href="#id946" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">cast.h</span></code> zawiera zestaw szablonowych funkcji i klas do konwersji (rzutowania) między różnymi typami danych, głównie z i do <code class="docutils literal notranslate"><span class="pre">std::string</span></code>.</p>
</section>
<section id="funkcje-cast">
<h1>Funkcje <code class="docutils literal notranslate"><span class="pre">cast</span></code><a class="headerlink" href="#funkcje-cast" title="Link to this heading">#</a></h1>
</section>
<section id="template-typename-t-typename-r-bool-cast-const-t-in-r-out">
<h1><code class="docutils literal notranslate"><span class="pre">template&lt;typename</span> <span class="pre">T,</span> <span class="pre">typename</span> <span class="pre">R&gt;</span> <span class="pre">bool</span> <span class="pre">cast(const</span> <span class="pre">T&amp;</span> <span class="pre">in,</span> <span class="pre">R&amp;</span> <span class="pre">out)</span></code><a class="headerlink" href="#template-typename-t-typename-r-bool-cast-const-t-in-r-out" title="Link to this heading">#</a></h1>
<p>Główna, szablonowa funkcja. Używa <code class="docutils literal notranslate"><span class="pre">std::stringstream</span></code> do konwersji. Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli konwersja się powiodła.</p>
</section>
<section id="specjalizacje">
<h1>Specjalizacje<a class="headerlink" href="#specjalizacje" title="Link to this heading">#</a></h1>
<p>Plik zawiera specjalizacje dla typowych i problematycznych konwersji, aby były one bardziej wydajne i niezawodne:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code> do <code class="docutils literal notranslate"><span class="pre">string</span></code>: Proste przypisanie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code> do <code class="docutils literal notranslate"><span class="pre">bool</span></code>: Obsługuje tylko „true” i „false”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code> do <code class="docutils literal notranslate"><span class="pre">char</span></code>: Tylko dla stringów o długości 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code> do <code class="docutils literal notranslate"><span class="pre">long</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>: Używają <code class="docutils literal notranslate"><span class="pre">atol</span></code> i <code class="docutils literal notranslate"><span class="pre">atof</span></code>, ale z dodatkową walidacją znaków, aby uniknąć nieprawidłowych konwersji (np. „123a” nie zostanie skonwertowane).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bool</span></code> do <code class="docutils literal notranslate"><span class="pre">string</span></code>: Konwertuje na „true” lub „false”.</p></li>
</ul>
</section>
<section id="klasa-cast-exception">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">cast_exception</span></code><a class="headerlink" href="#klasa-cast-exception" title="Link to this heading">#</a></h1>
<p>Wyjątek rzucany przez <code class="docutils literal notranslate"><span class="pre">safe_cast</span></code>, gdy konwersja się nie powiedzie.</p>
</section>
<section id="funkcje-safe-cast-i-unsafe-cast">
<h1>Funkcje <code class="docutils literal notranslate"><span class="pre">safe_cast</span></code> i <code class="docutils literal notranslate"><span class="pre">unsafe_cast</span></code><a class="headerlink" href="#funkcje-safe-cast-i-unsafe-cast" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">safe_cast&lt;R,</span> <span class="pre">T&gt;(...)</span></code></strong>: Opakowanie na <code class="docutils literal notranslate"><span class="pre">cast</span></code>, które rzuca <code class="docutils literal notranslate"><span class="pre">cast_exception</span></code> w przypadku niepowodzenia.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">unsafe_cast&lt;R,</span> <span class="pre">T&gt;(...)</span></code></strong>: Opakowanie na <code class="docutils literal notranslate"><span class="pre">safe_cast</span></code>, które łapie wyjątek, loguje błąd i zwraca wartość domyślną.</p></li>
</ul>
</section>
<section id="id947">
<h1>Zależności i powiązania<a class="headerlink" href="#id947" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdext/exception.h</span></code>, <code class="docutils literal notranslate"><span class="pre">demangle.h</span></code>: Do obsługi błędów i nazw typów.</p></li>
<li><p>Są to fundamentalne narzędzia używane w całym projekcie, szczególnie do parsowania wartości z plików OTML i konwersji typów dla Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="demangle-cpp">
<h1>📄 demangle.cpp<a class="headerlink" href="#demangle-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id948">
<h1>Opis ogólny<a class="headerlink" href="#id948" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">demangle.cpp</span></code> zawiera implementację funkcji <code class="docutils literal notranslate"><span class="pre">demangle_name</span></code>, która konwertuje „zniekształcone” (mangled) nazwy typów C++ na ich czytelną formę.</p>
</section>
<section id="funkcja-demangle-name">
<h1>Funkcja <code class="docutils literal notranslate"><span class="pre">demangle_name</span></code><a class="headerlink" href="#funkcja-demangle-name" title="Link to this heading">#</a></h1>
</section>
<section id="const-char-demangle-name-const-char-name">
<h1><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char*</span> <span class="pre">demangle_name(const</span> <span class="pre">char*</span> <span class="pre">name)</span></code><a class="headerlink" href="#const-char-demangle-name-const-char-name" title="Link to this heading">#</a></h1>
</section>
<section id="id949">
<h1>Opis semantyczny<a class="headerlink" href="#id949" title="Link to this heading">#</a></h1>
<p>Nazwy typów C++ (szczególnie w przypadku szablonów i przestrzeni nazw) są przez kompilator zamieniane na unikalne, ale nieczytelne identyfikatory (np. <code class="docutils literal notranslate"><span class="pre">N6stdext11cast_exceptionE</span></code>). Funkcja ta odwraca ten proces, używając narzędzi specyficznych dla danego kompilatora.</p>
</section>
<section id="implementacja">
<h1>Implementacja<a class="headerlink" href="#implementacja" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Dla MSVC (<code class="docutils literal notranslate"><span class="pre">_MSC_VER</span></code>)</strong>: Używa funkcji <code class="docutils literal notranslate"><span class="pre">UnDecorateSymbolName</span></code> z biblioteki <code class="docutils literal notranslate"><span class="pre">DbgHelp.dll</span></code>.</p></li>
<li><p><strong>Dla GCC/Clang</strong>: Używa funkcji <code class="docutils literal notranslate"><span class="pre">abi::__cxa_demangle</span></code> z biblioteki <code class="docutils literal notranslate"><span class="pre">cxxabi</span></code>.</p></li>
</ul>
</section>
<section id="id950">
<h1>Zależności i powiązania<a class="headerlink" href="#id950" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/demangle.h</span></code>: Plik nagłówkowy.</p></li>
<li><p>Nagłówki specyficzne dla platformy (<code class="docutils literal notranslate"><span class="pre">dbghelp.h</span></code> lub <code class="docutils literal notranslate"><span class="pre">cxxabi.h</span></code>).</p></li>
<li><p>Jest używana w systemie rzutowania (<code class="docutils literal notranslate"><span class="pre">cast_exception</span></code>) i w logowaniu, aby dostarczać czytelne nazwy typów w komunikatach o błędach.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="compiler-h">
<h1>📄 compiler.h<a class="headerlink" href="#compiler-h" title="Link to this heading">#</a></h1>
</section>
<section id="id951">
<h1>Opis ogólny<a class="headerlink" href="#id951" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">compiler.h</span></code> zawiera makra i dyrektywy preprocesora specyficzne dla kompilatora. Jego celem jest ujednolicenie obsługi różnych kompilatorów (GCC, Clang, MSVC) i zapewnienie kompatybilności.</p>
</section>
<section id="id952">
<h1>Zawartość<a class="headerlink" href="#id952" title="Link to this heading">#</a></h1>
</section>
<section id="build-compiler">
<h1><code class="docutils literal notranslate"><span class="pre">BUILD_COMPILER</span></code><a class="headerlink" href="#build-compiler" title="Link to this heading">#</a></h1>
<p>Makro, które jest definiowane jako string zawierający nazwę i wersję używanego kompilatora. Jest to ustalane na podstawie predefiniowanych makr kompilatora (<code class="docutils literal notranslate"><span class="pre">__clang__</span></code>, <code class="docutils literal notranslate"><span class="pre">__GNUC__</span></code>, <code class="docutils literal notranslate"><span class="pre">_MSC_VER</span></code>).</p>
</section>
<section id="sprawdzanie-wersji-kompilatora">
<h1>Sprawdzanie wersji kompilatora<a class="headerlink" href="#sprawdzanie-wersji-kompilatora" title="Link to this heading">#</a></h1>
<p>Plik zawiera dyrektywy <code class="docutils literal notranslate"><span class="pre">#error</span></code>, które zatrzymają kompilację, jeśli wersja kompilatora jest zbyt stara (wymagany GCC &gt;= 4.6, MSVC &gt;= 2013).</p>
</section>
<section id="wylaczanie-ostrzezen-msvc">
<h1>Wyłączanie ostrzeżeń (MSVC)<a class="headerlink" href="#wylaczanie-ostrzezen-msvc" title="Link to this heading">#</a></h1>
<p>Dla kompilatora MSVC, wyłącza szereg często występujących, ale zazwyczaj nieszkodliwych ostrzeżeń (<code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">warning(disable:</span> <span class="pre">...)</span></code>), aby utrzymać czysty output kompilacji.</p>
</section>
<section id="pretty-function">
<h1><code class="docutils literal notranslate"><span class="pre">__PRETTY_FUNCTION__</span></code><a class="headerlink" href="#pretty-function" title="Link to this heading">#</a></h1>
<p>Dla MSVC, definiuje <code class="docutils literal notranslate"><span class="pre">__PRETTY_FUNCTION__</span></code> jako alias dla <code class="docutils literal notranslate"><span class="pre">__FUNCDNAME__</span></code>, aby ujednolicić sposób uzyskiwania „ozdobnej” nazwy funkcji.</p>
</section>
<section id="likely-x-i-unlikely-x">
<h1><code class="docutils literal notranslate"><span class="pre">likely(x)</span></code> i <code class="docutils literal notranslate"><span class="pre">unlikely(x)</span></code><a class="headerlink" href="#likely-x-i-unlikely-x" title="Link to this heading">#</a></h1>
<p>Makra do optymalizacji podpowiedzi dla kompilatora (branch prediction). Dla GCC/Clang używają <code class="docutils literal notranslate"><span class="pre">__builtin_expect</span></code>. Dla innych kompilatorów są puste.</p>
</section>
<section id="sprawdzanie-wsparcia-c-0x">
<h1>Sprawdzanie wsparcia C++0x<a class="headerlink" href="#sprawdzanie-wsparcia-c-0x" title="Link to this heading">#</a></h1>
<p>Sprawdza, czy kompilator wspiera wymagany standard C++ (C++11 lub nowszy).</p>
</section>
<section id="id953">
<h1>Zależności i powiązania<a class="headerlink" href="#id953" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to jeden z najbardziej fundamentalnych plików nagłówkowych, dołączany przez <code class="docutils literal notranslate"><span class="pre">global.h</span></code>, i wpływa na kompilację całego projektu.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="demangle-h">
<h1>📄 demangle.h<a class="headerlink" href="#demangle-h" title="Link to this heading">#</a></h1>
</section>
<section id="id954">
<h1>Opis ogólny<a class="headerlink" href="#id954" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">demangle.h</span></code> deklaruje funkcje pomocnicze do „demanglowania” (odkodowywania) nazw typów C++, które są zniekształcane przez kompilator w procesie kompilacji.</p>
</section>
<section id="namespace-stdext">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code><a class="headerlink" href="#namespace-stdext" title="Link to this heading">#</a></h1>
</section>
<section id="id955">
<h1>Funkcje<a class="headerlink" href="#id955" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Funkcja</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char*</span> <span class="pre">demangle_name(const</span> <span class="pre">char*</span> <span class="pre">name)</span></code></p></td>
<td class="text-left"><p>Przyjmuje zniekształconą nazwę i zwraca jej czytelną wersję.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">template&lt;typename</span> <span class="pre">T&gt;</span> <span class="pre">std::string</span> <span class="pre">demangle_class()</span></code></p></td>
<td class="text-left"><p>Szablonowa funkcja, która zwraca czytelną nazwę klasy dla danego typu <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">template&lt;typename</span> <span class="pre">T&gt;</span> <span class="pre">std::string</span> <span class="pre">demangle_type()</span></code></p></td>
<td class="text-left"><p>Szablonowa funkcja, która zwraca czytelną nazwę dowolnego typu <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id956">
<h1>Zależności i powiązania<a class="headerlink" href="#id956" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;typeinfo&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>: Standardowe nagłówki.</p></li>
<li><p>Jest używana do generowania czytelnych komunikatów o błędach, np. w <code class="docutils literal notranslate"><span class="pre">cast_exception</span></code> i <code class="docutils literal notranslate"><span class="pre">LuaBadValueCastException</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="boolean-h">
<h1>📄 boolean.h<a class="headerlink" href="#boolean-h" title="Link to this heading">#</a></h1>
</section>
<section id="id957">
<h1>Opis ogólny<a class="headerlink" href="#id957" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">boolean.h</span></code> deklaruje prostą klasę szablonową <code class="docutils literal notranslate"><span class="pre">stdext::boolean</span></code>, która jest opakowaniem na typ <code class="docutils literal notranslate"><span class="pre">bool</span></code> z możliwością zdefiniowania wartości domyślnej.</p>
</section>
<section id="klasa-boolean">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">boolean</span></code><a class="headerlink" href="#klasa-boolean" title="Link to this heading">#</a></h1>
</section>
<section id="template-bool-def">
<h1><code class="docutils literal notranslate"><span class="pre">template&lt;bool</span> <span class="pre">def&gt;</span></code><a class="headerlink" href="#template-bool-def" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Parametr szablonu <code class="docutils literal notranslate"><span class="pre">def</span></code></strong>: Określa domyślną wartość (<code class="docutils literal notranslate"><span class="pre">true</span></code> lub <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p></li>
</ul>
</section>
<section id="id958">
<h1>Opis semantyczny<a class="headerlink" href="#id958" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> zachowuje się jak standardowy <code class="docutils literal notranslate"><span class="pre">bool</span></code>, ale jego konstruktor domyślny inicjalizuje go wartością <code class="docutils literal notranslate"><span class="pre">def</span></code>. Jest to przydatne do inicjalizacji pól w klasach, gdzie domyślna wartość <code class="docutils literal notranslate"><span class="pre">bool</span></code> (która jest nieokreślona) mogłaby prowadzić do błędów.</p>
</section>
<section id="przyklad-uzycia">
<h1>Przykład użycia<a class="headerlink" href="#przyklad-uzycia" title="Link to this heading">#</a></h1>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyWidget</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">stdext</span><span class="o">::</span><span class="n">boolean</span><span class="o">&lt;</span><span class="nb">true</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m_visible</span><span class="p">;</span><span class="w"> </span><span class="c1">// Domyślnie true</span>
<span class="w">    </span><span class="n">stdext</span><span class="o">::</span><span class="n">boolean</span><span class="o">&lt;</span><span class="nb">false</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m_enabled</span><span class="p">;</span><span class="w"> </span><span class="c1">// Domyślnie false</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="operatory">
<h1>Operatory<a class="headerlink" href="#operatory" title="Link to this heading">#</a></h1>
<p>Klasa przeciąża operatory <code class="docutils literal notranslate"><span class="pre">operator</span> <span class="pre">bool&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">operator</span> <span class="pre">bool</span> <span class="pre">const&amp;</span></code> i <code class="docutils literal notranslate"><span class="pre">operator=</span></code>, co pozwala na używanie jej w taki sam sposób, jak standardowego <code class="docutils literal notranslate"><span class="pre">bool</span></code>.</p>
</section>
<section id="id959">
<h1>Zależności i powiązania<a class="headerlink" href="#id959" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to prosta klasa narzędziowa, używana w wielu miejscach w projekcie (np. w <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>) do definiowania flag stanu.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="dumper-h">
<h1>📄 dumper.h<a class="headerlink" href="#dumper-h" title="Link to this heading">#</a></h1>
</section>
<section id="id960">
<h1>Opis ogólny<a class="headerlink" href="#id960" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">dumper.h</span></code> zawiera proste narzędzie do szybkiego debugowania, które pozwala na wypisywanie wartości wielu zmiennych na standardowe wyjście w jednej linii.</p>
</section>
<section id="id961">
<h1>Zmienne globalne<a class="headerlink" href="#id961" title="Link to this heading">#</a></h1>
</section>
<section id="dump">
<h1><code class="docutils literal notranslate"><span class="pre">dump</span></code><a class="headerlink" href="#dump" title="Link to this heading">#</a></h1>
<p>Globalny obiekt o specjalnej strukturze, który przeciąża operator <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code>.</p>
</section>
<section id="id962">
<h1>Opis semantyczny<a class="headerlink" href="#id962" title="Link to this heading">#</a></h1>
<p>Użycie <code class="docutils literal notranslate"><span class="pre">dump</span></code> pozwala na tworzenie łańcuchowych wywołań, które wypisują wartości oddzielone spacjami, a na końcu automatycznie dodają znak nowej linii.</p>
</section>
<section id="id963">
<h1>Przykład użycia<a class="headerlink" href="#id963" title="Link to this heading">#</a></h1>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;hello&quot;</span><span class="p">;</span>
<span class="n">dump</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Wartości:&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Wyjście:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Wartości</span><span class="p">:</span> <span class="mi">10</span> <span class="n">hello</span>
</pre></div>
</div>
</section>
<section id="id964">
<h1>Implementacja<a class="headerlink" href="#id964" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Tworzy globalny obiekt, którego <code class="docutils literal notranslate"><span class="pre">operator&lt;&lt;</span></code> zwraca tymczasowy obiekt <code class="docutils literal notranslate"><span class="pre">dumper_dummy</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dumper_dummy</span></code> ma przeciążony <code class="docutils literal notranslate"><span class="pre">operator&lt;&lt;</span></code> do wypisywania wartości i destruktor, który wypisuje znak nowej linii.</p></li>
</ul>
</section>
<section id="id965">
<h1>Zależności i powiązania<a class="headerlink" href="#id965" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;iostream&gt;</span></code>: Do wypisywania na <code class="docutils literal notranslate"><span class="pre">std::cout</span></code>.</p></li>
<li><p>Jest to narzędzie wyłącznie do celów debugowania.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="dynamic-storage-h">
<h1>📄 dynamic_storage.h<a class="headerlink" href="#dynamic-storage-h" title="Link to this heading">#</a></h1>
</section>
<section id="id966">
<h1>Opis ogólny<a class="headerlink" href="#id966" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">dynamic_storage.h</span></code> deklaruje klasę szablonową <code class="docutils literal notranslate"><span class="pre">dynamic_storage</span></code>, która implementuje dynamiczny kontener asocjacyjny, gdzie kluczem jest typ całkowitoliczbowy, a wartością może być dowolny typ (przechowywany za pomocą <code class="docutils literal notranslate"><span class="pre">stdext::any</span></code>).</p>
</section>
<section id="klasa-dynamic-storage">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">dynamic_storage</span></code><a class="headerlink" href="#klasa-dynamic-storage" title="Link to this heading">#</a></h1>
</section>
<section id="id967">
<h1>Opis semantyczny<a class="headerlink" href="#id967" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">dynamic_storage</span></code> działa jak mapa, ale jest zaimplementowana w oparciu o <code class="docutils literal notranslate"><span class="pre">std::vector&lt;stdext::any&gt;</span></code>. Klucz (<code class="docutils literal notranslate"><span class="pre">Key</span></code>) jest używany jako indeks w wektorze. Jest to wydajne, jeśli klucze są małymi, kolejnymi liczbami całkowitymi. Pozwala na przechowywanie heterogenicznych danych w jednym kontenerze.</p>
</section>
<section id="id968">
<h1>Metody publiczne<a class="headerlink" href="#id968" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">template&lt;typename</span> <span class="pre">T&gt;</span> <span class="pre">void</span> <span class="pre">set(...)</span></code></p></td>
<td class="text-left"><p>Ustawia wartość dla danego klucza. W razie potrzeby rozszerza wektor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">remove(...)</span></code></p></td>
<td class="text-left"><p>Usuwa wartość dla danego klucza (zastępując ją pustym <code class="docutils literal notranslate"><span class="pre">any</span></code>).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">template&lt;typename</span> <span class="pre">T&gt;</span> <span class="pre">T</span> <span class="pre">get(...)</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Pobiera wartość dla danego klucza, rzutując ją na typ <code class="docutils literal notranslate"><span class="pre">T</span></code>. Zwraca wartość domyślną, jeśli klucz nie istnieje.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">has(...)</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy klucz istnieje i ma przypisaną wartość.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::size_t</span> <span class="pre">size()</span> <span class="pre">const</span></code></p></td>
<td class="text-left"><p>Zwraca liczbę niepustych elementów.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clear()</span></code></p></td>
<td class="text-left"><p>Czyści kontener.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id969">
<h1>Zmienne prywatne<a class="headerlink" href="#id969" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_data</span></code>: Wektor <code class="docutils literal notranslate"><span class="pre">stdext::any</span></code>, który przechowuje dane.</p></li>
</ul>
</section>
<section id="id970">
<h1>Zależności i powiązania<a class="headerlink" href="#id970" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdext/types.h</span></code>, <code class="docutils literal notranslate"><span class="pre">stdext/any.h</span></code>: Wymagane definicje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;unordered_map&gt;</span></code>: Nagłówek jest dołączony, ale nie jest używany.</p></li>
<li><p>Może być używana do implementacji niestandardowych systemów atrybutów lub właściwości dla obiektów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="exception-h">
<h1>📄 exception.h<a class="headerlink" href="#exception-h" title="Link to this heading">#</a></h1>
</section>
<section id="id971">
<h1>Opis ogólny<a class="headerlink" href="#id971" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">exception.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">stdext::exception</span></code>, która jest bazową klasą dla wszystkich niestandardowych wyjątków w projekcie.</p>
</section>
<section id="klasa-exception">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">exception</span></code><a class="headerlink" href="#klasa-exception" title="Link to this heading">#</a></h1>
</section>
<section id="id972">
<h1>Opis semantyczny<a class="headerlink" href="#id972" title="Link to this heading">#</a></h1>
<p>Dziedziczy po <code class="docutils literal notranslate"><span class="pre">std::exception</span></code> i rozszerza ją o konstruktor przyjmujący <code class="docutils literal notranslate"><span class="pre">std::string</span></code> oraz o przechowywanie komunikatu błędu w <code class="docutils literal notranslate"><span class="pre">m_what</span></code>. Upraszcza to tworzenie i rzucanie wyjątków z niestandardowymi komunikatami.</p>
</section>
<section id="id973">
<h1>Metody<a class="headerlink" href="#id973" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">exception(const</span> <span class="pre">std::string&amp;</span> <span class="pre">what)</span></code>: Konstruktor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">const</span> <span class="pre">char*</span> <span class="pre">what()</span> <span class="pre">const</span> <span class="pre">throw()</span></code>: Zwraca komunikat błędu.</p></li>
</ul>
</section>
<section id="funkcja-throw-exception">
<h1>Funkcja <code class="docutils literal notranslate"><span class="pre">throw_exception</span></code><a class="headerlink" href="#funkcja-throw-exception" title="Link to this heading">#</a></h1>
<p>Funkcja pomocnicza, która tworzy i rzuca <code class="docutils literal notranslate"><span class="pre">stdext::exception</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">throw_exception</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">what</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="n">exception</span><span class="p">(</span><span class="n">what</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id974">
<h1>Zależności i powiązania<a class="headerlink" href="#id974" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">cast_exception</span></code> i <code class="docutils literal notranslate"><span class="pre">LuaException</span></code>.</p></li>
<li><p>Jest używana w całym projekcie do sygnalizowania błędów, które mogą być przechwycone i obsłużone na wyższym poziomie.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="fastrand-h">
<h1>📄 fastrand.h<a class="headerlink" href="#fastrand-h" title="Link to this heading">#</a></h1>
</section>
<section id="id975">
<h1>Opis ogólny<a class="headerlink" href="#id975" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">fastrand.h</span></code> zawiera implementację prostej i szybkiej funkcji do generowania liczb pseudolosowych.</p>
</section>
<section id="funkcja-fastrand">
<h1>Funkcja <code class="docutils literal notranslate"><span class="pre">fastrand</span></code><a class="headerlink" href="#funkcja-fastrand" title="Link to this heading">#</a></h1>
</section>
<section id="static-int-fastrand">
<h1><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">int</span> <span class="pre">fastrand()</span></code><a class="headerlink" href="#static-int-fastrand" title="Link to this heading">#</a></h1>
</section>
<section id="id976">
<h1>Opis semantyczny<a class="headerlink" href="#id976" title="Link to this heading">#</a></h1>
<p>Implementuje liniowy generator kongruentny (Linear Congruential Generator - LCG). Jest to bardzo prosty i szybki algorytm, ale o niskiej jakości losowości w porównaniu do nowocześniejszych generatorów (jak Mersenne Twister). Jest odpowiedni do zastosowań, gdzie wydajność jest ważniejsza niż jakość losowości (np. proste efekty wizualne).</p>
</section>
<section id="id977">
<h1>Działanie<a class="headerlink" href="#id977" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Używa statycznej zmiennej <code class="docutils literal notranslate"><span class="pre">g_seed</span></code> jako stanu.</p></li>
<li><p>W każdym wywołaniu, aktualizuje <code class="docutils literal notranslate"><span class="pre">g_seed</span></code> według wzoru: <code class="docutils literal notranslate"><span class="pre">g_seed</span> <span class="pre">=</span> <span class="pre">(a</span> <span class="pre">*</span> <span class="pre">g_seed</span> <span class="pre">+</span> <span class="pre">c)</span></code>.</p></li>
<li><p>Zwraca 15 najbardziej znaczących bitów z wyższych 16 bitów wyniku.</p></li>
</ul>
</section>
<section id="id978">
<h1>Zależności i powiązania<a class="headerlink" href="#id978" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to samodzielna funkcja narzędziowa.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="math-cpp">
<h1>📄 math.cpp<a class="headerlink" href="#math-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id979">
<h1>Opis ogólny<a class="headerlink" href="#id979" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">math.cpp</span></code> zawiera implementację funkcji matematycznych i losowych zadeklarowanych w <code class="docutils literal notranslate"><span class="pre">math.h</span></code>.</p>
</section>
<section id="id980">
<h1>Funkcje<a class="headerlink" href="#id980" title="Link to this heading">#</a></h1>
</section>
<section id="uint32-t-stdext-adler32">
<h1><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">stdext::adler32(...)</span></code><a class="headerlink" href="#uint32-t-stdext-adler32" title="Link to this heading">#</a></h1>
<p>Implementuje algorytm sumy kontrolnej Adler-32, który jest szybszy, ale mniej niezawodny niż CRC32.</p>
</section>
<section id="long-stdext-random-range-long-min-long-max">
<h1><code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">stdext::random_range(long</span> <span class="pre">min,</span> <span class="pre">long</span> <span class="pre">max)</span></code><a class="headerlink" href="#long-stdext-random-range-long-min-long-max" title="Link to this heading">#</a></h1>
<p>Generuje losową liczbę całkowitą z podanego zakresu (włącznie). Używa generatora Mersenne Twister (<code class="docutils literal notranslate"><span class="pre">std::mt19937</span></code>) zasilanego przez <code class="docutils literal notranslate"><span class="pre">std::random_device</span></code>, co zapewnia wysoką jakość losowości.</p>
</section>
<section id="float-stdext-random-range-float-min-float-max">
<h1><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">stdext::random_range(float</span> <span class="pre">min,</span> <span class="pre">float</span> <span class="pre">max)</span></code><a class="headerlink" href="#float-stdext-random-range-float-min-float-max" title="Link to this heading">#</a></h1>
<p>Generuje losową liczbę zmiennoprzecinkową z podanego zakresu.</p>
</section>
<section id="double-stdext-round-double-r">
<h1><code class="docutils literal notranslate"><span class="pre">double</span> <span class="pre">stdext::round(double</span> <span class="pre">r)</span></code><a class="headerlink" href="#double-stdext-round-double-r" title="Link to this heading">#</a></h1>
<p>Implementuje zaokrąglanie matematyczne (od .5 w górę).</p>
</section>
<section id="id981">
<h1>Zależności i powiązania<a class="headerlink" href="#id981" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/math.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;random&gt;</span></code>: Do generowania liczb losowych.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="math-h">
<h1>📄 math.h<a class="headerlink" href="#math-h" title="Link to this heading">#</a></h1>
</section>
<section id="id982">
<h1>Opis ogólny<a class="headerlink" href="#id982" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">math.h</span></code> deklaruje zestaw funkcji pomocniczych związanych z matematyką, operacjami bitowymi i losowością.</p>
</section>
<section id="id983">
<h1>Funkcje<a class="headerlink" href="#id983" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">is_power_of_two(v)</span></code></strong>: Sprawdza, czy liczba jest potęgą dwójki.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">to_power_of_two(v)</span></code></strong>: Zwraca najbliższą potęgę dwójki, która jest większa lub równa <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">readULE16</span></code>, <code class="docutils literal notranslate"><span class="pre">readULE32</span></code>, <code class="docutils literal notranslate"><span class="pre">readULE64</span></code></strong>: Odczytują liczby całkowite bez znaku w porządku Little Endian z bufora.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">writeULE16</span></code>, <code class="docutils literal notranslate"><span class="pre">writeULE32</span></code>, <code class="docutils literal notranslate"><span class="pre">writeULE64</span></code></strong>: Zapisują liczby do bufora w porządku Little Endian.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">readSLE...</span></code>, <code class="docutils literal notranslate"><span class="pre">writeSLE...</span></code></strong>: Analogiczne funkcje dla liczb ze znakiem.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">adler32(...)</span></code></strong>: Deklaracja funkcji sumy kontrolnej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">random_range(...)</span></code></strong>: Deklaracje funkcji do generowania liczb losowych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">round(...)</span></code></strong>: Deklaracja funkcji zaokrąglającej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">clamp(...)</span></code></strong>: Szablonowa funkcja ograniczająca wartość do podanego zakresu.</p></li>
</ul>
</section>
<section id="id984">
<h1>Zależności i powiązania<a class="headerlink" href="#id984" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Są to podstawowe funkcje narzędziowe, używane w wielu miejscach, szczególnie w obsłudze sieci (odczyt/zapis pakietów) i grafice (operacje na potęgach dwójki dla tekstur).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="net-h">
<h1>📄 net.h<a class="headerlink" href="#net-h" title="Link to this heading">#</a></h1>
</section>
<section id="id985">
<h1>Opis ogólny<a class="headerlink" href="#id985" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">net.h</span></code> deklaruje funkcje pomocnicze związane z operacjami na adresach IP.</p>
</section>
<section id="id986">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code><a class="headerlink" href="#id986" title="Link to this heading">#</a></h1>
</section>
<section id="id987">
<h1>Funkcje<a class="headerlink" href="#id987" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Funkcja</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">ip_to_string(uint32</span> <span class="pre">ip)</span></code></p></td>
<td class="text-left"><p>Konwertuje 32-bitowy adres IP (w porządku sieciowym) na jego reprezentację tekstową (np. „127.0.0.1”).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uint32</span> <span class="pre">string_to_ip(const</span> <span class="pre">std::string&amp;</span> <span class="pre">string)</span></code></p></td>
<td class="text-left"><p>Konwertuje adres IP w formacie tekstowym na jego 32-bitową reprezentację w porządku sieciowym.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;uint32&gt;</span> <span class="pre">listSubnetAddresses(...)</span></code></p></td>
<td class="text-left"><p>Generuje listę wszystkich adresów IP w danej podsieci.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id988">
<h1>Zależności i powiązania<a class="headerlink" href="#id988" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdext/types.h</span></code>.</p></li>
<li><p>Implementacja w <code class="docutils literal notranslate"><span class="pre">net.cpp</span></code> używa Boost.Asio do konwersji.</p></li>
<li><p>Funkcje te są używane w logice sieciowej, np. do logowania adresów IP.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="packed-any-h">
<h1>📄 packed_any.h<a class="headerlink" href="#packed-any-h" title="Link to this heading">#</a></h1>
</section>
<section id="id989">
<h1>Opis ogólny<a class="headerlink" href="#id989" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">packed_any.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">stdext::packed_any</span></code>, która jest zoptymalizowaną pod kątem pamięci wersją <code class="docutils literal notranslate"><span class="pre">stdext::any</span></code>.</p>
</section>
<section id="klasa-packed-any">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">packed_any</span></code><a class="headerlink" href="#klasa-packed-any" title="Link to this heading">#</a></h1>
</section>
<section id="id990">
<h1>Opis semantyczny<a class="headerlink" href="#id990" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">packed_any</span></code> działa podobnie do <code class="docutils literal notranslate"><span class="pre">any</span></code>, ale wprowadza optymalizację dla małych, trywialnych typów (takich jak <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">enum</span></code>, wskaźniki). Zamiast alokować pamięć na stercie dla <code class="docutils literal notranslate"><span class="pre">holdera</span></code>, wartości takich typów są przechowywane bezpośrednio w wskaźniku <code class="docutils literal notranslate"><span class="pre">content</span></code> poprzez rzutowanie. Flaga <code class="docutils literal notranslate"><span class="pre">scalar</span></code> odróżnia te dwa tryby przechowywania. Zmniejsza to fragmentację pamięci i narzut na alokację dla często używanych, małych typów.</p>
</section>
<section id="szablon-can-pack-in-any">
<h1>Szablon <code class="docutils literal notranslate"><span class="pre">can_pack_in_any</span></code><a class="headerlink" href="#szablon-can-pack-in-any" title="Link to this heading">#</a></h1>
<p>Szablon pomocniczy, który w czasie kompilacji określa, czy dany typ <code class="docutils literal notranslate"><span class="pre">T</span></code> może być „spakowany” bezpośrednio we wskaźniku. Warunkiem jest, aby <code class="docutils literal notranslate"><span class="pre">sizeof(T)</span></code> był mniejszy lub równy <code class="docutils literal notranslate"><span class="pre">sizeof(void*)</span></code> i aby typ był trywialnie kopiowalny.</p>
</section>
<section id="metody-i-pola">
<h1>Metody i pola<a class="headerlink" href="#metody-i-pola" title="Link to this heading">#</a></h1>
<p>Są analogiczne do <code class="docutils literal notranslate"><span class="pre">stdext::any</span></code>, z dodatkowym polem <code class="docutils literal notranslate"><span class="pre">scalar</span></code> do rozróżniania trybu.</p>
</section>
<section id="funkcja-packed-any-cast">
<h1>Funkcja <code class="docutils literal notranslate"><span class="pre">packed_any_cast</span></code><a class="headerlink" href="#funkcja-packed-any-cast" title="Link to this heading">#</a></h1>
<p>Posiada dwie specjalizacje: jedną dla typów „pakowalnych” (która rzutuje wskaźnik z powrotem na wartość) i drugą dla typów nie-pakowalnych (która działa jak <code class="docutils literal notranslate"><span class="pre">any_cast</span></code>).</p>
</section>
<section id="id991">
<h1>Zależności i powiązania<a class="headerlink" href="#id991" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest używana w <code class="docutils literal notranslate"><span class="pre">packed_storage</span></code> jako mechanizm przechowywania wartości.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="shared-object-h">
<h1>📄 shared_object.h<a class="headerlink" href="#shared-object-h" title="Link to this heading">#</a></h1>
</section>
<section id="id992">
<h1>Opis ogólny<a class="headerlink" href="#id992" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">shared_object.h</span></code> zawiera implementację własnego, intruzywnego inteligentnego wskaźnika (<code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code>) i powiązanej z nim klasy bazowej (<code class="docutils literal notranslate"><span class="pre">shared_object</span></code>).</p>
</section>
<section id="klasa-shared-object">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">shared_object</span></code><a class="headerlink" href="#klasa-shared-object" title="Link to this heading">#</a></h1>
</section>
<section id="id993">
<h1>Opis semantyczny<a class="headerlink" href="#id993" title="Link to this heading">#</a></h1>
<p>Jest to klasa bazowa, po której muszą dziedziczyć wszystkie klasy, które chcą być zarządzane przez <code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code>. Zawiera ona licznik referencji (<code class="docutils literal notranslate"><span class="pre">refs</span></code>) i metody do jego inkrementacji i dekrementacji. Jest to tzw. „intruzywny” wskaźnik, ponieważ sam obiekt przechowuje swój licznik referencji.</p>
</section>
<section id="id994">
<h1>Metody<a class="headerlink" href="#id994" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">add_ref()</span></code>: Inkrementuje licznik.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dec_ref()</span></code>: Dekrementuje licznik. Jeśli osiągnie 0, obiekt usuwa sam siebie (<code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">this</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_count()</span></code>: Zwraca liczbę referencji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">..._self_cast()</span></code>: Metody pomocnicze do bezpiecznego rzutowania <code class="docutils literal notranslate"><span class="pre">this</span></code> na <code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code>.</p></li>
</ul>
</section>
<section id="klasa-shared-object-ptr">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code><a class="headerlink" href="#klasa-shared-object-ptr" title="Link to this heading">#</a></h1>
</section>
<section id="id995">
<h1>Opis semantyczny<a class="headerlink" href="#id995" title="Link to this heading">#</a></h1>
<p>Jest to szablonowa klasa inteligentnego wskaźnika, która naśladuje zachowanie <code class="docutils literal notranslate"><span class="pre">std::shared_ptr</span></code>, ale współpracuje z <code class="docutils literal notranslate"><span class="pre">shared_object</span></code>. Zarządza czasem życia obiektu, na który wskazuje, automatycznie wywołując <code class="docutils literal notranslate"><span class="pre">add_ref</span></code> i <code class="docutils literal notranslate"><span class="pre">dec_ref</span></code>.</p>
</section>
<section id="metody-i-operatory">
<h1>Metody i operatory<a class="headerlink" href="#metody-i-operatory" title="Link to this heading">#</a></h1>
<p>Implementuje wszystkie standardowe operacje dla inteligentnych wskaźników: konstruktory, destruktor, operatory przypisania, dereferencji (<code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">→</span></code>), porównania, a także konwersję do <code class="docutils literal notranslate"><span class="pre">bool</span></code>.</p>
</section>
<section id="id996">
<h1>Funkcje pomocnicze<a class="headerlink" href="#id996" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_pointer</span></code>, <code class="docutils literal notranslate"><span class="pre">static_pointer_cast</span></code>, <code class="docutils literal notranslate"><span class="pre">const_pointer_cast</span></code>, <code class="docutils literal notranslate"><span class="pre">dynamic_pointer_cast</span></code>, <code class="docutils literal notranslate"><span class="pre">make_shared_object</span></code>: Funkcje globalne naśladujące te znane z <code class="docutils literal notranslate"><span class="pre">&lt;memory&gt;</span></code>.</p></li>
</ul>
</section>
<section id="id997">
<h1>Zależności i powiązania<a class="headerlink" href="#id997" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to fundamentalny element frameworka. Prawie wszystkie klasy, które są dynamicznie alokowane i przekazywane między różnymi częściami systemu (szczególnie do i z Lua), dziedziczą po <code class="docutils literal notranslate"><span class="pre">shared_object</span></code> i są zarządzane przez <code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="stdext-h">
<h1>📄 stdext.h<a class="headerlink" href="#stdext-h" title="Link to this heading">#</a></h1>
</section>
<section id="id998">
<h1>Opis ogólny<a class="headerlink" href="#id998" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">stdext.h</span></code> jest głównym plikiem nagłówkowym dla modułu <code class="docutils literal notranslate"><span class="pre">stdext</span></code> (standard extensions). Jego jedynym zadaniem jest dołączenie wszystkich innych plików nagłówkowych z tego modułu w jednym miejscu.</p>
</section>
<section id="id999">
<h1>Zawartość<a class="headerlink" href="#id999" title="Link to this heading">#</a></h1>
<p>Dołącza wszystkie pliki z <code class="docutils literal notranslate"><span class="pre">framework/stdext/</span></code>, w tym:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">compiler.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dumper.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">types.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exception.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">demangle.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cast.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">math.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">string.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boolean.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shared_object.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">any.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">packed_any.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dynamic_storage.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">packed_storage.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format.h</span></code></p></li>
</ul>
</section>
<section id="id1000">
<h1>Zależności i powiązania<a class="headerlink" href="#id1000" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest dołączany przez <code class="docutils literal notranslate"><span class="pre">global.h</span></code>, co sprawia, że wszystkie narzędzia z <code class="docutils literal notranslate"><span class="pre">stdext</span></code> są dostępne w całym projekcie.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="packed-storage-h">
<h1>📄 packed_storage.h<a class="headerlink" href="#packed-storage-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1001">
<h1>Opis ogólny<a class="headerlink" href="#id1001" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">packed_storage.h</span></code> deklaruje klasę szablonową <code class="docutils literal notranslate"><span class="pre">packed_storage</span></code>, która jest kontenerem asocjacyjnym zoptymalizowanym pod kątem minimalnego zużycia pamięci.</p>
</section>
<section id="klasa-packed-storage">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">packed_storage</span></code><a class="headerlink" href="#klasa-packed-storage" title="Link to this heading">#</a></h1>
</section>
<section id="id1002">
<h1>Opis semantyczny<a class="headerlink" href="#id1002" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">packed_storage</span></code> działa jak mapa, ale zamiast złożonych struktur drzewiastych lub tablic hashujących, przechowuje swoje elementy w prostej, dynamicznie alokowanej tablicy par <code class="docutils literal notranslate"><span class="pre">(klucz,</span> <span class="pre">wartość)</span></code>. Wartości są przechowywane w <code class="docutils literal notranslate"><span class="pre">packed_any</span></code>, co dodatkowo minimalizuje zużycie pamięci. Jest to rozwiązanie kompromisowe: zużywa bardzo mało pamięci, ale operacje wyszukiwania, dodawania i usuwania mają złożoność liniową O(n). Jest odpowiednia dla małej liczby elementów.</p>
</section>
<section id="id1003">
<h1>Metody publiczne<a class="headerlink" href="#id1003" title="Link to this heading">#</a></h1>
<p>Są analogiczne do <code class="docutils literal notranslate"><span class="pre">dynamic_storage</span></code>: <code class="docutils literal notranslate"><span class="pre">set</span></code>, <code class="docutils literal notranslate"><span class="pre">remove</span></code>, <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">has</span></code>, <code class="docutils literal notranslate"><span class="pre">clear</span></code>, <code class="docutils literal notranslate"><span class="pre">size</span></code>.</p>
</section>
<section id="id1004">
<h1>Zmienne prywatne<a class="headerlink" href="#id1004" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_values</span></code>: Wskaźnik na tablicę <code class="docutils literal notranslate"><span class="pre">value_pair</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_size</span></code>: Aktualna liczba elementów.</p></li>
</ul>
</section>
<section id="id1005">
<h1>Zależności i powiązania<a class="headerlink" href="#id1005" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdext/types.h</span></code>, <code class="docutils literal notranslate"><span class="pre">stdext/packed_any.h</span></code>.</p></li>
<li><p>Może być używana tam, gdzie liczy się każdy bajt pamięci, a liczba przechowywanych elementów jest niewielka.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="thread-h">
<h1>📄 thread.h<a class="headerlink" href="#thread-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1006">
<h1>Opis ogólny<a class="headerlink" href="#id1006" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">thread.h</span></code> jest prostym plikiem nagłówkowym, który dołącza standardowe nagłówki C++ związane z wielowątkowością.</p>
</section>
<section id="id1007">
<h1>Zawartość<a class="headerlink" href="#id1007" title="Link to this heading">#</a></h1>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;condition_variable&gt;</span>
<span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;mutex&gt;</span>
</pre></div>
</div>
</section>
<section id="id1008">
<h1>Zależności i powiązania<a class="headerlink" href="#id1008" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Służy jako centralny punkt dołączania nagłówków wielowątkowości, co ułatwia zarządzanie zależnościami.</p></li>
<li><p>Jest używany przez klasy takie jak <code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code>, <code class="docutils literal notranslate"><span class="pre">Logger</span></code>, <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="time-h">
<h1>📄 time.h<a class="headerlink" href="#time-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1009">
<h1>Opis ogólny<a class="headerlink" href="#id1009" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">time.h</span></code> deklaruje zestaw funkcji i klas do obsługi czasu, stanowiąc opakowanie na <code class="docutils literal notranslate"><span class="pre">std::chrono</span></code>.</p>
</section>
<section id="id1010">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code><a class="headerlink" href="#id1010" title="Link to this heading">#</a></h1>
</section>
<section id="id1011">
<h1>Funkcje<a class="headerlink" href="#id1011" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Funkcja</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">time()</span></code></p></td>
<td class="text-left"><p>Zwraca czas w sekundach od epoki (Unix timestamp).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">millis()</span></code></p></td>
<td class="text-left"><p>Zwraca czas w milisekundach od uruchomienia aplikacji.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">micros()</span></code></p></td>
<td class="text-left"><p>Zwraca czas w mikrosekundach od uruchomienia aplikacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">millisleep(size_t</span> <span class="pre">ms)</span></code></p></td>
<td class="text-left"><p>Usypia bieżący wątek na <code class="docutils literal notranslate"><span class="pre">ms</span></code> milisekund.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">microsleep(size_t</span> <span class="pre">us)</span></code></p></td>
<td class="text-left"><p>Usypia bieżący wątek na <code class="docutils literal notranslate"><span class="pre">us</span></code> mikrosekund.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="struktura-timer">
<h1>Struktura <code class="docutils literal notranslate"><span class="pre">timer</span></code><a class="headerlink" href="#struktura-timer" title="Link to this heading">#</a></h1>
<p>Prosta klasa-stoper, podobna do <code class="docutils literal notranslate"><span class="pre">Timer</span></code> z modułu <code class="docutils literal notranslate"><span class="pre">core</span></code>, ale działająca na „rzeczywistym” czasie z <code class="docutils literal notranslate"><span class="pre">stdext::micros()</span></code>, a nie na buforowanym czasie z <code class="docutils literal notranslate"><span class="pre">g_clock</span></code>.</p>
</section>
<section id="id1012">
<h1>Zależności i powiązania<a class="headerlink" href="#id1012" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdext/types.h</span></code>.</p></li>
<li><p>Implementacja w <code class="docutils literal notranslate"><span class="pre">time.cpp</span></code> używa <code class="docutils literal notranslate"><span class="pre">std::chrono</span></code> i <code class="docutils literal notranslate"><span class="pre">std::this_thread</span></code>.</p></li>
<li><p>Są to niskopoziomowe funkcje czasowe, na których bazuje <code class="docutils literal notranslate"><span class="pre">Clock</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="traits-h">
<h1>📄 traits.h<a class="headerlink" href="#traits-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1013">
<h1>Opis ogólny<a class="headerlink" href="#id1013" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">traits.h</span></code> zawiera szablony metaprogramowania (type traits), które są używane do manipulacji i analizy typów w czasie kompilacji.</p>
</section>
<section id="id1014">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code><a class="headerlink" href="#id1014" title="Link to this heading">#</a></h1>
</section>
<section id="szablony">
<h1>Szablony<a class="headerlink" href="#szablony" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">replace_extent</span></code></strong>: Usuwa wymiar tablicy z typu i zastępuje go wskaźnikiem. Np. <code class="docutils literal notranslate"><span class="pre">int[10]</span></code> staje się <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">int*</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">remove_const_ref</span></code></strong>: Metafunkcja, która z danego typu <code class="docutils literal notranslate"><span class="pre">T</span></code> usuwa kwalifikatory <code class="docutils literal notranslate"><span class="pre">const</span></code> oraz referencję, zwracając „czysty” typ. Np. <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::string&amp;</span></code> staje się <code class="docutils literal notranslate"><span class="pre">std::string</span></code>.</p></li>
</ul>
</section>
<section id="id1015">
<h1>Zależności i powiązania<a class="headerlink" href="#id1015" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;type_traits&gt;</span></code>: Standardowy nagłówek C++.</p></li>
<li><p>Są to zaawansowane narzędzia metaprogramowania, używane głównie w <code class="docutils literal notranslate"><span class="pre">luabinder.h</span></code> do analizy sygnatur funkcji i w <code class="docutils literal notranslate"><span class="pre">format.h</span></code> do obsługi argumentów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="string-h">
<h1>📄 string.h<a class="headerlink" href="#string-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1016">
<h1>Opis ogólny<a class="headerlink" href="#id1016" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">string.h</span></code> deklaruje zestaw funkcji pomocniczych do manipulacji i konwersji ciągów znaków (<code class="docutils literal notranslate"><span class="pre">std::string</span></code>).</p>
</section>
<section id="id1017">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code><a class="headerlink" href="#id1017" title="Link to this heading">#</a></h1>
</section>
<section id="id1018">
<h1>Funkcje<a class="headerlink" href="#id1018" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Funkcja</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">to_string&lt;T&gt;(...)</span></code> / <code class="docutils literal notranslate"><span class="pre">from_string&lt;T&gt;(...)</span></code></p></td>
<td class="text-left"><p>Skróty do <code class="docutils literal notranslate"><span class="pre">unsafe_cast</span></code> dla konwersji z/do stringa.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">resolve_path(...)</span></code></p></td>
<td class="text-left"><p>Łączy ścieżkę do pliku ze ścieżką źródłową.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">date_time_string()</span></code></p></td>
<td class="text-left"><p>Zwraca sformatowaną datę i czas.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">dec_to_hex(...)</span></code> / <code class="docutils literal notranslate"><span class="pre">hex_to_dec(...)</span></code></p></td>
<td class="text-left"><p>Konwersje między systemem dziesiętnym a szesnastkowym.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">tolower(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">toupper(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">trim(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">ucwords(...)</span></code></p></td>
<td class="text-left"><p>Standardowe operacje na stringach.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ends_with(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">starts_with(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">replace_all(...)</span></code></p></td>
<td class="text-left"><p>Operacje wyszukiwania i zamiany.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">is_valid_utf8(...)</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy string jest poprawnym ciągiem UTF-8.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">utf8_to_latin1(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">latin1_to_utf8(...)</span></code></p></td>
<td class="text-left"><p>Konwersje kodowania znaków.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">utf8_to_utf16(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">utf16_to_utf8(...)</span></code></p></td>
<td class="text-left"><p>(Windows) Konwersje do/z UTF-16 (<code class="docutils literal notranslate"><span class="pre">std::wstring</span></code>).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">split(...)</span></code></p></td>
<td class="text-left"><p>Dzieli string na wektor stringów na podstawie separatorów.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id1019">
<h1>Zależności i powiązania<a class="headerlink" href="#id1019" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdext/types.h</span></code>, <code class="docutils literal notranslate"><span class="pre">cast.h</span></code>.</p></li>
<li><p>Implementacja w <code class="docutils literal notranslate"><span class="pre">string.cpp</span></code> używa biblioteki Boost.StringAlgo do niektórych operacji.</p></li>
<li><p>Są to podstawowe funkcje narzędziowe używane w całym projekcie.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="time-cpp">
<h1>📄 time.cpp<a class="headerlink" href="#time-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1020">
<h1>Opis ogólny<a class="headerlink" href="#id1020" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">time.cpp</span></code> zawiera implementację funkcji czasowych zadeklarowanych w <code class="docutils literal notranslate"><span class="pre">time.h</span></code>.</p>
</section>
<section id="id1021">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code><a class="headerlink" href="#id1021" title="Link to this heading">#</a></h1>
</section>
<section id="startup-time">
<h1><code class="docutils literal notranslate"><span class="pre">startup_time</span></code><a class="headerlink" href="#startup-time" title="Link to this heading">#</a></h1>
<p>Statyczna zmienna, która przechowuje czas uruchomienia aplikacji. Jest używana jako punkt odniesienia dla <code class="docutils literal notranslate"><span class="pre">millis()</span></code> i <code class="docutils literal notranslate"><span class="pre">micros()</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">startup_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="implementacje-funkcji">
<h1>Implementacje funkcji<a class="headerlink" href="#implementacje-funkcji" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">time()</span></code></strong>: Używa <code class="docutils literal notranslate"><span class="pre">std::time(NULL)</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">millis()</span></code></strong>, <strong><code class="docutils literal notranslate"><span class="pre">micros()</span></code></strong>: Obliczają różnicę między bieżącym czasem a <code class="docutils literal notranslate"><span class="pre">startup_time</span></code> za pomocą <code class="docutils literal notranslate"><span class="pre">std::chrono</span></code> i konwertują wynik na odpowiednią jednostkę.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">millisleep()</span></code></strong>, <strong><code class="docutils literal notranslate"><span class="pre">microsleep()</span></code></strong>: Używają <code class="docutils literal notranslate"><span class="pre">std::this_thread::sleep_for</span></code>.</p></li>
</ul>
</section>
<section id="id1022">
<h1>Zależności i powiązania<a class="headerlink" href="#id1022" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdext/time.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;chrono&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;ctime&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;thread&gt;</span></code>: Standardowe biblioteki C++.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uri-h">
<h1>📄 uri.h<a class="headerlink" href="#uri-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1023">
<h1>Opis ogólny<a class="headerlink" href="#id1023" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uri.h</span></code> deklaruje strukturę <code class="docutils literal notranslate"><span class="pre">ParsedURI</span></code> oraz funkcję do parsowania adresów URL.</p>
</section>
<section id="struktura-parseduri">
<h1>Struktura <code class="docutils literal notranslate"><span class="pre">ParsedURI</span></code><a class="headerlink" href="#struktura-parseduri" title="Link to this heading">#</a></h1>
<p>Przechowuje rozbity na części adres URL.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Pole</p></th>
<th class="head text-left"><p>Typ</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">protocol</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td class="text-left"><p>Protokół (np. „http”, „wss”).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">domain</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td class="text-left"><p>Domena (np. „example.com”).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">port</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td class="text-left"><p>Port.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">query</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td class="text-left"><p>Ścieżka i zapytanie (np. „/path?a=1”).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="funkcja-parseuri">
<h1>Funkcja <code class="docutils literal notranslate"><span class="pre">parseURI</span></code><a class="headerlink" href="#funkcja-parseuri" title="Link to this heading">#</a></h1>
</section>
<section id="parseduri-parseuri-const-std-string-url">
<h1><code class="docutils literal notranslate"><span class="pre">ParsedURI</span> <span class="pre">parseURI(const</span> <span class="pre">std::string&amp;</span> <span class="pre">url)</span></code><a class="headerlink" href="#parseduri-parseuri-const-std-string-url" title="Link to this heading">#</a></h1>
<p>Parsuje podany URL i zwraca strukturę <code class="docutils literal notranslate"><span class="pre">ParsedURI</span></code> z jego komponentami.</p>
</section>
<section id="id1024">
<h1>Zależności i powiązania<a class="headerlink" href="#id1024" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code> i <code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code> do analizy podanego adresu URL.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="net-cpp">
<h1>📄 net.cpp<a class="headerlink" href="#net-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1025">
<h1>Opis ogólny<a class="headerlink" href="#id1025" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">net.cpp</span></code> zawiera implementację funkcji pomocniczych do operacji na adresach IP, zadeklarowanych w <code class="docutils literal notranslate"><span class="pre">net.h</span></code>.</p>
</section>
<section id="id1026">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code><a class="headerlink" href="#id1026" title="Link to this heading">#</a></h1>
</section>
<section id="std-string-ip-to-string-uint32-ip">
<h1><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">ip_to_string(uint32</span> <span class="pre">ip)</span></code><a class="headerlink" href="#std-string-ip-to-string-uint32-ip" title="Link to this heading">#</a></h1>
<p>Konwertuje 32-bitowy adres IP z porządku sieciowego na porządek hosta, a następnie na <code class="docutils literal notranslate"><span class="pre">std::string</span></code> za pomocą <code class="docutils literal notranslate"><span class="pre">boost::asio::ip::address_v4</span></code>.</p>
</section>
<section id="uint32-string-to-ip-const-std-string-string">
<h1><code class="docutils literal notranslate"><span class="pre">uint32</span> <span class="pre">string_to_ip(const</span> <span class="pre">std::string&amp;</span> <span class="pre">string)</span></code><a class="headerlink" href="#uint32-string-to-ip-const-std-string-string" title="Link to this heading">#</a></h1>
<p>Konwertuje <code class="docutils literal notranslate"><span class="pre">std::string</span></code> na obiekt <code class="docutils literal notranslate"><span class="pre">address_v4</span></code>, a następnie na 32-bitową liczbę w porządku sieciowym.</p>
</section>
<section id="std-vector-uint32-listsubnetaddresses-uint32-address-uint8-mask">
<h1><code class="docutils literal notranslate"><span class="pre">std::vector&lt;uint32&gt;</span> <span class="pre">listSubnetAddresses(uint32</span> <span class="pre">address,</span> <span class="pre">uint8</span> <span class="pre">mask)</span></code><a class="headerlink" href="#std-vector-uint32-listsubnetaddresses-uint32-address-uint8-mask" title="Link to this heading">#</a></h1>
<p>Generuje listę wszystkich adresów IP w podanej podsieci. Oblicza maskę bitową i iteruje po wszystkich możliwych adresach w zakresie, dodając je do listy.</p>
</section>
<section id="id1027">
<h1>Zależności i powiązania<a class="headerlink" href="#id1027" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/net.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/asio</span></code>: Używana do konwersji adresów IP.</p></li>
<li><p>Są to funkcje narzędziowe używane w logice sieciowej.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uri-cpp">
<h1>📄 uri.cpp<a class="headerlink" href="#uri-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1028">
<h1>Opis ogólny<a class="headerlink" href="#id1028" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uri.cpp</span></code> zawiera implementację funkcji <code class="docutils literal notranslate"><span class="pre">parseURI</span></code> do parsowania adresów URL.</p>
</section>
<section id="id1029">
<h1>Funkcja <code class="docutils literal notranslate"><span class="pre">parseURI</span></code><a class="headerlink" href="#id1029" title="Link to this heading">#</a></h1>
</section>
<section id="id1030">
<h1><code class="docutils literal notranslate"><span class="pre">ParsedURI</span> <span class="pre">parseURI(const</span> <span class="pre">std::string&amp;</span> <span class="pre">url)</span></code><a class="headerlink" href="#id1030" title="Link to this heading">#</a></h1>
<p>Używa wyrażenia regularnego (<code class="docutils literal notranslate"><span class="pre">std::regex</span></code>) do rozbicia adresu URL na jego komponenty: protokół, domenę, port i ścieżkę/zapytanie. Obsługuje protokoły „http”, „https”, „ws”, „wss” i poprawnie ustawia domyślne porty (80 dla http/ws, 443 dla https/wss).</p>
</section>
<section id="id1031">
<h1>Zależności i powiązania<a class="headerlink" href="#id1031" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/uri.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;regex&gt;</span></code>: Do parsowania.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/algorithm/string.hpp</span></code>: Do konwersji na małe litery.</p></li>
<li><p>Jest używana przez <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code> i <code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="types-h">
<h1>📄 types.h<a class="headerlink" href="#types-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1032">
<h1>Opis ogólny<a class="headerlink" href="#id1032" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">types.h</span></code> definiuje zestaw aliasów dla typów całkowitoliczbowych o stałym rozmiarze oraz inne podstawowe typy używane w całym frameworku.</p>
</section>
<section id="id1033">
<h1>Definicje typów<a class="headerlink" href="#id1033" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Skróty</strong>: <code class="docutils literal notranslate"><span class="pre">uchar</span></code>, <code class="docutils literal notranslate"><span class="pre">ushort</span></code>, <code class="docutils literal notranslate"><span class="pre">uint</span></code>, <code class="docutils literal notranslate"><span class="pre">ulong</span></code>.</p></li>
<li><p><strong>Liczby o stałym rozmiarze</strong>: <code class="docutils literal notranslate"><span class="pre">uint64</span></code>, <code class="docutils literal notranslate"><span class="pre">uint32</span></code>, <code class="docutils literal notranslate"><span class="pre">uint16</span></code>, <code class="docutils literal notranslate"><span class="pre">uint8</span></code> oraz ich wersje ze znakiem (<code class="docutils literal notranslate"><span class="pre">int...</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ticks_t</span></code></strong>: Alias dla <code class="docutils literal notranslate"><span class="pre">int64</span></code>, używany do przechowywania czasu w milisekundach lub mikrosekundach.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">refcount_t</span></code></strong>: Typ dla licznika referencji.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">size_t</span></code>, <code class="docutils literal notranslate"><span class="pre">ptrdiff_t</span></code></strong>: Importuje typy ze <code class="docutils literal notranslate"><span class="pre">std</span></code>.</p></li>
</ul>
</section>
<section id="id1034">
<h1>Zależności i powiązania<a class="headerlink" href="#id1034" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;cstdint&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;cstddef&gt;</span></code>: Standardowe nagłówki.</p></li>
<li><p>Jest to fundamentalny plik, dołączany przez <code class="docutils literal notranslate"><span class="pre">stdext.h</span></code> i <code class="docutils literal notranslate"><span class="pre">global.h</span></code>, zapewniający spójne i przenośne typy danych w całym projekcie.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="format-h">
<h1>📄 format.h<a class="headerlink" href="#format-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1035">
<h1>Opis ogólny<a class="headerlink" href="#id1035" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">format.h</span></code> zawiera implementację funkcji <code class="docutils literal notranslate"><span class="pre">stdext::format</span></code>, która jest bezpieczną typowo alternatywą dla <code class="docutils literal notranslate"><span class="pre">sprintf</span></code>, podobną do <code class="docutils literal notranslate"><span class="pre">boost::format</span></code> lub <code class="docutils literal notranslate"><span class="pre">fmt::format</span></code>.</p>
</section>
<section id="id1036">
<h1>Funkcje<a class="headerlink" href="#id1036" title="Link to this heading">#</a></h1>
</section>
<section id="stdext-print">
<h1><code class="docutils literal notranslate"><span class="pre">stdext::print(...)</span></code><a class="headerlink" href="#stdext-print" title="Link to this heading">#</a></h1>
<p>Funkcja debugująca, która wypisuje na konsolę dowolną liczbę argumentów, oddzielając je tabulatorami, podobnie jak <code class="docutils literal notranslate"><span class="pre">print</span></code> w Lua.</p>
</section>
<section id="stdext-snprintf">
<h1><code class="docutils literal notranslate"><span class="pre">stdext::snprintf(...)</span></code><a class="headerlink" href="#stdext-snprintf" title="Link to this heading">#</a></h1>
<p>Opakowanie na <code class="docutils literal notranslate"><span class="pre">snprintf</span></code> / <code class="docutils literal notranslate"><span class="pre">_snprintf</span></code>, które potrafi obsługiwać typy niestandardowe, takie jak <code class="docutils literal notranslate"><span class="pre">std::string</span></code>, poprzez <code class="docutils literal notranslate"><span class="pre">sprintf_cast</span></code>.</p>
</section>
<section id="stdext-format">
<h1><code class="docutils literal notranslate"><span class="pre">stdext::format(...)</span></code><a class="headerlink" href="#stdext-format" title="Link to this heading">#</a></h1>
<p>Główna funkcja.</p>
<ul class="simple">
<li><p><strong>Działanie</strong>:</p>
<ol class="arabic simple">
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">snprintf</span></code> z <code class="docutils literal notranslate"><span class="pre">NULL</span></code> jako buforem, aby obliczyć wymaganą długość wynikowego stringa.</p></li>
<li><p>Alokuje <code class="docutils literal notranslate"><span class="pre">std::string</span></code> o odpowiednim rozmiarze.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">snprintf</span></code> ponownie, tym razem zapisując wynik do bufora stringa.</p></li>
</ol>
</li>
<li><p><strong>Zalety</strong>: Jest w pełni bezpieczna (brak przepełnienia bufora) i obsługuje różne typy danych.</p></li>
</ul>
</section>
<section id="id1037">
<h1>Zależności i powiązania<a class="headerlink" href="#id1037" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdext/traits.h</span></code>: Do analizy typów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;tuple&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;sstream&gt;</span></code>: Do metaprogramowania i formatowania.</p></li>
<li><p>Jest to kluczowe narzędzie używane w całym projekcie do formatowania stringów, szczególnie w logach i komunikatach o błędach.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="string-cpp">
<h1>📄 string.cpp<a class="headerlink" href="#string-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1038">
<h1>Opis ogólny<a class="headerlink" href="#id1038" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">string.cpp</span></code> zawiera implementację funkcji pomocniczych do manipulacji stringami, zadeklarowanych w <code class="docutils literal notranslate"><span class="pre">string.h</span></code>.</p>
</section>
<section id="id1039">
<h1>Funkcje<a class="headerlink" href="#id1039" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">resolve_path(...)</span></code></strong>: Implementuje logikę łączenia ścieżek, obsługując ścieżki absolutne i względne.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">date_time_string()</span></code>, <code class="docutils literal notranslate"><span class="pre">timestamp_to_date(...)</span></code></strong>: Używają <code class="docutils literal notranslate"><span class="pre">std::localtime</span></code> i <code class="docutils literal notranslate"><span class="pre">std::strftime</span></code> do formatowania daty i czasu.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">dec_to_hex(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">hex_to_dec(...)</span></code></strong>: Używają <code class="docutils literal notranslate"><span class="pre">std::stringstream</span></code> do konwersji.</p></li>
<li><p><strong>Konwersje kodowania</strong>: <code class="docutils literal notranslate"><span class="pre">is_valid_utf8</span></code> implementuje walidację bajt po bajcie. <code class="docutils literal notranslate"><span class="pre">utf8_to_latin1</span></code> i <code class="docutils literal notranslate"><span class="pre">latin1_to_utf8</span></code> implementują uproszczoną konwersję. Wersje dla Windows (<code class="docutils literal notranslate"><span class="pre">..._to_utf16</span></code>) używają funkcji WinAPI <code class="docutils literal notranslate"><span class="pre">MultiByteToWideChar</span></code> i <code class="docutils literal notranslate"><span class="pre">WideCharToMultiByte</span></code>.</p></li>
<li><p><strong>Inne operacje</strong>: <code class="docutils literal notranslate"><span class="pre">tolower</span></code>, <code class="docutils literal notranslate"><span class="pre">toupper</span></code>, <code class="docutils literal notranslate"><span class="pre">trim</span></code>, <code class="docutils literal notranslate"><span class="pre">ends_with</span></code>, <code class="docutils literal notranslate"><span class="pre">starts_with</span></code>, <code class="docutils literal notranslate"><span class="pre">replace_all</span></code>, <code class="docutils literal notranslate"><span class="pre">split</span></code> są opakowaniami na odpowiednie funkcje z biblioteki Boost.StringAlgo.</p></li>
</ul>
</section>
<section id="id1040">
<h1>Zależności i powiązania<a class="headerlink" href="#id1040" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/stdext/string.h</span></code>, <code class="docutils literal notranslate"><span class="pre">format.h</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/algorithm/string.hpp</span></code>: Kluczowa zależność dla wielu operacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">physfs.h</span></code>: Potencjalnie, choć nie jest bezpośrednio używany.</p></li>
<li><p>Nagłówki WinAPI (dla konwersji kodowania).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id1041">
<h1>📄 declarations.h<a class="headerlink" href="#id1041" title="Link to this heading">#</a></h1>
</section>
<section id="id1042">
<h1>Opis ogólny<a class="headerlink" href="#id1042" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">declarations.h</span></code> w module <code class="docutils literal notranslate"><span class="pre">ui</span></code> jest plikiem nagłówkowym do wczesnych deklaracji (forward declarations) i definicji typów dla klas interfejsu użytkownika.</p>
</section>
<section id="id1043">
<h1>Wczesne deklaracje<a class="headerlink" href="#id1043" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UIManager</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UIWidget</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UILayout</span></code> i wszystkie jego podklasy (<code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code>, <code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code>, etc.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UIAnchor</span></code>, <code class="docutils literal notranslate"><span class="pre">UIAnchorGroup</span></code>, <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code></p></li>
</ul>
</section>
<section id="id1044">
<h1>Definicje typów<a class="headerlink" href="#id1044" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UIWidgetPtr</span></code>, <code class="docutils literal notranslate"><span class="pre">UITextEditPtr</span></code>, <code class="docutils literal notranslate"><span class="pre">UILayoutPtr</span></code>, …: Aliasy dla <code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code> do klas UI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UIWidgetList</span></code>: Alias dla <code class="docutils literal notranslate"><span class="pre">std::deque&lt;UIWidgetPtr&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UIAnchorList</span></code>: Alias dla <code class="docutils literal notranslate"><span class="pre">std::vector&lt;UIAnchorPtr&gt;</span></code>.</p></li>
</ul>
</section>
<section id="id1045">
<h1>Zależności i powiązania<a class="headerlink" href="#id1045" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/global.h</span></code>: Podstawowe definicje.</p></li>
<li><p>Jest dołączany przez wszystkie pliki nagłówkowe w module <code class="docutils literal notranslate"><span class="pre">ui</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="ui-h">
<h1>📄 ui.h<a class="headerlink" href="#ui-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1046">
<h1>Opis ogólny<a class="headerlink" href="#id1046" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">ui.h</span></code> jest głównym, zbiorczym plikiem nagłówkowym dla modułu UI. Jego zadaniem jest dołączenie wszystkich najważniejszych nagłówków związanych z interfejsem użytkownika w jednym miejscu.</p>
</section>
<section id="id1047">
<h1>Zawartość<a class="headerlink" href="#id1047" title="Link to this heading">#</a></h1>
<p>Dołącza wszystkie podstawowe komponenty UI:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uimanager.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uiwidget.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uitextedit.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uilayout.h</span></code> i jego pochodne (<code class="docutils literal notranslate"><span class="pre">uihorizontallayout.h</span></code>, <code class="docutils literal notranslate"><span class="pre">uiverticallayout.h</span></code>, <code class="docutils literal notranslate"><span class="pre">uigridlayout.h</span></code>, <code class="docutils literal notranslate"><span class="pre">uianchorlayout.h</span></code>).</p></li>
</ul>
</section>
<section id="id1048">
<h1>Zależności i powiązania<a class="headerlink" href="#id1048" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Ułatwia dołączanie całego podsystemu UI w innych częściach projektu, które go potrzebują (np. w plikach modułów gry).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uiboxlayout-cpp">
<h1>📄 uiboxlayout.cpp<a class="headerlink" href="#uiboxlayout-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1049">
<h1>Opis ogólny<a class="headerlink" href="#id1049" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uiboxlayout.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code>, która jest abstrakcyjną klasą bazową dla layoutów układających widgety w jednej linii (poziomo lub pionowo).</p>
</section>
<section id="klasa-uiboxlayout">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code><a class="headerlink" href="#klasa-uiboxlayout" title="Link to this heading">#</a></h1>
</section>
<section id="uiboxlayout-uiboxlayout-uiwidgetptr-parentwidget">
<h1><code class="docutils literal notranslate"><span class="pre">UIBoxLayout::UIBoxLayout(UIWidgetPtr</span> <span class="pre">parentWidget)</span></code><a class="headerlink" href="#uiboxlayout-uiboxlayout-uiwidgetptr-parentwidget" title="Link to this heading">#</a></h1>
<p>Konstruktor. Wywołuje konstruktor <code class="docutils literal notranslate"><span class="pre">UILayout</span></code> i inicjalizuje <code class="docutils literal notranslate"><span class="pre">m_spacing</span></code> na 0.</p>
</section>
<section id="void-uiboxlayout-applystyle-const-otmlnodeptr-stylenode">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIBoxLayout::applyStyle(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">styleNode)</span></code><a class="headerlink" href="#void-uiboxlayout-applystyle-const-otmlnodeptr-stylenode" title="Link to this heading">#</a></h1>
<p>Parsuje atrybuty specyficzne dla <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code> z węzła OTML.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">spacing</span></code>: Odstęp między widgetami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fit-children</span></code>: Flaga określająca, czy layout powinien dostosować rozmiar rodzica do sumarycznego rozmiaru dzieci.</p></li>
</ul>
</section>
<section id="addwidget-i-removewidget">
<h1><code class="docutils literal notranslate"><span class="pre">addWidget</span></code> i <code class="docutils literal notranslate"><span class="pre">removeWidget</span></code><a class="headerlink" href="#addwidget-i-removewidget" title="Link to this heading">#</a></h1>
<p>Te metody po prostu wywołują <code class="docutils literal notranslate"><span class="pre">update()</span></code>, ponieważ każda zmiana w liczbie dzieci wymaga ponownego przeliczenia layoutu.</p>
</section>
<section id="id1050">
<h1>Zależności i powiązania<a class="headerlink" href="#id1050" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiboxlayout.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>: Operuje na widgetach.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code> i <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uiboxlayout-h">
<h1>📄 uiboxlayout.h<a class="headerlink" href="#uiboxlayout-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1051">
<h1>Opis ogólny<a class="headerlink" href="#id1051" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uiboxlayout.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code>, która jest abstrakcyjną klasą bazową dla layoutów liniowych.</p>
</section>
<section id="id1052">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code><a class="headerlink" href="#id1052" title="Link to this heading">#</a></h1>
</section>
<section id="id1053">
<h1>Opis semantyczny<a class="headerlink" href="#id1053" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">UILayout</span></code> i dodaje wspólną funkcjonalność dla layoutów horyzontalnych i wertykalnych, a mianowicie:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">spacing</span></code>: Odstęp między kolejnymi elementami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fit-children</span></code>: Możliwość automatycznego dostosowania rozmiaru widgetu-rodzica, aby zmieścił wszystkie swoje dzieci.</p></li>
</ul>
</section>
<section id="id1054">
<h1>Metody publiczne<a class="headerlink" href="#id1054" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setSpacing(int</span> <span class="pre">spacing)</span></code></p></td>
<td class="text-left"><p>Ustawia odstęp między widgetami.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setFitChildren(bool</span> <span class="pre">fitParent)</span></code></p></td>
<td class="text-left"><p>Włącza/wyłącza dopasowywanie rozmiaru rodzica.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id1055">
<h1>Zmienne chronione<a class="headerlink" href="#id1055" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_fitChildren</span></code>: Flaga <code class="docutils literal notranslate"><span class="pre">fit-children</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_spacing</span></code>: Wartość odstępu.</p></li>
</ul>
</section>
<section id="id1056">
<h1>Zależności i powiązania<a class="headerlink" href="#id1056" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uilayout.h</span></code>: Klasa bazowa.</p></li>
<li><p>Jest klasą bazową dla <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code> i <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code>.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, jej metody są dostępne w Lua.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uigridlayout-cpp">
<h1>📄 uigridlayout.cpp<a class="headerlink" href="#uigridlayout-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1057">
<h1>Opis ogólny<a class="headerlink" href="#id1057" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uigridlayout.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code>, która układa widgety w siatce o stałym rozmiarze komórek.</p>
</section>
<section id="klasa-uigridlayout">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code><a class="headerlink" href="#klasa-uigridlayout" title="Link to this heading">#</a></h1>
</section>
<section id="uigridlayout-uigridlayout">
<h1><code class="docutils literal notranslate"><span class="pre">UIGridLayout::UIGridLayout(...)</span></code><a class="headerlink" href="#uigridlayout-uigridlayout" title="Link to this heading">#</a></h1>
<p>Konstruktor, ustawia domyślne wartości (rozmiar komórki 16x16, 1 kolumna).</p>
</section>
<section id="void-uigridlayout-applystyle">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIGridLayout::applyStyle(...)</span></code><a class="headerlink" href="#void-uigridlayout-applystyle" title="Link to this heading">#</a></h1>
<p>Parsuje atrybuty specyficzne dla siatki z węzła OTML, takie jak <code class="docutils literal notranslate"><span class="pre">cell-size</span></code>, <code class="docutils literal notranslate"><span class="pre">cell-spacing</span></code>, <code class="docutils literal notranslate"><span class="pre">num-columns</span></code>, <code class="docutils literal notranslate"><span class="pre">flow</span></code>.</p>
</section>
<section id="bool-uigridlayout-internalupdate">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIGridLayout::internalUpdate()</span></code><a class="headerlink" href="#bool-uigridlayout-internalupdate" title="Link to this heading">#</a></h1>
</section>
<section id="id1058">
<h1>Opis semantyczny<a class="headerlink" href="#id1058" title="Link to this heading">#</a></h1>
<p>Główna metoda przeliczająca pozycje widgetów w siatce.</p>
</section>
<section id="id1059">
<h1>Działanie<a class="headerlink" href="#id1059" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Pobiera listę dzieci od rodzica.</p></li>
<li><p><strong>Tryb <code class="docutils literal notranslate"><span class="pre">flow</span></code></strong>: Jeśli włączony, dynamicznie oblicza liczbę kolumn (<code class="docutils literal notranslate"><span class="pre">numColumns</span></code>), tak aby zmieściły się w szerokości rodzica. Na podstawie tego oblicza liczbę wierszy.</p></li>
<li><p><strong>Tryb <code class="docutils literal notranslate"><span class="pre">auto-spacing</span></code></strong>: Jeśli włączony, dynamicznie oblicza odstęp między komórkami (<code class="docutils literal notranslate"><span class="pre">cellSpacing</span></code>), aby równomiernie rozłożyć je na całej szerokości rodzica.</p></li>
<li><p>W pętli przechodzi przez wszystkie widoczne widgety:</p>
<ul class="simple">
<li><p>Oblicza wiersz i kolumnę dla bieżącego widgetu.</p></li>
<li><p>Na tej podstawie oblicza jego pozycję.</p></li>
<li><p>Ustawia docelowy prostokąt (<code class="docutils literal notranslate"><span class="pre">Rect</span></code>) widgetu na rozmiar komórki w obliczonej pozycji.</p></li>
</ul>
</li>
<li><p><strong>Tryb <code class="docutils literal notranslate"><span class="pre">fit-children</span></code></strong>: Jeśli włączony, oblicza wymaganą wysokość rodzica, aby zmieścić wszystkie wiersze, i planuje jej ustawienie w <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code> (aby uniknąć problemów z rekurencyjnymi aktualizacjami).</p></li>
</ol>
</section>
<section id="id1060">
<h1>Zależności i powiązania<a class="headerlink" href="#id1060" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uigridlayout.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>: Operuje na widgetach.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do asynchronicznego ustawiania wysokości rodzica.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uigridlayout-h">
<h1>📄 uigridlayout.h<a class="headerlink" href="#uigridlayout-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1061">
<h1>Opis ogólny<a class="headerlink" href="#id1061" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uigridlayout.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code>, która implementuje layout siatkowy.</p>
</section>
<section id="id1062">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code><a class="headerlink" href="#id1062" title="Link to this heading">#</a></h1>
</section>
<section id="id1063">
<h1>Opis semantyczny<a class="headerlink" href="#id1063" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code> układa swoje widgety w regularnej siatce. Może mieć stałą liczbę kolumn lub dynamicznie dostosowywać ją do dostępnej przestrzeni (<code class="docutils literal notranslate"><span class="pre">flow</span></code>). Posiada również opcje automatycznego dostosowywania odstępów i rozmiaru rodzica.</p>
</section>
<section id="id1064">
<h1>Metody publiczne<a class="headerlink" href="#id1064" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setCellSize(...)</span></code></p></td>
<td class="text-left"><p>Ustawia rozmiar pojedynczej komórki siatki.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setCellSpacing(...)</span></code></p></td>
<td class="text-left"><p>Ustawia odstęp między komórkami.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setNumColumns(...)</span></code></p></td>
<td class="text-left"><p>Ustawia stałą liczbę kolumn.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setNumLines(...)</span></code></p></td>
<td class="text-left"><p>Ustawia maksymalną liczbę wierszy.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setFlow(bool</span> <span class="pre">enable)</span></code></p></td>
<td class="text-left"><p>Włącza/wyłącza tryb „płynny”, w którym liczba kolumn jest dynamiczna.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setAutoSpacing(bool</span> <span class="pre">enable)</span></code></p></td>
<td class="text-left"><p>Włącza/wyłącza automatyczne obliczanie odstępów.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setFitChildren(bool</span> <span class="pre">enable)</span></code></p></td>
<td class="text-left"><p>Włącza/wyłącza dopasowywanie wysokości rodzica.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id1065">
<h1>Zmienne prywatne<a class="headerlink" href="#id1065" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_cellSize</span></code>: Rozmiar komórki.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_cellSpacing</span></code>: Odstęp między komórkami.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_numColumns</span></code>, <code class="docutils literal notranslate"><span class="pre">m_numLines</span></code>: Liczba kolumn i wierszy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_autoSpacing</span></code>, <code class="docutils literal notranslate"><span class="pre">m_fitChildren</span></code>, <code class="docutils literal notranslate"><span class="pre">m_flow</span></code>: Flagi trybów.</p></li>
</ul>
</section>
<section id="id1066">
<h1>Zależności i powiązania<a class="headerlink" href="#id1066" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uilayout.h</span></code>: Klasa bazowa.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uihorizontallayout-cpp">
<h1>📄 uihorizontallayout.cpp<a class="headerlink" href="#uihorizontallayout-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1067">
<h1>Opis ogólny<a class="headerlink" href="#id1067" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uihorizontallayout.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code>, która układa widgety w jednym rzędzie, od lewej do prawej lub od prawej do lewej.</p>
</section>
<section id="klasa-uihorizontallayout">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code><a class="headerlink" href="#klasa-uihorizontallayout" title="Link to this heading">#</a></h1>
</section>
<section id="void-uihorizontallayout-applystyle">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIHorizontalLayout::applyStyle(...)</span></code><a class="headerlink" href="#void-uihorizontallayout-applystyle" title="Link to this heading">#</a></h1>
<p>Parsuje atrybut <code class="docutils literal notranslate"><span class="pre">align-right</span></code> z węzła OTML.</p>
</section>
<section id="bool-uihorizontallayout-internalupdate">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIHorizontalLayout::internalUpdate()</span></code><a class="headerlink" href="#bool-uihorizontallayout-internalupdate" title="Link to this heading">#</a></h1>
</section>
<section id="id1068">
<h1>Opis semantyczny<a class="headerlink" href="#id1068" title="Link to this heading">#</a></h1>
<p>Główna metoda przeliczająca pozycje widgetów.</p>
</section>
<section id="id1069">
<h1>Działanie<a class="headerlink" href="#id1069" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Pobiera listę dzieci. Jeśli <code class="docutils literal notranslate"><span class="pre">m_alignRight</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code>, odwraca kolejność listy.</p></li>
<li><p>Iteruje po widgetach:</p>
<ul class="simple">
<li><p>Oblicza pozycję <code class="docutils literal notranslate"><span class="pre">x</span></code> na podstawie pozycji i szerokości poprzedniego widgetu oraz odstępów (<code class="docutils literal notranslate"><span class="pre">spacing</span></code>, <code class="docutils literal notranslate"><span class="pre">margin</span></code>).</p></li>
<li><p>Oblicza pozycję <code class="docutils literal notranslate"><span class="pre">y</span></code> w zależności od wyrównania pionowego widgetu (<code class="docutils literal notranslate"><span class="pre">AlignTop</span></code>, <code class="docutils literal notranslate"><span class="pre">AlignBottom</span></code>, <code class="docutils literal notranslate"><span class="pre">AlignCenter</span></code>) wewnątrz wysokości rodzica.</p></li>
<li><p>Jeśli widget nie ma stałego rozmiaru, jego wysokość jest rozciągana do wysokości rodzica.</p></li>
<li><p>Ustawia nowy <code class="docutils literal notranslate"><span class="pre">Rect</span></code> dla widgetu.</p></li>
</ul>
</li>
<li><p>Oblicza sumaryczną, preferowaną szerokość (<code class="docutils literal notranslate"><span class="pre">preferredWidth</span></code>).</p></li>
<li><p>Jeśli <code class="docutils literal notranslate"><span class="pre">m_fitChildren</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code>, planuje asynchroniczne ustawienie szerokości rodzica na <code class="docutils literal notranslate"><span class="pre">preferredWidth</span></code>.</p></li>
</ol>
</section>
<section id="id1070">
<h1>Zależności i powiązania<a class="headerlink" href="#id1070" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uihorizontallayout.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>: Operuje na widgetach.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do asynchronicznego ustawiania szerokości rodzica.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uihorizontallayout-h">
<h1>📄 uihorizontallayout.h<a class="headerlink" href="#uihorizontallayout-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1071">
<h1>Opis ogólny<a class="headerlink" href="#id1071" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uihorizontallayout.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code>, która implementuje layout horyzontalny.</p>
</section>
<section id="id1072">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code><a class="headerlink" href="#id1072" title="Link to this heading">#</a></h1>
</section>
<section id="id1073">
<h1>Opis semantyczny<a class="headerlink" href="#id1073" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code> i specjalizuje go do układania widgetów w pojedynczym rzędzie. Może układać elementy od lewej do prawej (domyślnie) lub od prawej do lewej (<code class="docutils literal notranslate"><span class="pre">align-right</span></code>).</p>
</section>
<section id="id1074">
<h1>Metody publiczne<a class="headerlink" href="#id1074" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setAlignRight(bool</span> <span class="pre">alignRight)</span></code></p></td>
<td class="text-left"><p>Włącza/wyłącza układanie od prawej do lewej.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id1075">
<h1>Zmienne chronione<a class="headerlink" href="#id1075" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_alignRight</span></code>: Flaga trybu wyrównania do prawej.</p></li>
</ul>
</section>
<section id="id1076">
<h1>Zależności i powiązania<a class="headerlink" href="#id1076" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiboxlayout.h</span></code>: Klasa bazowa.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uilayout-cpp">
<h1>📄 uilayout.cpp<a class="headerlink" href="#uilayout-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1077">
<h1>Opis ogólny<a class="headerlink" href="#id1077" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uilayout.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">UILayout</span></code>, która jest abstrakcyjną klasą bazową dla wszystkich menedżerów layoutu.</p>
</section>
<section id="klasa-uilayout">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UILayout</span></code><a class="headerlink" href="#klasa-uilayout" title="Link to this heading">#</a></h1>
</section>
<section id="void-uilayout-update">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UILayout::update()</span></code><a class="headerlink" href="#void-uilayout-update" title="Link to this heading">#</a></h1>
</section>
<section id="id1078">
<h1>Opis semantyczny<a class="headerlink" href="#id1078" title="Link to this heading">#</a></h1>
<p>Główna metoda publiczna inicjująca aktualizację layoutu.</p>
</section>
<section id="id1079">
<h1>Działanie<a class="headerlink" href="#id1079" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy aktualizacje nie są wyłączone (<code class="docutils literal notranslate"><span class="pre">m_updateDisabled</span></code>).</p></li>
<li><p>Sprawdza, czy aktualizacja nie jest już w toku (<code class="docutils literal notranslate"><span class="pre">m_updating</span></code>), aby zapobiec rekurencji. Jeśli tak, planuje aktualizację na później (<code class="docutils literal notranslate"><span class="pre">updateLater()</span></code>).</p></li>
<li><p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_updating</span></code> na <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>Wywołuje wirtualną metodę <code class="docutils literal notranslate"><span class="pre">internalUpdate()</span></code>, gdzie klasy pochodne implementują swoją logikę.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">callback</span></code> <code class="docutils literal notranslate"><span class="pre">onLayoutUpdate</span></code> na widżecie-rodzicu.</p></li>
<li><p>Resetuje flagę <code class="docutils literal notranslate"><span class="pre">m_updating</span></code>.</p></li>
</ol>
</section>
<section id="void-uilayout-updatelater">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UILayout::updateLater()</span></code><a class="headerlink" href="#void-uilayout-updatelater" title="Link to this heading">#</a></h1>
<p>Planuje wykonanie <code class="docutils literal notranslate"><span class="pre">update()</span></code> w następnej iteracji pętli <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code>. Jest to mechanizm zapobiegający wielokrotnym, zbędnym przeliczeniom layoutu w tej samej klatce.</p>
</section>
<section id="id1080">
<h1>Zależności i powiązania<a class="headerlink" href="#id1080" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uilayout.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>: Każdy layout jest powiązany z widgetem-rodzicem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do planowania opóźnionych aktualizacji.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uilayout-h">
<h1>📄 uilayout.h<a class="headerlink" href="#uilayout-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1081">
<h1>Opis ogólny<a class="headerlink" href="#id1081" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uilayout.h</span></code> deklaruje abstrakcyjną klasę bazową <code class="docutils literal notranslate"><span class="pre">UILayout</span></code>, która definiuje wspólny interfejs dla wszystkich klas zarządzających pozycją i rozmiarem widgetów-dzieci.</p>
</section>
<section id="id1082">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UILayout</span></code><a class="headerlink" href="#id1082" title="Link to this heading">#</a></h1>
</section>
<section id="id1083">
<h1>Opis semantyczny<a class="headerlink" href="#id1083" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">UILayout</span></code> jest powiązany z jednym widgetem-rodzicem (<code class="docutils literal notranslate"><span class="pre">m_parentWidget</span></code>). Jego zadaniem jest automatyczne zarządzanie geometrią dzieci tego widgetu. Każda podklasa (<code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code>, <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code> itd.) implementuje inny algorytm układania elementów. Posiada mechanizmy do włączania/wyłączania aktualizacji oraz do unikania rekurencyjnych i zbędnych przeliczeń.</p>
</section>
<section id="id1084">
<h1>Metody publiczne<a class="headerlink" href="#id1084" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">UILayout(UIWidgetPtr</span> <span class="pre">parentWidget)</span></code></p></td>
<td class="text-left"><p>Konstruktor.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">update()</span></code></p></td>
<td class="text-left"><p>Natychmiast żąda przeliczenia layoutu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">updateLater()</span></code></p></td>
<td class="text-left"><p>Planuje przeliczenie layoutu w najbliższej przyszłości.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">applyStyle(...)</span></code></p></td>
<td class="text-left"><p>Stosuje właściwości layoutu z węzła OTML.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">addWidget(...)</span></code></p></td>
<td class="text-left"><p>Powiadamia layout o dodaniu nowego widgetu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">void</span> <span class="pre">removeWidget(...)</span></code></p></td>
<td class="text-left"><p>Powiadamia layout o usunięciu widgetu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">disableUpdates()</span></code> / <code class="docutils literal notranslate"><span class="pre">enableUpdates()</span></code></p></td>
<td class="text-left"><p>Tymczasowo wstrzymuje/wznawia aktualizacje layoutu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setParent(...)</span></code> / <code class="docutils literal notranslate"><span class="pre">getParentWidget()</span></code></p></td>
<td class="text-left"><p>Zarządza powiązaniem z widgetem-rodzicem.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isUpdating()</span></code></p></td>
<td class="text-left"><p>Zwraca <code class="docutils literal notranslate"><span class="pre">true</span></code>, jeśli layout jest w trakcie aktualizacji.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">isUI...Layout()</span></code></p></td>
<td class="text-left"><p>Metody RTTI (Run-Time Type Information) do identyfikacji typu layoutu.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id1085">
<h1>Zmienne chronione<a class="headerlink" href="#id1085" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_updateDisabled</span></code>: Licznik blokad aktualizacji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_updating</span></code>, <code class="docutils literal notranslate"><span class="pre">m_updateScheduled</span></code>: Flagi zapobiegające rekurencji i wielokrotnym aktualizacjom.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_parentWidget</span></code>: Wskaźnik do widgetu, którego dziećmi zarządza layout.</p></li>
</ul>
</section>
<section id="id1086">
<h1>Zależności i powiązania<a class="headerlink" href="#id1086" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Klasa bazowa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/otml/otml.h</span></code>: Do parsowania stylów.</p></li>
<li><p>Jest klasą bazową dla wszystkich konkretnych implementacji layoutów.</p></li>
<li><p>Każdy <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> może mieć jeden <code class="docutils literal notranslate"><span class="pre">UILayout</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uimanager-h">
<h1>📄 uimanager.h<a class="headerlink" href="#uimanager-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1087">
<h1>Opis ogólny<a class="headerlink" href="#id1087" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uimanager.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>, która jest singletonem (<code class="docutils literal notranslate"><span class="pre">g_ui</span></code>) i centralnym punktem zarządzania całym interfejsem użytkownika.</p>
</section>
<section id="klasa-uimanager">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIManager</span></code><a class="headerlink" href="#klasa-uimanager" title="Link to this heading">#</a></h1>
</section>
<section id="id1088">
<h1>Opis semantyczny<a class="headerlink" href="#id1088" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">UIManager</span></code> zarządza hierarchią widgetów, poczynając od korzenia (<code class="docutils literal notranslate"><span class="pre">m_rootWidget</span></code>). Odpowiada za propagację zdarzeń wejściowych (mysz, klawiatura), renderowanie, zarządzanie stylami OTML oraz śledzenie globalnych stanów UI, takich jak aktualnie wciśnięty, najechany czy przeciągany widget.</p>
</section>
<section id="id1089">
<h1>Metody publiczne<a class="headerlink" href="#id1089" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">init()</span></code> / <code class="docutils literal notranslate"><span class="pre">terminate()</span></code></p></td>
<td class="text-left"><p>Inicjalizuje i zwalnia menedżera.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">render(Fw::DrawPane)</span></code></p></td>
<td class="text-left"><p>Rozpoczyna proces renderowania UI dla danej warstwy.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">resize(const</span> <span class="pre">Size&amp;)</span></code></p></td>
<td class="text-left"><p>Aktualizuje rozmiar <code class="docutils literal notranslate"><span class="pre">m_rootWidget</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">inputEvent(...)</span></code></p></td>
<td class="text-left"><p>Główny punkt wejścia dla wszystkich zdarzeń wejściowych.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">clearStyles()</span></code></p></td>
<td class="text-left"><p>Czyści załadowane style.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">importStyle(...)</span></code></p></td>
<td class="text-left"><p>Ładuje style z pliku <code class="docutils literal notranslate"><span class="pre">.otui</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span> <span class="pre">getStyle(...)</span></code></p></td>
<td class="text-left"><p>Zwraca definicję stylu o podanej nazwie.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">UIWidgetPtr</span> <span class="pre">loadUI(...)</span></code></p></td>
<td class="text-left"><p>Ładuje i tworzy hierarchię widgetów z pliku <code class="docutils literal notranslate"><span class="pre">.otui</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">UIWidgetPtr</span> <span class="pre">createWidget(...)</span></code></p></td>
<td class="text-left"><p>Tworzy widget na podstawie nazwy stylu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setMouseReceiver(...)</span></code> / <code class="docutils literal notranslate"><span class="pre">setKeyboardReceiver(...)</span></code></p></td>
<td class="text-left"><p>Ustawia widget, który „przechwytuje” zdarzenia myszy/klawiatury.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">get...Widget()</span></code></p></td>
<td class="text-left"><p>Zwracają wskaźniki na widgety w określonych stanach (przeciągany, najechany, wciśnięty).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="metody-chronione-wywolywane-przez-uiwidget">
<h1>Metody chronione (wywoływane przez <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>)<a class="headerlink" href="#metody-chronione-wywolywane-przez-uiwidget" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">onWidgetAppear(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">onWidgetDisappear(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">onWidgetDestroy(...)</span></code>: Callbacki informujące menedżera o zmianach w drzewie widgetów, co pozwala na aktualizację globalnych stanów (np. <code class="docutils literal notranslate"><span class="pre">m_hoveredWidget</span></code>).</p></li>
</ul>
</section>
<section id="id1090">
<h1>Zmienne prywatne<a class="headerlink" href="#id1090" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_rootWidget</span></code>: Korzeń drzewa widgetów, wypełnia całe okno.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_mouseReceiver</span></code>, <code class="docutils literal notranslate"><span class="pre">m_keyboardReceiver</span></code>: Widgety przechwytujące zdarzenia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_draggingWidget</span></code>, <code class="docutils literal notranslate"><span class="pre">m_hoveredWidget</span></code>, <code class="docutils literal notranslate"><span class="pre">m_pressedWidget</span></code>: Śledzą globalne stany myszy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_styles</span></code>: Mapa przechowująca wszystkie załadowane style.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_destroyedWidgets</span></code>: Lista do śledzenia niszczonych widgetów w celach debugowania wycieków pamięci.</p></li>
</ul>
</section>
<section id="id1091">
<h1>Zmienne globalne<a class="headerlink" href="#id1091" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g_ui</span></code>: Globalna instancja <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>.</p></li>
</ul>
</section>
<section id="id1092">
<h1>Zależności i powiązania<a class="headerlink" href="#id1092" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/declarations.h</span></code>, <code class="docutils literal notranslate"><span class="pre">uiwidget.h</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/inputevent.h</span></code>.</p></li>
<li><p>Ściśle współpracuje z <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> (która przekazuje jej zdarzenia) i <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>.</p></li>
<li><p>Zarządza cyklem życia i interakcjami wszystkich <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uitextedit-cpp">
<h1>📄 uitextedit.cpp<a class="headerlink" href="#uitextedit-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1093">
<h1>Opis ogólny<a class="headerlink" href="#id1093" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uitextedit.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code>, która jest specjalizowanym widgetem do wprowadzania i edycji tekstu.</p>
</section>
<section id="klasa-uitextedit">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code><a class="headerlink" href="#klasa-uitextedit" title="Link to this heading">#</a></h1>
</section>
<section id="uitextedit-uitextedit">
<h1><code class="docutils literal notranslate"><span class="pre">UITextEdit::UITextEdit()</span></code><a class="headerlink" href="#uitextedit-uitextedit" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje wszystkie pola związane z edycją tekstu do wartości domyślnych (np. kursor na pozycji 0, widoczny, tekst edytowalny).</p>
</section>
<section id="void-uitextedit-drawself">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UITextEdit::drawSelf(...)</span></code><a class="headerlink" href="#void-uitextedit-drawself" title="Link to this heading">#</a></h1>
<p>Przesłonięta metoda rysująca.</p>
<ol class="arabic simple">
<li><p>Rysuje tło, ramkę, obraz i ikonę (dziedziczone z <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>).</p></li>
<li><p>Jeśli tekst jest pusty, rysuje <code class="docutils literal notranslate"><span class="pre">placeholder</span></code>.</p></li>
<li><p>Rysuje tekst, używając <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> (<code class="docutils literal notranslate"><span class="pre">m_glyphsTextCoordsBuffer</span></code>) do zbuforowania geometrii.</p></li>
<li><p>Rysuje zaznaczenie, najpierw rysując tło zaznaczenia, a potem tekst w innym kolorze na wierzchu.</p></li>
<li><p>Rysuje migający kursor w odpowiedniej pozycji.</p></li>
</ol>
</section>
<section id="void-uitextedit-update-bool-focuscursor">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UITextEdit::update(bool</span> <span class="pre">focusCursor)</span></code><a class="headerlink" href="#void-uitextedit-update-bool-focuscursor" title="Link to this heading">#</a></h1>
<p>Kluczowa metoda, która przelicza całą geometrię tekstu.</p>
<ol class="arabic simple">
<li><p>Pobiera tekst do wyświetlenia (zwykły lub ukryty <code class="docutils literal notranslate"><span class="pre">*</span></code>).</p></li>
<li><p>Zawija tekst, jeśli <code class="docutils literal notranslate"><span class="pre">m_textWrap</span></code> jest włączone.</p></li>
<li><p>Oblicza pozycje wszystkich glifów za pomocą <code class="docutils literal notranslate"><span class="pre">m_font→calculateGlyphsPositions</span></code>.</p></li>
<li><p>Jeśli <code class="docutils literal notranslate"><span class="pre">m_autoScroll</span></code> i <code class="docutils literal notranslate"><span class="pre">focusCursor</span></code> są <code class="docutils literal notranslate"><span class="pre">true</span></code>, automatycznie przewija widok, tak aby kursor był zawsze widoczny.</p></li>
<li><p>Przelicza, które glify są widoczne w obszarze widgetu, i generuje dla nich współrzędne w <code class="docutils literal notranslate"><span class="pre">m_glyphsCoords</span></code>.</p></li>
</ol>
</section>
<section id="metody-edycji-tekstu">
<h1>Metody edycji tekstu<a class="headerlink" href="#metody-edycji-tekstu" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setCursorPos</span></code>, <code class="docutils literal notranslate"><span class="pre">setSelection</span></code>, <code class="docutils literal notranslate"><span class="pre">clearSelection</span></code>, <code class="docutils literal notranslate"><span class="pre">selectAll</span></code>: Zarządzają pozycją kursora i zaznaczeniem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">appendText</span></code>, <code class="docutils literal notranslate"><span class="pre">appendCharacter</span></code>, <code class="docutils literal notranslate"><span class="pre">removeCharacter</span></code>: Modyfikują tekst.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">del</span></code>, <code class="docutils literal notranslate"><span class="pre">paste</span></code>, <code class="docutils literal notranslate"><span class="pre">copy</span></code>, <code class="docutils literal notranslate"><span class="pre">cut</span></code>: Implementują standardowe operacje edycyjne.</p></li>
</ul>
</section>
<section id="int-uitextedit-gettextpos-point-pos">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">UITextEdit::getTextPos(Point</span> <span class="pre">pos)</span></code><a class="headerlink" href="#int-uitextedit-gettextpos-point-pos" title="Link to this heading">#</a></h1>
<p>Konwertuje pozycję myszy (w pikselach) na indeks znaku w tekście.</p>
</section>
<section id="obsluga-zdarzen-on">
<h1>Obsługa zdarzeń (<code class="docutils literal notranslate"><span class="pre">on...</span></code>)<a class="headerlink" href="#obsluga-zdarzen-on" title="Link to this heading">#</a></h1>
<p>Przesłania metody obsługi zdarzeń z <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>, aby zaimplementować logikę edycji tekstu:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">onKeyPress</span></code>: Obsługuje nawigację (strzałki, Home, End), usuwanie (Delete, Backspace), zaznaczanie (Shift + strzałki), kopiowanie/wklejanie (Ctrl+C/V).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onKeyText</span></code>: Wstawia wprowadzony tekst.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onMousePress</span></code>, <code class="docutils literal notranslate"><span class="pre">onMouseMove</span></code>, <code class="docutils literal notranslate"><span class="pre">onDoubleClick</span></code>: Obsługują ustawianie kursora i zaznaczanie tekstu myszą.</p></li>
</ul>
</section>
<section id="id1094">
<h1>Zależności i powiązania<a class="headerlink" href="#id1094" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uitextedit.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/bitmapfont.h</span></code>: Intensywnie używa <code class="docutils literal notranslate"><span class="pre">Bitmapfont</span></code> do obliczeń.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/platform/platformwindow.h</span></code>: Do interakcji ze schowkiem.</p></li>
<li><p>Na Androidzie, zamiast własnego renderowania, wywołuje natywne pole edycji tekstu.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uimanager-cpp">
<h1>📄 uimanager.cpp<a class="headerlink" href="#uimanager-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1095">
<h1>Opis ogólny<a class="headerlink" href="#id1095" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uimanager.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>, która jest centralnym menedżerem interfejsu użytkownika.</p>
</section>
<section id="id1096">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIManager</span></code><a class="headerlink" href="#id1096" title="Link to this heading">#</a></h1>
</section>
<section id="void-uimanager-init">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::init()</span></code><a class="headerlink" href="#void-uimanager-init" title="Link to this heading">#</a></h1>
<p>Inicjalizuje menedżera, tworząc główny, niewidoczny widget (<code class="docutils literal notranslate"><span class="pre">m_rootWidget</span></code>), który jest korzeniem całego drzewa UI i zajmuje całą powierzchnię okna.</p>
</section>
<section id="void-uimanager-render-fw-drawpane-drawpane">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::render(Fw::DrawPane</span> <span class="pre">drawPane)</span></code><a class="headerlink" href="#void-uimanager-render-fw-drawpane-drawpane" title="Link to this heading">#</a></h1>
<p>Rozpoczyna proces renderowania, wywołując metodę <code class="docutils literal notranslate"><span class="pre">draw()</span></code> na <code class="docutils literal notranslate"><span class="pre">m_rootWidget</span></code> dla określonej warstwy rysowania.</p>
</section>
<section id="void-uimanager-resize-const-size-size">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code><a class="headerlink" href="#void-uimanager-resize-const-size-size" title="Link to this heading">#</a></h1>
<p>Aktualizuje rozmiar <code class="docutils literal notranslate"><span class="pre">m_rootWidget</span></code>, co powoduje rekurencyjne przeliczenie layoutu dla wszystkich widgetów potomnych.</p>
</section>
<section id="void-uimanager-inputevent-const-inputevent-event">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::inputEvent(const</span> <span class="pre">InputEvent&amp;</span> <span class="pre">event)</span></code><a class="headerlink" href="#void-uimanager-inputevent-const-inputevent-event" title="Link to this heading">#</a></h1>
</section>
<section id="id1097">
<h1>Opis semantyczny<a class="headerlink" href="#id1097" title="Link to this heading">#</a></h1>
<p>Główny punkt wejścia dla wszystkich zdarzeń wejściowych. Tłumaczy surowe zdarzenia na akcje w UI.</p>
</section>
<section id="id1098">
<h1>Działanie<a class="headerlink" href="#id1098" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Dla zdarzeń klawiatury, przekazuje je do <code class="docutils literal notranslate"><span class="pre">m_keyboardReceiver</span></code>.</p></li>
<li><p>Dla wciśnięcia przycisku myszy:</p>
<ol class="arabic simple">
<li><p>Identyfikuje widget pod kursorem.</p></li>
<li><p>Aktualizuje <code class="docutils literal notranslate"><span class="pre">m_pressedWidget</span></code>.</p></li>
<li><p>Propaguje zdarzenie <code class="docutils literal notranslate"><span class="pre">onMousePress</span></code> w dół drzewa.</p></li>
</ol>
</li>
<li><p>Dla zwolnienia przycisku myszy:</p>
<ol class="arabic simple">
<li><p>Jeśli trwało przeciąganie, kończy je i obsługuje „upuszczenie”.</p></li>
<li><p>Propaguje zdarzenie <code class="docutils literal notranslate"><span class="pre">onMouseRelease</span></code>.</p></li>
<li><p>Jeśli zwolnienie nastąpiło nad pierwotnie wciśniętym widgetem, generuje zdarzenie <code class="docutils literal notranslate"><span class="pre">onClick</span></code>.</p></li>
</ol>
</li>
<li><p>Dla ruchu myszy:</p>
<ol class="arabic simple">
<li><p>Aktualizuje <code class="docutils literal notranslate"><span class="pre">m_hoveredWidget</span></code>.</p></li>
<li><p>Jeśli jakiś widget jest wciśnięty i przeciągalny, rozpoczyna przeciąganie.</p></li>
<li><p>Propaguje zdarzenie <code class="docutils literal notranslate"><span class="pre">onMouseMove</span></code>.</p></li>
</ol>
</li>
<li><p>Dla kółka myszy, propaguje zdarzenie.</p></li>
</ul>
</section>
<section id="void-uimanager-update-widget">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::update...Widget(...)</span></code><a class="headerlink" href="#void-uimanager-update-widget" title="Link to this heading">#</a></h1>
<p>Metody te zarządzają globalnym stanem UI:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">updatePressedWidget</span></code>: Zmienia, który widget jest aktualnie wciśnięty.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">updateDraggingWidget</span></code>: Rozpoczyna lub kończy przeciąganie widgetu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">updateHoveredWidget</span></code>: Aktualizuje, nad którym widgetem znajduje się kursor.</p></li>
</ul>
</section>
<section id="bool-uimanager-importstyle">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIManager::importStyle(...)</span></code><a class="headerlink" href="#bool-uimanager-importstyle" title="Link to this heading">#</a></h1>
<p>Ładuje i parsuje plik <code class="docutils literal notranslate"><span class="pre">.otui</span></code> ze stylami, dodając je do <code class="docutils literal notranslate"><span class="pre">m_styles</span></code>.</p>
</section>
<section id="uiwidgetptr-uimanager-loadui-i-createwidgetfromotml">
<h1><code class="docutils literal notranslate"><span class="pre">UIWidgetPtr</span> <span class="pre">UIManager::loadUI(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">createWidgetFromOTML(...)</span></code><a class="headerlink" href="#uiwidgetptr-uimanager-loadui-i-createwidgetfromotml" title="Link to this heading">#</a></h1>
<p>Implementują logikę tworzenia widgetów na podstawie plików i węzłów OTML. <code class="docutils literal notranslate"><span class="pre">createWidgetFromOTML</span></code> jest kluczową metodą, która:</p>
<ol class="arabic simple">
<li><p>Znajduje styl bazowy.</p></li>
<li><p>Łączy (merge) go ze stylem zdefiniowanym w pliku UI.</p></li>
<li><p>Na podstawie atrybutu <code class="docutils literal notranslate"><span class="pre">__class</span></code>, wywołuje w Lua funkcję fabryczną (<code class="docutils literal notranslate"><span class="pre">create</span></code>) dla danego typu widgetu.</p></li>
<li><p>Stosuje styl i rekurencyjnie tworzy dzieci.</p></li>
</ol>
</section>
<section id="void-uimanager-onwidgetdestroy">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::onWidgetDestroy(...)</span></code><a class="headerlink" href="#void-uimanager-onwidgetdestroy" title="Link to this heading">#</a></h1>
<p>Callback wywoływany przez <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>. Czyści wszystkie globalne referencje do niszczonego widgetu (np. <code class="docutils literal notranslate"><span class="pre">m_hoveredWidget</span></code>, <code class="docutils literal notranslate"><span class="pre">m_pressedWidget</span></code>). W trybie debugowania, planuje sprawdzenie, czy nie pozostały żadne wiszące referencje do widgetu po jego zniszczeniu.</p>
</section>
<section id="id1099">
<h1>Zależności i powiązania<a class="headerlink" href="#id1099" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to centralna klasa UI, która łączy <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> (źródło zdarzeń) z <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (odbiorcy zdarzeń).</p></li>
<li><p>Zarządza całym drzewem widgetów.</p></li>
<li><p>Współpracuje z <code class="docutils literal notranslate"><span class="pre">OTML</span></code> do parsowania stylów i layoutów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uitextedit-h">
<h1>📄 uitextedit.h<a class="headerlink" href="#uitextedit-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1100">
<h1>Opis ogólny<a class="headerlink" href="#id1100" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uitextedit.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code>, która jest widgetem służącym do wprowadzania i edycji tekstu przez użytkownika.</p>
</section>
<section id="id1101">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code><a class="headerlink" href="#id1101" title="Link to this heading">#</a></h1>
</section>
<section id="id1102">
<h1>Opis semantyczny<a class="headerlink" href="#id1102" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> i rozszerza jego funkcjonalność o logikę obsługi kursora, zaznaczania tekstu, wprowadzania z klawiatury, kopiowania/wklejania i zawijania wierszy. Jest to jeden z najbardziej złożonych widgetów w podstawowym zestawie.</p>
</section>
<section id="id1103">
<h1>Metody publiczne<a class="headerlink" href="#id1103" title="Link to this heading">#</a></h1>
</section>
<section id="zarzadzanie-tekstem-i-kursorem">
<h1>Zarządzanie tekstem i kursorem<a class="headerlink" href="#zarzadzanie-tekstem-i-kursorem" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setCursorPos(...)</span></code>: Ustawia pozycję kursora.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setSelection(...)</span></code>: Ustawia zaznaczenie.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setTextHidden(...)</span></code>: Włącza tryb „hasła” (wyświetla <code class="docutils literal notranslate"><span class="pre">*</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setMaxLength(...)</span></code>: Ustawia maksymalną długość tekstu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">appendText(...)</span></code>: Dodaje tekst w pozycji kursora.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">del()</span></code>, <code class="docutils literal notranslate"><span class="pre">paste()</span></code>, <code class="docutils literal notranslate"><span class="pre">copy()</span></code>, <code class="docutils literal notranslate"><span class="pre">cut()</span></code>: Standardowe operacje edycyjne.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">selectAll()</span></code>, <code class="docutils literal notranslate"><span class="pre">clearSelection()</span></code>: Zarządzanie zaznaczeniem.</p></li>
</ul>
</section>
<section id="konfiguracja">
<h1>Konfiguracja<a class="headerlink" href="#konfiguracja" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setEditable(...)</span></code>: Włącza/wyłącza możliwość edycji.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setMultiline(...)</span></code>: Włącza/wyłącza tryb wieloliniowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setValidCharacters(...)</span></code>: Ogranicza dozwolone znaki.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setPlaceholder(...)</span></code>: Ustawia tekst wyświetlany, gdy pole jest puste.</p></li>
</ul>
</section>
<section id="gettery">
<h1>Gettery<a class="headerlink" href="#gettery" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">getCursorPos()</span></code>, <code class="docutils literal notranslate"><span class="pre">getSelection()</span></code>, <code class="docutils literal notranslate"><span class="pre">getTextPos(...)</span></code>, …: Zwracają informacje o stanie edytora.</p></li>
</ul>
</section>
<section id="id1104">
<h1>Zmienne prywatne<a class="headerlink" href="#id1104" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_cursorPos</span></code>: Pozycja kursora.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_selectionStart</span></code>, <code class="docutils literal notranslate"><span class="pre">m_selectionEnd</span></code>: Granice zaznaczenia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_textHidden</span></code>, <code class="docutils literal notranslate"><span class="pre">m_multiline</span></code>, <code class="docutils literal notranslate"><span class="pre">m_editable</span></code>, …: Flagi konfiguracyjne.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_glyphsCoords</span></code>, <code class="docutils literal notranslate"><span class="pre">m_glyphsTexCoords</span></code>: Wektory przechowujące geometrię renderowanego tekstu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_glyphsTextCoordsBuffer</span></code>, <code class="docutils literal notranslate"><span class="pre">m_glyphsSelectCoordsBuffer</span></code>: Bufory <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code> dla tekstu i zaznaczenia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_placeholder</span></code>, <code class="docutils literal notranslate"><span class="pre">m_placeholderColor</span></code>, …: Właściwości placeholdera.</p></li>
</ul>
</section>
<section id="id1105">
<h1>Zależności i powiązania<a class="headerlink" href="#id1105" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>: Klasa bazowa.</p></li>
<li><p>Jest oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>, co udostępnia jej bogate API w Lua.</p></li>
<li><p>Jest jednym z podstawowych, predefiniowanych typów widgetów tworzonych przez <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uitranslator-cpp">
<h1>📄 uitranslator.cpp<a class="headerlink" href="#uitranslator-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1106">
<h1>Opis ogólny<a class="headerlink" href="#id1106" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uitranslator.cpp</span></code> zawiera implementacje funkcji, które tłumaczą tekstowe reprezentacje różnych enumów używanych w UI na ich faktyczne wartości liczbowe.</p>
</section>
<section id="id1107">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">Fw</span></code><a class="headerlink" href="#id1107" title="Link to this heading">#</a></h1>
</section>
<section id="fw-alignmentflag-fw-translatealignment-std-string-aligment">
<h1><code class="docutils literal notranslate"><span class="pre">Fw::AlignmentFlag</span> <span class="pre">Fw::translateAlignment(std::string</span> <span class="pre">aligment)</span></code><a class="headerlink" href="#fw-alignmentflag-fw-translatealignment-std-string-aligment" title="Link to this heading">#</a></h1>
<p>Konwertuje string (np. „top-left”, „center”) na odpowiednią flagę z <code class="docutils literal notranslate"><span class="pre">Fw::AlignmentFlag</span></code>. Używa <code class="docutils literal notranslate"><span class="pre">boost::to_lower</span></code> i <code class="docutils literal notranslate"><span class="pre">boost::erase_all</span></code> do normalizacji wejścia.</p>
</section>
<section id="fw-anchoredge-fw-translateanchoredge-std-string-anchoredge">
<h1><code class="docutils literal notranslate"><span class="pre">Fw::AnchorEdge</span> <span class="pre">Fw::translateAnchorEdge(std::string</span> <span class="pre">anchorEdge)</span></code><a class="headerlink" href="#fw-anchoredge-fw-translateanchoredge-std-string-anchoredge" title="Link to this heading">#</a></h1>
<p>Konwertuje string (np. „left”, „horizontal-center”) na odpowiednią wartość z <code class="docutils literal notranslate"><span class="pre">Fw::AnchorEdge</span></code>.</p>
</section>
<section id="fw-widgetstate-fw-translatestate-std-string-state">
<h1><code class="docutils literal notranslate"><span class="pre">Fw::WidgetState</span> <span class="pre">Fw::translateState(std::string</span> <span class="pre">state)</span></code><a class="headerlink" href="#fw-widgetstate-fw-translatestate-std-string-state" title="Link to this heading">#</a></h1>
<p>Konwertuje string (np. „hover”, „pressed”) na odpowiednią flagę z <code class="docutils literal notranslate"><span class="pre">Fw::WidgetState</span></code>.</p>
</section>
<section id="fw-autofocuspolicy-fw-translateautofocuspolicy-std-string-policy">
<h1><code class="docutils literal notranslate"><span class="pre">Fw::AutoFocusPolicy</span> <span class="pre">Fw::translateAutoFocusPolicy(std::string</span> <span class="pre">policy)</span></code><a class="headerlink" href="#fw-autofocuspolicy-fw-translateautofocuspolicy-std-string-policy" title="Link to this heading">#</a></h1>
<p>Konwertuje string (np. „first”, „last”) na odpowiednią wartość z <code class="docutils literal notranslate"><span class="pre">Fw::AutoFocusPolicy</span></code>.</p>
</section>
<section id="id1108">
<h1>Zależności i powiązania<a class="headerlink" href="#id1108" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uitranslator.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost/algorithm/string.hpp</span></code>: Do normalizacji stringów.</p></li>
<li><p>Funkcje te są używane przez <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> i jego podklasy podczas parsowania stylów z OTML, aby przekonwertować wartości tekstowe na enumy.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uitranslator-h">
<h1>📄 uitranslator.h<a class="headerlink" href="#uitranslator-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1109">
<h1>Opis ogólny<a class="headerlink" href="#id1109" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uitranslator.h</span></code> deklaruje zestaw funkcji pomocniczych do konwersji stringów na wartości wyliczeniowe (enum) używane w systemie UI.</p>
</section>
<section id="id1110">
<h1>Namespace <code class="docutils literal notranslate"><span class="pre">Fw</span></code><a class="headerlink" href="#id1110" title="Link to this heading">#</a></h1>
</section>
<section id="deklaracje-funkcji">
<h1>Deklaracje funkcji<a class="headerlink" href="#deklaracje-funkcji" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Funkcja</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AlignmentFlag</span> <span class="pre">translateAlignment(...)</span></code></p></td>
<td class="text-left"><p>Konwertuje string na <code class="docutils literal notranslate"><span class="pre">Fw::AlignmentFlag</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AnchorEdge</span> <span class="pre">translateAnchorEdge(...)</span></code></p></td>
<td class="text-left"><p>Konwertuje string na <code class="docutils literal notranslate"><span class="pre">Fw::AnchorEdge</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">WidgetState</span> <span class="pre">translateState(...)</span></code></p></td>
<td class="text-left"><p>Konwertuje string na <code class="docutils literal notranslate"><span class="pre">Fw::WidgetState</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AutoFocusPolicy</span> <span class="pre">translateAutoFocusPolicy(...)</span></code></p></td>
<td class="text-left"><p>Konwertuje string na <code class="docutils literal notranslate"><span class="pre">Fw::AutoFocusPolicy</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id1111">
<h1>Zależności i powiązania<a class="headerlink" href="#id1111" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/const.h</span></code>: Definicje enumów.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>: Do operacji na stringach.</p></li>
<li><p>Te funkcje są kluczowe dla parsowania plików OTML, gdzie właściwości takie jak wyrównanie są zdefiniowane za pomocą słów kluczowych.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uiverticallayout-cpp">
<h1>📄 uiverticallayout.cpp<a class="headerlink" href="#uiverticallayout-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1112">
<h1>Opis ogólny<a class="headerlink" href="#id1112" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uiverticallayout.cpp</span></code> zawiera implementację klasy <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code>, która układa widgety w jednej kolumnie, od góry do dołu lub od dołu do góry.</p>
</section>
<section id="klasa-uiverticallayout">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code><a class="headerlink" href="#klasa-uiverticallayout" title="Link to this heading">#</a></h1>
</section>
<section id="void-uiverticallayout-applystyle">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIVerticalLayout::applyStyle(...)</span></code><a class="headerlink" href="#void-uiverticallayout-applystyle" title="Link to this heading">#</a></h1>
<p>Parsuje atrybut <code class="docutils literal notranslate"><span class="pre">align-bottom</span></code> z węzła OTML.</p>
</section>
<section id="bool-uiverticallayout-internalupdate">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIVerticalLayout::internalUpdate()</span></code><a class="headerlink" href="#bool-uiverticallayout-internalupdate" title="Link to this heading">#</a></h1>
</section>
<section id="id1113">
<h1>Opis semantyczny<a class="headerlink" href="#id1113" title="Link to this heading">#</a></h1>
<p>Główna metoda przeliczająca pozycje widgetów. Działa analogicznie do <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout::internalUpdate</span></code>, ale operuje na osi Y.</p>
</section>
<section id="id1114">
<h1>Działanie<a class="headerlink" href="#id1114" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Pobiera listę dzieci. Jeśli <code class="docutils literal notranslate"><span class="pre">m_alignBottom</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code>, odwraca kolejność listy.</p></li>
<li><p>Iteruje po widgetach:</p>
<ul class="simple">
<li><p>Oblicza pozycję <code class="docutils literal notranslate"><span class="pre">y</span></code> na podstawie pozycji i wysokości poprzedniego widgetu oraz odstępów.</p></li>
<li><p>Oblicza pozycję <code class="docutils literal notranslate"><span class="pre">x</span></code> w zależności od wyrównania poziomego widgetu (<code class="docutils literal notranslate"><span class="pre">AlignLeft</span></code>, <code class="docutils literal notranslate"><span class="pre">AlignRight</span></code>, <code class="docutils literal notranslate"><span class="pre">AlignCenter</span></code>) wewnątrz szerokości rodzica.</p></li>
<li><p>Jeśli widget nie ma stałego rozmiaru, jego szerokość jest rozciągana do szerokości rodzica.</p></li>
<li><p>Ustawia nowy <code class="docutils literal notranslate"><span class="pre">Rect</span></code> dla widgetu.</p></li>
</ul>
</li>
<li><p>Oblicza sumaryczną, preferowaną wysokość (<code class="docutils literal notranslate"><span class="pre">preferredHeight</span></code>).</p></li>
<li><p>Jeśli <code class="docutils literal notranslate"><span class="pre">m_fitChildren</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code>, planuje asynchroniczne ustawienie wysokości rodzica na <code class="docutils literal notranslate"><span class="pre">preferredHeight</span></code>.</p></li>
</ol>
</section>
<section id="id1115">
<h1>Zależności i powiązania<a class="headerlink" href="#id1115" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiverticallayout.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>: Operuje na widgetach.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/core/eventdispatcher.h</span></code>: Do asynchronicznego ustawiania wysokości rodzica.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uiverticallayout-h">
<h1>📄 uiverticallayout.h<a class="headerlink" href="#uiverticallayout-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1116">
<h1>Opis ogólny<a class="headerlink" href="#id1116" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uiverticallayout.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code>, która implementuje layout wertykalny.</p>
</section>
<section id="id1117">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code><a class="headerlink" href="#id1117" title="Link to this heading">#</a></h1>
</section>
<section id="id1118">
<h1>Opis semantyczny<a class="headerlink" href="#id1118" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code> dziedziczy po <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code> i specjalizuje go do układania widgetów w pojedynczej kolumnie. Może układać elementy od góry do dołu (domyślnie) lub od dołu do góry (<code class="docutils literal notranslate"><span class="pre">align-bottom</span></code>).</p>
</section>
<section id="id1119">
<h1>Metody publiczne<a class="headerlink" href="#id1119" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">setAlignBottom(bool</span> <span class="pre">alignBottom)</span></code></p></td>
<td class="text-left"><p>Włącza/wyłącza układanie od dołu do góry.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">isAlignBottom()</span></code></p></td>
<td class="text-left"><p>Zwraca stan flagi <code class="docutils literal notranslate"><span class="pre">align-bottom</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id1120">
<h1>Zmienne chronione<a class="headerlink" href="#id1120" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_alignBottom</span></code>: Flaga trybu wyrównania do dołu.</p></li>
</ul>
</section>
<section id="id1121">
<h1>Zależności i powiązania<a class="headerlink" href="#id1121" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiboxlayout.h</span></code>: Klasa bazowa.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uiwidget-cpp">
<h1>📄 uiwidget.cpp<a class="headerlink" href="#uiwidget-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1122">
<h1>Opis ogólny<a class="headerlink" href="#id1122" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uiwidget.cpp</span></code> jest głównym plikiem implementacyjnym dla klasy <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>. Zawiera on logikę dla podstawowych operacji na widgetach, takich jak zarządzanie dziećmi, obsługa layoutów, zdarzeń, stanów i stylów.</p>
</section>
<section id="klasa-uiwidget">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code><a class="headerlink" href="#klasa-uiwidget" title="Link to this heading">#</a></h1>
</section>
<section id="uiwidget-uiwidget">
<h1><code class="docutils literal notranslate"><span class="pre">UIWidget::UIWidget()</span></code><a class="headerlink" href="#uiwidget-uiwidget" title="Link to this heading">#</a></h1>
<p>Konstruktor. Inicjalizuje wszystkie pola do wartości domyślnych, w tym podstawowy styl, właściwości tekstu i obrazu. Co ważne, zapisuje ścieżkę do skryptu Lua, w którym widget został utworzony (<code class="docutils literal notranslate"><span class="pre">m_source</span></code>), co jest niezwykle przydatne do debugowania.</p>
</section>
<section id="void-uiwidget-draw">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::draw(...)</span></code><a class="headerlink" href="#void-uiwidget-draw" title="Link to this heading">#</a></h1>
<p>Główna metoda renderująca. Jest rekurencyjna.</p>
<ol class="arabic simple">
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">drawSelf()</span></code> do narysowania samego widgetu.</p></li>
<li><p>Jeśli włączone jest przycinanie (<code class="docutils literal notranslate"><span class="pre">m_clipping</span></code>), ustawia odpowiedni <code class="docutils literal notranslate"><span class="pre">DrawQueueConditionClip</span></code>.</p></li>
<li><p>Wywołuje <code class="docutils literal notranslate"><span class="pre">drawChildren()</span></code> do narysowania wszystkich widocznych dzieci.</p></li>
<li><p>Stosuje globalne efekty dla widgetu i jego dzieci, takie jak przezroczystość (<code class="docutils literal notranslate"><span class="pre">setOpacity</span></code>) i rotacja (<code class="docutils literal notranslate"><span class="pre">setRotation</span></code>), dodając odpowiednie warunki do <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code>.</p></li>
</ol>
</section>
<section id="void-uiwidget-addchild-insertchild-removechild">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::addChild(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">insertChild(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">removeChild(...)</span></code><a class="headerlink" href="#void-uiwidget-addchild-insertchild-removechild" title="Link to this heading">#</a></h1>
<p>Metody do zarządzania hierarchią widgetów. Poza modyfikacją <code class="docutils literal notranslate"><span class="pre">m_children</span></code>, dbają o:</p>
<ul class="simple">
<li><p>Ustawienie/zresetowanie wskaźnika <code class="docutils literal notranslate"><span class="pre">m_parent</span></code> w dziecku.</p></li>
<li><p>Dodanie/usunięcie widgetu z layoutu rodzica.</p></li>
<li><p>Aktualizację stanu fokusu, jeśli usuwane jest dziecko z fokusem.</p></li>
<li><p>Aktualizację stanów indeksowych (<code class="docutils literal notranslate"><span class="pre">FirstState</span></code>, <code class="docutils literal notranslate"><span class="pre">LastState</span></code>) u rodzeństwa.</p></li>
<li><p>Powiadomienie <code class="docutils literal notranslate"><span class="pre">UIManager</span></code> o pojawieniu się/zniknięciu widgetu.</p></li>
</ul>
</section>
<section id="void-uiwidget-focuschild-focusnextchild-focuspreviouschild">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::focusChild(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">focusNextChild(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">focusPreviousChild(...)</span></code><a class="headerlink" href="#void-uiwidget-focuschild-focusnextchild-focuspreviouschild" title="Link to this heading">#</a></h1>
<p>Implementują logikę zarządzania fokusem wewnątrz widgetu. <code class="docutils literal notranslate"><span class="pre">focusChild</span></code> zmienia <code class="docutils literal notranslate"><span class="pre">m_focusedChild</span></code> i wywołuje callbacki <code class="docutils literal notranslate"><span class="pre">onFocusChange</span></code>. <code class="docutils literal notranslate"><span class="pre">focusNext/PreviousChild</span></code> implementują nawigację (np. klawiszem Tab).</p>
</section>
<section id="void-uiwidget-applystyle-const-otmlnodeptr-stylenode">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::applyStyle(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">styleNode)</span></code><a class="headerlink" href="#void-uiwidget-applystyle-const-otmlnodeptr-stylenode" title="Link to this heading">#</a></h1>
<p>Aplikuje właściwości z węzła stylu do widgetu. Wywołuje <code class="docutils literal notranslate"><span class="pre">onStyleApply</span></code> oraz <code class="docutils literal notranslate"><span class="pre">onStyleApply</span></code> w Lua.</p>
</section>
<section id="void-uiwidget-updatestate-fw-widgetstate-state">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::updateState(Fw::WidgetState</span> <span class="pre">state)</span></code><a class="headerlink" href="#void-uiwidget-updatestate-fw-widgetstate-state" title="Link to this heading">#</a></h1>
<p>Kluczowa metoda, która aktualizuje pojedynczą flagę stanu (np. <code class="docutils literal notranslate"><span class="pre">HoverState</span></code>). Oblicza, czy widget powinien mieć dany stan (np. dla <code class="docutils literal notranslate"><span class="pre">HoverState</span></code> sprawdza, czy <code class="docutils literal notranslate"><span class="pre">g_ui.getHoveredWidget()</span> <span class="pre">==</span> <span class="pre">this</span></code>), a następnie wywołuje <code class="docutils literal notranslate"><span class="pre">setState</span></code>.</p>
</section>
<section id="void-uiwidget-updatestates">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::updateStates()</span></code><a class="headerlink" href="#void-uiwidget-updatestates" title="Link to this heading">#</a></h1>
<p>Wywołuje <code class="docutils literal notranslate"><span class="pre">updateState</span></code> dla wszystkich możliwych stanów, synchronizując pełny stan widgetu.</p>
</section>
<section id="void-uiwidget-updatestyle">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::updateStyle()</span></code><a class="headerlink" href="#void-uiwidget-updatestyle" title="Link to this heading">#</a></h1>
<p>Gdy stan widgetu się zmienia, ta metoda jest wywoływana. Przebudowuje ona tymczasowy węzeł stylu (<code class="docutils literal notranslate"><span class="pre">m_stateStyle</span></code>), łącząc style z warunków (<code class="docutils literal notranslate"><span class="pre">$!hover</span></code>, <code class="docutils literal notranslate"><span class="pre">$checked</span></code>, itp.), a następnie wywołuje <code class="docutils literal notranslate"><span class="pre">applyStyle</span></code> z tym nowym, połączonym stylem.</p>
</section>
<section id="metody-on-i-propagateon">
<h1>Metody <code class="docutils literal notranslate"><span class="pre">on...</span></code> i <code class="docutils literal notranslate"><span class="pre">propagateOn...</span></code><a class="headerlink" href="#metody-on-i-propagateon" title="Link to this heading">#</a></h1>
<p>Implementują domyślną obsługę i propagację zdarzeń w drzewie widgetów. Metody <code class="docutils literal notranslate"><span class="pre">propagate...</span></code> decydują, do których dzieci przekazać zdarzenie, a następnie wywołują metodę <code class="docutils literal notranslate"><span class="pre">on...</span></code> na samym widgecie.</p>
</section>
<section id="id1123">
<h1>Zależności i powiązania<a class="headerlink" href="#id1123" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Jest to centralna klasa modułu UI, która zależy od prawie wszystkich innych jego części (<code class="docutils literal notranslate"><span class="pre">UIManager</span></code>, <code class="docutils literal notranslate"><span class="pre">UILayout</span></code>, <code class="docutils literal notranslate"><span class="pre">UITranslator</span></code>) oraz wielu modułów frameworka (<code class="docutils literal notranslate"><span class="pre">Graphics</span></code>, <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code>, <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code>, <code class="docutils literal notranslate"><span class="pre">OTML</span></code>).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uiwidget-h">
<h1>📄 uiwidget.h<a class="headerlink" href="#uiwidget-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1124">
<h1>Opis ogólny<a class="headerlink" href="#id1124" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uiwidget.h</span></code> deklaruje klasę <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>, która jest fundamentalną klasą bazową dla wszystkich elementów interfejsu użytkownika.</p>
</section>
<section id="struktura-edgegroup">
<h1>Struktura <code class="docutils literal notranslate"><span class="pre">EdgeGroup</span></code><a class="headerlink" href="#struktura-edgegroup" title="Link to this heading">#</a></h1>
<p>Szablonowa struktura pomocnicza do przechowywania wartości dla czterech krawędzi (góra, prawo, dół, lewo), używana dla <code class="docutils literal notranslate"><span class="pre">margin</span></code>, <code class="docutils literal notranslate"><span class="pre">padding</span></code>, <code class="docutils literal notranslate"><span class="pre">border-width</span></code> i <code class="docutils literal notranslate"><span class="pre">border-color</span></code>.</p>
</section>
<section id="id1125">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code><a class="headerlink" href="#id1125" title="Link to this heading">#</a></h1>
</section>
<section id="id1126">
<h1>Opis semantyczny<a class="headerlink" href="#id1126" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> jest obiektowym odpowiednikiem elementu DOM. Reprezentuje prostokątny obszar na ekranie, który może być rysowany, reagować na zdarzenia i zawierać inne widgety. Implementuje model drzewa (rodzic-dzieci), system zdarzeń (propagacja i obsługa), system stanów (aktywny, najechany, etc.), zarządzanie layoutem oraz integrację z OTML i Lua.</p>
</section>
<section id="podzial-interfejsu-w-pliku-h">
<h1>Podział interfejsu (w pliku <code class="docutils literal notranslate"><span class="pre">.h</span></code>)<a class="headerlink" href="#podzial-interfejsu-w-pliku-h" title="Link to this heading">#</a></h1>
<p>Interfejs klasy jest podzielony na sekcje tematyczne:</p>
<ul class="simple">
<li><p><strong>Widget Core</strong>: Podstawowe metody do zarządzania hierarchią, layoutem, stylami i stanami.</p></li>
<li><p><strong>State Management</strong>: Metody do zarządzania stanami (<code class="docutils literal notranslate"><span class="pre">setState</span></code>, <code class="docutils literal notranslate"><span class="pre">hasState</span></code>).</p></li>
<li><p><strong>Event Processing</strong>: Wirtualne metody <code class="docutils literal notranslate"><span class="pre">on...</span></code> do obsługi zdarzeń.</p></li>
<li><p><strong>Function Shortcuts</strong>: Wygodne metody opakowujące (<code class="docutils literal notranslate"><span class="pre">hide</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span></code>, <code class="docutils literal notranslate"><span class="pre">enable</span></code>).</p></li>
<li><p><strong>Base Style</strong>: Pola i metody związane z podstawowymi właściwościami wizualnymi (tło, ramka, ikona, przezroczystość).</p></li>
<li><p><strong>Image</strong>: Pola i metody związane z wyświetlaniem obrazu (<code class="docutils literal notranslate"><span class="pre">m_imageTexture</span></code>, <code class="docutils literal notranslate"><span class="pre">setImageSource</span></code>).</p></li>
<li><p><strong>Text</strong>: Pola i metody związane z wyświetlaniem tekstu (<code class="docutils literal notranslate"><span class="pre">m_text</span></code>, <code class="docutils literal notranslate"><span class="pre">m_font</span></code>, <code class="docutils literal notranslate"><span class="pre">setText</span></code>).</p></li>
</ul>
</section>
<section id="kluczowe-wlasciwosci">
<h1>Kluczowe właściwości<a class="headerlink" href="#kluczowe-wlasciwosci" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Hierarchia</strong>: <code class="docutils literal notranslate"><span class="pre">m_parent</span></code>, <code class="docutils literal notranslate"><span class="pre">m_children</span></code>.</p></li>
<li><p><strong>Geometria</strong>: <code class="docutils literal notranslate"><span class="pre">m_rect</span></code>.</p></li>
<li><p><strong>Styl</strong>: <code class="docutils literal notranslate"><span class="pre">m_style</span></code> (węzeł OTML), <code class="docutils literal notranslate"><span class="pre">m_states</span></code>.</p></li>
<li><p><strong>Layout</strong>: <code class="docutils literal notranslate"><span class="pre">m_layout</span></code>.</p></li>
<li><p><strong>Zdarzenia</strong>: Zestaw wirtualnych metod <code class="docutils literal notranslate"><span class="pre">on...</span></code> (np. <code class="docutils literal notranslate"><span class="pre">onMousePress</span></code>, <code class="docutils literal notranslate"><span class="pre">onKeyPress</span></code>).</p></li>
<li><p><strong>Wygląd</strong>: <code class="docutils literal notranslate"><span class="pre">m_backgroundColor</span></code>, <code class="docutils literal notranslate"><span class="pre">m_borderColor</span></code>, <code class="docutils literal notranslate"><span class="pre">m_imageTexture</span></code>, <code class="docutils literal notranslate"><span class="pre">m_text</span></code>, <code class="docutils literal notranslate"><span class="pre">m_font</span></code>, etc.</p></li>
</ul>
</section>
<section id="id1127">
<h1>Zależności i powiązania<a class="headerlink" href="#id1127" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/declarations.h</span></code>, <code class="docutils literal notranslate"><span class="pre">uilayout.h</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/luaengine/luaobject.h</span></code>: Klasa bazowa.</p></li>
<li><p>Jest klasą bazową dla wszystkich innych widgetów, np. <code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code>.</p></li>
<li><p>Jest zarządzana przez <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uiwidgetimage-cpp">
<h1>📄 uiwidgetimage.cpp<a class="headerlink" href="#uiwidgetimage-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1128">
<h1>Opis ogólny<a class="headerlink" href="#id1128" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uiwidgetimage.cpp</span></code> zawiera implementację części klasy <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> odpowiedzialnej za obsługę i renderowanie obrazu tła.</p>
<blockquote>
<div><p><strong>NOTE:</strong> To nie jest osobna klasa, lecz część implementacji <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>, wydzielona do osobnego pliku dla lepszej organizacji kodu.</p>
</div></blockquote>
</section>
<section id="klasa-uiwidget-czesc-implementacji">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (część implementacji)<a class="headerlink" href="#klasa-uiwidget-czesc-implementacji" title="Link to this heading">#</a></h1>
</section>
<section id="void-uiwidget-initimage">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::initImage()</span></code><a class="headerlink" href="#void-uiwidget-initimage" title="Link to this heading">#</a></h1>
<p>Inicjalizuje pola związane z obrazem do wartości domyślnych.</p>
</section>
<section id="void-uiwidget-parseimagestyle-const-otmlnodeptr-stylenode">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::parseImageStyle(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">styleNode)</span></code><a class="headerlink" href="#void-uiwidget-parseimagestyle-const-otmlnodeptr-stylenode" title="Link to this heading">#</a></h1>
<p>Parsuje z węzła OTML wszystkie atrybuty związane z obrazem (<code class="docutils literal notranslate"><span class="pre">image-source</span></code>, <code class="docutils literal notranslate"><span class="pre">image-clip</span></code>, <code class="docutils literal notranslate"><span class="pre">image-color</span></code>, <code class="docutils literal notranslate"><span class="pre">image-border</span></code>, <code class="docutils literal notranslate"><span class="pre">image-shader</span></code> itp.) i wywołuje odpowiednie settery.</p>
</section>
<section id="void-uiwidget-drawimage-const-rect-screencoords">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::drawImage(const</span> <span class="pre">Rect&amp;</span> <span class="pre">screenCoords)</span></code><a class="headerlink" href="#void-uiwidget-drawimage-const-rect-screencoords" title="Link to this heading">#</a></h1>
</section>
<section id="id1129">
<h1>Opis semantyczny<a class="headerlink" href="#id1129" title="Link to this heading">#</a></h1>
<p>Główna metoda rysująca obraz.</p>
</section>
<section id="id1130">
<h1>Działanie<a class="headerlink" href="#id1130" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Sprawdza, czy tekstura obrazu istnieje.</p></li>
<li><p>Jeśli geometria (<code class="docutils literal notranslate"><span class="pre">screenCoords</span></code>) lub właściwości obrazu uległy zmianie (<code class="docutils literal notranslate"><span class="pre">m_imageMustRecache</span></code>), przelicza i buforuje współrzędne wierzchołków i tekstur w <code class="docutils literal notranslate"><span class="pre">m_imageCoordsBuffer</span></code>.</p>
<ul class="simple">
<li><p>Obsługuje różne tryby: proste skalowanie, zachowanie proporcji (<code class="docutils literal notranslate"><span class="pre">m_imageFixedRatio</span></code>), powtarzanie (<code class="docutils literal notranslate"><span class="pre">m_imageRepeated</span></code>) oraz złożone rysowanie z ramką (<code class="docutils literal notranslate"><span class="pre">m_imageBordered</span></code>), które dzieli obraz na 9 części i odpowiednio je skaluje/powtarza.</p></li>
</ul>
</li>
<li><p>Dodaje zadanie rysowania do <code class="docutils literal notranslate"><span class="pre">g_drawQueue</span></code>. Jeśli zdefiniowano <code class="docutils literal notranslate"><span class="pre">m_shader</span></code>, używa specjalnego <code class="docutils literal notranslate"><span class="pre">DrawQueueItemImageWithShader</span></code>.</p></li>
</ol>
</section>
<section id="void-uiwidget-setqrcode">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setQRCode(...)</span></code><a class="headerlink" href="#void-uiwidget-setqrcode" title="Link to this heading">#</a></h1>
<p>Generuje obraz kodu QR, tworzy z niego teksturę i ustawia ją jako <code class="docutils literal notranslate"><span class="pre">m_imageTexture</span></code>.</p>
</section>
<section id="void-uiwidget-setimagesource-const-std-string-source">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setImageSource(const</span> <span class="pre">std::string&amp;</span> <span class="pre">source)</span></code><a class="headerlink" href="#void-uiwidget-setimagesource-const-std-string-source" title="Link to this heading">#</a></h1>
<p>Ładuje teksturę z pliku za pomocą <code class="docutils literal notranslate"><span class="pre">g_textures</span></code> i ustawia ją jako <code class="docutils literal notranslate"><span class="pre">m_imageTexture</span></code>. Jeśli włączone jest <code class="docutils literal notranslate"><span class="pre">m_imageAutoResize</span></code>, dostosowuje rozmiar widgetu do rozmiaru obrazu.</p>
</section>
<section id="void-uiwidget-setimagesourcebase64">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setImageSourceBase64(...)</span></code><a class="headerlink" href="#void-uiwidget-setimagesourcebase64" title="Link to this heading">#</a></h1>
<p>Dekoduje obraz zakodowany w Base64, tworzy z niego teksturę i ustawia ją.</p>
</section>
<section id="id1131">
<h1>Zależności i powiązania<a class="headerlink" href="#id1131" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>: Plik nagłówkowy klasy, którą implementuje.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/painter.h</span></code>, <code class="docutils literal notranslate"><span class="pre">image.h</span></code>, <code class="docutils literal notranslate"><span class="pre">texture.h</span></code>, <code class="docutils literal notranslate"><span class="pre">texturemanager.h</span></code>: Komponenty graficzne.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/util/crypt.h</span></code>: Do dekodowania Base64.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uianchorlayout-h">
<h1>📄 uianchorlayout.h<a class="headerlink" href="#uianchorlayout-h" title="Link to this heading">#</a></h1>
</section>
<section id="id1132">
<h1>Opis ogólny<a class="headerlink" href="#id1132" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uianchorlayout.h</span></code> deklaruje klasy <code class="docutils literal notranslate"><span class="pre">UIAnchor</span></code>, <code class="docutils literal notranslate"><span class="pre">UIAnchorGroup</span></code> i <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code>, które razem implementują system layoutu oparty na „kotwicach” (anchors).</p>
</section>
<section id="klasa-uianchor">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchor</span></code><a class="headerlink" href="#klasa-uianchor" title="Link to this heading">#</a></h1>
</section>
<section id="id1133">
<h1>Opis semantyczny<a class="headerlink" href="#id1133" title="Link to this heading">#</a></h1>
<p>Reprezentuje pojedynczą regułę „kotwiczenia”, która wiąże jedną krawędź widgetu z krawędzią innego widgetu (lub rodzica).</p>
<ul class="simple">
<li><p><strong>Pola</strong>: <code class="docutils literal notranslate"><span class="pre">m_anchoredEdge</span></code> (krawędź tego widgetu), <code class="docutils literal notranslate"><span class="pre">m_hookedWidgetId</span></code> (ID widgetu docelowego), <code class="docutils literal notranslate"><span class="pre">m_hookedEdge</span></code> (krawędź widgetu docelowego).</p></li>
</ul>
</section>
<section id="klasa-uianchorgroup">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchorGroup</span></code><a class="headerlink" href="#klasa-uianchorgroup" title="Link to this heading">#</a></h1>
</section>
<section id="id1134">
<h1>Opis semantyczny<a class="headerlink" href="#id1134" title="Link to this heading">#</a></h1>
<p>Kontener na wszystkie kotwice (<code class="docutils literal notranslate"><span class="pre">UIAnchor</span></code>) przypisane do jednego widgetu. Posiada również flagę <code class="docutils literal notranslate"><span class="pre">m_updated</span></code> używaną przez algorytm layoutu.</p>
</section>
<section id="klasa-uianchorlayout">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code><a class="headerlink" href="#klasa-uianchorlayout" title="Link to this heading">#</a></h1>
</section>
<section id="id1135">
<h1>Opis semantyczny<a class="headerlink" href="#id1135" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code> to menedżer layoutu, który pozycjonuje i skaluje swoje widgety-dzieci na podstawie zdefiniowanych dla nich reguł kotwiczenia. Pozwala to na tworzenie elastycznych i responsywnych interfejsów, które dostosowują się do zmian rozmiaru okna.</p>
</section>
<section id="id1136">
<h1>Metody publiczne<a class="headerlink" href="#id1136" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metoda</p></th>
<th class="head text-left"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">addAnchor(...)</span></code></p></td>
<td class="text-left"><p>Dodaje nową regułę kotwiczenia dla widgetu.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">removeAnchors(...)</span></code></p></td>
<td class="text-left"><p>Usuwa wszystkie kotwice z widgetu.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">hasAnchors(...)</span></code></p></td>
<td class="text-left"><p>Sprawdza, czy widget ma jakiekolwiek kotwice.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">centerIn(...)</span></code></p></td>
<td class="text-left"><p>Skrót do dodania kotwic centrujących widget.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">fill(...)</span></code></p></td>
<td class="text-left"><p>Skrót do dodania kotwic rozciągających widget na cały obszar innego widgetu.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id1137">
<h1>Zmienne prywatne<a class="headerlink" href="#id1137" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_anchorsGroups</span></code>: Mapa przechowująca <code class="docutils literal notranslate"><span class="pre">UIAnchorGroup</span></code> dla każdego zarządzanego widgetu.</p></li>
</ul>
</section>
<section id="id1138">
<h1>Zależności i powiązania<a class="headerlink" href="#id1138" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uilayout.h</span></code>: Klasa bazowa.</p></li>
<li><p>Oznaczona jako <code class="docutils literal notranslate"><span class="pre">&#64;bindclass</span></code>.</p></li>
<li><p>Jest jednym z najczęściej używanych layoutów w projekcie.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uiwidgettext-cpp">
<h1>📄 uiwidgettext.cpp<a class="headerlink" href="#uiwidgettext-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1139">
<h1>Opis ogólny<a class="headerlink" href="#id1139" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uiwidgettext.cpp</span></code> zawiera implementację części klasy <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> odpowiedzialnej za obsługę i renderowanie tekstu.</p>
<blockquote>
<div><p><strong>NOTE:</strong> To nie jest osobna klasa, lecz część implementacji <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>, wydzielona do osobnego pliku.</p>
</div></blockquote>
</section>
<section id="id1140">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (część implementacji)<a class="headerlink" href="#id1140" title="Link to this heading">#</a></h1>
</section>
<section id="void-uiwidget-inittext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::initText()</span></code><a class="headerlink" href="#void-uiwidget-inittext" title="Link to this heading">#</a></h1>
<p>Inicjalizuje pola związane z tekstem do wartości domyślnych (np. domyślny font, wyrównanie do środka).</p>
</section>
<section id="void-uiwidget-updatetext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::updateText()</span></code><a class="headerlink" href="#void-uiwidget-updatetext" title="Link to this heading">#</a></h1>
<p>Metoda wywoływana po każdej zmianie tekstu lub jego właściwości.</p>
<ol class="arabic simple">
<li><p>Jeśli zawijanie jest włączone, wywołuje <code class="docutils literal notranslate"><span class="pre">m_font→wrapText()</span></code>, aby przygotować tekst do wyświetlenia (<code class="docutils literal notranslate"><span class="pre">m_drawText</span></code>).</p></li>
<li><p>Jeśli włączone jest <code class="docutils literal notranslate"><span class="pre">m_textAutoResize</span></code>, oblicza nowy, preferowany rozmiar widgetu na podstawie rozmiaru tekstu i go ustawia.</p></li>
<li><p>Ustawia flagę <code class="docutils literal notranslate"><span class="pre">m_textMustRecache</span></code>, aby geometria została przeliczona przy następnym rysowaniu.</p></li>
</ol>
</section>
<section id="void-uiwidget-parsetextstyle">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::parseTextStyle(...)</span></code><a class="headerlink" href="#void-uiwidget-parsetextstyle" title="Link to this heading">#</a></h1>
<p>Parsuje z węzła OTML wszystkie atrybuty związane z tekstem (<code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">font</span></code>, <code class="docutils literal notranslate"><span class="pre">text-align</span></code>, <code class="docutils literal notranslate"><span class="pre">text-wrap</span></code> itp.).</p>
</section>
<section id="void-uiwidget-drawtext-const-rect-screencoords">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::drawText(const</span> <span class="pre">Rect&amp;</span> <span class="pre">screenCoords)</span></code><a class="headerlink" href="#void-uiwidget-drawtext-const-rect-screencoords" title="Link to this heading">#</a></h1>
<p>Dodaje zadanie rysowania tekstu do <code class="docutils literal notranslate"><span class="pre">g_drawQueue</span></code>. Używa <code class="docutils literal notranslate"><span class="pre">m_font</span></code> do wykonania właściwej operacji rysowania, przekazując mu tekst (<code class="docutils literal notranslate"><span class="pre">m_drawText</span></code>), obszar (<code class="docutils literal notranslate"><span class="pre">m_textCachedScreenCoords</span></code>), wyrównanie, kolor i ewentualne informacje o wielu kolorach.</p>
</section>
<section id="void-uiwidget-ontextchange-i-onfontchange">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::onTextChange(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">onFontChange(...)</span></code><a class="headerlink" href="#void-uiwidget-ontextchange-i-onfontchange" title="Link to this heading">#</a></h1>
<p>Wirtualne metody, które domyślnie wywołują odpowiednie <code class="docutils literal notranslate"><span class="pre">callbacki</span></code> w Lua.</p>
</section>
<section id="void-uiwidget-settext-std-string-text">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setText(std::string</span> <span class="pre">text,</span> <span class="pre">...)</span></code><a class="headerlink" href="#void-uiwidget-settext-std-string-text" title="Link to this heading">#</a></h1>
<p>Główny setter dla tekstu. Jeśli <code class="docutils literal notranslate"><span class="pre">m_textOnlyUpperCase</span></code> jest <code class="docutils literal notranslate"><span class="pre">true</span></code>, konwertuje tekst na wielkie litery. Aktualizuje <code class="docutils literal notranslate"><span class="pre">m_text</span></code>, wywołuje <code class="docutils literal notranslate"><span class="pre">updateText()</span></code> i <code class="docutils literal notranslate"><span class="pre">onTextChange</span></code>.</p>
</section>
<section id="void-uiwidget-setcoloredtext">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setColoredText(...)</span></code><a class="headerlink" href="#void-uiwidget-setcoloredtext" title="Link to this heading">#</a></h1>
<p>Setter dla tekstu wielokolorowego. Parsuje wektor stringów, budując <code class="docutils literal notranslate"><span class="pre">m_text</span></code> i <code class="docutils literal notranslate"><span class="pre">m_textColors</span></code>.</p>
</section>
<section id="void-uiwidget-setfont">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setFont(...)</span></code><a class="headerlink" href="#void-uiwidget-setfont" title="Link to this heading">#</a></h1>
<p>Ustawia font, pobierając go z <code class="docutils literal notranslate"><span class="pre">g_fonts</span></code>.</p>
</section>
<section id="id1141">
<h1>Zależności i powiązania<a class="headerlink" href="#id1141" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uitranslator.h</span></code>: Do parsowania <code class="docutils literal notranslate"><span class="pre">text-align</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/fontmanager.h</span></code>: Do pobierania fontów.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uiwidgetbasestyle-cpp">
<h1>📄 uiwidgetbasestyle.cpp<a class="headerlink" href="#uiwidgetbasestyle-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1142">
<h1>Opis ogólny<a class="headerlink" href="#id1142" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uiwidgetbasestyle.cpp</span></code> zawiera implementację części klasy <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> odpowiedzialnej za podstawowy styl, czyli właściwości wspólne dla wszystkich widgetów, takie jak tło, ramka, ikona i ogólne atrybuty.</p>
</section>
<section id="id1143">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (część implementacji)<a class="headerlink" href="#id1143" title="Link to this heading">#</a></h1>
</section>
<section id="void-uiwidget-initbasestyle">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::initBaseStyle()</span></code><a class="headerlink" href="#void-uiwidget-initbasestyle" title="Link to this heading">#</a></h1>
<p>Inicjalizuje podstawowe właściwości stylu do wartości domyślnych (np. przezroczyste tło, biały kolor, brak ramki).</p>
</section>
<section id="void-uiwidget-parsebasestyle-const-otmlnodeptr-stylenode">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::parseBaseStyle(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">styleNode)</span></code><a class="headerlink" href="#void-uiwidget-parsebasestyle-const-otmlnodeptr-stylenode" title="Link to this heading">#</a></h1>
<p>Główna metoda parsująca styl.</p>
<ol class="arabic simple">
<li><p>Najpierw parsuje pola i <code class="docutils literal notranslate"><span class="pre">callbacki</span></code> Lua (<code class="docutils literal notranslate"><span class="pre">&#64;</span></code> i <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>), aby były dostępne podczas parsowania innych atrybutów.</p></li>
<li><p>Następnie parsuje wszystkie podstawowe atrybuty, takie jak <code class="docutils literal notranslate"><span class="pre">color</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code>, <code class="docutils literal notranslate"><span class="pre">background-color</span></code>, <code class="docutils literal notranslate"><span class="pre">opacity</span></code>, <code class="docutils literal notranslate"><span class="pre">rotation</span></code>, <code class="docutils literal notranslate"><span class="pre">enabled</span></code>, <code class="docutils literal notranslate"><span class="pre">visible</span></code>, <code class="docutils literal notranslate"><span class="pre">margin</span></code>, <code class="docutils literal notranslate"><span class="pre">padding</span></code>, <code class="docutils literal notranslate"><span class="pre">border</span></code>, <code class="docutils literal notranslate"><span class="pre">icon</span></code>, etc.</p></li>
<li><p>Obsługuje również definicję layoutu (<code class="docutils literal notranslate"><span class="pre">layout:</span> <span class="pre">...</span></code>) oraz deklaracje kotwic (<code class="docutils literal notranslate"><span class="pre">anchors.left:</span> <span class="pre">...</span></code>).</p></li>
</ol>
</section>
<section id="void-uiwidget-drawbackground-const-rect-screencoords">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::drawBackground(const</span> <span class="pre">Rect&amp;</span> <span class="pre">screenCoords)</span></code><a class="headerlink" href="#void-uiwidget-drawbackground-const-rect-screencoords" title="Link to this heading">#</a></h1>
<p>Dodaje do <code class="docutils literal notranslate"><span class="pre">g_drawQueue</span></code> zadanie narysowania prostokąta wypełnionego kolorem <code class="docutils literal notranslate"><span class="pre">m_backgroundColor</span></code>.</p>
</section>
<section id="void-uiwidget-drawborder-const-rect-screencoords">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::drawBorder(const</span> <span class="pre">Rect&amp;</span> <span class="pre">screenCoords)</span></code><a class="headerlink" href="#void-uiwidget-drawborder-const-rect-screencoords" title="Link to this heading">#</a></h1>
<p>Dodaje do <code class="docutils literal notranslate"><span class="pre">g_drawQueue</span></code> zadania narysowania czterech prostokątów tworzących ramkę, każdy z odpowiednim kolorem i grubością.</p>
</section>
<section id="void-uiwidget-drawicon-const-rect-screencoords">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::drawIcon(const</span> <span class="pre">Rect&amp;</span> <span class="pre">screenCoords)</span></code><a class="headerlink" href="#void-uiwidget-drawicon-const-rect-screencoords" title="Link to this heading">#</a></h1>
<p>Jeśli <code class="docutils literal notranslate"><span class="pre">m_icon</span></code> jest ustawiony, dodaje do <code class="docutils literal notranslate"><span class="pre">g_drawQueue</span></code> zadanie narysowania tekstury ikony w odpowiednim miejscu, uwzględniając <code class="docutils literal notranslate"><span class="pre">m_iconAlign</span></code>, <code class="docutils literal notranslate"><span class="pre">m_iconOffset</span></code> i <code class="docutils literal notranslate"><span class="pre">m_iconColor</span></code>.</p>
</section>
<section id="void-uiwidget-seticon-const-std-string-iconfile">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setIcon(const</span> <span class="pre">std::string&amp;</span> <span class="pre">iconFile)</span></code><a class="headerlink" href="#void-uiwidget-seticon-const-std-string-iconfile" title="Link to this heading">#</a></h1>
<p>Ładuje teksturę ikony za pomocą <code class="docutils literal notranslate"><span class="pre">g_textures</span></code> i ustawia jej domyślny <code class="docutils literal notranslate"><span class="pre">clip-rect</span></code>.</p>
</section>
<section id="id1144">
<h1>Zależności i powiązania<a class="headerlink" href="#id1144" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uitranslator.h</span></code>: Do parsowania <code class="docutils literal notranslate"><span class="pre">icon-align</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/texturemanager.h</span></code>: Do ładowania tekstur ikon.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/graphics/painter.h</span></code>: Pośrednio, poprzez <code class="docutils literal notranslate"><span class="pre">g_drawQueue</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="uianchorlayout-cpp">
<h1>📄 uianchorlayout.cpp<a class="headerlink" href="#uianchorlayout-cpp" title="Link to this heading">#</a></h1>
</section>
<section id="id1145">
<h1>Opis ogólny<a class="headerlink" href="#id1145" title="Link to this heading">#</a></h1>
<p>Plik <code class="docutils literal notranslate"><span class="pre">uianchorlayout.cpp</span></code> zawiera implementację klas <code class="docutils literal notranslate"><span class="pre">UIAnchor</span></code>, <code class="docutils literal notranslate"><span class="pre">UIAnchorGroup</span></code> i <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code>, które razem tworzą system layoutu opartego na kotwicach.</p>
</section>
<section id="id1146">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchor</span></code><a class="headerlink" href="#id1146" title="Link to this heading">#</a></h1>
</section>
<section id="uiwidgetptr-uianchor-gethookedwidget">
<h1><code class="docutils literal notranslate"><span class="pre">UIWidgetPtr</span> <span class="pre">UIAnchor::getHookedWidget(...)</span></code><a class="headerlink" href="#uiwidgetptr-uianchor-gethookedwidget" title="Link to this heading">#</a></h1>
<p>Znajduje widget, do którego dana kotwica jest „przyczepiona”. Obsługuje specjalne identyfikatory:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parent</span></code>: widget-rodzic.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">next</span></code>: następne rodzeństwo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prev</span></code>: poprzednie rodzeństwo.</p></li>
<li><p>Inne: szuka dziecka o danym ID w rodzicu.</p></li>
</ul>
</section>
<section id="int-uianchor-gethookedpoint">
<h1><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">UIAnchor::getHookedPoint(...)</span></code><a class="headerlink" href="#int-uianchor-gethookedpoint" title="Link to this heading">#</a></h1>
<p>Oblicza współrzędną (X lub Y) krawędzi widgetu, do którego kotwica jest przyczepiona.</p>
</section>
<section id="id1147">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchorGroup</span></code><a class="headerlink" href="#id1147" title="Link to this heading">#</a></h1>
</section>
<section id="void-uianchorgroup-addanchor">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIAnchorGroup::addAnchor(...)</span></code><a class="headerlink" href="#void-uianchorgroup-addanchor" title="Link to this heading">#</a></h1>
<p>Dodaje nową kotwicę do grupy. Jeśli kotwica dla tej samej krawędzi już istnieje, jest ona zastępowana.</p>
</section>
<section id="id1148">
<h1>Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code><a class="headerlink" href="#id1148" title="Link to this heading">#</a></h1>
</section>
<section id="void-uianchorlayout-addanchor">
<h1><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIAnchorLayout::addAnchor(...)</span></code><a class="headerlink" href="#void-uianchorlayout-addanchor" title="Link to this heading">#</a></h1>
<p>Główna metoda do tworzenia i dodawania nowej reguły kotwiczenia. Tworzy obiekt <code class="docutils literal notranslate"><span class="pre">UIAnchor</span></code> i dodaje go do odpowiedniej <code class="docutils literal notranslate"><span class="pre">UIAnchorGroup</span></code>.</p>
</section>
<section id="bool-uianchorlayout-updatewidget">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIAnchorLayout::updateWidget(...)</span></code><a class="headerlink" href="#bool-uianchorlayout-updatewidget" title="Link to this heading">#</a></h1>
</section>
<section id="id1149">
<h1>Opis semantyczny<a class="headerlink" href="#id1149" title="Link to this heading">#</a></h1>
<p>Rekurencyjna metoda, która oblicza nowy <code class="docutils literal notranslate"><span class="pre">Rect</span></code> dla pojedynczego widgetu na podstawie jego kotwic.</p>
</section>
<section id="id1150">
<h1>Działanie<a class="headerlink" href="#id1150" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Jeśli widget, do którego się kotwiczymy, sam nie został jeszcze zaktualizowany, wywołuje <code class="docutils literal notranslate"><span class="pre">updateWidget</span></code> rekurencyjnie dla niego.</p></li>
<li><p>Iteruje po wszystkich kotwicach widgetu.</p></li>
<li><p>Dla każdej kotwicy, oblicza docelowy punkt (<code class="docutils literal notranslate"><span class="pre">point</span></code>) na podstawie <code class="docutils literal notranslate"><span class="pre">getHookedPoint</span></code>.</p></li>
<li><p>Modyfikuje <code class="docutils literal notranslate"><span class="pre">newRect</span></code> widgetu, ustawiając lub przesuwając odpowiednią krawędź (<code class="docutils literal notranslate"><span class="pre">moveLeft</span></code>, <code class="docutils literal notranslate"><span class="pre">setRight</span></code>, <code class="docutils literal notranslate"><span class="pre">moveVerticalCenter</span></code>, itp.).</p></li>
<li><p>Po przetworzeniu wszystkich kotwic, ustawia nowy <code class="docutils literal notranslate"><span class="pre">Rect</span></code> dla widgetu.</p></li>
</ol>
</section>
<section id="bool-uianchorlayout-internalupdate">
<h1><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIAnchorLayout::internalUpdate()</span></code><a class="headerlink" href="#bool-uianchorlayout-internalupdate" title="Link to this heading">#</a></h1>
<p>Główna metoda aktualizacji layoutu.</p>
<ol class="arabic simple">
<li><p>Resetuje flagi <code class="docutils literal notranslate"><span class="pre">m_updated</span></code> we wszystkich <code class="docutils literal notranslate"><span class="pre">UIAnchorGroup</span></code>.</p></li>
<li><p>W pętli przechodzi przez wszystkie widgety zarządzane przez ten layout i, jeśli nie zostały jeszcze zaktualizowane, wywołuje dla nich <code class="docutils literal notranslate"><span class="pre">updateWidget</span></code>. Pętla zapewnia, że wszystkie zależności zostaną rozwiązane.</p></li>
</ol>
</section>
<section id="id1151">
<h1>Zależności i powiązania<a class="headerlink" href="#id1151" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uianchorlayout.h</span></code>: Plik nagłówkowy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framework/ui/uiwidget.h</span></code>: Operuje na widgetach.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="meta-dokumenty">
<h1>Meta-dokumenty<a class="headerlink" href="#meta-dokumenty" title="Link to this heading">#</a></h1>
</section>
<section id="spis-tresci">
<h1>📑 Spis treści<a class="headerlink" href="#spis-tresci" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">const.h</span></code></strong>: Definicje globalnych stałych, makr i typów wyliczeniowych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code></strong>: Skrypt konfiguracyjny budowania projektu.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">global.h</span></code></strong>: Centralny plik nagłówkowy, agregujący podstawowe zależności.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">pch.h</span></code></strong>: Prekompilowany nagłówek ze standardowymi bibliotekami.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luafunctions.cpp</span></code></strong>: Implementacja bindowań C++ do Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">resourcemanager.h</span></code></strong>: Deklaracja menedżera zasobów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">adaptiverenderer.cpp</span></code></strong>: Implementacja renderera adaptacyjnego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">adaptiverenderer.h</span></code></strong>: Deklaracja renderera adaptacyjnego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">application.cpp</span></code></strong>: Implementacja bazowej klasy aplikacji.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">application.h</span></code></strong>: Deklaracja bazowej klasy aplikacji.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">asyncdispatcher.h</span></code></strong>: Deklaracja dyspozytora zadań asynchronicznych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">binarytree.cpp</span></code></strong>: Implementacja czytnika/writera formatu binarnego drzewa.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">asyncdispatcher.cpp</span></code></strong>: Implementacja dyspozytora zadań asynchronicznych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">clock.h</span></code></strong>: Deklaracja klasy zegara.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">binarytree.h</span></code></strong>: Deklaracja klas do obsługi formatu binarnego drzewa.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">config.cpp</span></code></strong>: Implementacja klasy do zarządzania pojedynczą konfiguracją.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">configmanager.cpp</span></code></strong>: Implementacja menedżera konfiguracji.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">configmanager.h</span></code></strong>: Deklaracja menedżera konfiguracji.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">config.h</span></code></strong>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Config</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">clock.cpp</span></code></strong>: Implementacja klasy zegara.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">consoleapplication.h</span></code></strong>: Deklaracja aplikacji konsolowej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">declarations.h</span></code></strong>: Wczesne deklaracje dla modułu <code class="docutils literal notranslate"><span class="pre">core</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">event.cpp</span></code></strong>: Implementacja klasy <code class="docutils literal notranslate"><span class="pre">Event</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">event.h</span></code></strong>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Event</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">eventdispatcher.cpp</span></code></strong>: Implementacja dyspozytora zdarzeń.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">eventdispatcher.h</span></code></strong>: Deklaracja dyspozytora zdarzeń.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">filestream.cpp</span></code></strong>: Implementacja strumienia plikowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">filestream.h</span></code></strong>: Deklaracja strumienia plikowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">graphicalapplication.cpp</span></code></strong>: Implementacja aplikacji graficznej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">inputevent.h</span></code></strong>: Deklaracja struktury <code class="docutils literal notranslate"><span class="pre">InputEvent</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">graphicalapplication.h</span></code></strong>: Deklaracja aplikacji graficznej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">logger.h</span></code></strong>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Logger</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">module.cpp</span></code></strong>: Implementacja klasy <code class="docutils literal notranslate"><span class="pre">Module</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">modulemanager.cpp</span></code></strong>: Implementacja menedżera modułów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">logger.cpp</span></code></strong>: Implementacja klasy <code class="docutils literal notranslate"><span class="pre">Logger</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">module.h</span></code></strong>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Module</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">modulemanager.h</span></code></strong>: Deklaracja menedżera modułów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">scheduledevent.cpp</span></code></strong>: Implementacja zdarzenia zaplanowanego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">resourcemanager.cpp</span></code></strong>: Implementacja menedżera zasobów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">scheduledevent.h</span></code></strong>: Deklaracja zdarzenia zaplanowanego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">timer.cpp</span></code></strong>: Implementacja timera.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">timer.h</span></code></strong>: Deklaracja timera.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">consoleapplication.cpp</span></code></strong>: Implementacja aplikacji konsolowej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">shaderprogram.h</span></code></strong>: Deklaracja programu shadera.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">animatedtexture.cpp</span></code></strong>: Implementacja tekstury animowanej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">animatedtexture.h</span></code></strong>: Deklaracja tekstury animowanej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">apngloader.cpp</span></code></strong>: Implementacja ładowarki APNG.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">apngloader.h</span></code></strong>: Deklaracja ładowarki APNG.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">atlas.cpp</span></code></strong>: Implementacja atlasu tekstur.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">bitmapfont.cpp</span></code></strong>: Implementacja fontu bitmapowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">atlas.h</span></code></strong>: Deklaracja atlasu tekstur.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">bitmapfont.h</span></code></strong>: Deklaracja fontu bitmapowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">cachedtext.cpp</span></code></strong>: Implementacja keszowanego tekstu.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">colorarray.h</span></code></strong>: Deklaracja tablicy kolorów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">cachedtext.h</span></code></strong>: Deklaracja keszowanego tekstu.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">coordsbuffer.h</span></code></strong>: Deklaracja bufora współrzędnych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">deptharray.h</span></code></strong>: Deklaracja tablicy głębokości.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">declarations.h</span></code></strong>: Wczesne deklaracje dla modułu <code class="docutils literal notranslate"><span class="pre">graphics</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">coordsbuffer.cpp</span></code></strong>: Implementacja bufora współrzędnych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">drawcache.cpp</span></code></strong>: Implementacja cache’a rysowania.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">drawcache.h</span></code></strong>: Deklaracja cache’a rysowania.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">drawqueue.cpp</span></code></strong>: Implementacja kolejki rysowania.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">fontmanager.cpp</span></code></strong>: Implementacja menedżera fontów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">fontmanager.h</span></code></strong>: Deklaracja menedżera fontów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">drawqueue.h</span></code></strong>: Deklaracja kolejki rysowania.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">framebuffer.cpp</span></code></strong>: Implementacja bufora ramki.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">framebuffer.h</span></code></strong>: Deklaracja bufora ramki.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">framebuffermanager.cpp</span></code></strong>: Implementacja menedżera buforów ramki.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">graph.cpp</span></code></strong>: Implementacja wykresu debugującego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">graph.h</span></code></strong>: Deklaracja wykresu debugującego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">glutil.h</span></code></strong>: Narzędzia OpenGL.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">graphics.cpp</span></code></strong>: Implementacja menedżera grafiki.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">graphics.h</span></code></strong>: Deklaracja menedżera grafiki.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">image.cpp</span></code></strong>: Implementacja klasy <code class="docutils literal notranslate"><span class="pre">Image</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">hardwarebuffer.h</span></code></strong>: Deklaracja bufora sprzętowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">image.h</span></code></strong>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Image</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">framebuffermanager.h</span></code></strong>: Deklaracja menedżera buforów ramki.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">painter.h</span></code></strong>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">painter.cpp</span></code></strong>: Implementacja klasy <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">hardwarebuffer.cpp</span></code></strong>: Implementacja bufora sprzętowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">paintershaderprogram.cpp</span></code></strong>: Implementacja programu shadera dla <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">paintershaderprogram.h</span></code></strong>: Deklaracja programu shadera dla <code class="docutils literal notranslate"><span class="pre">Painter</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">shader.cpp</span></code></strong>: Implementacja klasy <code class="docutils literal notranslate"><span class="pre">Shader</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">shadermanager.h</span></code></strong>: Deklaracja menedżera shaderów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">shadermanager.cpp</span></code></strong>: Implementacja menedżera shaderów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">shader.h</span></code></strong>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Shader</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">textrender.cpp</span></code></strong>: Implementacja renderera tekstu.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">shaderprogram.cpp</span></code></strong>: Implementacja programu shadera.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">texture.cpp</span></code></strong>: Implementacja klasy <code class="docutils literal notranslate"><span class="pre">Texture</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">texture.h</span></code></strong>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Texture</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">texturemanager.cpp</span></code></strong>: Implementacja menedżera tekstur.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">vertexarray.h</span></code></strong>: Deklaracja tablicy wierzchołków.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">texturemanager.h</span></code></strong>: Deklaracja menedżera tekstur.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">textrender.h</span></code></strong>: Deklaracja renderera tekstu.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">outfits.h</span></code></strong>: Shadery dla strojów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">newshader.h</span></code></strong>: Nowe shadery.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">shaders.h</span></code></strong>: Agregacja shaderów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">shadersources.h</span></code></strong>: Źródła standardowych shaderów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">http.cpp</span></code></strong>: Implementacja klienta HTTP/WebSocket.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">websocket.h</span></code></strong>: Deklaracja sesji WebSocket.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">http.h</span></code></strong>: Deklaracja klienta HTTP/WebSocket.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">result.h</span></code></strong>: Deklaracja struktury <code class="docutils literal notranslate"><span class="pre">HttpResult</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">session.cpp</span></code></strong>: Implementacja sesji HTTP.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">session.h</span></code></strong>: Deklaracja sesji HTTP.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">websocket.cpp</span></code></strong>: Implementacja sesji WebSocket.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">mouse.cpp</span></code></strong>: Implementacja menedżera myszy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">mouse.h</span></code></strong>: Deklaracja menedżera myszy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">declarations.h</span></code></strong>: Wczesne deklaracje dla modułu <code class="docutils literal notranslate"><span class="pre">luaengine</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">lbitlib.cpp</span></code></strong>: Implementacja biblioteki <code class="docutils literal notranslate"><span class="pre">bit32</span></code> dla Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">lbitlib.h</span></code></strong>: Deklaracja biblioteki <code class="docutils literal notranslate"><span class="pre">bit32</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luabinder.h</span></code></strong>: Mechanizm bindowania C++ do Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luaexception.h</span></code></strong>: Deklaracja wyjątków Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luaexception.cpp</span></code></strong>: Implementacja wyjątków Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luainterface.cpp</span></code></strong>: Implementacja interfejsu Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luainterface.h</span></code></strong>: Deklaracja interfejsu Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luaobject.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luaobject.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luavaluecasts.cpp</span></code></strong>: Implementacja konwersji typów Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">luavaluecasts.h</span></code></strong>: Deklaracja konwersji typów Lua.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">connection.cpp</span></code></strong>: Implementacja połączenia TCP.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">server.h</span></code></strong>: Deklaracja serwera TCP.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">connection.h</span></code></strong>: Deklaracja połączenia TCP.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">declarations.h</span></code></strong>: Wczesne deklaracje dla modułu <code class="docutils literal notranslate"><span class="pre">net</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">inputmessage.h</span></code></strong>: Deklaracja wiadomości przychodzącej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">outputmessage.cpp</span></code></strong>: Implementacja wiadomości wychodzącej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">outputmessage.h</span></code></strong>: Deklaracja wiadomości wychodzącej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">packet_player.cpp</span></code></strong>: Implementacja odtwarzacza pakietów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">packet_player.h</span></code></strong>: Deklaracja odtwarzacza pakietów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">protocol.h</span></code></strong>: Deklaracja protokołu sieciowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">packet_recorder.cpp</span></code></strong>: Implementacja nagrywarki pakietów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">protocol.cpp</span></code></strong>: Implementacja protokołu sieciowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">server.cpp</span></code></strong>: Implementacja serwera TCP.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">inputmessage.cpp</span></code></strong>: Implementacja wiadomości przychodzącej.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">packet_recorder.h</span></code></strong>: Deklaracja nagrywarki pakietów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">declarations.h</span></code></strong>: Wczesne deklaracje dla modułu <code class="docutils literal notranslate"><span class="pre">otml</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otmlparser.h</span></code></strong>: Deklaracja parsera OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otml.h</span></code></strong>: Agregacja nagłówków OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otmldocument.cpp</span></code></strong>: Implementacja dokumentu OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otmldocument.h</span></code></strong>: Deklaracja dokumentu OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otmlemitter.cpp</span></code></strong>: Implementacja emittera OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otmlexception.cpp</span></code></strong>: Implementacja wyjątków OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otmlexception.h</span></code></strong>: Deklaracja wyjątków OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otmlemitter.h</span></code></strong>: Deklaracja emittera OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otmlparser.cpp</span></code></strong>: Implementacja parsera OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otmlnode.h</span></code></strong>: Deklaracja węzła OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">otmlnode.cpp</span></code></strong>: Implementacja węzła OTML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">androidplatform.cpp</span></code></strong>: Implementacja platformy dla Androida.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">androidwindow.cpp</span></code></strong>: Implementacja okna dla Androida.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">androidwindow.h</span></code></strong>: Deklaracja okna dla Androida.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">crashhandler.h</span></code></strong>: Deklaracja obsługi awarii.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">platform.cpp</span></code></strong>: Implementacja globalnej instancji platformy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">platformwindow.cpp</span></code></strong>: Implementacja bazowej klasy okna.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">platform.h</span></code></strong>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Platform</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">platformwindow.h</span></code></strong>: Deklaracja bazowej klasy okna.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">sdlwindow.cpp</span></code></strong>: Implementacja okna SDL (WASM).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">sdlwindow.h</span></code></strong>: Deklaracja okna SDL.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">unixcrashhandler.cpp</span></code></strong>: Implementacja obsługi awarii dla Uniksa.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">unixplatform.cpp</span></code></strong>: Implementacja platformy dla Uniksa.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">win32crashhandler.cpp</span></code></strong>: Implementacja obsługi awarii dla Windows.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">win32platform.cpp</span></code></strong>: Implementacja platformy dla Windows.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">win32window.cpp</span></code></strong>: Implementacja okna dla Windows.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">win32window.h</span></code></strong>: Deklaracja okna dla Windows.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">x11window.h</span></code></strong>: Deklaracja okna X11.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">x11window.cpp</span></code></strong>: Implementacja okna X11.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">proxy.cpp</span></code></strong>: Implementacja menedżera proxy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">proxy.h</span></code></strong>: Deklaracja menedżera proxy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">proxy_client.h</span></code></strong>: Deklaracja klienta proxy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">proxy_client.cpp</span></code></strong>: Implementacja klienta proxy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">combinedsoundsource.cpp</span></code></strong>: Implementacja złożonego źródła dźwięku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">combinedsoundsource.h</span></code></strong>: Deklaracja złożonego źródła dźwięku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">oggsoundfile.cpp</span></code></strong>: Implementacja pliku dźwiękowego OGG.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">declarations.h</span></code></strong>: Wczesne deklaracje dla modułu <code class="docutils literal notranslate"><span class="pre">sound</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">oggsoundfile.h</span></code></strong>: Deklaracja pliku dźwiękowego OGG.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">soundbuffer.cpp</span></code></strong>: Implementacja bufora dźwięku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">soundbuffer.h</span></code></strong>: Deklaracja bufora dźwięku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">soundfile.cpp</span></code></strong>: Implementacja pliku dźwiękowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">soundchannel.cpp</span></code></strong>: Implementacja kanału dźwiękowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">soundchannel.h</span></code></strong>: Deklaracja kanału dźwiękowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">soundfile.h</span></code></strong>: Deklaracja pliku dźwiękowego.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">soundmanager.cpp</span></code></strong>: Implementacja menedżera dźwięku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">soundmanager.h</span></code></strong>: Deklaracja menedżera dźwięku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">soundsource.cpp</span></code></strong>: Implementacja źródła dźwięku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">streamsoundsource.cpp</span></code></strong>: Implementacja strumieniowego źródła dźwięku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">streamsoundsource.h</span></code></strong>: Deklaracja strumieniowego źródła dźwięku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">soundsource.h</span></code></strong>: Deklaracja źródła dźwięku.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">any.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">stdext::any</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">cast.h</span></code></strong>: Funkcje do rzutowania typów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">demangle.cpp</span></code></strong>: Implementacja demanglowania nazw.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">compiler.h</span></code></strong>: Makra specyficzne dla kompilatora.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">demangle.h</span></code></strong>: Deklaracja demanglowania nazw.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">boolean.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">stdext::boolean</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">dumper.h</span></code></strong>: Narzędzie do debugowania.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">dynamic_storage.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">dynamic_storage</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">exception.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">stdext::exception</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">fastrand.h</span></code></strong>: Szybki generator liczb losowych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">math.cpp</span></code></strong>: Implementacja funkcji matematycznych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">math.h</span></code></strong>: Deklaracja funkcji matematycznych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">net.h</span></code></strong>: Deklaracja narzędzi sieciowych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">packed_any.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">packed_any</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">shared_object.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">shared_object</span></code> i <code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">stdext.h</span></code></strong>: Agregacja nagłówków <code class="docutils literal notranslate"><span class="pre">stdext</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">packed_storage.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">packed_storage</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">thread.h</span></code></strong>: Agregacja nagłówków wątków.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">time.h</span></code></strong>: Deklaracja funkcji czasowych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">traits.h</span></code></strong>: Narzędzia metaprogramowania.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">string.h</span></code></strong>: Deklaracja funkcji do stringów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">time.cpp</span></code></strong>: Implementacja funkcji czasowych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uri.h</span></code></strong>: Deklaracja parsera URI.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">net.cpp</span></code></strong>: Implementacja narzędzi sieciowych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uri.cpp</span></code></strong>: Implementacja parsera URI.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">types.h</span></code></strong>: Definicje typów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">format.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">stdext::format</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">string.cpp</span></code></strong>: Implementacja funkcji do stringów.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">declarations.h</span></code></strong>: Wczesne deklaracje dla modułu <code class="docutils literal notranslate"><span class="pre">ui</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ui.h</span></code></strong>: Agregacja nagłówków UI.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uiboxlayout.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uiboxlayout.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uigridlayout.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uigridlayout.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uihorizontallayout.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uihorizontallayout.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uilayout.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">UILayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uilayout.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">UILayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uimanager.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uitextedit.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uimanager.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uitextedit.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uitranslator.cpp</span></code></strong>: Implementacja translatorów UI.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uitranslator.h</span></code></strong>: Deklaracja translatorów UI.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uiverticallayout.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uiverticallayout.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uiwidget.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uiwidget.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uiwidgetimage.cpp</span></code></strong>: Implementacja części <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (obraz).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uianchorlayout.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uiwidgettext.cpp</span></code></strong>: Implementacja części <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (tekst).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uiwidgetbasestyle.cpp</span></code></strong>: Implementacja części <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (styl).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uianchorlayout.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">color.cpp</span></code></strong>: Implementacja klasy <code class="docutils literal notranslate"><span class="pre">Color</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">color.h</span></code></strong>: Deklaracja klasy <code class="docutils literal notranslate"><span class="pre">Color</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">crypt.cpp</span></code></strong>: Implementacja narzędzi kryptograficznych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">databuffer.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">DataBuffer</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">crypt.h</span></code></strong>: Deklaracja narzędzi kryptograficznych.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">extras.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">Extras</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">extras.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">Extras</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">framecounter.h</span></code></strong>: Implementacja licznika klatek.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">matrix.h</span></code></strong>: Implementacja macierzy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">pngunpacker.cpp</span></code></strong>: Implementacja unpackera PNG.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">pngunpacker.h</span></code></strong>: Deklaracja unpackera PNG.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">point.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">Point</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">qrcodegen.c</span></code></strong>: Implementacja generatora kodów QR.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">qrcodegen.h</span></code></strong>: Deklaracja generatora kodów QR.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">rect.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">Rect</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">size.h</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">Size</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">stats.cpp</span></code></strong>: Implementacja systemu statystyk.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">stats.h</span></code></strong>: Deklaracja systemu statystyk.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">tinystr.cpp</span></code></strong>: Implementacja <code class="docutils literal notranslate"><span class="pre">TiXmlString</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">tinyxmlparser.cpp</span></code></strong>: Implementacja parsera TinyXML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">tinystr.h</span></code></strong>: Deklaracja <code class="docutils literal notranslate"><span class="pre">TiXmlString</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">tinyxml.cpp</span></code></strong>: Implementacja TinyXML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">tinyxmlerror.cpp</span></code></strong>: Błędy TinyXML.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">tinyxml.h</span></code></strong>: Deklaracja TinyXML.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="indeks-funkcji-metod">
<h1>🔍 Indeks funkcji/metod<a class="headerlink" href="#indeks-funkcji-metod" title="Link to this heading">#</a></h1>
<p><em>W przygotowaniu</em></p>
</section>
<hr class="docutils" />
<section id="mapa-zaleznosci">
<h1>🧭 Mapa zależności<a class="headerlink" href="#mapa-zaleznosci" title="Link to this heading">#</a></h1>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>graph TD
    subgraph Aplikacja
        Application --dziedziczy-→ GraphicalApplication
        Application --dziedziczy-→ ConsoleApplication
        GraphicalApplication -→ PlatformWindow
        GraphicalApplication -→ UIManager
        GraphicalApplication -→ Graphics
        GraphicalApplication -→ SoundManager
    end

    subgraph Framework_Core
        Application -→ EventDispatcher
        Application -→ ModuleManager
        Application -→ ResourceManager
        Application -→ ConfigManager
        Application -→ Logger
        EventDispatcher -→ Event
        Event --dziedziczy-→ ScheduledEvent
        Clock &amp; Timer
    end

    subgraph Framework_UI
        UIManager -→ UIWidget
        UIWidget -→ UILayout
        UILayout --dziedziczy-→ UIAnchorLayout
        UILayout --dziedziczy-→ UIBoxLayout
        UIBoxLayout --dziedziczy-→ UIHorizontalLayout
        UIBoxLayout --dziedziczy-→ UIVerticalLayout
        UIWidget -→ BitmapFont
        UIWidget -→ Painter
    end

    subgraph Framework_Graphics
        Graphics -→ Painter
        Graphics -→ TextureManager
        Graphics -→ FrameBufferManager
        Graphics -→ ShaderManager
        Painter -→ ShaderProgram
        TextureManager -→ Texture
        Texture --dziedziczy-→ AnimatedTexture
        Texture -→ Image
    end

    subgraph Framework_Platform
        PlatformWindow --implementuje-→ WIN32Window
        PlatformWindow --implementuje-→ X11Window
        PlatformWindow --implementuje-→ AndroidWindow
        PlatformWindow --implementuje-→ SDLWindow
        Platform
    end

    subgraph Framework_Lua
        LuaInterface -→ LuaObject
        LuaInterface -→ luabinder
        UIWidget --dziedziczy-→ LuaObject
        Protocol --dziedziczy-→ LuaObject
    end

    subgraph Framework_Net
        Protocol -→ Connection
        Protocol -→ InputMessage &amp; OutputMessage
        ProxyManager -→ Proxy &amp; Session
        Connection &amp; Proxy &amp; Session -→ Boost.Asio
    end

    subgraph Zależności_Zewnętrzne
        Boost.Asio
        Boost.Beast
        Boost.Process
        OpenGL/GLES/GLEW
        OpenAL
        Lua/LuaJIT
        PhysFS
        ZLIB
        OpenSSL
        TinyXML
    end

    Application -→ Framework_Core
    GraphicalApplication -→ Framework_Graphics
    GraphicalApplication -→ Framework_UI
    GraphicalApplication -→ Framework_Platform
    Application -→ Framework_Lua
    Application -→ Framework_Net

    Framework_Graphics -→ OpenGL/GLES/GLEW
    Framework_Net -→ Zależności_Zewnętrzne
    ResourceManager -→ PhysFS
</pre></div>
</div>
</section>
<section id="architektura-systemu">
<h1>🧱 Architektura systemu<a class="headerlink" href="#architektura-systemu" title="Link to this heading">#</a></h1>
<p>System <code class="docutils literal notranslate"><span class="pre">otclient</span></code> jest zbudowany w oparciu o architekturę modułową i warstwową, która oddziela rdzeń frameworka od logiki specyficznej dla klienta gry.</p>
</section>
<section id="warstwy">
<h1>Warstwy<a class="headerlink" href="#warstwy" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p><strong>Warstwa platformy (<code class="docutils literal notranslate"><span class="pre">framework/platform</span></code>)</strong></p>
<ul class="simple">
<li><p><strong>Opis</strong>: Najniższa warstwa, która abstrakcjonuje interakcje z systemem operacyjnym. Zawiera implementacje dla Windows (WinAPI), Linux/macOS (X11) i Android (NDK/JNI).</p></li>
<li><p><strong>Komponenty</strong>: <code class="docutils literal notranslate"><span class="pre">Platform</span></code> (operacje na plikach, procesach), <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> (zarządzanie oknem, wejściem, kontekstem graficznym), <code class="docutils literal notranslate"><span class="pre">CrashHandler</span></code>.</p></li>
<li><p><strong>Cel</strong>: Zapewnienie przenośności kodu między różnymi systemami.</p></li>
</ul>
</li>
<li><p><strong>Warstwa rozszerzeń standardowych (<code class="docutils literal notranslate"><span class="pre">framework/stdext</span></code>)</strong></p>
<ul class="simple">
<li><p><strong>Opis</strong>: Zbiór narzędzi i rozszerzeń do standardowej biblioteki C++, które są używane w całym projekcie.</p></li>
<li><p><strong>Komponenty</strong>: <code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code> (inteligentne wskaźniki), <code class="docutils literal notranslate"><span class="pre">cast</span></code> (bezpieczne rzutowanie typów), <code class="docutils literal notranslate"><span class="pre">format</span></code> (formatowanie stringów), <code class="docutils literal notranslate"><span class="pre">string</span></code> (narzędzia do stringów), <code class="docutils literal notranslate"><span class="pre">time</span></code> (obsługa czasu).</p></li>
<li><p><strong>Cel</strong>: Dostarczenie spójnego i rozbudowanego zestawu narzędzi podstawowych.</p></li>
</ul>
</li>
<li><p><strong>Warstwa rdzenia frameworka (<code class="docutils literal notranslate"><span class="pre">framework/core</span></code>)</strong></p>
<ul class="simple">
<li><p><strong>Opis</strong>: Serce aplikacji. Implementuje główne pętle, system zdarzeń, zarządzanie zasobami, modułami i konfiguracją.</p></li>
<li><p><strong>Komponenty</strong>: <code class="docutils literal notranslate"><span class="pre">Application</span></code> (i pochodne), <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code>, <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code>, <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code>, <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code>, <code class="docutils literal notranslate"><span class="pre">Logger</span></code>.</p></li>
<li><p><strong>Cel</strong>: Zapewnienie solidnej podstawy i infrastruktury dla działania aplikacji.</p></li>
</ul>
</li>
<li><p><strong>Warstwa silników (Framework Engines)</strong></p>
<ul class="simple">
<li><p><strong>Opis</strong>: Zbiór wyspecjalizowanych podsystemów (silników), które realizują kluczowe funkcjonalności.</p></li>
<li><p><strong>Komponenty</strong>:</p>
<ul>
<li><p><strong>Silnik graficzny (<code class="docutils literal notranslate"><span class="pre">framework/graphics</span></code>, <code class="docutils literal notranslate"><span class="pre">framework/ui</span></code>)</strong>: <code class="docutils literal notranslate"><span class="pre">Graphics</span></code>, <code class="docutils literal notranslate"><span class="pre">Painter</span></code>, <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code>, <code class="docutils literal notranslate"><span class="pre">UIManager</span></code>, <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>. Odpowiada za całe renderowanie 2D i interfejs użytkownika.</p></li>
<li><p><strong>Silnik Lua (<code class="docutils literal notranslate"><span class="pre">framework/luaengine</span></code>)</strong>: <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code>, <code class="docutils literal notranslate"><span class="pre">luabinder</span></code>. Most między C++ a Lua, umożliwiający skryptowanie.</p></li>
<li><p><strong>Silnik sieciowy (<code class="docutils literal notranslate"><span class="pre">framework/net</span></code>, <code class="docutils literal notranslate"><span class="pre">framework/proxy</span></code>)</strong>: <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>, <code class="docutils literal notranslate"><span class="pre">Connection</span></code>, <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code>. Obsługuje komunikację z serwerem.</p></li>
<li><p><strong>Silnik dźwięku (<code class="docutils literal notranslate"><span class="pre">framework/sound</span></code>)</strong>: <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code>. Obsługuje odtwarzanie dźwięku.</p></li>
</ul>
</li>
<li><p><strong>Cel</strong>: Enkapsulacja złożonych funkcjonalności w oddzielne, zarządzalne moduły.</p></li>
</ul>
</li>
<li><p><strong>Warstwa logiki klienta (<code class="docutils literal notranslate"><span class="pre">src/client</span></code>)</strong></p>
<ul class="simple">
<li><p><strong>Opis</strong>: Najwyższa warstwa, która zawiera logikę specyficzną dla klienta gry Tibii. Implementuje ona mechanikę gry, renderowanie świata, postaci, przedmiotów itp.</p></li>
<li><p><strong>Komponenty</strong>: (Niezałączone w promptcie) <code class="docutils literal notranslate"><span class="pre">Game</span></code>, <code class="docutils literal notranslate"><span class="pre">Map</span></code>, <code class="docutils literal notranslate"><span class="pre">Creature</span></code>, <code class="docutils literal notranslate"><span class="pre">Item</span></code>, <code class="docutils literal notranslate"><span class="pre">ProtocolGame</span></code>.</p></li>
<li><p><strong>Cel</strong>: Implementacja właściwej gry. Ta warstwa intensywnie korzysta z API dostarczanego przez niższe warstwy frameworka.</p></li>
</ul>
</li>
<li><p><strong>Warstwa skryptowa (Moduły Lua)</strong></p>
<ul class="simple">
<li><p><strong>Opis</strong>: Zewnętrzna warstwa, która pozwala na rozszerzanie i modyfikowanie klienta bez potrzeby rekompilacji kodu C++. Skrypty Lua mają dostęp do API frameworka i logiki klienta za pośrednictwem bindowań.</p></li>
<li><p><strong>Komponenty</strong>: Pliki <code class="docutils literal notranslate"><span class="pre">.lua</span></code> i <code class="docutils literal notranslate"><span class="pre">.otmod</span></code> w katalogach <code class="docutils literal notranslate"><span class="pre">modules/</span></code> i <code class="docutils literal notranslate"><span class="pre">mods/</span></code>.</p></li>
<li><p><strong>Cel</strong>: Umożliwienie tworzenia wtyczek, modyfikacji interfejsu i dodawania nowej funkcjonalności.</p></li>
</ul>
</li>
</ol>
</section>
<section id="przeplyw-danych-i-interakcje">
<h1>Przepływ danych i interakcje<a class="headerlink" href="#przeplyw-danych-i-interakcje" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Start aplikacji</strong>: <code class="docutils literal notranslate"><span class="pre">main()</span></code> tworzy instancję <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code>, która inicjalizuje warstwy od dołu do góry (Platforma → Rdzeń → Silniki).</p></li>
<li><p><strong>Główna pętla</strong>: <code class="docutils literal notranslate"><span class="pre">GraphicalApplication::run()</span></code> uruchamia wielowątkową pętlę. Wątek logiki (<code class="docutils literal notranslate"><span class="pre">worker</span></code>) aktualizuje stan gry i przygotowuje dane do rysowania. Wątek renderowania (główny) rysuje te dane na ekranie i odbiera zdarzenia od <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code>.</p></li>
<li><p><strong>Zdarzenia wejściowe</strong>: <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code> → <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> → <code class="docutils literal notranslate"><span class="pre">UIManager</span></code> → <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> → Skrypt Lua (callback <code class="docutils literal notranslate"><span class="pre">onClick</span></code> itp.).</p></li>
<li><p><strong>Komunikacja sieciowa</strong>: Skrypt Lua (np. <code class="docutils literal notranslate"><span class="pre">g_game.login(...)</span></code>) → <code class="docutils literal notranslate"><span class="pre">ProtocolGame</span></code> (Lua) → <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> (C++) → <code class="docutils literal notranslate"><span class="pre">Connection</span></code> (C++) → Sieć. Pakiety przychodzące idą w odwrotną stronę.</p></li>
<li><p><strong>Renderowanie</strong>: Logika klienta (C++ lub Lua) tworzy widgety i ustawia ich właściwości → <code class="docutils literal notranslate"><span class="pre">UIManager</span></code> i <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> przygotowują <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> → <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code> przekazuje <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code> do <code class="docutils literal notranslate"><span class="pre">Painter</span></code> → <code class="docutils literal notranslate"><span class="pre">Painter</span></code> wykonuje wywołania OpenGL.</p></li>
</ul>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">src framework</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ponizej-znajduje-sie-kompletna-dokumentacja-techniczna-dla-repozytorium-src-framework">Poniżej znajduje się kompletna dokumentacja techniczna dla repozytorium, src/framework</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#opis-ogolny">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#definicje-i-makra">Definicje i Makra</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#makra-matematyczne">Makra matematyczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-deg-to-rad-acos-1-180-0">define DEG_TO_RAD (acos(-1)/180.0)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-rad-to-dec-180-0-acos-1">define RAD_TO_DEC (180.0/acos(-1))</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#makra-budowania-build-macros">Makra budowania (Build Macros)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ifndef-build-commit">ifndef BUILD_COMMIT</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-build-commit-dev">define BUILD_COMMIT „dev”</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#endif">endif</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ifndef-build-revision">ifndef BUILD_REVISION</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-build-revision-0">define BUILD_REVISION 0</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">endif</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ifndef-build-type">ifndef BUILD_TYPE</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-build-type-unknown">define BUILD_TYPE „unknown”</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">endif</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ifndef-build-arch">ifndef BUILD_ARCH</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#if-defined-amd64-defined-m-x64">if defined(__amd64) || defined(_M_X64)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-build-arch-x64">define BUILD_ARCH „x64”</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#elif-defined-i386-defined-m-ix86-defined-x86">elif defined(__i386) || defined(_M_IX86) || defined(<em>X86</em>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-build-arch-x86">define BUILD_ARCH „x86”</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#else">else</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-build-arch-unknown">define BUILD_ARCH „unknown”</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">endif</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">endif</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#namespace-fw">Namespace <code class="docutils literal notranslate"><span class="pre">Fw</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zmienne-globalne">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#typy-wyliczeniowe-enums">Typy wyliczeniowe (Enums)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-key"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">Key</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-loglevel"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">LogLevel</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-aspectratiomode"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">AspectRatioMode</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-alignmentflag"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">AlignmentFlag</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-anchoredge"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">AnchorEdge</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-focusreason"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">FocusReason</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-autofocuspolicy"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">AutoFocusPolicy</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-inputeventtype"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">InputEventType</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-mousebutton"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">MouseButton</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-mousewheeldirection"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">MouseWheelDirection</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-keyboardmodifier"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">KeyboardModifier</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-widgetstate"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">WidgetState</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-drawpane"><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">DrawPane</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zaleznosci-i-powiazania">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#cmakelists-txt">📄 CMakeLists.txt</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#opcje-budowania">Opcje budowania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#flagi-frameworka">Flagi frameworka</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-projektu-pliki-zrodlowe">Struktura projektu (pliki źródłowe)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#konfiguracja-dla-webassembly-wasm">Konfiguracja dla WebAssembly (WASM)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#flagi-kompilatora">Flagi kompilatora</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#global-h">📄 global.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Definicje i Makra</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#validate-expression"><code class="docutils literal notranslate"><span class="pre">VALIDATE(expression)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pch-h">📄 pch.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zawartosc-pliku">Zawartość pliku</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#standardowe-naglowki-c">Standardowe nagłówki C</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#standardowe-naglowki-stl-c">Standardowe nagłówki STL (C++)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#nowoczesne-naglowki-c-c-11-i-nowsze">Nowoczesne nagłówki C++ (C++11 i nowsze)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#biblioteka-boost">Biblioteka Boost</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luafunctions-cpp">📄 luafunctions.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#application-registerluafunctions"><code class="docutils literal notranslate"><span class="pre">Application::registerLuaFunctions()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#opis-semantyczny">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zarejestrowane-elementy">Zarejestrowane elementy</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#konwersje-i-narzedzia-globalne">Konwersje i narzędzia globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#platform-g-platform">Platform (<code class="docutils literal notranslate"><span class="pre">g_platform</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#application-g-app">Application (<code class="docutils literal notranslate"><span class="pre">g_app</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#crypt-g-crypt">Crypt (<code class="docutils literal notranslate"><span class="pre">g_crypt</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#clock-g-clock">Clock (<code class="docutils literal notranslate"><span class="pre">g_clock</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configmanager-g-configs">ConfigManager (<code class="docutils literal notranslate"><span class="pre">g_configs</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#logger-g-logger">Logger (<code class="docutils literal notranslate"><span class="pre">g_logger</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#resourcemanager-g-resources">ResourceManager (<code class="docutils literal notranslate"><span class="pre">g_resources</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ui-i-grafika-zalezne-od-fw-graphics">UI i Grafika (zależne od <code class="docutils literal notranslate"><span class="pre">FW_GRAPHICS</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#siec-zalezne-od-fw-net">Sieć (zależne od <code class="docutils literal notranslate"><span class="pre">FW_NET</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dzwiek-zalezne-od-fw-sound">Dźwięk (zależne od <code class="docutils literal notranslate"><span class="pre">FW_SOUND</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#resourcemanager-h">📄 resourcemanager.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-resourcemanager">Klasa <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-publiczne">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zmienne-prywatne">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#adaptiverenderer-cpp">📄 adaptiverenderer.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-adaptiverenderer"><code class="docutils literal notranslate"><span class="pre">g_adaptiveRenderer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-adaptiverenderer">Klasa <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-newframe"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">newFrame()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dzialanie">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-refresh"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">refresh()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-limitujace">Metody limitujące</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-getdebuginfo"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getDebugInfo()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#adaptiverenderer-h">📄 adaptiverenderer.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">Definicje i Makra</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#constexpr-int-renderspeeds"><code class="docutils literal notranslate"><span class="pre">constexpr</span> <span class="pre">int</span> <span class="pre">RenderSpeeds</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">Klasa <code class="docutils literal notranslate"><span class="pre">AdaptiveRenderer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id30">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id31">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#application-cpp">📄 application.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id32">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcje-globalne">Funkcje globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exitsignalhandler-int-sig"><code class="docutils literal notranslate"><span class="pre">exitSignalHandler(int</span> <span class="pre">sig)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-application">Klasa <code class="docutils literal notranslate"><span class="pre">Application</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#application-application"><code class="docutils literal notranslate"><span class="pre">Application::Application()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-application-init-std-vector-std-string-args"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::init(std::vector&lt;std::string&gt;&amp;</span> <span class="pre">args)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id33">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id34">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-application-deinit"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::deinit()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id35">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id36">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-application-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id37">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id38">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-application-poll"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::poll()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id39">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-application-exit"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::exit()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-application-quick-exit"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::quick_exit()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-application-close"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::close()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-application-restart-i-void-application-restartargs-const-std-vector-std-string-args"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::restart()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Application::restartArgs(const</span> <span class="pre">std::vector&lt;std::string&gt;&amp;</span> <span class="pre">args)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-application-getos"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">Application::getOs()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id40">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#application-h">📄 application.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id41">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id42">Klasa <code class="docutils literal notranslate"><span class="pre">Application</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id43">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id44">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-chronione">Metody chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zmienne-chronione">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dolaczanie-implementacji">Dołączanie implementacji</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id45">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#asyncdispatcher-h">📄 asyncdispatcher.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id46">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-asyncdispatcher">Klasa <code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id47">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id48">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#przyklad-uzycia-schedule">Przykład użycia <code class="docutils literal notranslate"><span class="pre">schedule</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#przyklad-uzycia-dispatch">Przykład użycia <code class="docutils literal notranslate"><span class="pre">dispatch</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id49">Metody chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id50">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id51">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id52">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#binarytree-cpp">📄 binarytree.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id53">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-binarytree">Klasa <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#binarytree-binarytree-const-filestreamptr-fin"><code class="docutils literal notranslate"><span class="pre">BinaryTree::BinaryTree(const</span> <span class="pre">FileStreamPtr&amp;</span> <span class="pre">fin)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-binarytree-skipnodes"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BinaryTree::skipNodes()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-binarytree-unserialize"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BinaryTree::unserialize()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id54">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#binarytreevec-binarytree-getchildren"><code class="docutils literal notranslate"><span class="pre">BinaryTreeVec</span> <span class="pre">BinaryTree::getChildren()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-odczytu-danych-getu8-getu16-getstring-etc">Metody odczytu danych (<code class="docutils literal notranslate"><span class="pre">getU8</span></code>, <code class="docutils literal notranslate"><span class="pre">getU16</span></code>, <code class="docutils literal notranslate"><span class="pre">getString</span></code>, etc.)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-outputbinarytree">Klasa <code class="docutils literal notranslate"><span class="pre">OutputBinaryTree</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#outputbinarytree-outputbinarytree-const-filestreamptr-fin"><code class="docutils literal notranslate"><span class="pre">OutputBinaryTree::OutputBinaryTree(const</span> <span class="pre">FileStreamPtr&amp;</span> <span class="pre">fin)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-zapisu-danych-addu8-addu16-addstring-etc">Metody zapisu danych (<code class="docutils literal notranslate"><span class="pre">addU8</span></code>, <code class="docutils literal notranslate"><span class="pre">addU16</span></code>, <code class="docutils literal notranslate"><span class="pre">addString</span></code>, etc.)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-outputbinarytree-startnode-uint8-node"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputBinaryTree::startNode(uint8</span> <span class="pre">node)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-outputbinarytree-endnode"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputBinaryTree::endNode()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-outputbinarytree-write-const-uint8-data-size-t-size"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputBinaryTree::write(const</span> <span class="pre">uint8*</span> <span class="pre">data,</span> <span class="pre">size_t</span> <span class="pre">size)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id55">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#asyncdispatcher-cpp">📄 asyncdispatcher.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id56">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id57">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-asyncdispatcher"><code class="docutils literal notranslate"><span class="pre">g_asyncDispatcher</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id58">Klasa <code class="docutils literal notranslate"><span class="pre">AsyncDispatcher</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-asyncdispatcher-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AsyncDispatcher::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id59">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-asyncdispatcher-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AsyncDispatcher::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id60">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-asyncdispatcher-spawn-thread"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AsyncDispatcher::spawn_thread()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id61">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-asyncdispatcher-stop"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AsyncDispatcher::stop()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id62">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-asyncdispatcher-exec-loop"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AsyncDispatcher::exec_loop()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id63">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id64">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id65">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#clock-h">📄 clock.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id66">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-clock">Klasa <code class="docutils literal notranslate"><span class="pre">Clock</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id67">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id68">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id69">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id70">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id71">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#binarytree-h">📄 binarytree.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id72">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id73">Definicje i Makra</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#znaczniki-binarne">Znaczniki binarne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id74">Klasa <code class="docutils literal notranslate"><span class="pre">BinaryTree</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id75">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id76">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id77">Klasa <code class="docutils literal notranslate"><span class="pre">OutputBinaryTree</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id78">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id79">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id80">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#config-cpp">📄 config.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id81">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-config">Klasa <code class="docutils literal notranslate"><span class="pre">Config</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#config-config"><code class="docutils literal notranslate"><span class="pre">Config::Config()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-config-load-const-std-string-file"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Config::load(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id82">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id83">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-config-unload"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Config::unload()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-config-save"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Config::save()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-config-clear"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::clear()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-config-setvalue-const-std-string-key-const-std-string-value"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::setValue(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">value)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-config-setlist-const-std-string-key-const-std-vector-std-string-list"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::setList(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key,</span> <span class="pre">const</span> <span class="pre">std::vector&lt;std::string&gt;&amp;</span> <span class="pre">list)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-config-exists-const-std-string-key"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Config::exists(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-config-getvalue-const-std-string-key"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">Config::getValue(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-vector-std-string-config-getlist-const-std-string-key"><code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::string&gt;</span> <span class="pre">Config::getList(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-config-remove-const-std-string-key"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::remove(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-config-setnode-const-std-string-key-const-otmlnodeptr-node"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::setNode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key,</span> <span class="pre">const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-config-mergenode-const-std-string-key-const-otmlnodeptr-node"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Config::mergeNode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key,</span> <span class="pre">const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlnodeptr-config-getnode-const-std-string-key"><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span> <span class="pre">Config::getNode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-config-getnodesize-const-std-string-key"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Config::getNodeSize(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-config-isloaded"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Config::isLoaded()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id84">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configmanager-cpp">📄 configmanager.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id85">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id86">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-configs"><code class="docutils literal notranslate"><span class="pre">g_configs</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-configmanager">Klasa <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-configmanager-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ConfigManager::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id87">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-configmanager-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ConfigManager::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id88">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id89">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configptr-configmanager-getsettings"><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">ConfigManager::getSettings()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configptr-configmanager-get-const-std-string-file"><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">ConfigManager::get(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configptr-configmanager-loadsettings-const-std-string-file"><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">ConfigManager::loadSettings(const</span> <span class="pre">std::string</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configptr-configmanager-create-const-std-string-file"><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">ConfigManager::create(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id90">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configptr-configmanager-load-const-std-string-file"><code class="docutils literal notranslate"><span class="pre">ConfigPtr</span> <span class="pre">ConfigManager::load(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-configmanager-unload-const-std-string-file"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ConfigManager::unload(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-configmanager-remove-const-configptr-config"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ConfigManager::remove(const</span> <span class="pre">ConfigPtr</span> <span class="pre">config)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id91">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configmanager-h">📄 configmanager.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id92">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id93">Klasa <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id94">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id95">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id96">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id97">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id98">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id99">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#config-h">📄 config.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id100">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id101">Klasa <code class="docutils literal notranslate"><span class="pre">Config</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id102">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id103">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id104">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id105">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#clock-cpp">📄 clock.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id106">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id107">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-clock"><code class="docutils literal notranslate"><span class="pre">g_clock</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id108">Klasa <code class="docutils literal notranslate"><span class="pre">Clock</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#clock-clock"><code class="docutils literal notranslate"><span class="pre">Clock::Clock()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-clock-update"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Clock::update()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id109">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id110">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ticks-t-clock-realmicros"><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">Clock::realMicros()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ticks-t-clock-realmillis"><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">Clock::realMillis()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id111">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#consoleapplication-h">📄 consoleapplication.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id112">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-consoleapplication">Klasa <code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id113">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id114">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id115">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id116">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#declarations-h">📄 declarations.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id117">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wczesne-deklaracje-forward-declarations">Wczesne deklaracje (Forward Declarations)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#definicje-typow-typedefs">Definicje typów (Typedefs)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id118">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#event-cpp">📄 event.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id119">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-event">Klasa <code class="docutils literal notranslate"><span class="pre">Event</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#event-event-const-std-string-function-const-std-function-void-callback-bool-botsafe"><code class="docutils literal notranslate"><span class="pre">Event::Event(const</span> <span class="pre">std::string&amp;</span> <span class="pre">function,</span> <span class="pre">const</span> <span class="pre">std::function&lt;void()&gt;&amp;</span> <span class="pre">callback,</span> <span class="pre">bool</span> <span class="pre">botSafe)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#event-event"><code class="docutils literal notranslate"><span class="pre">Event::~Event()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-event-execute"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Event::execute()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id120">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id121">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-event-cancel"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Event::cancel()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id122">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id123">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id124">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#event-h">📄 event.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id125">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id126">Klasa <code class="docutils literal notranslate"><span class="pre">Event</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id127">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id128">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id129">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id130">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#eventdispatcher-cpp">📄 eventdispatcher.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id131">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id132">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-eventdispatcher">Klasa <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-eventdispatcher-shutdown"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">EventDispatcher::shutdown()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id133">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id134">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-eventdispatcher-poll"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">EventDispatcher::poll()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id135">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id136">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#scheduledeventptr-eventdispatcher-scheduleeventex"><code class="docutils literal notranslate"><span class="pre">ScheduledEventPtr</span> <span class="pre">EventDispatcher::scheduleEventEx(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#scheduledeventptr-eventdispatcher-cycleeventex"><code class="docutils literal notranslate"><span class="pre">ScheduledEventPtr</span> <span class="pre">EventDispatcher::cycleEventEx(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#eventptr-eventdispatcher-addeventex"><code class="docutils literal notranslate"><span class="pre">EventPtr</span> <span class="pre">EventDispatcher::addEventEx(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id137">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#eventdispatcher-h">📄 eventdispatcher.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id138">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id139">Definicje i Makra</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#makra-pomocnicze-do-dodawania-zdarzen">Makra pomocnicze do dodawania zdarzeń</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#makra-do-walidacji-watkow">Makra do walidacji wątków</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id140">Klasa <code class="docutils literal notranslate"><span class="pre">EventDispatcher</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id141">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id142">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id143">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id144">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id145">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#filestream-cpp">📄 filestream.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id146">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-filestream">Klasa <code class="docutils literal notranslate"><span class="pre">FileStream</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#konstruktory">Konstruktory</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-filestream-initfromgzip-const-std-string-buffer"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">FileStream::initFromGzip(const</span> <span class="pre">std::string&amp;</span> <span class="pre">buffer)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#filestream-filestream-i-void-filestream-close"><code class="docutils literal notranslate"><span class="pre">FileStream::~FileStream()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FileStream::close()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-filestream-flush"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FileStream::flush()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-filestream-read-void-buffer-uint32-size-uint32-nmemb"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">FileStream::read(void*</span> <span class="pre">buffer,</span> <span class="pre">uint32</span> <span class="pre">size,</span> <span class="pre">uint32</span> <span class="pre">nmemb)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-filestream-write-const-void-buffer-uint32-count"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FileStream::write(const</span> <span class="pre">void</span> <span class="pre">*buffer,</span> <span class="pre">uint32</span> <span class="pre">count)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#seek-skip-size-tell-eof"><code class="docutils literal notranslate"><span class="pre">seek</span></code>, <code class="docutils literal notranslate"><span class="pre">skip</span></code>, <code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">tell</span></code>, <code class="docutils literal notranslate"><span class="pre">eof</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-odczytu-typow-getu8-getu16-getstring-etc">Metody odczytu typów (<code class="docutils literal notranslate"><span class="pre">getU8</span></code>, <code class="docutils literal notranslate"><span class="pre">getU16</span></code>, <code class="docutils literal notranslate"><span class="pre">getString</span></code>, etc.)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#binarytreeptr-filestream-getbinarytree"><code class="docutils literal notranslate"><span class="pre">BinaryTreePtr</span> <span class="pre">FileStream::getBinaryTree()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-zapisu-typow-addu8-addu16-addstring-etc">Metody zapisu typów (<code class="docutils literal notranslate"><span class="pre">addU8</span></code>, <code class="docutils literal notranslate"><span class="pre">addU16</span></code>, <code class="docutils literal notranslate"><span class="pre">addString</span></code>, etc.)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-filestream-throwerror"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FileStream::throwError(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id147">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#filestream-h">📄 filestream.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id148">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id149">Klasa <code class="docutils literal notranslate"><span class="pre">FileStream</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id150">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id151">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id152">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id153">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#graphicalapplication-cpp">📄 graphicalapplication.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id154">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id155">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-app"><code class="docutils literal notranslate"><span class="pre">g_app</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-graphicalapplication">Klasa <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graphicalapplication-init-std-vector-std-string-args"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::init(std::vector&lt;std::string&gt;&amp;</span> <span class="pre">args)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id156">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id157">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graphicalapplication-deinit"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::deinit()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graphicalapplication-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graphicalapplication-run"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::run()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id158">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dzialanie-watku-logiki-worker">Działanie wątku logiki (<code class="docutils literal notranslate"><span class="pre">worker</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dzialanie-watku-renderowania-glownego">Działanie wątku renderowania (głównego)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graphicalapplication-poll-i-void-graphicalapplication-pollgraphics"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::poll()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">GraphicalApplication::pollGraphics()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inne-metody">Inne metody</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id159">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inputevent-h">📄 inputevent.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id160">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-inputevent">Struktura <code class="docutils literal notranslate"><span class="pre">InputEvent</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id161">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pola-struktury">Pola struktury</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody">Metody</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id162">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#graphicalapplication-h">📄 graphicalapplication.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id163">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id164">Klasa <code class="docutils literal notranslate"><span class="pre">GraphicalApplication</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id165">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id166">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id167">Metody chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id168">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id169">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id170">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#logger-h">📄 logger.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id171">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-logmessage">Struktura <code class="docutils literal notranslate"><span class="pre">LogMessage</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-logger">Klasa <code class="docutils literal notranslate"><span class="pre">Logger</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id172">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id173">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id174">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#makra-pomocnicze">Makra pomocnicze</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id175">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id176">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#module-cpp">📄 module.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id177">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-module">Klasa <code class="docutils literal notranslate"><span class="pre">Module</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#module-module-const-std-string-name"><code class="docutils literal notranslate"><span class="pre">Module::Module(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-module-load"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Module::load()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id178">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id179">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-module-unload"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Module::unload()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id180">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id181">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-module-reload"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Module::reload()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-module-isdependent"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Module::isDependent()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-module-hasdependency-const-std-string-name-bool-recursive"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Module::hasDependency(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">bool</span> <span class="pre">recursive)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-module-getsandbox-luainterface-lua"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Module::getSandbox(LuaInterface*</span> <span class="pre">lua)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-module-discover-const-otmlnodeptr-modulenode"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Module::discover(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">moduleNode)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id182">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#modulemanager-cpp">📄 modulemanager.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id183">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id184">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-modules"><code class="docutils literal notranslate"><span class="pre">g_modules</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-modulemanager">Klasa <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-modulemanager-clear"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::clear()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-modulemanager-discovermodules"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::discoverModules()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id185">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-modulemanager-autoloadmodules-int-maxpriority"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::autoLoadModules(int</span> <span class="pre">maxPriority)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#moduleptr-modulemanager-discovermodule-const-std-string-modulefile"><code class="docutils literal notranslate"><span class="pre">ModulePtr</span> <span class="pre">ModuleManager::discoverModule(const</span> <span class="pre">std::string&amp;</span> <span class="pre">moduleFile)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-modulemanager-ensuremoduleloaded-const-std-string-modulename"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::ensureModuleLoaded(const</span> <span class="pre">std::string&amp;</span> <span class="pre">moduleName)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-modulemanager-unloadmodules"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::unloadModules()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-modulemanager-reloadmodules"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::reloadModules()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id186">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id187">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#moduleptr-modulemanager-getmodule-const-std-string-modulename"><code class="docutils literal notranslate"><span class="pre">ModulePtr</span> <span class="pre">ModuleManager::getModule(const</span> <span class="pre">std::string&amp;</span> <span class="pre">moduleName)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-modulemanager-updatemoduleloadorder-moduleptr-module"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ModuleManager::updateModuleLoadOrder(ModulePtr</span> <span class="pre">module)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id188">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#logger-cpp">📄 logger.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id189">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id190">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-logger"><code class="docutils literal notranslate"><span class="pre">g_logger</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id191">Funkcje globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-fatalerror-const-char-error-const-char-file-int-line"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">fatalError(const</span> <span class="pre">char*</span> <span class="pre">error,</span> <span class="pre">const</span> <span class="pre">char*</span> <span class="pre">file,</span> <span class="pre">int</span> <span class="pre">line)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id192">Klasa <code class="docutils literal notranslate"><span class="pre">Logger</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-logger-log-fw-loglevel-level-const-std-string-message"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Logger::log(Fw::LogLevel</span> <span class="pre">level,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">message)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id193">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id194">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-logger-logfunc-fw-loglevel-level-const-std-string-message-std-string-prettyfunction"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Logger::logFunc(Fw::LogLevel</span> <span class="pre">level,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">message,</span> <span class="pre">std::string</span> <span class="pre">prettyFunction)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-logger-fireoldmessages"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Logger::fireOldMessages()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-logger-setlogfile-const-std-string-file"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Logger::setLogFile(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id195">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#module-h">📄 module.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id196">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id197">Klasa <code class="docutils literal notranslate"><span class="pre">Module</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id198">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id199">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id200">Metody chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id201">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id202">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#modulemanager-h">📄 modulemanager.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id203">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id204">Klasa <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id205">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id206">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id207">Metody chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id208">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id209">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id210">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#scheduledevent-cpp">📄 scheduledevent.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id211">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-scheduledevent">Klasa <code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#scheduledevent-scheduledevent"><code class="docutils literal notranslate"><span class="pre">ScheduledEvent::ScheduledEvent(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-scheduledevent-execute"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ScheduledEvent::execute()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id212">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id213">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-scheduledevent-nextcycle"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ScheduledEvent::nextCycle()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id214">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id215">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id216">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#resourcemanager-cpp">📄 resourcemanager.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id217">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id218">Klasa <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-resourcemanager-init-const-char-argv0"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ResourceManager::init(const</span> <span class="pre">char</span> <span class="pre">*argv0)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-resourcemanager-setupwritedir"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ResourceManager::setupWriteDir(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-resourcemanager-setup"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ResourceManager::setup()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-resourcemanager-getcompactname"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">ResourceManager::getCompactName()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-resourcemanager-loaddatafromself"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ResourceManager::loadDataFromSelf(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-resourcemanager-readfilecontents"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">ResourceManager::readFileContents(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-resourcemanager-decryptbuffer-std-string-buffer"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ResourceManager::decryptBuffer(std::string&amp;</span> <span class="pre">buffer)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-resourcemanager-encryptbuffer"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ResourceManager::encryptBuffer(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-resourcemanager-resolvepath-std-string-path"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">ResourceManager::resolvePath(std::string</span> <span class="pre">path)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#updatedata-i-updateexecutable"><code class="docutils literal notranslate"><span class="pre">updateData(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">updateExecutable(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#createarchive-i-decompressarchive"><code class="docutils literal notranslate"><span class="pre">createArchive(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">decompressArchive(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id219">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#scheduledevent-h">📄 scheduledevent.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id220">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id221">Klasa <code class="docutils literal notranslate"><span class="pre">ScheduledEvent</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id222">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id223">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id224">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-lessscheduledevent">Struktura <code class="docutils literal notranslate"><span class="pre">lessScheduledEvent</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id225">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#timer-cpp">📄 timer.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id226">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-timer">Klasa <code class="docutils literal notranslate"><span class="pre">Timer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-timer-restart"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Timer::restart()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id227">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id228">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ticks-t-timer-tickselapsed"><code class="docutils literal notranslate"><span class="pre">ticks_t</span> <span class="pre">Timer::ticksElapsed()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id229">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id230">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id231">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#timer-h">📄 timer.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id232">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id233">Klasa <code class="docutils literal notranslate"><span class="pre">Timer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id234">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id235">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id236">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id237">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#consoleapplication-cpp">📄 consoleapplication.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id238">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id239">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id240"><code class="docutils literal notranslate"><span class="pre">g_app</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id241">Klasa <code class="docutils literal notranslate"><span class="pre">ConsoleApplication</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-consoleapplication-run"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ConsoleApplication::run()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id242">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id243">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id244">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shaderprogram-h">📄 shaderprogram.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id245">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-shaderprogram">Klasa <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id246">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id247">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id248">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id249">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#animatedtexture-cpp">📄 animatedtexture.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id250">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-animatedtexture">Klasa <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#animatedtexture-animatedtexture"><code class="docutils literal notranslate"><span class="pre">AnimatedTexture::AnimatedTexture(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-animatedtexture-buildhardwaremipmaps"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">AnimatedTexture::buildHardwareMipmaps()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-animatedtexture-setsmooth-bool-smooth-i-void-animatedtexture-setrepeat-bool-repeat"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AnimatedTexture::setSmooth(bool</span> <span class="pre">smooth)</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AnimatedTexture::setRepeat(bool</span> <span class="pre">repeat)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-animatedtexture-update"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AnimatedTexture::update()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id251">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id252">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id253">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#animatedtexture-h">📄 animatedtexture.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id254">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id255">Klasa <code class="docutils literal notranslate"><span class="pre">AnimatedTexture</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id256">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id257">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id258">Metody chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id259">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id260">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#apngloader-cpp">📄 apngloader.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id261">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcje">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#load-apng-std-stringstream-file-struct-apng-data-apng"><code class="docutils literal notranslate"><span class="pre">load_apng(std::stringstream&amp;</span> <span class="pre">file,</span> <span class="pre">struct</span> <span class="pre">apng_data</span> <span class="pre">*apng)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id262">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id263">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#save-png-std-stringstream-f-unsigned-int-width-unsigned-int-height-int-channels-unsigned-char-pixels"><code class="docutils literal notranslate"><span class="pre">save_png(std::stringstream&amp;</span> <span class="pre">f,</span> <span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">width,</span> <span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">height,</span> <span class="pre">int</span> <span class="pre">channels,</span> <span class="pre">unsigned</span> <span class="pre">char</span> <span class="pre">*pixels)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id264">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id265">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcje-pomocnicze">Funkcje pomocnicze</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id266">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#apngloader-h">📄 apngloader.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id267">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-apng-data">Struktura <code class="docutils literal notranslate"><span class="pre">apng_data</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id268">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id269">Pola struktury</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcje-publiczne">Funkcje publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id270">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#atlas-cpp">📄 atlas.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id271">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id272">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-atlas"><code class="docutils literal notranslate"><span class="pre">g_atlas</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-atlas">Klasa <code class="docutils literal notranslate"><span class="pre">Atlas</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-atlas-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id273">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id274">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-atlas-reset-i-void-atlas-resetatlas-int-location"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::reset()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::resetAtlas(int</span> <span class="pre">location)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-atlas-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#point-atlas-cache-uint64-t-hash-const-size-size-bool-draw"><code class="docutils literal notranslate"><span class="pre">Point</span> <span class="pre">Atlas::cache(uint64_t</span> <span class="pre">hash,</span> <span class="pre">const</span> <span class="pre">Size&amp;</span> <span class="pre">size,</span> <span class="pre">bool&amp;</span> <span class="pre">draw)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id275">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id276">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-atlas-bind-i-void-atlas-release"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::bind()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Atlas::release()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#point-atlas-cachefont-const-textureptr-fonttexture"><code class="docutils literal notranslate"><span class="pre">Point</span> <span class="pre">Atlas::cacheFont(const</span> <span class="pre">TexturePtr&amp;</span> <span class="pre">fontTexture)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-atlas-calculateindex-const-size-size"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Atlas::calculateIndex(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-atlas-findspace-int-location-int-index"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Atlas::findSpace(int</span> <span class="pre">location,</span> <span class="pre">int</span> <span class="pre">index)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-atlas-getstats"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">Atlas::getStats()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id277">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bitmapfont-cpp">📄 bitmapfont.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id278">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-bitmapfont">Klasa <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-bitmapfont-load-const-otmlnodeptr-fontnode"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BitmapFont::load(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">fontNode)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id279">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id280">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-bitmapfont-drawtext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BitmapFont::drawText(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-bitmapfont-calculatedrawtextcoords"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BitmapFont::calculateDrawTextCoords(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#const-std-vector-point-bitmapfont-calculateglyphspositions"><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::vector&lt;Point&gt;&amp;</span> <span class="pre">BitmapFont::calculateGlyphsPositions(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#size-bitmapfont-calculatetextrectsize-const-std-string-text"><code class="docutils literal notranslate"><span class="pre">Size</span> <span class="pre">BitmapFont::calculateTextRectSize(const</span> <span class="pre">std::string&amp;</span> <span class="pre">text)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-bitmapfont-wraptext"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">BitmapFont::wrapText(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-bitmapfont-calculateglyphswidthsautomatically"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">BitmapFont::calculateGlyphsWidthsAutomatically(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id281">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#atlas-h">📄 atlas.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id282">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id283">Klasa <code class="docutils literal notranslate"><span class="pre">Atlas</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id284">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id285">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id286">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id287">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id288">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bitmapfont-h">📄 bitmapfont.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id289">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id290">Klasa <code class="docutils literal notranslate"><span class="pre">BitmapFont</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id291">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id292">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id293">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id294">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#cachedtext-cpp">📄 cachedtext.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id295">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-cachedtext">Klasa <code class="docutils literal notranslate"><span class="pre">CachedText</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#cachedtext-cachedtext"><code class="docutils literal notranslate"><span class="pre">CachedText::CachedText()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-cachedtext-draw-const-rect-rect-const-color-color"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CachedText::draw(const</span> <span class="pre">Rect&amp;</span> <span class="pre">rect,</span> <span class="pre">const</span> <span class="pre">Color&amp;</span> <span class="pre">color)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id296">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id297">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-cachedtext-setcoloredtext-const-std-vector-std-string-texts"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CachedText::setColoredText(const</span> <span class="pre">std::vector&lt;std::string&gt;&amp;</span> <span class="pre">texts)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-cachedtext-update"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CachedText::update()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-cachedtext-wraptext-int-maxwidth"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CachedText::wrapText(int</span> <span class="pre">maxWidth)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id298">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#colorarray-h">📄 colorarray.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id299">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-colorarray">Klasa <code class="docutils literal notranslate"><span class="pre">ColorArray</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id300">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id301">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id302">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id303">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#cachedtext-h">📄 cachedtext.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id304">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id305">Klasa <code class="docutils literal notranslate"><span class="pre">CachedText</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id306">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id307">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id308">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id309">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#coordsbuffer-h">📄 coordsbuffer.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id310">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-coordsbuffer">Klasa <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id311">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id312">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id313">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id314">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#deptharray-h">📄 deptharray.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id315">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-deptharray">Klasa <code class="docutils literal notranslate"><span class="pre">DepthArray</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id316">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id317">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id318">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id319">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id320">📄 declarations.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id321">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id322">Wczesne deklaracje (Forward Declarations)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id323">Definicje typów (Typedefs)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id324">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#coordsbuffer-cpp">📄 coordsbuffer.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id325">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id326">Klasa <code class="docutils literal notranslate"><span class="pre">CoordsBuffer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#coordsbuffer-coordsbuffer"><code class="docutils literal notranslate"><span class="pre">CoordsBuffer::CoordsBuffer()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-coordsbuffer-addboudingrect-const-rect-dest-int-innerlinewidth"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CoordsBuffer::addBoudingRect(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest,</span> <span class="pre">int</span> <span class="pre">innerLineWidth)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-coordsbuffer-addrepeatedrects-const-rect-dest-const-rect-src"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CoordsBuffer::addRepeatedRects(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest,</span> <span class="pre">const</span> <span class="pre">Rect&amp;</span> <span class="pre">src)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-coordsbuffer-unlock-bool-clear"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CoordsBuffer::unlock(bool</span> <span class="pre">clear)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#rect-coordsbuffer-gettexturerect"><code class="docutils literal notranslate"><span class="pre">Rect</span> <span class="pre">CoordsBuffer::getTextureRect()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id327">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#drawcache-cpp">📄 drawcache.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id328">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id329">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-drawcache"><code class="docutils literal notranslate"><span class="pre">g_drawCache</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-drawcache">Klasa <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-drawcache-draw"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawCache::draw()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id330">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id331">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-drawcache-bind-i-void-drawcache-release"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawCache::bind()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawCache::release()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-dodawania-do-bufora">Metody dodawania do bufora</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-pomocnicze-addrectraw-addcolorraw">Metody pomocnicze (<code class="docutils literal notranslate"><span class="pre">addRectRaw</span></code>, <code class="docutils literal notranslate"><span class="pre">addColorRaw</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id332">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#drawcache-h">📄 drawcache.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id333">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id334">Klasa <code class="docutils literal notranslate"><span class="pre">DrawCache</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id335">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#stale">Stałe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id336">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id337">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id338">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id339">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#drawqueue-cpp">📄 drawqueue.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id340">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id341">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-drawqueue"><code class="docutils literal notranslate"><span class="pre">g_drawQueue</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasy-drawqueueitem-implementacje">Klasy <code class="docutils literal notranslate"><span class="pre">DrawQueueItem</span></code> (implementacje)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#przyklady-implementacji">Przykłady implementacji:</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-drawqueue">Klasa <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-drawqueue-setframebuffer"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawQueue::setFrameBuffer(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-drawqueue-addtext-i-void-drawqueue-addcoloredtext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawQueue::addText(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawQueue::addColoredText(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-drawqueue-correctoutfit"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawQueue::correctOutfit(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-drawqueue-draw-drawtype-drawtype"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">DrawQueue::draw(DrawType</span> <span class="pre">drawType)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id342">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id343">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id344">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fontmanager-cpp">📄 fontmanager.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id345">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id346">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-fonts"><code class="docutils literal notranslate"><span class="pre">g_fonts</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-fontmanager">Klasa <code class="docutils literal notranslate"><span class="pre">FontManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fontmanager-fontmanager"><code class="docutils literal notranslate"><span class="pre">FontManager::FontManager()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-fontmanager-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FontManager::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-fontmanager-clearfonts"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FontManager::clearFonts()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-fontmanager-importfont-std-string-file"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FontManager::importFont(std::string</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id347">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id348">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-fontmanager-fontexists-const-std-string-fontname"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">FontManager::fontExists(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fontName)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bitmapfontptr-fontmanager-getfont-const-std-string-fontname"><code class="docutils literal notranslate"><span class="pre">BitmapFontPtr</span> <span class="pre">FontManager::getFont(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fontName)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id349">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#drawqueue-h">📄 drawqueue.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id350">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#typ-wyliczeniowy-drawtype">Typ wyliczeniowy <code class="docutils literal notranslate"><span class="pre">DrawType</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hierarchia-klas-drawqueueitem">Hierarchia klas <code class="docutils literal notranslate"><span class="pre">DrawQueueItem</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struct-drawqueueitem-baza"><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">DrawQueueItem</span></code> (baza)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasy-pochodne">Klasy pochodne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hierarchia-klas-drawqueuecondition">Hierarchia klas <code class="docutils literal notranslate"><span class="pre">DrawQueueCondition</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struct-drawqueuecondition-baza"><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">DrawQueueCondition</span></code> (baza)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id351">Klasy pochodne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id352">Klasa <code class="docutils literal notranslate"><span class="pre">DrawQueue</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id353">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id354">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#framebuffer-cpp">📄 framebuffer.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id355">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id356">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uint-framebuffer-boundfbo"><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">FrameBuffer::boundFbo</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-framebuffer">Klasa <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#framebuffer-framebuffer-bool-withdepth"><code class="docutils literal notranslate"><span class="pre">FrameBuffer::FrameBuffer(bool</span> <span class="pre">withDepth)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#framebuffer-framebuffer"><code class="docutils literal notranslate"><span class="pre">FrameBuffer::~FrameBuffer()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-framebuffer-resize-const-size-size"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBuffer::resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id357">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id358">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-framebuffer-bind-const-framebufferptr-depthframebuffer"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBuffer::bind(const</span> <span class="pre">FrameBufferPtr&amp;</span> <span class="pre">depthFramebuffer)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-framebuffer-release"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBuffer::release()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-framebuffer-draw"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBuffer::draw(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-framebuffer-doscreenshot-std-string-filename"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBuffer::doScreenshot(std::string</span> <span class="pre">fileName)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-internal">Metody <code class="docutils literal notranslate"><span class="pre">internal...</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id359">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#framebuffer-h">📄 framebuffer.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id360">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id361">Klasa <code class="docutils literal notranslate"><span class="pre">FrameBuffer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id362">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id363">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id364">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id365">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#framebuffermanager-cpp">📄 framebuffermanager.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id366">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id367">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-framebuffers"><code class="docutils literal notranslate"><span class="pre">g_framebuffers</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-framebuffermanager">Klasa <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-framebuffermanager-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBufferManager::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id368">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-framebuffermanager-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">FrameBufferManager::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#framebufferptr-framebuffermanager-createframebuffer-bool-withdepth"><code class="docutils literal notranslate"><span class="pre">FrameBufferPtr</span> <span class="pre">FrameBufferManager::createFrameBuffer(bool</span> <span class="pre">withDepth)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id369">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id370">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id371">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#graph-cpp">📄 graph.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id372">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id373">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-graphs-graph-last-1"><code class="docutils literal notranslate"><span class="pre">g_graphs[GRAPH_LAST</span> <span class="pre">+</span> <span class="pre">1]</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-graph">Klasa <code class="docutils literal notranslate"><span class="pre">Graph</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#graph-graph-const-std-string-name-size-t-capacity"><code class="docutils literal notranslate"><span class="pre">Graph::Graph(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">size_t</span> <span class="pre">capacity)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graph-draw-const-rect-dest"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graph::draw(const</span> <span class="pre">Rect&amp;</span> <span class="pre">dest)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id374">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id375">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graph-clear"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graph::clear()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graph-addvalue-int-value-bool-ignoresmallvalues"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graph::addValue(int</span> <span class="pre">value,</span> <span class="pre">bool</span> <span class="pre">ignoreSmallValues)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id376">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id377">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id378">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#graph-h">📄 graph.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id379">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#typ-wyliczeniowy-graphtype">Typ wyliczeniowy <code class="docutils literal notranslate"><span class="pre">GraphType</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id380">Klasa <code class="docutils literal notranslate"><span class="pre">Graph</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id381">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id382">Stałe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id383">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id384">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id385">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id386">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glutil-h">📄 glutil.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id387">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#logika-warunkowego-dolaczania">Logika warunkowego dołączania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id388">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#graphics-cpp">📄 graphics.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id389">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id390">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-graphics"><code class="docutils literal notranslate"><span class="pre">g_graphics</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-graphics">Klasa <code class="docutils literal notranslate"><span class="pre">Graphics</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#graphics-graphics"><code class="docutils literal notranslate"><span class="pre">Graphics::Graphics()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graphics-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graphics::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id391">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id392">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graphics-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graphics::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graphics-resize-const-size-size"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graphics::resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-graphics-checkforerror"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Graphics::checkForError(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id393">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#graphics-h">📄 graphics.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id394">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id395">Klasa <code class="docutils literal notranslate"><span class="pre">Graphics</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id396">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id397">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id398">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id399">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id400">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#image-cpp">📄 image.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id401">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-image">Klasa <code class="docutils literal notranslate"><span class="pre">Image</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#image-image-const-size-size-int-bpp-uint8-pixels"><code class="docutils literal notranslate"><span class="pre">Image::Image(const</span> <span class="pre">Size&amp;</span> <span class="pre">size,</span> <span class="pre">int</span> <span class="pre">bpp,</span> <span class="pre">uint8</span> <span class="pre">*pixels)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#imageptr-image-load-std-string-file"><code class="docutils literal notranslate"><span class="pre">ImagePtr</span> <span class="pre">Image::load(std::string</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#imageptr-image-loadpng"><code class="docutils literal notranslate"><span class="pre">ImagePtr</span> <span class="pre">Image::loadPNG(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-image-savepng-const-std-string-filename"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Image::savePNG(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-image-blit-const-point-dest-const-imageptr-other"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Image::blit(const</span> <span class="pre">Point&amp;</span> <span class="pre">dest,</span> <span class="pre">const</span> <span class="pre">ImagePtr&amp;</span> <span class="pre">other)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-image-paste-const-imageptr-other"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Image::paste(const</span> <span class="pre">ImagePtr&amp;</span> <span class="pre">other)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#imageptr-image-upscale"><code class="docutils literal notranslate"><span class="pre">ImagePtr</span> <span class="pre">Image::upscale()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-image-nextmipmap"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Image::nextMipmap()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#imageptr-image-fromqrcode-const-std-string-code-int-border"><code class="docutils literal notranslate"><span class="pre">ImagePtr</span> <span class="pre">Image::fromQRCode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">code,</span> <span class="pre">int</span> <span class="pre">border)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id402">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hardwarebuffer-h">📄 hardwarebuffer.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id403">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-hardwarebuffer">Klasa <code class="docutils literal notranslate"><span class="pre">HardwareBuffer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id404">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id405">Typy wyliczeniowe (Enums)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id406">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id407">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id408">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#image-h">📄 image.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id409">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id410">Klasa <code class="docutils literal notranslate"><span class="pre">Image</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id411">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id412">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id413">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id414">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#framebuffermanager-h">📄 framebuffermanager.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id415">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id416">Klasa <code class="docutils literal notranslate"><span class="pre">FrameBufferManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id417">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id418">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id419">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id420">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id421">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#painter-h">📄 painter.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id422">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-painter">Klasa <code class="docutils literal notranslate"><span class="pre">Painter</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id423">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id424">Typy wyliczeniowe (Enums)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-painterstate">Struktura <code class="docutils literal notranslate"><span class="pre">PainterState</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id425">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zmienne-chronione-prywatne">Zmienne chronione/prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id426">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id427">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#painter-cpp">📄 painter.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id428">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id429">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-painter"><code class="docutils literal notranslate"><span class="pre">g_painter</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id430">Klasa <code class="docutils literal notranslate"><span class="pre">Painter</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#painter-painter"><code class="docutils literal notranslate"><span class="pre">Painter::Painter()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-painter-bind-i-void-painter-unbind"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::bind()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::unbind()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-painter-resetstate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::resetState()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-painter-savestate-i-void-painter-restoresavedstate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::saveState()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::restoreSavedState()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-updategl">Metody <code class="docutils literal notranslate"><span class="pre">updateGl...()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-painter-setresolution-const-size-resolution"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::setResolution(const</span> <span class="pre">Size&amp;</span> <span class="pre">resolution)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-painter-drawcoords"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::drawCoords(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-draw-rect-i-draw-coords">Metody <code class="docutils literal notranslate"><span class="pre">draw...Rect(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">draw...Coords(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-painter-drawcache"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Painter::drawCache(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id431">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hardwarebuffer-cpp">📄 hardwarebuffer.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id432">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id433">Klasa <code class="docutils literal notranslate"><span class="pre">HardwareBuffer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hardwarebuffer-hardwarebuffer-type-type"><code class="docutils literal notranslate"><span class="pre">HardwareBuffer::HardwareBuffer(Type</span> <span class="pre">type)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hardwarebuffer-hardwarebuffer"><code class="docutils literal notranslate"><span class="pre">HardwareBuffer::~HardwareBuffer()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id434">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#paintershaderprogram-cpp">📄 paintershaderprogram.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id435">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-paintershaderprogram">Klasa <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#paintershaderprogram-paintershaderprogram-const-std-string-name"><code class="docutils literal notranslate"><span class="pre">PainterShaderProgram::PainterShaderProgram(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-paintershaderprogram-setupuniforms"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PainterShaderProgram::setupUniforms()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id436">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-paintershaderprogram-link"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">PainterShaderProgram::link()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-set">Metody <code class="docutils literal notranslate"><span class="pre">set...()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-paintershaderprogram-updatetime"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PainterShaderProgram::updateTime()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-paintershaderprogram-addmultitexture-i-void-paintershaderprogram-bindmultitextures"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PainterShaderProgram::addMultiTexture(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PainterShaderProgram::bindMultiTextures()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id437">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#paintershaderprogram-h">📄 paintershaderprogram.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id438">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id439">Klasa <code class="docutils literal notranslate"><span class="pre">PainterShaderProgram</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id440">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id441">Typy wyliczeniowe (Enums)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id442">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id443">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id444">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shader-cpp">📄 shader.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id445">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-shader">Klasa <code class="docutils literal notranslate"><span class="pre">Shader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shader-shader-shader-shadertype-shadertype"><code class="docutils literal notranslate"><span class="pre">Shader::Shader(Shader::ShaderType</span> <span class="pre">shaderType)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shader-shader"><code class="docutils literal notranslate"><span class="pre">Shader::~Shader()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-shader-compilesourcecode-const-std-string-sourcecode"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Shader::compileSourceCode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">sourceCode)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id446">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id447">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-shader-compilesourcefile-const-std-string-sourcefile"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Shader::compileSourceFile(const</span> <span class="pre">std::string&amp;</span> <span class="pre">sourceFile)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-shader-log"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">Shader::log()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id448">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shadermanager-h">📄 shadermanager.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id449">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-shadermanager">Klasa <code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id450">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id451">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id452">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id453">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id454">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shadermanager-cpp">📄 shadermanager.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id455">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id456">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-shaders"><code class="docutils literal notranslate"><span class="pre">g_shaders</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id457">Klasa <code class="docutils literal notranslate"><span class="pre">ShaderManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-shadermanager-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ShaderManager::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-shadermanager-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ShaderManager::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-shadermanager-createshader-const-std-string-name-std-string-vertex-std-string-fragment-bool-colormatrix"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ShaderManager::createShader(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">std::string</span> <span class="pre">vertex,</span> <span class="pre">std::string</span> <span class="pre">fragment,</span> <span class="pre">bool</span> <span class="pre">colorMatrix)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id458">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id459">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-shadermanager-addtexture-const-std-string-name-const-std-string-file"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ShaderManager::addTexture(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#paintershaderprogramptr-shadermanager-getshader-const-std-string-name"><code class="docutils literal notranslate"><span class="pre">PainterShaderProgramPtr</span> <span class="pre">ShaderManager::getShader(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id460">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shader-h">📄 shader.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id461">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id462">Klasa <code class="docutils literal notranslate"><span class="pre">Shader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id463">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#typ-wyliczeniowy-shadertype">Typ wyliczeniowy <code class="docutils literal notranslate"><span class="pre">ShaderType</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id464">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id465">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id466">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#textrender-cpp">📄 textrender.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id467">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id468">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-text"><code class="docutils literal notranslate"><span class="pre">g_text</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-textrender">Klasa <code class="docutils literal notranslate"><span class="pre">TextRender</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id469">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-textrender-init-i-void-textrender-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::init()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-textrender-poll"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::poll()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uint64-t-textrender-addtext"><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">TextRender::addText(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-textrender-drawtext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::drawText(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-textrender-drawtext-const-point-pos-uint64-t-hash"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::drawText(const</span> <span class="pre">Point&amp;</span> <span class="pre">pos,</span> <span class="pre">uint64_t</span> <span class="pre">hash,</span> <span class="pre">...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-textrender-drawcoloredtext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextRender::drawColoredText(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id470">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shaderprogram-cpp">📄 shaderprogram.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id471">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id472">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uint-shaderprogram-m-currentprogram"><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">ShaderProgram::m_currentProgram</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id473">Klasa <code class="docutils literal notranslate"><span class="pre">ShaderProgram</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shaderprogram-shaderprogram-const-std-string-name"><code class="docutils literal notranslate"><span class="pre">ShaderProgram::ShaderProgram(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shaderprogram-shaderprogram"><code class="docutils literal notranslate"><span class="pre">ShaderProgram::~ShaderProgram()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#paintershaderprogramptr-shaderprogram-create"><code class="docutils literal notranslate"><span class="pre">PainterShaderProgramPtr</span> <span class="pre">ShaderProgram::create(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id474">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-shaderprogram-addshader"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ShaderProgram::addShader(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-shaderprogram-addshaderfromsourcecode-i-addshaderfromsourcefile"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ShaderProgram::addShaderFromSourceCode(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">addShaderFromSourceFile(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-shaderprogram-link"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ShaderProgram::link()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id475">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id476">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-shaderprogram-bind"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ShaderProgram::bind()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-shaderprogram-release"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ShaderProgram::release()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-location-i-set-value">Metody <code class="docutils literal notranslate"><span class="pre">...Location(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">set...Value(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id477">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#texture-cpp">📄 texture.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id478">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id479">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uint-texture-uniqueid"><code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">Texture::uniqueId</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-texture">Klasa <code class="docutils literal notranslate"><span class="pre">Texture</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#texture-texture"><code class="docutils literal notranslate"><span class="pre">Texture::Texture(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id480"><code class="docutils literal notranslate"><span class="pre">Texture::~Texture()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-texture-replace-const-imageptr-image"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Texture::replace(const</span> <span class="pre">ImagePtr&amp;</span> <span class="pre">image)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-texture-resize-const-size-size"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Texture::resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-texture-update"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Texture::update()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id481">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id482">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-texture-setsmooth-bool-smooth-i-void-texture-setrepeat-bool-repeat"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Texture::setSmooth(bool</span> <span class="pre">smooth)</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Texture::setRepeat(bool</span> <span class="pre">repeat)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-setup">Metody <code class="docutils literal notranslate"><span class="pre">setup...()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id483">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#texture-h">📄 texture.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id484">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id485">Klasa <code class="docutils literal notranslate"><span class="pre">Texture</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id486">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id487">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id488">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id489">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#texturemanager-cpp">📄 texturemanager.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id490">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id491">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-textures"><code class="docutils literal notranslate"><span class="pre">g_textures</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-texturemanager">Klasa <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-texturemanager-init-i-void-texturemanager-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextureManager::init()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextureManager::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-texturemanager-clearcache"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextureManager::clearCache()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-texturemanager-reload"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">TextureManager::reload()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#textureptr-texturemanager-gettexture-const-std-string-filename"><code class="docutils literal notranslate"><span class="pre">TexturePtr</span> <span class="pre">TextureManager::getTexture(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id492">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id493">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#textureptr-texturemanager-loadtexture-std-stringstream-file-const-std-string-source"><code class="docutils literal notranslate"><span class="pre">TexturePtr</span> <span class="pre">TextureManager::loadTexture(std::stringstream&amp;</span> <span class="pre">file,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">source)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id494">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#vertexarray-h">📄 vertexarray.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id495">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-vertexarray">Klasa <code class="docutils literal notranslate"><span class="pre">VertexArray</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id496">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id497">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id498">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id499">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#texturemanager-h">📄 texturemanager.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id500">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id501">Klasa <code class="docutils literal notranslate"><span class="pre">TextureManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id502">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id503">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id504">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id505">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#textrender-h">📄 textrender.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id506">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-textrendercache">Struktura <code class="docutils literal notranslate"><span class="pre">TextRenderCache</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id507">Klasa <code class="docutils literal notranslate"><span class="pre">TextRender</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id508">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id509">Stałe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id510">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id511">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id512">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id513">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#outfits-h">📄 outfits.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id514">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shadery">Shadery</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glsladvancedoutfitvertexshader"><code class="docutils literal notranslate"><span class="pre">glslAdvancedOutfitVertexShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#opis">Opis</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id515">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glsladvancedoutfitfragmentshader"><code class="docutils literal notranslate"><span class="pre">glslAdvancedOutfitFragmentShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id516">Opis</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id517">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id518">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#newshader-h">📄 newshader.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id519">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id520">Shadery</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#newvertexshader"><code class="docutils literal notranslate"><span class="pre">newVertexShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id521">Opis</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id522">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#newfragmentshader"><code class="docutils literal notranslate"><span class="pre">newFragmentShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id523">Opis</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id524">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#textvertexshader-i-textfragmentshader"><code class="docutils literal notranslate"><span class="pre">textVertexShader</span></code> i <code class="docutils literal notranslate"><span class="pre">textFragmentShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#linevertexshader-i-linefragmentshader"><code class="docutils literal notranslate"><span class="pre">lineVertexShader</span></code> i <code class="docutils literal notranslate"><span class="pre">lineFragmentShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id525">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shaders-h">📄 shaders.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id526">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zawartosc">Zawartość</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id527">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shadersources-h">📄 shadersources.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id528">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id529">Shadery</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glslmainvertexshader-i-glslmainwithtexcoordsvertexshader"><code class="docutils literal notranslate"><span class="pre">glslMainVertexShader</span></code> i <code class="docutils literal notranslate"><span class="pre">glslMainWithTexCoordsVertexShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glslpositiononlyvertexshader"><code class="docutils literal notranslate"><span class="pre">glslPositionOnlyVertexShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glslmainfragmentshader"><code class="docutils literal notranslate"><span class="pre">glslMainFragmentShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glsltexturesrcfragmentshader"><code class="docutils literal notranslate"><span class="pre">glslTextureSrcFragmentShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glslsolidcolorfragmentshader"><code class="docutils literal notranslate"><span class="pre">glslSolidColorFragmentShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glslsolidcolorontexturefragmentshader"><code class="docutils literal notranslate"><span class="pre">glslSolidColorOnTextureFragmentShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glsloutfitvertexshader-i-glsloutfitfragmentshader"><code class="docutils literal notranslate"><span class="pre">glslOutfitVertexShader</span></code> i <code class="docutils literal notranslate"><span class="pre">glslOutfitFragmentShader</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id530">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#http-cpp">📄 http.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id531">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id532">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-http"><code class="docutils literal notranslate"><span class="pre">g_http</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-http">Klasa <code class="docutils literal notranslate"><span class="pre">Http</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-http-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Http::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-http-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Http::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-http-get-const-std-string-url-int-timeout"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Http::get(const</span> <span class="pre">std::string&amp;</span> <span class="pre">url,</span> <span class="pre">int</span> <span class="pre">timeout)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id533">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id534">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-http-post"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Http::post(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-http-download"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Http::download(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-http-ws"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">Http::ws(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-http-wssend-int-operationid-std-string-message"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Http::wsSend(int</span> <span class="pre">operationId,</span> <span class="pre">std::string</span> <span class="pre">message)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-http-cancel-int-id"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Http::cancel(int</span> <span class="pre">id)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id535">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#websocket-h">📄 websocket.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id536">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#typy-wyliczeniowe-i-definicje">Typy wyliczeniowe i definicje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-websocketsession">Klasa <code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id537">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id538">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id539">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-prywatne-on">Metody prywatne (<code class="docutils literal notranslate"><span class="pre">on_...</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id540">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#http-h">📄 http.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id541">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id542">Klasa <code class="docutils literal notranslate"><span class="pre">Http</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id543">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id544">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id545">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id546">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id547">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#result-h">📄 result.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id548">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-httpresult">Struktura <code class="docutils literal notranslate"><span class="pre">HttpResult</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id549">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id550">Pola struktury</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#definicje-typow">Definicje typów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id551">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#session-cpp">📄 session.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id552">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-httpsession">Klasa <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-httpsession-start"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">HttpSession::start()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id553">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id554">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-on">Metody <code class="docutils literal notranslate"><span class="pre">on_...()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-httpsession-close"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">HttpSession::close()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id555">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#session-h">📄 session.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id556">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id557">Klasa <code class="docutils literal notranslate"><span class="pre">HttpSession</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id558">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id559">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id560">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-prywatne-on-close-onerror">Metody prywatne (<code class="docutils literal notranslate"><span class="pre">on_...</span></code>, <code class="docutils literal notranslate"><span class="pre">close</span></code>, <code class="docutils literal notranslate"><span class="pre">onError</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id561">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#websocket-cpp">📄 websocket.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id562">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id563">Klasa <code class="docutils literal notranslate"><span class="pre">WebsocketSession</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-websocketsession-start"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WebsocketSession::start()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id564">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id565">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-websocketsession-send-std-string-data"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WebsocketSession::send(std::string</span> <span class="pre">data)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id566">Metody <code class="docutils literal notranslate"><span class="pre">on_...()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-websocketsession-close"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WebsocketSession::close()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id567">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#mouse-cpp">📄 mouse.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id568">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id569">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-mouse"><code class="docutils literal notranslate"><span class="pre">g_mouse</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-mouse">Klasa <code class="docutils literal notranslate"><span class="pre">Mouse</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-mouse-init-i-void-mouse-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::init()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-mouse-loadcursors-std-string-filename"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::loadCursors(std::string</span> <span class="pre">filename)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-mouse-addcursor-const-std-string-name-const-std-string-file-const-point-hotspot"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::addCursor(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">file,</span> <span class="pre">const</span> <span class="pre">Point&amp;</span> <span class="pre">hotSpot)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id570">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id571">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-mouse-pushcursor-const-std-string-name"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::pushCursor(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id572">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id573">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-mouse-popcursor-const-std-string-name"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Mouse::popCursor(const</span> <span class="pre">std::string&amp;</span> <span class="pre">name)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id574">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id575">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-mouse-iscursorchanged"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Mouse::isCursorChanged()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-mouse-ispressed-fw-mousebutton-mousebutton"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Mouse::isPressed(Fw::MouseButton</span> <span class="pre">mouseButton)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id576">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#mouse-h">📄 mouse.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id577">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id578">Klasa <code class="docutils literal notranslate"><span class="pre">Mouse</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id579">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id580">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id581">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id582">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id583">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id584">📄 declarations.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id585">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wczesne-deklaracje">Wczesne deklaracje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id586">Definicje typów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id587">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lbitlib-cpp">📄 lbitlib.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id588">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id589">Zawartość</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcje-biblioteki-bit32">Funkcje biblioteki <code class="docutils literal notranslate"><span class="pre">bit32</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-luaopen-bit32-lua-state-l"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">luaopen_bit32</span> <span class="pre">(lua_State</span> <span class="pre">*L)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id590">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lbitlib-h">📄 lbitlib.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id591">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#deklaracje">Deklaracje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id592"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">luaopen_bit32</span> <span class="pre">(lua_State</span> <span class="pre">*L)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id593">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luabinder-h">📄 luabinder.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id594">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#namespace-luabinder">Namespace <code class="docutils literal notranslate"><span class="pre">luabinder</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id595">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#glowne-szablony">Główne szablony</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id596">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luaexception-h">📄 luaexception.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id597">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-luaexception">Klasa <code class="docutils literal notranslate"><span class="pre">LuaException</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id598">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id599">Metody</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-luabadnumberofargumentsexception">Klasa <code class="docutils literal notranslate"><span class="pre">LuaBadNumberOfArgumentsException</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id600">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id601">Metody</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-luabadvaluecastexception">Klasa <code class="docutils literal notranslate"><span class="pre">LuaBadValueCastException</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id602">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id603">Metody</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id604">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luaexception-cpp">📄 luaexception.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id605">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id606">Klasa <code class="docutils literal notranslate"><span class="pre">LuaException</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luaexception-luaexception-const-std-string-error-int-tracelevel"><code class="docutils literal notranslate"><span class="pre">LuaException::LuaException(const</span> <span class="pre">std::string&amp;</span> <span class="pre">error,</span> <span class="pre">int</span> <span class="pre">traceLevel)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-luaexception-generateluaerrormessage-const-std-string-error-int-tracelevel"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaException::generateLuaErrorMessage(const</span> <span class="pre">std::string&amp;</span> <span class="pre">error,</span> <span class="pre">int</span> <span class="pre">traceLevel)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id607">Klasa <code class="docutils literal notranslate"><span class="pre">LuaBadNumberOfArgumentsException</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luabadnumberofargumentsexception-luabadnumberofargumentsexception-int-expected-int-got"><code class="docutils literal notranslate"><span class="pre">LuaBadNumberOfArgumentsException::LuaBadNumberOfArgumentsException(int</span> <span class="pre">expected,</span> <span class="pre">int</span> <span class="pre">got)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id608">Klasa <code class="docutils literal notranslate"><span class="pre">LuaBadValueCastException</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luabadvaluecastexception-luabadvaluecastexception-const-std-string-luatypename-const-std-string-cpptypename"><code class="docutils literal notranslate"><span class="pre">LuaBadValueCastException::LuaBadValueCastException(const</span> <span class="pre">std::string&amp;</span> <span class="pre">luaTypeName,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">cppTypeName)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id609">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luainterface-cpp">📄 luainterface.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id610">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id611">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-lua"><code class="docutils literal notranslate"><span class="pre">g_lua</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-luainterface">Klasa <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inicjalizacja-i-zamykanie">Inicjalizacja i zamykanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#rejestracja-i-bindowanie">Rejestracja i bindowanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-obslugi-metametod-obiektow">Metody obsługi metametod obiektów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wykonywanie-skryptow">Wykonywanie skryptów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inne">Inne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id612">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luainterface-h">📄 luainterface.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id613">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id614">Klasa <code class="docutils literal notranslate"><span class="pre">LuaInterface</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id615">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-publiczne-wybrane">Metody publiczne (wybrane)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inicjalizacja-i-zarzadzanie">Inicjalizacja i zarządzanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id616">Rejestracja i bindowanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id617">Wykonywanie skryptów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulacja-stosem-i-typami">Manipulacja stosem i typami</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id618">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dolaczane-pliki">Dołączane pliki</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id619">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luaobject-cpp">📄 luaobject.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id620">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-luaobject">Klasa <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luaobject-luaobject"><code class="docutils literal notranslate"><span class="pre">LuaObject::LuaObject()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id621"><code class="docutils literal notranslate"><span class="pre">LuaObject::~LuaObject()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-luaobject-hasluafield-const-std-string-field"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">LuaObject::hasLuaField(const</span> <span class="pre">std::string&amp;</span> <span class="pre">field)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-luaobject-releaseluafieldstable"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaObject::releaseLuaFieldsTable()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-luaobject-luasetfield-const-std-string-key"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaObject::luaSetField(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id622">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id623">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-luaobject-luagetfield-const-std-string-key"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaObject::luaGetField(const</span> <span class="pre">std::string&amp;</span> <span class="pre">key)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-luaobject-luagetmetatable"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaObject::luaGetMetatable()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-luaobject-luagetfieldstable"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">LuaObject::luaGetFieldsTable()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-luaobject-getusecount"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">LuaObject::getUseCount()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-luaobject-getclassname"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">LuaObject::getClassName()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id624">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luaobject-h">📄 luaobject.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id625">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id626">Klasa <code class="docutils literal notranslate"><span class="pre">LuaObject</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id627">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id628">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id629">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcje-globalne-connect">Funkcje globalne (<code class="docutils literal notranslate"><span class="pre">connect</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id630">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luavaluecasts-cpp">📄 luavaluecasts.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id631">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcje-push-luavalue">Funkcje <code class="docutils literal notranslate"><span class="pre">push_luavalue</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id632">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#implementacje">Implementacje:</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcje-luavalue-cast">Funkcje <code class="docutils literal notranslate"><span class="pre">luavalue_cast</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id633">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id634">Implementacje:</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id635">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luavaluecasts-h">📄 luavaluecasts.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id636">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#szablony-i-funkcje">Szablony i funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#push-luavalue-t-const-t-v"><code class="docutils literal notranslate"><span class="pre">push_luavalue&lt;T&gt;(const</span> <span class="pre">T&amp;</span> <span class="pre">v)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id637">Opis</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#luavalue-cast-t-int-index-t-v"><code class="docutils literal notranslate"><span class="pre">luavalue_cast&lt;T&gt;(int</span> <span class="pre">index,</span> <span class="pre">T&amp;</span> <span class="pre">v)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id638">Opis</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zadeklarowane-specjalizacje">Zadeklarowane specjalizacje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#przyklad-dzialania">Przykład działania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id639">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#connection-cpp">📄 connection.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id640">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id641">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-connection">Klasa <code class="docutils literal notranslate"><span class="pre">Connection</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#connection-connection"><code class="docutils literal notranslate"><span class="pre">Connection::Connection()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-connection-poll-i-void-connection-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::poll()</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-connection-close"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::close()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-connection-connect"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::connect(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-connection-write-uint8-buffer-size-t-size"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::write(uint8*</span> <span class="pre">buffer,</span> <span class="pre">size_t</span> <span class="pre">size)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-read-read-until-read-some">Metody <code class="docutils literal notranslate"><span class="pre">read(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">read_until(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">read_some(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id642">Metody <code class="docutils literal notranslate"><span class="pre">on...()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-connection-handleerror"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Connection::handleError(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id643">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#server-h">📄 server.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id644">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-server">Klasa <code class="docutils literal notranslate"><span class="pre">Server</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id645">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id646">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id647">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id648">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#connection-h">📄 connection.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id649">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id650">Klasa <code class="docutils literal notranslate"><span class="pre">Connection</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id651">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id652">Stałe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id653">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id654">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id655">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id656">📄 declarations.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id657">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id658">Deklaracje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#namespace-asio"><code class="docutils literal notranslate"><span class="pre">namespace</span> <span class="pre">asio</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wczesne-deklaracje-klas">Wczesne deklaracje klas</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id659">Definicje typów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id660">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inputmessage-h">📄 inputmessage.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id661">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-inputmessage">Klasa <code class="docutils literal notranslate"><span class="pre">InputMessage</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id662">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id663">Stałe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id664">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-chronione-uzywane-przez-protocol">Metody chronione (używane przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id665">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id666">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#outputmessage-cpp">📄 outputmessage.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id667">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-outputmessage">Klasa <code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#outputmessage-outputmessage"><code class="docutils literal notranslate"><span class="pre">OutputMessage::OutputMessage()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-outputmessage-reset"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputMessage::reset()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-outputmessage-setbuffer-const-std-string-buffer"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputMessage::setBuffer(const</span> <span class="pre">std::string&amp;</span> <span class="pre">buffer)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-add">Metody <code class="docutils literal notranslate"><span class="pre">add...()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-outputmessage-encryptrsa"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputMessage::encryptRsa()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-write">Metody <code class="docutils literal notranslate"><span class="pre">write...()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-outputmessage-checkwrite-int-bytes"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OutputMessage::checkWrite(int</span> <span class="pre">bytes)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id668">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#outputmessage-h">📄 outputmessage.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id669">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id670">Klasa <code class="docutils literal notranslate"><span class="pre">OutputMessage</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id671">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id672">Stałe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id673">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id674">Metody chronione (używane przez <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id675">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id676">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#packet-player-cpp">📄 packet_player.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id677">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-packetplayer">Klasa <code class="docutils literal notranslate"><span class="pre">PacketPlayer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#packetplayer-packetplayer-const-std-string-file"><code class="docutils literal notranslate"><span class="pre">PacketPlayer::PacketPlayer(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#packetplayer-packetplayer"><code class="docutils literal notranslate"><span class="pre">PacketPlayer::~PacketPlayer()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-packetplayer-start"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketPlayer::start(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-packetplayer-stop"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketPlayer::stop()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-packetplayer-onoutputpacket-const-outputmessageptr-packet"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketPlayer::onOutputPacket(const</span> <span class="pre">OutputMessagePtr&amp;</span> <span class="pre">packet)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-packetplayer-process"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketPlayer::process()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id678">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id679">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id680">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#packet-player-h">📄 packet_player.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id681">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id682">Klasa <code class="docutils literal notranslate"><span class="pre">PacketPlayer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id683">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id684">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id685">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id686">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#protocol-h">📄 protocol.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id687">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-protocol">Klasa <code class="docutils literal notranslate"><span class="pre">Protocol</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id688">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id689">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id690">Metody chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zmienne">Zmienne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id691">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#packet-recorder-cpp">📄 packet_recorder.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id692">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-packetrecorder">Klasa <code class="docutils literal notranslate"><span class="pre">PacketRecorder</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#packetrecorder-packetrecorder-const-std-string-file"><code class="docutils literal notranslate"><span class="pre">PacketRecorder::PacketRecorder(const</span> <span class="pre">std::string&amp;</span> <span class="pre">file)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-packetrecorder-addinputpacket-const-inputmessageptr-packet"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketRecorder::addInputPacket(const</span> <span class="pre">InputMessagePtr&amp;</span> <span class="pre">packet)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-packetrecorder-addoutputpacket-const-outputmessageptr-packet"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PacketRecorder::addOutputPacket(const</span> <span class="pre">OutputMessagePtr&amp;</span> <span class="pre">packet)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id693">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#protocol-cpp">📄 protocol.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id694">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id695">Klasa <code class="docutils literal notranslate"><span class="pre">Protocol</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#protocol-protocol"><code class="docutils literal notranslate"><span class="pre">Protocol::Protocol()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-protocol-connect-const-std-string-host-uint16-port"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::connect(const</span> <span class="pre">std::string&amp;</span> <span class="pre">host,</span> <span class="pre">uint16</span> <span class="pre">port)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-protocol-disconnect"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::disconnect()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-protocol-send-const-outputmessageptr-outputmessage-bool-rawpacket"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::send(const</span> <span class="pre">OutputMessagePtr&amp;</span> <span class="pre">outputMessage,</span> <span class="pre">bool</span> <span class="pre">rawPacket)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id696">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id697">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-protocol-recv"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::recv()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-protocol-internalrecvheader-i-internalrecvdata"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::internalRecvHeader(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">internalRecvData(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-protocol-generatexteakey-i-setxteakey"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::generateXteaKey()</span></code> i <code class="docutils literal notranslate"><span class="pre">setXteaKey(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-protocol-xteadecrypt-i-void-protocol-xteaencrypt"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">Protocol::xteaDecrypt(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::xteaEncrypt(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-protocol-onconnect-onrecv-onerror"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Protocol::onConnect()</span></code>, <code class="docutils literal notranslate"><span class="pre">onRecv(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">onError(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id698">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#server-cpp">📄 server.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id699">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id700">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-ioservice"><code class="docutils literal notranslate"><span class="pre">g_ioService</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id701">Klasa <code class="docutils literal notranslate"><span class="pre">Server</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#server-server-int-port"><code class="docutils literal notranslate"><span class="pre">Server::Server(int</span> <span class="pre">port)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#serverptr-server-create-int-port"><code class="docutils literal notranslate"><span class="pre">ServerPtr</span> <span class="pre">Server::create(int</span> <span class="pre">port)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-server-close"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Server::close()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-server-acceptnext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Server::acceptNext()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id702">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id703">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id704">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inputmessage-cpp">📄 inputmessage.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id705">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id706">Klasa <code class="docutils literal notranslate"><span class="pre">InputMessage</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inputmessage-inputmessage"><code class="docutils literal notranslate"><span class="pre">InputMessage::InputMessage()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-inputmessage-reset"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InputMessage::reset()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-inputmessage-setbuffer-const-std-string-buffer"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InputMessage::setBuffer(const</span> <span class="pre">std::string&amp;</span> <span class="pre">buffer)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-get">Metody <code class="docutils literal notranslate"><span class="pre">get...()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-inputmessage-decryptrsa-int-size"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">InputMessage::decryptRsa(int</span> <span class="pre">size)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-inputmessage-fillbuffer"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InputMessage::fillBuffer(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-inputmessage-setheadersize-uint32-size"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InputMessage::setHeaderSize(uint32</span> <span class="pre">size)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-inputmessage-readchecksum"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">InputMessage::readChecksum()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-inputmessage-checkread-int-bytes"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InputMessage::checkRead(int</span> <span class="pre">bytes)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id707">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#packet-recorder-h">📄 packet_recorder.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id708">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id709">Klasa <code class="docutils literal notranslate"><span class="pre">PacketRecorder</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id710">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id711">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id712">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id713">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id714">📄 declarations.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id715">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id716">Wczesne deklaracje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id717">Definicje typów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id718">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlparser-h">📄 otmlparser.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id719">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-otmlparser">Klasa <code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id720">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id721">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-prywatne">Metody prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id722">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id723">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otml-h">📄 otml.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id724">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id725">Zawartość</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id726">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmldocument-cpp">📄 otmldocument.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id727">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-otmldocument">Klasa <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmldocumentptr-otmldocument-create"><code class="docutils literal notranslate"><span class="pre">OTMLDocumentPtr</span> <span class="pre">OTMLDocument::create()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmldocumentptr-otmldocument-parse-const-std-string-filename"><code class="docutils literal notranslate"><span class="pre">OTMLDocumentPtr</span> <span class="pre">OTMLDocument::parse(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmldocumentptr-otmldocument-parsestring-const-std-string-data-const-std-string-source"><code class="docutils literal notranslate"><span class="pre">OTMLDocumentPtr</span> <span class="pre">OTMLDocument::parseString(const</span> <span class="pre">std::string&amp;</span> <span class="pre">data,</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">source)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmldocumentptr-otmldocument-parse-std-istream-in-const-std-string-source"><code class="docutils literal notranslate"><span class="pre">OTMLDocumentPtr</span> <span class="pre">OTMLDocument::parse(std::istream&amp;</span> <span class="pre">in,</span> <span class="pre">const</span> <span class="pre">std::::string&amp;</span> <span class="pre">source)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-otmldocument-emit"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">OTMLDocument::emit()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-otmldocument-save-const-std-string-filename"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">OTMLDocument::save(const</span> <span class="pre">std::string&amp;</span> <span class="pre">fileName)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id728">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmldocument-h">📄 otmldocument.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id729">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id730">Klasa <code class="docutils literal notranslate"><span class="pre">OTMLDocument</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id731">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-publiczne-statyczne">Metody publiczne (statyczne)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-publiczne-instancji">Metody publiczne (instancji)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id732">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlemitter-cpp">📄 otmlemitter.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id733">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-otmlemitter">Klasa <code class="docutils literal notranslate"><span class="pre">OTMLEmitter</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-otmlemitter-emitnode-const-otmlnodeptr-node-int-currentdepth"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">OTMLEmitter::emitNode(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node,</span> <span class="pre">int</span> <span class="pre">currentDepth)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id734">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id735">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id736">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlexception-cpp">📄 otmlexception.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id737">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-otmlexception">Klasa <code class="docutils literal notranslate"><span class="pre">OTMLException</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id738">Konstruktory</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id739">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id740">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlexception-h">📄 otmlexception.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id741">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id742">Klasa <code class="docutils literal notranslate"><span class="pre">OTMLException</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id743">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id744">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id745">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id746">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlemitter-h">📄 otmlemitter.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id747">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id748">Klasa <code class="docutils literal notranslate"><span class="pre">OTMLEmitter</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id749">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id750">Metody publiczne (statyczne)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id751">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlparser-cpp">📄 otmlparser.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id752">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id753">Klasa <code class="docutils literal notranslate"><span class="pre">OTMLParser</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlparser-otmlparser"><code class="docutils literal notranslate"><span class="pre">OTMLParser::OTMLParser(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-otmlparser-parse"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLParser::parse()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-otmlparser-getlinedepth"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">OTMLParser::getLineDepth(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-otmlparser-parseline-std-string-line"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLParser::parseLine(std::string</span> <span class="pre">line)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-otmlparser-parsenode-const-std-string-data"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLParser::parseNode(const</span> <span class="pre">std::string&amp;</span> <span class="pre">data)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id754">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlnode-h">📄 otmlnode.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id755">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-otmlnode">Klasa <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id756">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id757">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id758">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id759">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlnode-cpp">📄 otmlnode.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id760">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id761">Klasa <code class="docutils literal notranslate"><span class="pre">OTMLNode</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlnodeptr-otmlnode-create"><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span> <span class="pre">OTMLNode::create(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-otmlnode-haschildren"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">OTMLNode::hasChildren()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlnodeptr-otmlnode-get-const-std-string-childtag"><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span> <span class="pre">OTMLNode::get(const</span> <span class="pre">std::string&amp;</span> <span class="pre">childTag)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-otmlnode-addchild-const-otmlnodeptr-newchild"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLNode::addChild(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">newChild)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-otmlnode-removechild"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">OTMLNode::removeChild(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-otmlnode-copy-const-otmlnodeptr-node"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLNode::copy(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-otmlnode-merge-const-otmlnodeptr-node"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OTMLNode::merge(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">node)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlnodelist-otmlnode-children"><code class="docutils literal notranslate"><span class="pre">OTMLNodeList</span> <span class="pre">OTMLNode::children()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#otmlnodeptr-otmlnode-clone"><code class="docutils literal notranslate"><span class="pre">OTMLNodePtr</span> <span class="pre">OTMLNode::clone()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id762">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#androidplatform-cpp">📄 androidplatform.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id763">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-platform-implementacja-dla-androida">Klasa <code class="docutils literal notranslate"><span class="pre">Platform</span></code> (implementacja dla Androida)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id764">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#androidwindow-cpp">📄 androidwindow.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id765">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id766">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-androidwindow"><code class="docutils literal notranslate"><span class="pre">g_androidWindow</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-androidwindow">Klasa <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#androidwindow-androidwindow"><code class="docutils literal notranslate"><span class="pre">AndroidWindow::AndroidWindow()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-androidwindow-internalinitgl-i-internaldestroygl"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::internalInitGL()</span></code> i <code class="docutils literal notranslate"><span class="pre">internalDestroyGL()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-androidwindow-init-struct-android-app-app"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::init(struct</span> <span class="pre">android_app*</span> <span class="pre">app)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-androidwindow-poll"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::poll()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-androidwindow-swapbuffers"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::swapBuffers()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-androidwindow-handlecmd-int32-t-cmd"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::handleCmd(int32_t</span> <span class="pre">cmd)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-androidwindow-handleinput-ainputevent-event"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">AndroidWindow::handleInput(AInputEvent*</span> <span class="pre">event)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-androidwindow-showtexteditor"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::showTextEditor(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-androidwindow-openurl-std-string-url"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">AndroidWindow::openUrl(std::string</span> <span class="pre">url)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcja-jniexport-committext">Funkcja <code class="docutils literal notranslate"><span class="pre">JNIEXPORT</span> <span class="pre">...</span> <span class="pre">commitText(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id767">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#androidwindow-h">📄 androidwindow.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id768">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id769">Klasa <code class="docutils literal notranslate"><span class="pre">AndroidWindow</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id770">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id771">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id772">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id773">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id774">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#crashhandler-h">📄 crashhandler.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id775">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id776">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-installcrashhandler"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">installCrashHandler()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uninstallcrashhandler"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">uninstallCrashHandler()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dyrektywa-preprocesora">Dyrektywa preprocesora</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id777">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#platform-cpp">📄 platform.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id778">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id779">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-platform"><code class="docutils literal notranslate"><span class="pre">g_platform</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id780">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#platformwindow-cpp">📄 platformwindow.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id781">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id782">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-window"><code class="docutils literal notranslate"><span class="pre">g_window</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-platformwindow">Klasa <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-platformwindow-loadmousecursor"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">PlatformWindow::loadMouseCursor(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-platformwindow-updateunmaximizedcoords"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PlatformWindow::updateUnmaximizedCoords()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-platformwindow-processkeydown-fw-key-keycode"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PlatformWindow::processKeyDown(Fw::Key</span> <span class="pre">keyCode)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-platformwindow-processkeyup-fw-key-keycode"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PlatformWindow::processKeyUp(Fw::Key</span> <span class="pre">keyCode)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-platformwindow-releaseallkeys"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PlatformWindow::releaseAllKeys()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-platformwindow-firekeyspress"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">PlatformWindow::fireKeysPress()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id783">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#platform-h">📄 platform.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id784">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-platform">Klasa <code class="docutils literal notranslate"><span class="pre">Platform</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id785">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id786">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id787">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id788">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#platformwindow-h">📄 platformwindow.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id789">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id790">Klasa <code class="docutils literal notranslate"><span class="pre">PlatformWindow</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id791">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-czysto-wirtualne-do-implementacji-przez-klasy-pochodne">Metody czysto wirtualne (do implementacji przez klasy pochodne)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-z-implementacja">Metody z implementacją</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id792">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id793">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id794">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#sdlwindow-cpp">📄 sdlwindow.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id795">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-sdlwindow">Klasa <code class="docutils literal notranslate"><span class="pre">SDLWindow</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#sdlwindow-sdlwindow"><code class="docutils literal notranslate"><span class="pre">SDLWindow::SDLWindow()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-sdlwindow-getplatformtype"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">SDLWindow::getPlatformType()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id796">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#sdlwindow-h">📄 sdlwindow.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id797">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id798">Klasa <code class="docutils literal notranslate"><span class="pre">SDLWindow</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id799">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id800">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id801">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id802">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#unixcrashhandler-cpp">📄 unixcrashhandler.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id803">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id804">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-crashhandler-int-signum-siginfo-t-info-void-secret"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">crashHandler(int</span> <span class="pre">signum,</span> <span class="pre">siginfo_t*</span> <span class="pre">info,</span> <span class="pre">void*</span> <span class="pre">secret)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id805">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id806">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id807"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">installCrashHandler()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id808"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">uninstallCrashHandler()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id809">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#unixplatform-cpp">📄 unixplatform.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id810">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-platform-implementacja-dla-uniksa">Klasa <code class="docutils literal notranslate"><span class="pre">Platform</span></code> (implementacja dla Uniksa)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id811">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#win32crashhandler-cpp">📄 win32crashhandler.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id812">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id813">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#const-char-getexceptionname-dword-exceptioncode"><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*getExceptionName(DWORD</span> <span class="pre">exceptionCode)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-stacktrace-lpexception-pointers-e-std-stringstream-ss"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Stacktrace(LPEXCEPTION_POINTERS</span> <span class="pre">e,</span> <span class="pre">std::stringstream&amp;</span> <span class="pre">ss)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#long-callback-exceptionhandler-pexception-pointers-e"><code class="docutils literal notranslate"><span class="pre">LONG</span> <span class="pre">CALLBACK</span> <span class="pre">ExceptionHandler(PEXCEPTION_POINTERS</span> <span class="pre">e)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#long-winapi-unhandledexceptionfilter2-pexception-pointers-exception"><code class="docutils literal notranslate"><span class="pre">LONG</span> <span class="pre">WINAPI</span> <span class="pre">UnhandledExceptionFilter2(PEXCEPTION_POINTERS</span> <span class="pre">exception)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id814"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">installCrashHandler()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id815"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">uninstallCrashHandler()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id816">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#win32platform-cpp">📄 win32platform.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id817">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-platform-implementacja-dla-windows">Klasa <code class="docutils literal notranslate"><span class="pre">Platform</span></code> (implementacja dla Windows)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id818">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#win32window-cpp">📄 win32window.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id819">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-win32window">Klasa <code class="docutils literal notranslate"><span class="pre">WIN32Window</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#win32window-win32window"><code class="docutils literal notranslate"><span class="pre">WIN32Window::WIN32Window()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-win32window-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WIN32Window::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-win32window-internalcreateglcontext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WIN32Window::internalCreateGLContext()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lresult-win32window-windowproc"><code class="docutils literal notranslate"><span class="pre">LRESULT</span> <span class="pre">WIN32Window::windowProc(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lresult-win32window-dispatcherwindowproc"><code class="docutils literal notranslate"><span class="pre">LRESULT</span> <span class="pre">WIN32Window::dispatcherWindowProc(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-win32window-poll"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WIN32Window::poll()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-win32window-swapbuffers"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WIN32Window::swapBuffers()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-win32window-setverticalsync-bool-enable"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">WIN32Window::setVerticalSync(bool</span> <span class="pre">enable)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id820">Inne metody</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id821">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#win32window-h">📄 win32window.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id822">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id823">Klasa <code class="docutils literal notranslate"><span class="pre">WIN32Window</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id824">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-prywatne-i-chronione">Metody prywatne i chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id825">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id826">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#x11window-h">📄 x11window.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id827">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-x11window">Klasa <code class="docutils literal notranslate"><span class="pre">X11Window</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id828">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id829">Metody prywatne i chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id830">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id831">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#x11window-cpp">📄 x11window.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id832">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id833">Klasa <code class="docutils literal notranslate"><span class="pre">X11Window</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#x11window-x11window"><code class="docutils literal notranslate"><span class="pre">X11Window::X11Window()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-x11window-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-x11window-internalcreatewindow"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::internalCreateWindow()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-x11window-poll"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::poll()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-x11window-swapbuffers"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::swapBuffers()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-x11window-setfullscreen-bool-fullscreen"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::setFullscreen(bool</span> <span class="pre">fullscreen)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-x11window-setclipboardtext-i-getclipboardtext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">X11Window::setClipboardText(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">getClipboardText()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id834">Inne metody</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id835">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proxy-cpp">📄 proxy.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id836">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id837">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-proxy"><code class="docutils literal notranslate"><span class="pre">g_proxy</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-proxymanager">Klasa <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxymanager-init-i-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::init()</span></code> i <code class="docutils literal notranslate"><span class="pre">terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxymanager-clear"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::clear()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-proxymanager-isactive"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">ProxyManager::isActive()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxymanager-addproxy"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::addProxy(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxymanager-removeproxy"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::removeProxy(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uint32-t-proxymanager-addsession"><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">ProxyManager::addSession(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxymanager-removesession"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::removeSession(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxymanager-send"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">ProxyManager::send(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-proxymanager-getping"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">ProxyManager::getPing()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id838">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proxy-h">📄 proxy.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id839">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id840">Klasa <code class="docutils literal notranslate"><span class="pre">ProxyManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id841">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id842">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id843">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id844">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id845">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proxy-client-h">📄 proxy_client.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id846">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id847">Definicje typów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-proxy">Klasa <code class="docutils literal notranslate"><span class="pre">Proxy</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id848">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#stale-i-typy-wyliczeniowe">Stałe i typy wyliczeniowe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id849">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-session">Klasa <code class="docutils literal notranslate"><span class="pre">Session</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id850">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id851">Stałe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id852">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id853">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proxy-client-cpp">📄 proxy_client.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id854">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id855">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-proxy-implementacja">Klasa <code class="docutils literal notranslate"><span class="pre">Proxy</span></code> (implementacja)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxy-check"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::check(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxy-connect"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::connect()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxy-disconnect"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::disconnect()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxy-ping"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::ping()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxy-onping-uint32-t-packetid"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::onPing(uint32_t</span> <span class="pre">packetId)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxy-readheader-i-onheader"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::readHeader()</span></code> i <code class="docutils literal notranslate"><span class="pre">onHeader(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxy-onpacket"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::onPacket(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-proxy-send"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Proxy::send(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-session-implementacja">Klasa <code class="docutils literal notranslate"><span class="pre">Session</span></code> (implementacja)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-session-start-int-maxconnections"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::start(int</span> <span class="pre">maxConnections)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-session-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::terminate(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-session-check"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::check(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-session-selectproxies"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::selectProxies()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-session-onproxypacket"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::onProxyPacket(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-session-onpacket"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Session::onPacket(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#combinedsoundsource-cpp">📄 combinedsoundsource.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id856">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-combinedsoundsource">Klasa <code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id857">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#combinedsoundsource-combinedsoundsource"><code class="docutils literal notranslate"><span class="pre">CombinedSoundSource::CombinedSoundSource()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-combinedsoundsource-addsource-const-soundsourceptr-source"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CombinedSoundSource::addSource(const</span> <span class="pre">SoundSourcePtr&amp;</span> <span class="pre">source)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-operacyjne-play-stop-setlooping-setgain-etc">Metody operacyjne (<code class="docutils literal notranslate"><span class="pre">play</span></code>, <code class="docutils literal notranslate"><span class="pre">stop</span></code>, <code class="docutils literal notranslate"><span class="pre">setLooping</span></code>, <code class="docutils literal notranslate"><span class="pre">setGain</span></code>, etc.)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-sprawdzajace-stan-isbuffering-isplaying">Metody sprawdzające stan (<code class="docutils literal notranslate"><span class="pre">isBuffering</span></code>, <code class="docutils literal notranslate"><span class="pre">isPlaying</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-combinedsoundsource-update"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">CombinedSoundSource::update()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id858">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#combinedsoundsource-h">📄 combinedsoundsource.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id859">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id860">Klasa <code class="docutils literal notranslate"><span class="pre">CombinedSoundSource</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id861">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id862">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id863">Metody chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id864">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id865">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#oggsoundfile-cpp">📄 oggsoundfile.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id866">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-oggsoundfile">Klasa <code class="docutils literal notranslate"><span class="pre">OggSoundFile</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#oggsoundfile-oggsoundfile-const-filestreamptr-filestream"><code class="docutils literal notranslate"><span class="pre">OggSoundFile::OggSoundFile(const</span> <span class="pre">FileStreamPtr&amp;</span> <span class="pre">fileStream)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#oggsoundfile-oggsoundfile"><code class="docutils literal notranslate"><span class="pre">OggSoundFile::~OggSoundFile()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-oggsoundfile-prepareogg"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">OggSoundFile::prepareOgg()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id867">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id868">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-oggsoundfile-read-void-buffer-int-buffersize"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">OggSoundFile::read(void</span> <span class="pre">*buffer,</span> <span class="pre">int</span> <span class="pre">bufferSize)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-oggsoundfile-reset"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">OggSoundFile::reset()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#statyczne-metody-cb">Statyczne metody <code class="docutils literal notranslate"><span class="pre">cb_...</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id869">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id870">📄 declarations.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id871">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id872">Wczesne deklaracje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id873">Definicje typów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dolaczanie-naglowkow-openal">Dołączanie nagłówków OpenAL</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id874">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#oggsoundfile-h">📄 oggsoundfile.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id875">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id876">Klasa <code class="docutils literal notranslate"><span class="pre">OggSoundFile</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id877">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id878">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-prywatne-statyczne">Metody prywatne (statyczne)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id879">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id880">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundbuffer-cpp">📄 soundbuffer.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id881">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-soundbuffer">Klasa <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id882">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundbuffer-soundbuffer"><code class="docutils literal notranslate"><span class="pre">SoundBuffer::SoundBuffer()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id883"><code class="docutils literal notranslate"><span class="pre">SoundBuffer::~SoundBuffer()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-soundbuffer-fillbuffer-const-soundfileptr-soundfile"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">SoundBuffer::fillBuffer(const</span> <span class="pre">SoundFilePtr&amp;</span> <span class="pre">soundFile)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-soundbuffer-fillbuffer-alenum-sampleformat-const-databuffer-char-data-int-size-int-rate"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">SoundBuffer::fillBuffer(ALenum</span> <span class="pre">sampleFormat,</span> <span class="pre">const</span> <span class="pre">DataBuffer&lt;char&gt;&amp;</span> <span class="pre">data,</span> <span class="pre">int</span> <span class="pre">size,</span> <span class="pre">int</span> <span class="pre">rate)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id884">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundbuffer-h">📄 soundbuffer.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id885">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id886">Klasa <code class="docutils literal notranslate"><span class="pre">SoundBuffer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id887">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id888">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id889">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id890">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundfile-cpp">📄 soundfile.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id891">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-soundfile">Klasa <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundfile-soundfile-const-filestreamptr-filestream"><code class="docutils literal notranslate"><span class="pre">SoundFile::SoundFile(const</span> <span class="pre">FileStreamPtr&amp;</span> <span class="pre">fileStream)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundfileptr-soundfile-loadsoundfile-const-std-string-filename"><code class="docutils literal notranslate"><span class="pre">SoundFilePtr</span> <span class="pre">SoundFile::loadSoundFile(const</span> <span class="pre">std::string&amp;</span> <span class="pre">filename)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id892">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id893">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#alenum-soundfile-getsampleformat"><code class="docutils literal notranslate"><span class="pre">ALenum</span> <span class="pre">SoundFile::getSampleFormat()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id894">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundchannel-cpp">📄 soundchannel.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id895">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-soundchannel">Klasa <code class="docutils literal notranslate"><span class="pre">SoundChannel</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundsourceptr-soundchannel-play"><code class="docutils literal notranslate"><span class="pre">SoundSourcePtr</span> <span class="pre">SoundChannel::play(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundchannel-stop-float-fadetime"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundChannel::stop(float</span> <span class="pre">fadetime)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundchannel-enqueue"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundChannel::enqueue(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundchannel-update"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundChannel::update()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundchannel-setenabled-bool-enable"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundChannel::setEnabled(bool</span> <span class="pre">enable)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundchannel-setgain-float-gain"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundChannel::setGain(float</span> <span class="pre">gain)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id896">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundchannel-h">📄 soundchannel.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id897">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id898">Klasa <code class="docutils literal notranslate"><span class="pre">SoundChannel</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id899">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id900">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id901">Metody chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id902">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id903">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundfile-h">📄 soundfile.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id904">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id905">Klasa <code class="docutils literal notranslate"><span class="pre">SoundFile</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id906">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id907">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id908">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id909">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundmanager-cpp">📄 soundmanager.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id910">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id911">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#g-sounds"><code class="docutils literal notranslate"><span class="pre">g_sounds</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-soundmanager">Klasa <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundmanager-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundmanager-terminate"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::terminate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundmanager-poll"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::poll()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundmanager-setaudioenabled-bool-enable"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::setAudioEnabled(bool</span> <span class="pre">enable)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundmanager-preload-std-string-filename"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::preload(std::string</span> <span class="pre">filename)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundsourceptr-soundmanager-play"><code class="docutils literal notranslate"><span class="pre">SoundSourcePtr</span> <span class="pre">SoundManager::play(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundchannelptr-soundmanager-getchannel-int-channel"><code class="docutils literal notranslate"><span class="pre">SoundChannelPtr</span> <span class="pre">SoundManager::getChannel(int</span> <span class="pre">channel)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundsourceptr-soundmanager-createsoundsource"><code class="docutils literal notranslate"><span class="pre">SoundSourcePtr</span> <span class="pre">SoundManager::createSoundSource(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundmanager-ensurecontext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundManager::ensureContext()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id912">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundmanager-h">📄 soundmanager.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id913">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id914">Klasa <code class="docutils literal notranslate"><span class="pre">SoundManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id915">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id916">Stałe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id917">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id918">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id919">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id920">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundsource-cpp">📄 soundsource.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id921">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-soundsource">Klasa <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundsource-soundsource"><code class="docutils literal notranslate"><span class="pre">SoundSource::SoundSource()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id922"><code class="docutils literal notranslate"><span class="pre">SoundSource::~SoundSource()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundsource-play"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundSource::play()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundsource-stop"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundSource::stop()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-soundsource-isbuffering"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">SoundSource::isBuffering()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id923">Metody <code class="docutils literal notranslate"><span class="pre">set...()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundsource-setfading"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundSource::setFading(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-soundsource-update"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">SoundSource::update()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id924">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#streamsoundsource-cpp">📄 streamsoundsource.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id925">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-streamsoundsource">Klasa <code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id926">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#streamsoundsource-streamsoundsource"><code class="docutils literal notranslate"><span class="pre">StreamSoundSource::StreamSoundSource()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-streamsoundsource-setsoundfile"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">StreamSoundSource::setSoundFile(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-streamsoundsource-play"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">StreamSoundSource::play()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-streamsoundsource-stop"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">StreamSoundSource::stop()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-streamsoundsource-update"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">StreamSoundSource::update()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-streamsoundsource-fillbufferandqueue-uint-buffer"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">StreamSoundSource::fillBufferAndQueue(uint</span> <span class="pre">buffer)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id927">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#streamsoundsource-h">📄 streamsoundsource.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id928">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id929">Klasa <code class="docutils literal notranslate"><span class="pre">StreamSoundSource</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id930">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id931">Stałe</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#typ-wyliczeniowy-downmix">Typ wyliczeniowy <code class="docutils literal notranslate"><span class="pre">DownMix</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id932">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id933">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id934">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#soundsource-h">📄 soundsource.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id935">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id936">Klasa <code class="docutils literal notranslate"><span class="pre">SoundSource</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id937">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#typ-wyliczeniowy-fadestate">Typ wyliczeniowy <code class="docutils literal notranslate"><span class="pre">FadeState</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id938">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id939">Metody chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id940">Zmienne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id941">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#any-h">📄 any.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id942">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-any">Klasa <code class="docutils literal notranslate"><span class="pre">any</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id943">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktury-wewnetrzne">Struktury wewnętrzne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id944">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcja-any-cast">Funkcja <code class="docutils literal notranslate"><span class="pre">any_cast</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id945">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#cast-h">📄 cast.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id946">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcje-cast">Funkcje <code class="docutils literal notranslate"><span class="pre">cast</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#template-typename-t-typename-r-bool-cast-const-t-in-r-out"><code class="docutils literal notranslate"><span class="pre">template&lt;typename</span> <span class="pre">T,</span> <span class="pre">typename</span> <span class="pre">R&gt;</span> <span class="pre">bool</span> <span class="pre">cast(const</span> <span class="pre">T&amp;</span> <span class="pre">in,</span> <span class="pre">R&amp;</span> <span class="pre">out)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#specjalizacje">Specjalizacje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-cast-exception">Klasa <code class="docutils literal notranslate"><span class="pre">cast_exception</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcje-safe-cast-i-unsafe-cast">Funkcje <code class="docutils literal notranslate"><span class="pre">safe_cast</span></code> i <code class="docutils literal notranslate"><span class="pre">unsafe_cast</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id947">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#demangle-cpp">📄 demangle.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id948">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcja-demangle-name">Funkcja <code class="docutils literal notranslate"><span class="pre">demangle_name</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#const-char-demangle-name-const-char-name"><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char*</span> <span class="pre">demangle_name(const</span> <span class="pre">char*</span> <span class="pre">name)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id949">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#implementacja">Implementacja</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id950">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#compiler-h">📄 compiler.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id951">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id952">Zawartość</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#build-compiler"><code class="docutils literal notranslate"><span class="pre">BUILD_COMPILER</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#sprawdzanie-wersji-kompilatora">Sprawdzanie wersji kompilatora</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#wylaczanie-ostrzezen-msvc">Wyłączanie ostrzeżeń (MSVC)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pretty-function"><code class="docutils literal notranslate"><span class="pre">__PRETTY_FUNCTION__</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#likely-x-i-unlikely-x"><code class="docutils literal notranslate"><span class="pre">likely(x)</span></code> i <code class="docutils literal notranslate"><span class="pre">unlikely(x)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#sprawdzanie-wsparcia-c-0x">Sprawdzanie wsparcia C++0x</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id953">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#demangle-h">📄 demangle.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id954">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#namespace-stdext">Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id955">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id956">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#boolean-h">📄 boolean.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id957">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-boolean">Klasa <code class="docutils literal notranslate"><span class="pre">boolean</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#template-bool-def"><code class="docutils literal notranslate"><span class="pre">template&lt;bool</span> <span class="pre">def&gt;</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id958">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#przyklad-uzycia">Przykład użycia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#operatory">Operatory</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id959">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dumper-h">📄 dumper.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id960">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id961">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dump"><code class="docutils literal notranslate"><span class="pre">dump</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id962">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id963">Przykład użycia</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id964">Implementacja</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id965">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamic-storage-h">📄 dynamic_storage.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id966">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-dynamic-storage">Klasa <code class="docutils literal notranslate"><span class="pre">dynamic_storage</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id967">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id968">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id969">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id970">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exception-h">📄 exception.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id971">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-exception">Klasa <code class="docutils literal notranslate"><span class="pre">exception</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id972">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id973">Metody</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcja-throw-exception">Funkcja <code class="docutils literal notranslate"><span class="pre">throw_exception</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id974">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fastrand-h">📄 fastrand.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id975">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcja-fastrand">Funkcja <code class="docutils literal notranslate"><span class="pre">fastrand</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#static-int-fastrand"><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">int</span> <span class="pre">fastrand()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id976">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id977">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id978">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#math-cpp">📄 math.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id979">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id980">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uint32-t-stdext-adler32"><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">stdext::adler32(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#long-stdext-random-range-long-min-long-max"><code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">stdext::random_range(long</span> <span class="pre">min,</span> <span class="pre">long</span> <span class="pre">max)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#float-stdext-random-range-float-min-float-max"><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">stdext::random_range(float</span> <span class="pre">min,</span> <span class="pre">float</span> <span class="pre">max)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#double-stdext-round-double-r"><code class="docutils literal notranslate"><span class="pre">double</span> <span class="pre">stdext::round(double</span> <span class="pre">r)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id981">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#math-h">📄 math.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id982">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id983">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id984">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#net-h">📄 net.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id985">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id986">Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id987">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id988">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#packed-any-h">📄 packed_any.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id989">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-packed-any">Klasa <code class="docutils literal notranslate"><span class="pre">packed_any</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id990">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#szablon-can-pack-in-any">Szablon <code class="docutils literal notranslate"><span class="pre">can_pack_in_any</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-i-pola">Metody i pola</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcja-packed-any-cast">Funkcja <code class="docutils literal notranslate"><span class="pre">packed_any_cast</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id991">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#shared-object-h">📄 shared_object.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id992">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-shared-object">Klasa <code class="docutils literal notranslate"><span class="pre">shared_object</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id993">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id994">Metody</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-shared-object-ptr">Klasa <code class="docutils literal notranslate"><span class="pre">shared_object_ptr</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id995">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-i-operatory">Metody i operatory</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id996">Funkcje pomocnicze</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id997">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#stdext-h">📄 stdext.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id998">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id999">Zawartość</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1000">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#packed-storage-h">📄 packed_storage.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1001">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-packed-storage">Klasa <code class="docutils literal notranslate"><span class="pre">packed_storage</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1002">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1003">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1004">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1005">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#thread-h">📄 thread.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1006">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1007">Zawartość</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1008">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#time-h">📄 time.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1009">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1010">Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1011">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-timer">Struktura <code class="docutils literal notranslate"><span class="pre">timer</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1012">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#traits-h">📄 traits.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1013">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1014">Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#szablony">Szablony</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1015">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#string-h">📄 string.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1016">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1017">Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1018">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1019">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#time-cpp">📄 time.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1020">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1021">Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#startup-time"><code class="docutils literal notranslate"><span class="pre">startup_time</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#implementacje-funkcji">Implementacje funkcji</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1022">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uri-h">📄 uri.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1023">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-parseduri">Struktura <code class="docutils literal notranslate"><span class="pre">ParsedURI</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcja-parseuri">Funkcja <code class="docutils literal notranslate"><span class="pre">parseURI</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#parseduri-parseuri-const-std-string-url"><code class="docutils literal notranslate"><span class="pre">ParsedURI</span> <span class="pre">parseURI(const</span> <span class="pre">std::string&amp;</span> <span class="pre">url)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1024">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#net-cpp">📄 net.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1025">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1026">Namespace <code class="docutils literal notranslate"><span class="pre">stdext</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-string-ip-to-string-uint32-ip"><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">ip_to_string(uint32</span> <span class="pre">ip)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uint32-string-to-ip-const-std-string-string"><code class="docutils literal notranslate"><span class="pre">uint32</span> <span class="pre">string_to_ip(const</span> <span class="pre">std::string&amp;</span> <span class="pre">string)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#std-vector-uint32-listsubnetaddresses-uint32-address-uint8-mask"><code class="docutils literal notranslate"><span class="pre">std::vector&lt;uint32&gt;</span> <span class="pre">listSubnetAddresses(uint32</span> <span class="pre">address,</span> <span class="pre">uint8</span> <span class="pre">mask)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1027">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uri-cpp">📄 uri.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1028">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1029">Funkcja <code class="docutils literal notranslate"><span class="pre">parseURI</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1030"><code class="docutils literal notranslate"><span class="pre">ParsedURI</span> <span class="pre">parseURI(const</span> <span class="pre">std::string&amp;</span> <span class="pre">url)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1031">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#types-h">📄 types.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1032">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1033">Definicje typów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1034">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#format-h">📄 format.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1035">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1036">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#stdext-print"><code class="docutils literal notranslate"><span class="pre">stdext::print(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#stdext-snprintf"><code class="docutils literal notranslate"><span class="pre">stdext::snprintf(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#stdext-format"><code class="docutils literal notranslate"><span class="pre">stdext::format(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1037">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#string-cpp">📄 string.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1038">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1039">Funkcje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1040">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1041">📄 declarations.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1042">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1043">Wczesne deklaracje</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1044">Definicje typów</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1045">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ui-h">📄 ui.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1046">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1047">Zawartość</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1048">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiboxlayout-cpp">📄 uiboxlayout.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1049">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uiboxlayout">Klasa <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiboxlayout-uiboxlayout-uiwidgetptr-parentwidget"><code class="docutils literal notranslate"><span class="pre">UIBoxLayout::UIBoxLayout(UIWidgetPtr</span> <span class="pre">parentWidget)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiboxlayout-applystyle-const-otmlnodeptr-stylenode"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIBoxLayout::applyStyle(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">styleNode)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#addwidget-i-removewidget"><code class="docutils literal notranslate"><span class="pre">addWidget</span></code> i <code class="docutils literal notranslate"><span class="pre">removeWidget</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1050">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiboxlayout-h">📄 uiboxlayout.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1051">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1052">Klasa <code class="docutils literal notranslate"><span class="pre">UIBoxLayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1053">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1054">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1055">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1056">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uigridlayout-cpp">📄 uigridlayout.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1057">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uigridlayout">Klasa <code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uigridlayout-uigridlayout"><code class="docutils literal notranslate"><span class="pre">UIGridLayout::UIGridLayout(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uigridlayout-applystyle"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIGridLayout::applyStyle(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-uigridlayout-internalupdate"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIGridLayout::internalUpdate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1058">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1059">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1060">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uigridlayout-h">📄 uigridlayout.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1061">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1062">Klasa <code class="docutils literal notranslate"><span class="pre">UIGridLayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1063">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1064">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1065">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1066">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uihorizontallayout-cpp">📄 uihorizontallayout.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1067">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uihorizontallayout">Klasa <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uihorizontallayout-applystyle"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIHorizontalLayout::applyStyle(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-uihorizontallayout-internalupdate"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIHorizontalLayout::internalUpdate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1068">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1069">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1070">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uihorizontallayout-h">📄 uihorizontallayout.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1071">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1072">Klasa <code class="docutils literal notranslate"><span class="pre">UIHorizontalLayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1073">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1074">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1075">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1076">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uilayout-cpp">📄 uilayout.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1077">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uilayout">Klasa <code class="docutils literal notranslate"><span class="pre">UILayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uilayout-update"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UILayout::update()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1078">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1079">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uilayout-updatelater"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UILayout::updateLater()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1080">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uilayout-h">📄 uilayout.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1081">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1082">Klasa <code class="docutils literal notranslate"><span class="pre">UILayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1083">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1084">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1085">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1086">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uimanager-h">📄 uimanager.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1087">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uimanager">Klasa <code class="docutils literal notranslate"><span class="pre">UIManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1088">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1089">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-chronione-wywolywane-przez-uiwidget">Metody chronione (wywoływane przez <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1090">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1091">Zmienne globalne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1092">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uitextedit-cpp">📄 uitextedit.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1093">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uitextedit">Klasa <code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uitextedit-uitextedit"><code class="docutils literal notranslate"><span class="pre">UITextEdit::UITextEdit()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uitextedit-drawself"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UITextEdit::drawSelf(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uitextedit-update-bool-focuscursor"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UITextEdit::update(bool</span> <span class="pre">focusCursor)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-edycji-tekstu">Metody edycji tekstu</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-uitextedit-gettextpos-point-pos"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">UITextEdit::getTextPos(Point</span> <span class="pre">pos)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#obsluga-zdarzen-on">Obsługa zdarzeń (<code class="docutils literal notranslate"><span class="pre">on...</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1094">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uimanager-cpp">📄 uimanager.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1095">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1096">Klasa <code class="docutils literal notranslate"><span class="pre">UIManager</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uimanager-init"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::init()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uimanager-render-fw-drawpane-drawpane"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::render(Fw::DrawPane</span> <span class="pre">drawPane)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uimanager-resize-const-size-size"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::resize(const</span> <span class="pre">Size&amp;</span> <span class="pre">size)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uimanager-inputevent-const-inputevent-event"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::inputEvent(const</span> <span class="pre">InputEvent&amp;</span> <span class="pre">event)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1097">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1098">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uimanager-update-widget"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::update...Widget(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-uimanager-importstyle"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIManager::importStyle(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiwidgetptr-uimanager-loadui-i-createwidgetfromotml"><code class="docutils literal notranslate"><span class="pre">UIWidgetPtr</span> <span class="pre">UIManager::loadUI(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">createWidgetFromOTML(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uimanager-onwidgetdestroy"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIManager::onWidgetDestroy(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1099">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uitextedit-h">📄 uitextedit.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1100">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1101">Klasa <code class="docutils literal notranslate"><span class="pre">UITextEdit</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1102">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1103">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#zarzadzanie-tekstem-i-kursorem">Zarządzanie tekstem i kursorem</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#konfiguracja">Konfiguracja</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#gettery">Gettery</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1104">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1105">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uitranslator-cpp">📄 uitranslator.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1106">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1107">Namespace <code class="docutils literal notranslate"><span class="pre">Fw</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fw-alignmentflag-fw-translatealignment-std-string-aligment"><code class="docutils literal notranslate"><span class="pre">Fw::AlignmentFlag</span> <span class="pre">Fw::translateAlignment(std::string</span> <span class="pre">aligment)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fw-anchoredge-fw-translateanchoredge-std-string-anchoredge"><code class="docutils literal notranslate"><span class="pre">Fw::AnchorEdge</span> <span class="pre">Fw::translateAnchorEdge(std::string</span> <span class="pre">anchorEdge)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fw-widgetstate-fw-translatestate-std-string-state"><code class="docutils literal notranslate"><span class="pre">Fw::WidgetState</span> <span class="pre">Fw::translateState(std::string</span> <span class="pre">state)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fw-autofocuspolicy-fw-translateautofocuspolicy-std-string-policy"><code class="docutils literal notranslate"><span class="pre">Fw::AutoFocusPolicy</span> <span class="pre">Fw::translateAutoFocusPolicy(std::string</span> <span class="pre">policy)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1108">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uitranslator-h">📄 uitranslator.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1109">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1110">Namespace <code class="docutils literal notranslate"><span class="pre">Fw</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#deklaracje-funkcji">Deklaracje funkcji</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1111">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiverticallayout-cpp">📄 uiverticallayout.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1112">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uiverticallayout">Klasa <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiverticallayout-applystyle"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIVerticalLayout::applyStyle(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-uiverticallayout-internalupdate"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIVerticalLayout::internalUpdate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1113">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1114">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1115">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiverticallayout-h">📄 uiverticallayout.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1116">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1117">Klasa <code class="docutils literal notranslate"><span class="pre">UIVerticalLayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1118">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1119">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1120">Zmienne chronione</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1121">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiwidget-cpp">📄 uiwidget.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1122">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uiwidget">Klasa <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiwidget-uiwidget"><code class="docutils literal notranslate"><span class="pre">UIWidget::UIWidget()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-draw"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::draw(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-addchild-insertchild-removechild"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::addChild(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">insertChild(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">removeChild(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-focuschild-focusnextchild-focuspreviouschild"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::focusChild(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">focusNextChild(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">focusPreviousChild(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-applystyle-const-otmlnodeptr-stylenode"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::applyStyle(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">styleNode)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-updatestate-fw-widgetstate-state"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::updateState(Fw::WidgetState</span> <span class="pre">state)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-updatestates"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::updateStates()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-updatestyle"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::updateStyle()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-on-i-propagateon">Metody <code class="docutils literal notranslate"><span class="pre">on...</span></code> i <code class="docutils literal notranslate"><span class="pre">propagateOn...</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1123">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiwidget-h">📄 uiwidget.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1124">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#struktura-edgegroup">Struktura <code class="docutils literal notranslate"><span class="pre">EdgeGroup</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1125">Klasa <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1126">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#podzial-interfejsu-w-pliku-h">Podział interfejsu (w pliku <code class="docutils literal notranslate"><span class="pre">.h</span></code>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#kluczowe-wlasciwosci">Kluczowe właściwości</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1127">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiwidgetimage-cpp">📄 uiwidgetimage.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1128">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uiwidget-czesc-implementacji">Klasa <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (część implementacji)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-initimage"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::initImage()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-parseimagestyle-const-otmlnodeptr-stylenode"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::parseImageStyle(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">styleNode)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-drawimage-const-rect-screencoords"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::drawImage(const</span> <span class="pre">Rect&amp;</span> <span class="pre">screenCoords)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1129">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1130">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-setqrcode"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setQRCode(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-setimagesource-const-std-string-source"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setImageSource(const</span> <span class="pre">std::string&amp;</span> <span class="pre">source)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-setimagesourcebase64"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setImageSourceBase64(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1131">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uianchorlayout-h">📄 uianchorlayout.h</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1132">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uianchor">Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchor</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1133">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uianchorgroup">Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchorGroup</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1134">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-uianchorlayout">Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1135">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1136">Metody publiczne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1137">Zmienne prywatne</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1138">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiwidgettext-cpp">📄 uiwidgettext.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1139">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1140">Klasa <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (część implementacji)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-inittext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::initText()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-updatetext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::updateText()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-parsetextstyle"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::parseTextStyle(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-drawtext-const-rect-screencoords"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::drawText(const</span> <span class="pre">Rect&amp;</span> <span class="pre">screenCoords)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-ontextchange-i-onfontchange"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::onTextChange(...)</span></code> i <code class="docutils literal notranslate"><span class="pre">onFontChange(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-settext-std-string-text"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setText(std::string</span> <span class="pre">text,</span> <span class="pre">...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-setcoloredtext"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setColoredText(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-setfont"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setFont(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1141">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiwidgetbasestyle-cpp">📄 uiwidgetbasestyle.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1142">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1143">Klasa <code class="docutils literal notranslate"><span class="pre">UIWidget</span></code> (część implementacji)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-initbasestyle"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::initBaseStyle()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-parsebasestyle-const-otmlnodeptr-stylenode"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::parseBaseStyle(const</span> <span class="pre">OTMLNodePtr&amp;</span> <span class="pre">styleNode)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-drawbackground-const-rect-screencoords"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::drawBackground(const</span> <span class="pre">Rect&amp;</span> <span class="pre">screenCoords)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-drawborder-const-rect-screencoords"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::drawBorder(const</span> <span class="pre">Rect&amp;</span> <span class="pre">screenCoords)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-drawicon-const-rect-screencoords"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::drawIcon(const</span> <span class="pre">Rect&amp;</span> <span class="pre">screenCoords)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uiwidget-seticon-const-std-string-iconfile"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIWidget::setIcon(const</span> <span class="pre">std::string&amp;</span> <span class="pre">iconFile)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1144">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uianchorlayout-cpp">📄 uianchorlayout.cpp</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1145">Opis ogólny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1146">Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchor</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#uiwidgetptr-uianchor-gethookedwidget"><code class="docutils literal notranslate"><span class="pre">UIWidgetPtr</span> <span class="pre">UIAnchor::getHookedWidget(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#int-uianchor-gethookedpoint"><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">UIAnchor::getHookedPoint(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1147">Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchorGroup</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uianchorgroup-addanchor"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIAnchorGroup::addAnchor(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1148">Klasa <code class="docutils literal notranslate"><span class="pre">UIAnchorLayout</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#void-uianchorlayout-addanchor"><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">UIAnchorLayout::addAnchor(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-uianchorlayout-updatewidget"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIAnchorLayout::updateWidget(...)</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1149">Opis semantyczny</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1150">Działanie</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bool-uianchorlayout-internalupdate"><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">UIAnchorLayout::internalUpdate()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id1151">Zależności i powiązania</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#meta-dokumenty">Meta-dokumenty</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#spis-tresci">📑 Spis treści</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#indeks-funkcji-metod">🔍 Indeks funkcji/metod</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#mapa-zaleznosci">🧭 Mapa zależności</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#architektura-systemu">🧱 Architektura systemu</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#warstwy">Warstwy</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#przeplyw-danych-i-interakcje">Przepływ danych i interakcje</a></li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>Ta strona</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/architektura/src_framework.md.txt"
            rel="nofollow">Pokaż źródło</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>